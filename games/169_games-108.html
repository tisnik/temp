<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Historie vývoje poèítaèových her (108. èást - herní konzole Sony PlayStation)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Historie vývoje poèítaèových her (108. èást - herní konzole Sony PlayStation)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V pøedchozích èástech seriálu o historii vývoje poèítaèových her i herního hardware jsme si popsali parametry herních konzolí Atari Jaguar a Sega Saturn. Je¹tì jsme se v¹ak nezabývali nejprodávanìj¹í herní konzolí páté generace. Jedná se o Sony PlayStation, její¾ základní parametry a vlastnosti si popí¹eme dnes.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Historie vývoje poèítaèových her (108. èást - herní konzole Sony PlayStation)</a></p>
<p><a href="#k02">2. Zpoèátku úspì¹ná spolupráce s&nbsp;firmou Nintendo</a></p>
<p><a href="#k03">3. Roztr¾ka mezi Nintendo a Sony &ndash; vznik herní konzole Sony PlayStation</a></p>
<p><a href="#k04">4. Základní parametry a moduly herní konzole Sony PlayStation</a></p>
<p><a href="#k05">5. Mikroprocesor R3000A</a></p>
<p><a href="#k06">6. Programátorský model mikroprocesoru R3000A</a></p>
<p><a href="#k07">7. Instrukèní soubor mikroprocesoru R3000A</a></p>
<p><a href="#k08">8. Grafický subsystém &ndash; základ úspìchu Sony PlayStation</a></p>
<p><a href="#k09">9. Vykreslovaná grafická primitiva</a></p>
<p><a href="#k10">10. Rozdíly mezi grafickými primitivy konzole Sega Saturn a Sony PlayStation</a></p>
<p><a href="#k11">11. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Historie vývoje poèítaèových her (108. èást - herní konzole Sony PlayStation)</h2>

<p>V&nbsp;dne¹ní èásti seriálu o historii vývoje poèítaèových her i herního
hardware si popí¹eme dal¹í konzoli páté generace. Jedná se o <i>Sony
PlayStation</i>, kterou pøi zpìtném pohledu mù¾eme pova¾ovat za nejúspì¹nìj¹í
konzoli své éry, dokonce se (alespoò prozatím) jedná o ètvrtou nejprodávanìj¹í
konzoli vùbec s&nbsp;poètem prodaných kusù pøekraèujících hodnotu sto milionù.
Pøipomeòme si krátce, ¾e éra herních konzolí páté generace zaèala v&nbsp;roce
1993, kdy se do prodeje dostaly hned tøi nové herní konzole. První 32bitovou
herní konzolí (navíc ji¾ vybavenou jednotkou CD-ROM) byla <i>Amiga CD32</i>;
v&nbsp;tém¾e roce se do prodeje dostala i ji¾ popsaná konzole <i>Atari
Jaguar</i> a koneènì si hráèi mohli poøídit tøetí konzoli se jménem <i>3DO
Interactive Multiplayer</i>. Tato herní konzole je zajímavá i zpùsobem její
výroby a prodeje &ndash; koncept tohoto zaøízení byl licencován, tak¾e se o
výrobu a prodej mohlo pokusit více spoleèností (co¾ se nakonec stalo). Tento
zpùsob výroby a prodeje herních konzolí se v¹ak neosvìdèil, nebo» v&nbsp;nìm
nebylo mo¾né konzoli prodávat pod skuteènými výrobními náklady, tak¾e se
jednalo o pomìrnì drahé zaøízení (samozøejmì v&nbsp;porovnání
s&nbsp;konkurencí).</p>

<p>Zatímco v&nbsp;roce 1993 zaèaly být prodávány tøi vý¹e zmínìné konzole,
které v¹ak nebyly po komerèní stránce pøíli¹ úspì¹né, bylo tomu o rok pozdìji
ji¾ zcela jinak. Tehdy toti¾ byla vydána herní konzole <i>Sega Saturn</i>
popsaná minule a pøedminule a pøedev¹ím pak (s&nbsp;týdenním zpo¾dìním oproti
<i>Saturnu</i>) slavná herní konzole <i>Sony PlayStation</i>. O rok pozdìji
byla vydána konzole <i>Nintendo 64</i>, je¾ v¹ak svojí popularitou ji¾ <i>Sony
PlayStation</i> nedokázala pøekonat, co¾ je ponìkud paradoxní, proto¾e právì
spoleènost <i>Nintendo</i> nasmìrovala firmu <i>Sony</i> na trh herních
konzolí. V&nbsp;pøípadì <i>Nintenda 64</i> je mo¾ná pozdní vstup na trh
pøekvapivý, ov¹em nesmíme zapomenout na to, ¾e Nintendo mìlo a dodnes má
pomìrnì ¹iroký profil výrobkù, kde (dodnes) hrají velký význam kapesní herní
konzole, tak¾e se pravdìpodobnì v&nbsp;pøípadì <i>N64</i> nejednalo o nejvìt¹í
prioritu.</p>

<p>Tabulka s&nbsp;odhadovanými poèty prodaných herních konzolí páté
generace:</p>

<table>
<tr><th>#</th><th>Konzole</th><th>Poèet kusù</th><th>Poznámka</th></tr>
<tr><td>1</td><td>PlayStation        </td><td>102 000 000</td><td>ètvrtá nejprodávanìj¹í konzole vùbec</td></tr>
<tr><td>2</td><td>Nintendo 64        </td><td> 33 000 000</td><td>na ètrnáctém místì (¾ebøíèek v¹ech konzolí)</td></tr>
<tr><td>3</td><td>Sega Saturn        </td><td>  9 400 000</td><td>&nbsp;</td></tr>
<tr><td>4</td><td>3DO                </td><td>  2 000 000</td><td>&nbsp;</td></tr>
<tr><td>5</td><td>Atari Jaguar       </td><td>    250 000</td><td>&nbsp;</td></tr>
<tr><td>6</td><td>Amiga CD32         </td><td>    100 000</td><td>&nbsp;</td></tr>
<tr><td>7</td><td>Apple Bandai Pippin</td><td>     45 000</td><td>(zmínìno v&nbsp;seznamu 25 nejhor¹ích technologických produktù)</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>8</td><td>Sega 32X</td><td>665 000</td><td>roz¹iøující modul pro Segu Mega Drive</td></tr>
</table>



<p><a name="k02"></a></p>
<h2 id="k02">2. Zpoèátku úspì¹ná spolupráce s&nbsp;firmou Nintendo</h2>

<p>O spoleènosti <i>Sony</i> jsme se v&nbsp;tomto seriálu prozatím nijak
podrobnìji nezmiòovali, proto¾e se jedná o firmu, která na trh herních konzolí
pøi¹la pozdìji ne¾ napøíklad spoleènosti <i>Atari</i>, <i>Nintendo</i> èi
<i>Sega</i>. To v¹ak neznamená, ¾e by <i>Sony</i> byla úplným nováèkem; dokonce
by se dalo øíci, ¾e je tomu pøesnì naopak, zejména s&nbsp;ohledem na to, jaký
podíl mìla <i>Sony</i> v&nbsp;odvìtví spotøební elektroniky (nesmíme zapomenout
ani na zku¹enosti získané vývojem domácích mikropoèítaèù øady <i>MSX</i>).
Ov¹em do oboru herních konzolí se <i>Sony</i> dostala nejprve nepøímo, a to
díky její know-how v&nbsp;oblasti optických pamìtí, konkrétnì CD-ROM. Firma
<i>Sony</i> toti¾ úspì¹nì spolupracovala se spoleèností <i>Philips</i> na
vývoji specifikace CD-ROM (specifikace se pozdìji stala dostupná pod názvem
Yellow Book a pochází z&nbsp;roku 1988), co¾ je roz¹íøení star¹ího audio
formátu CD DA (<i>Digital Audio</i>, u jeho¾ zrodu mimochodem takté¾ stála
Sony) tak, aby bylo mo¾né na kompaktní disky ukládat soubory. Zajímavé je, ¾e
spoleènì s&nbsp;akceptováním a roz¹íøením CD-ROM zanikly nìkteré konkurenèní
formáty, napøíklad dnes ji¾ zcela neznámý Thor-CD firmy Tandy.</p>

<p>Dal¹ím spoleèným projektem bylo roz¹íøení formátu CD-ROM takovým zpùsobem,
aby bylo mo¾né vzájemnì kombinovat (soubì¾nì èíst) datové soubory, zvuková data
i video. Toto roz¹íøení, které mìlo (alespoò podle plánù) hrát velkou úlohu
v&nbsp;nových multimediálních systémech, ve¹lo ve známost pod názvem <i>CD-ROM
XA (eXtended Architecture)</i>. Právì velké zku¹enosti v&nbsp;oboru optických
pamìtí vedly firmu <i>Nintendo</i> k&nbsp;tomu, aby se <i>Sony</i> navázala
spolupráci na návrhu konstrukce nové mechaniky (nazvané pracovnì
<i>SNES-CD</i>, posléze <i>Mega-CD</i>) pro své herní konzole, a to z&nbsp;toho
dùvodu, ¾e pùvodní systém Nintenda zalo¾ený na magnetických discích (Famicom
Disk System) byl poruchový a pøedev¹ím nebyl nijak chránìn proti kopírování,
co¾ je v&nbsp;oboru dotovaných herních konzolí, jejich¾ výrobní cena se zaplatí
a¾ spoleènì s&nbsp;nákupem nìkolika her, velká nevýhoda. Spolupráce ov¹em byla
navázána napøíklad i v&nbsp;návrhu èipù pro star¹í herní konzole
<i>Nintenda</i>, konkrétnì se jedná o èip <i>Sony SPC700</i> pou¾itý
v&nbsp;Super NESu.</p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Roztr¾ka mezi Nintendo a Sony &ndash; vznik herní konzole Sony PlayStation</h2>

<p>Z&nbsp;dne¹ního (zpìtného) pohledu velmi úspì¹ná spolupráce mezi firmami
<i>Nintendo</i> a <i>Sony</i> pokraèovala do takové míry, ¾e <i>Sony</i>
plánovala vydat pod svým logem konzoli kompatibilní se SNESem. Kompatibilita
mìla zaruèovat mo¾nost pou¾ití pùvodních pamì»ových modulù (cartridgí) ze SNESu
a souèasnì mìla tato konzole pracovat s&nbsp;kompaktními disky (CD), jejich¾
formát mìla naopak vyu¾ívat nová jednotka <i>SNES-CD</i>. Zmínìná herní konzole
firmy <i>Sony</i> nesla jméno <i>Play Station</i> (s&nbsp;mezerou mezi obìma
slovy). Ov¹em v&nbsp;roce 1991, kdy mìla být tato konzole oficiálnì pøedstavena
veøejnosti <i>Nintendo</i> spolupráci se <i>Sony</i> jednostrannì ukonèilo a
zaèalo na vývoji CD mechaniky spolupracovat s&nbsp;<i>Philipsem</i>. Toto
rozhodnutí bylo zpoèátku velmi negativnì vnímáno pøedev¹ím v&nbsp;Japonsku
(odkud obì firmy pochází, i kdy¾ se dnes jedná o mezinárodní korporace), kde se
dodr¾ovalo nepsané pravidlo, ¾e japonské firmy pro spolupráci v¾dy preferují
národního partnera pøed zahranièní konkurencí.</p>

<p>Tento &bdquo;prohøe¹ek&ldquo; sice spoleènost <i>Nintendo</i> nakonec bez
vìt¹ích problémù pøeèkala, ov¹em stalo se nìco jiného a &ndash; minimálnì
z&nbsp;pohledu <i>Nintenda</i> &ndash; i hor¹ího: <i>Sony</i> toti¾ pokraèovala
ve vývoji své herní konzole <i>Play Station</i>, která v¹ak ji¾ nemusela být se
SNESem v&nbsp;¾ádném ohledu kompatibilní a navíc mìla pøímo konkurovat jak
novému (tehdy je¹tì plánovanému, ale samozøejmì nevydanému) <i>Nintendu 64</i>,
tak i ostatním tehdy teprve vznikajícím konzolím páté generace. První, se
SNESem èásteènì kompatibilní verze konzole <i>Play Station</i> vznikla
v&nbsp;roce 1992. Vyrobeno bylo pøibli¾nì 200 kusù tìchto prototypù; ov¹em
potom byl tento prototyp zahozen a zaèalo se s&nbsp;návrhem zcela nové konzole,
ji¾ nezatí¾ené ¾ádnou snahou o zpìtnou kompatibilitu ani o podobný styl vývoje,
jako tomu bylo na star¹ích konzolích (tuto snahu mù¾eme vidìt jak u NESu/SNESu,
tak i u výrobkù spoleènosti Sega &ndash; viz napøíklad vlastnì ji¾
technologicky zcela pøekonaný a v&nbsp;praxi jen málo vyu¾ívaný modul pro FM
syntézu pou¾itý v&nbsp;<i>Sega Saturnu</i>).</p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Základní parametry a moduly herní konzole Sony PlayStation</h2>

<p>Návrhem zcela nové herní konzole <i>Sony PlayStation</i> (zde ji¾ bez mezery
v&nbsp;názvu) byl povìøen <i>Ken Kutaragi</i>, který se v&nbsp;minulosti
podílel napøíklad na návrhu zvukového èipu pro SNES. Výsledkem byla konzole
oficiálnì pøedstavená 3.12.1994, týden po vydání konkurenèní <i>Segy
Saturn</i>. Ken Kutaragi zvolil zcela odli¹ný design ne¾ spoleènost
<i>Atari</i> se svým <i>Jaguarem</i> èi firma <i>Sega</i> s&nbsp;konzolí
<i>Sega Saturn</i>. Z&nbsp;pøedchozích tøech dílù tohoto seriálu ji¾ víme, ¾e
jak <i>Atari Jaguar</i>, tak i <i>Sega Saturn</i> byly zalo¾eny na pou¾ití
RISCových procesorù, které musely spolupracovat s&nbsp;velkým mno¾stvím
podpùrných èipù, je¾ se staraly o vykreslování grafiky, generování zvukù a
hudby, øízení pøenosových kanálù, ètení stavu herních ovladaèù atd.
Programování tìchto herních konzolí bylo velmi slo¾ité a mnoho firem ani
nedokázalo v¹echny mo¾nosti nabízené konzolemi <i>Atari Jaguar</i> a <i>Sega
Saturn</i> vyu¾ít (ji¾ jen zaji¹tìní pøístupu více procesorù do spoleèné pamìti
se ukázalo být pro mnohé vývojáøe velkým problémem, co¾ ostatnì platí a¾ do
dne¹ní doby :-).</p>

<p>Naproti tomu byl Kutaragiho návrh herní konzole <i>Sony PlayStation</i>
velmi èistý a vlastnì i jednoduchý, co¾ se ostatnì projevilo i v&nbsp;tom, ¾e
pro <i>Sony PlayStation</i> byl vydán vývojový kit pou¾itelný na bì¾ných PC a
nikoli na specializovaném hardware. Prioritou se stala podpora trojrozmìrné
grafiky; ostatnì právì na <i>Sony PlayStation</i> je asi nejvíce viditelný
odklon od klasických 2D spritù k&nbsp;otexturovaným trojúhelníkùm (viz
&bdquo;blitter&ldquo; v&nbsp;Jaguaru, problematické ètyøúhelníkové sprity
v&nbsp;Saturnu atd.). <i>Sony PlayStation</i> je zalo¾ena na RISCovém
mikroprocesoru <i>R3000A</i> vybaveném navíc jednotkou pro výpoèty nad vektory
a maticemi (velmi èasto pou¾ívané operace v&nbsp;3D grafice). Mikroprocesor mìl
pøístup pouze do operaèní pamìti. Druhým dùle¾itým èipem byl grafický procesor
(<i>GPU &ndash; Graphics Processing Unit</i>), jen¾ mìl k&nbsp;dispozici
vlastní pamì» s&nbsp;framebufferem, texturami, barvovými paletami atd. Tato
pamì» nebyla pøímo pøístupná pro hlavní procesor, co¾ vedlo k&nbsp;dal¹ímu
zjednodu¹ení návrhu celé konzole.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Mikroprocesor R3000A</h2>

<p>Základním prvkem herní konzole <i>Sony PlayStation</i> je modifikovaná
varianta mikroprocesoru <i>R3000A</i>, jen¾ byl navr¾en ve firmì <i>MIPS
Computer Systems</i> a jeho¾ výrobu zajistila spoleènost <i>LSI Logic</i>.
Jednalo se o èip s&nbsp;architekturou RISC navazující na star¹í osvìdèený model
<i>R2000</i>, jen¾ byl vybavený klasickou &bdquo;RISCovou&ldquo; instrukèní
pipeline. Tento èip byl vybaven tøiceti dvìma pracovními registry
s&nbsp;32bitovou ¹íøkou a adresním rozsahem 2<sup>32</sup> bajtù. V&nbsp;Sony
PlayStation byl pou¾it hodinový signál o frekvenci 33,8688 MHz a reálná
výpoèetní rychlost dosahovala 30 MIPS (30 milionù instrukcí za sekundu).
Mikroprocesor byl kromì ALU, øadièe a sady registrù vybaven i instrukèní a
datovou vyrovnávací pamìtí. Instrukèní cache mìla kapacitu 4 kB a udávaný
úspìch ètení instrukce z&nbsp;cache (a nikoli z&nbsp;operaèní pamìti) byl 80%,
co¾ není na tak malou cache ¹patná hodnota. Datová cache mìlo kapacitu 1 kB,
odli¹nou strukturu a úspìch pøi ètení/zápisu takté¾ pøibli¾nì 80%.</p>

<p>Vlastní instrukèní sada mikroprocesorù <i>R3000</i> se vyznaèuje dvìma
zvlá¹tnostmi. První z&nbsp;nich je úplná absence registru pøíznakù
(<i>flags</i>), proto¾e konstruktéøi tohoto mikroprocesoru (zdá se, ¾e správnì)
usoudili, ¾e by pou¾ívání pøíznakù typu <i>zero</i>, <i>carry</i>,
<i>overflow</i> atd. mohlo vést ke vzniku konfliktù, kdy by na výsledek jedné
instrukce èekala instrukce dal¹í. Kvùli absenci pøíznakù jsou v&nbsp;instrukèní
sadì pouze dva podmínìné skoky <strong>beq</strong> (<i>branch on equal</i>) a
<strong>bne</strong> (<i>branch on not equal</i>), pøi nich¾ se skok
provede/neprovede na základì porovnání obsahu dvou pracovních registrù, jejich¾
indexy jsou pøímo souèástí instrukèního slova. Pov¹imnìte si, ¾e díky existenci
registru <strong>$zero</strong> (registru s&nbsp;konstantní nulou) se vlastnì
zadarmo instrukèní sada roz¹iøuje o pseudoinstrukce <strong>bz</strong>
(<i>branch on zero</i>) a <strong>bnz</strong> (<i>branch on non zero</i>).
Dále se pou¾ití pøíznakù nahradilo logickými instrukcemi <strong>slt</strong>
(<i>set on less than</i>) a <strong>slti</strong> (<i>set on less than
immediate</i>). Výsledkem je velmi jednoduchá a pøitom výkonná instrukèní sada
vhodná pro kód generovaný pøekladaèi (to ostatnì platí i pro dal¹í typy
instrukèních sad procesorù s&nbsp;architekturou RISC).</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Programátorský model mikroprocesoru R3000A</h2>

<p>Mikroprocesor <i>R3000A</i> pou¾ívající instrukèní sadu <i>MIPS</i> nabízel
programátorùm 32 základních pracovních registrù, z&nbsp;nich¾ ka¾dý mìl ¹íøku
tøiceti dvou bitù (u¾ jen tento fakt velmi výraznì dopomohl pøekladaèùm
v&nbsp;tvorbì rychlej¹ího kódu bez zbyteèných pøenosù dat/operandù mezi
operaèní pamìtí a mikroprocesorem). Navíc se pøi naèítání instrukcí
z&nbsp;operaèní pamìti pou¾íval èítaè instrukcí (<i>PC &ndash; Program
Counter</i>) o ¹íøce takté¾ tøiceti dvou bitù, jeho¾ obsah v¹ak nebyl
programátorùm pøímo pøístupný; mìnil se nepøímo operacemi skoku a volání
subrutiny. První z&nbsp;pracovních registrù, který byl oznaèovaný jménem
<strong>R0</strong> nebo té¾ pøezdívkou (<i>aliasem</i>)
<strong>$zero</strong>, mìl speciální význam, proto¾e obsahoval v¾dy nulovou
hodnotu, nezávisle na tom, jaká hodnota byla do registru zapisována (zápis v¹ak
nebyl zakázán, ov¹em nemìl ¾ádný viditelný efekt). Existence registru
obsahujícího nulovou konstantu umo¾nila zmen¹it celkový poèet instrukcí
v&nbsp;instrukèní sadì.</p>

<p>Dal¹ím tøiceti pracovním registrùm sice nebyla pøi konstrukci mikroprocesoru
pøiøazena ¾ádná urèitá funkce, ale vývojáøi operaèních systémù i pøekladaèù
vy¹¹ích programovacích jazykù zaèali nìkterým registrùm pøiøazovat zvlá¹tní
význam, èemu¾ takté¾ odpovídají aliasy pou¾ívané napøíklad v&nbsp;assemblerech
èi debuggerech. Poslední registr <strong>R31</strong> se pou¾íval pøi volání
subrutiny pro ulo¾ení návratové adresy. Kromì ji¾ zmínìných 32 pracovních
registrù byl <i>R3000A</i> vybaven i dvìma 32bitovými registry se speciálním
významem. Tyto registry se toti¾ pou¾ívaly pøi násobení a dìlení. Pokud byla
provádìna operace násobení, mohly se oba speciální registry pova¾ovat za
registrový pár obsahující 64bitový výsledek násobení. Pøi dìlení obsahoval
jeden z&nbsp;registrù výsledek této operace (podíl) a druhý registr pak zbytek
po dìlení. Mimochodem &ndash; operace násobení a dìlení byly jedinými
operacemi, které se neprovádìly v&nbsp;klasické RISCové pipeline, ale byl pro
nì vyhrazen zvlá¹tní modul, který vyu¾íval ostatní moduly mikroprocesoru.</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Instrukèní soubor mikroprocesoru R3000A</h2>

<p>V¹echny instrukce mikroprocesorù <i>R3000A</i> mìly konstantní ¹íøku tøicet
dva bitù, co¾ mj.&nbsp;takté¾ znamenalo, ¾e instrukce byly v&nbsp;operaèní
pamìti v¾dy zarovnány na násobek ètyø bajtù, tak¾e ka¾dá instrukce byla naètena
v&nbsp;jediném strojovém taktu. Podle zpùsobu rozdìlení bitových polí
v&nbsp;32bitovém instrukèním slovu se instrukce dìlily pouze do tøech kategorií
&ndash; <i>I-type (Immediate)</i>, <i>J-type (Jump)</i> a <i>R-Type
(register)</i>. U prvního typu instrukcí (<i>I-type</i>) je pøímo
v&nbsp;instrukèním slovu ulo¾ena ¹estnáctibitová konstanta chápaná podle
konkrétní instrukce buï jako ¹estnáctibitové slovo bez znaménka (0..65535) èi
¹estnáctibitové slovo se znaménkem (-32768..32767). Proto je zde pou¾ito
oznaèení <i>immediate</i> (pøímá hodnota). Ve zbývajících ¹estnácti bitech byl
ulo¾en ¹estibitový operaèní kód, pìtibitový index zdrojového registru a takté¾
pìtibitový index registru cílového:</p> 

<pre>
  I-Type (immediate)
  ------------------------------------------------------------
  | 31  26     | 25  21 | 20  16 | 15                      0 |
  ------------------------------------------------------------
  | opcode (6) | rs (5) | rt (5) | offset/konstanta (16)     |
  ------------------------------------------------------------
</pre>

<p>Formát instrukcí typu <i>J (Jump)</i> je je¹tì jednodu¹¹í ne¾ formát
pøedchozí, proto¾e za ¹estibitovým operaèním kódem následuje pouze 26 bitù
tvoøících adresu skoku (skuteèná adresa se získá vynásobením konstanty ètyømi,
resp.&nbsp;bitovým posuvem o dva bity doleva):</p>

<pre>
  J-Type (jump)
  ------------------------------------------------------------
  | 31  26     | 25                                        0 |
  ------------------------------------------------------------
  | opcode (6) | adresa (26)                                 |
  ------------------------------------------------------------
</pre>

<p>Poslední instrukèní formát je vyu¾íván u vìt¹iny aritmetických a logických
instrukcí, které pou¾ívají takzvaný tøíadresový kód, tj.&nbsp;instrukce je
provedena se dvìma operandy (zdrojovými registry) a do tøetího registru je
ulo¾en výsledek operace. Kromì operaèního kódu jsou v&nbsp;instrukèním slovu
ulo¾eny pìtibitové indexy obou zdrojových registrù (<i>rs, rt</i>) i registru
cílového (<i>rd</i>), ¹estibitový kód operace a takté¾ pìtibitová hodnota
posunu (<i>shift</i>) pou¾itá u bitových posunù a rotací (i to je zajímavé
&ndash; posuny a rotace bylo mo¾né provádìt &bdquo;zadarmo&ldquo;):</p>

<pre>
  R-Type (register)
  ------------------------------------------------------------
  | 31  26     | 25  21 | 20  16 | 15  11 | 10  6 | 5      0 |
  ------------------------------------------------------------
  | opcode (6) | rs (5) | rt (5) | rd (5) | shift | operace  |
  ------------------------------------------------------------
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. Grafický subsystém &ndash; základ úspìchu Sony PlayStation</h2>

<p>Kromì mikroprocesoru byl dal¹ím dùle¾itým prvkem herní konzole <i>Sony
PlayStation</i> její grafický procesor, neboli <i>GPU (Graphics Processing
Unit)</i>, jen¾ byl nepøímo doplnìn modulem <i>GTE (Geometry Transformation
Engine)</i> umístìným na stejném èipu jako hlavní mikroprocesor. Grafický
procesor byl sice øízen pøíkazy posílanými z&nbsp;CPU èi pøená¹enými pøes DMA
kanál z&nbsp;operaèní pamìti, nicménì se jednalo o samostatnì pracující èip,
který mìl navíc k&nbsp;dispozici vlastní framebuffer o kapacitì jednoho
megabajtu. K&nbsp;tomuto framebufferu nemìl mikroprocesor pøímý pøístup, tak¾e
nebylo zapotøebí øe¹it kolize pøi soubì¾ném pøístupu, zastavovat GPU pøi zápisu
dat jiným modulem atd. Kromì externího framebufferu je¹tì grafický procesor
obsahoval vyrovnávací pamì» o kapacitì dvou kilobajtù, která byla pou¾ita pro
ulo¾ení èástí textur (pøesný význam tohoto modulu si vysvìtlíme pøí¹tì).</p>

<p>Framebuffer pøedstavoval z&nbsp;hlediska programátora virtuální obrazovku
s&nbsp;rozli¹ením 1024&times;512 pixelù s&nbsp;bitovou hloubkou 16bpp. Ve
skuteènosti se ov¹em v&nbsp;mnoha operacích, napøíklad pøi vlastním zobrazení
snímku, pou¾íval jiný formát, pøedev¹ím s&nbsp;bitovou hloubkou 15bpp (nejvy¹¹í
¹estnáctý bit mìl význam masky èi pøíznaku poloprùhlednosti, v&nbsp;závislosti
na nastaveném re¾imu) a 24bpp (zde byly tøi pixely ve framebufferu rovny dvìma
zobrazeným pixelùm). Samotné &ndash; ponìkud matoucí &ndash; rozli¹ení
virtuální obrazovky tak mìlo význam pøedev¹ím pøi zadávání souøadnic pro
vykreslování grafických primitiv a/nebo pøi blokovém ètení èi zápisu obrazových
dat.</p>

<p>Fyzické rozli¹ení obrazu na televizoru bylo mnohem men¹í ne¾ rozli¹ení
virtuální obrazovky. Podle nastavení provedené programátorem bylo fyzické
horizontální rozli¹ení rovno 256, 320, 384, 512 èi 640 pixelùm a vertikální
rozli¹ení pak 240 èi 480 pixelùm (ne v¹echny kombinace se v¹ak reálnì
pou¾ívaly). Dále se pøi nastavení grafického re¾imu nastavovalo nìkolik
pøíznakù, pøedev¹ím: pøepnutí mezi normou PAL a NTSC, pøepnutí mezi bitovou
hloubkou 15bpp a 24bpp a pøepínaè prokládaného a neprokládaného re¾imu
(<i>interlaced/non-interlaced</i>).</p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Vykreslovaná grafická primitiva</h2>

<p>Èinnost grafického procesoru byla øízena buï pøímo hlavním mikroprocesorem
nebo bylo mo¾né pøíkazy pøená¹et poloautomaticky s&nbsp;vyu¾itím DMA kanálu.
GPU dostával a následnì zpracovával takzvané pakety s&nbsp;grafickými pøíkazy.
Ty byly uspoøádány do lineárního vázaného seznamu, co¾ znamená, ¾e pøíkazy ¹ly
snadno modifikovat, napøíklad pøidat dal¹í pøíkaz doprostøed seznamu atd. bez
nutnosti pøerovnávat data v&nbsp;pamìti. Grafický procesor konzole <i>Sony
PlayStation</i> dokázal vykreslit nìkolik typù grafických primitiv, které jsou
vypsány v&nbsp;tabulce zobrazené pod tímto odstavcem:</p>

<table>
<tr><th>#</th><th>Typ</th><th>Geometrie zadána</th><th>Popis grafického primitiva</th></tr>
<tr><td>1</td><td>bod     </td><td>1 vrchol        </td><td>vykreslení jednoho pixelu</td></tr>
<tr><td>2</td><td>úseèka  </td><td>2 vrcholy       </td><td>vykreslení úseèky, mo¾nost jednorozmìrného Gouraudova stínování</td></tr>
<tr><td>3</td><td>obdélník</td><td>1 vrchol+rozmìry</td><td>zobrazen rychleji ne¾ obecný ètyøúhelník</td></tr>
<tr><td>4</td><td>sprite</td><td>1 vrchol+rozmìry</td><td>obdélník s texturou, rychlej¹í ne¾ obecný otexturovaný ètyøúhelník</td></tr>
<tr><td>5</td><td>polygon</td><td>3 nebo 4 vrcholy</td><td>ètyøúhelník je internì rozdìlen na dva trojúhelníky</td></tr>
<tr><td>6</td><td>otexturovaný polygon</td><td>3 nebo 4 vrcholy</td><td>opìt dochází k&nbsp;rozdìlení na dva trojúhelníky</td></tr>
</table>

<p>Sprity mohly mít buï (témìø) libovolnou velikost, nebo bylo mo¾né vyu¾ít
speciální formát pro sprity o rozmìrech 8&times;8 a 16&times;16 pixelù, které
se vykreslovaly rychleji.</p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Rozdíly mezi grafickými primitivy konzole Sega Saturn a Sony PlayStation</h2>

<p>Na tabulce uvedené <a href="#k09">v&nbsp;pøedchozí kapitole</a> sice mù¾eme
vidìt urèitou (na první pohled mo¾ná i nápadnou) souvislost s&nbsp;grafickými
primitivy zobrazovanými konkurenèní herní konzolí <i>Sega Saturn</i>, ov¹em ve
skuteènosti jsou mo¾nosti PlayStation v&nbsp;tomto ohledu mnohem vìt¹í, a to
z&nbsp;toho dùvodu, ¾e se pøi vykreslování otexturovaných polygonù mohly
specifikovat souøadnice v&nbsp;prostoru textury (takzvané <i>u-v</i>
souøadnice), co¾ mj.&nbsp;znamenalo, ¾e jedna textura mohla být snadno
vyu¾itelná více polygony, které na sebe mohly plynule navazovat apod. Naproti
tomu èip VDP1 v&nbsp;konzoli Sega Saturn sice dokázal takté¾ vykreslovat
ètyøúhelníky, ov¹em tam se jednalo o zobecnìné sprity, které byly v¾dy pokryty
celým rastrovým obrázkem (texturou) bez mo¾nosti zadávat <i>u-v</i> souøadnice
(to se muselo øe¹it rùznými triky).</p>

<p>Grafický subsystém <i>Sony PlayStation</i> má i dal¹í zajímavé vlastnosti,
napøíklad podporu poloprùhlednosti. Podrobnosti si popí¹eme v&nbsp;navazující
èásti tohoto seriálu.</p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Odkazy na Internetu</h2>

<ol>

<li>MIPS Architecture Overview<br />
<a href="http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html">http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html</a>
</li>

<li>MIPS Technologies R3000<br />
<a href="http://www.cpu-world.com/CPUs/R3000/">http://www.cpu-world.com/CPUs/R3000/</a>
</li>

<li>Sony PlayStation (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/PlayStation_(console)">http://en.wikipedia.org/wiki/PlayStation_(console)</a>
</li>

<li>The Official PlayStation muzeum<br />
<a href="http://playstationmuseum.com/playstation-systems/">http://playstationmuseum.com/playstation-systems/</a>
</li>

<li>CPU-collection: IDT R3010 FPU<br />
<a href="http://www.cpu-collection.de/?tn=0&l0=co&l1=IDT&l2=R3010+FPU">http://www.cpu-collection.de/?tn=0&amp;l0=co&amp;l1=IDT&amp;l2=R3010+FPU</a>
</li>

<li>The MIPS R2000 Instruction Set<br />
<a href="http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf">http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf</a>
</li>

<li>Maska mikroprocesoru RISC 1<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg</a>
</li>

<li>Maska mikroprocesoru RISC 2<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg</a>
</li>

<li>The MIPS Register Usage Conventions<br />
<a href="http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html">http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html</a>
</li>

<li>C.E. Sequin and D.A.Patterson: Design and Implementation of RISC I<br />
<a href="http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf">http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf</a>
</li>

<li>Berkeley RISC<br />
<a href="http://en.wikipedia.org/wiki/Berkeley_RISC">http://en.wikipedia.org/wiki/Berkeley_RISC</a>
</li>

<li>Great moments in microprocessor history<br />
<a href="http://www.ibm.com/developerworks/library/pa-microhist.html">http://www.ibm.com/developerworks/library/pa-microhist.html</a>
</li>

<li>Great Microprocessors of the Past and Present<br />
<a href="http://www.cpushack.com/CPU/cpu1.html">http://www.cpushack.com/CPU/cpu1.html</a>
</li>

<li>Sega documentation<br />
<a
href="http://koti.kapsi.fi/~antime/sega/docs.html">http://koti.kapsi.fi/~antime/sega/docs.html</a>
</li>

<li>1995 Programming on the Sega Saturn<br />
<a
href="http://cowboyprogramming.com/2010/06/03/1995-programming-on-the-sega-saturn/">http://cowboyprogramming.com/2010/06/03/1995-programming-on-the-sega-saturn/</a>
</li>

<li>Sega Myths-Saturn was the most difficult console to program for of 5th Gen<br />
<a href="http://forums.sega.com/showthread.php?313485-Sega-Myths-Saturn-was-the-most-difficult-console-to-program-for-of-5th-Gen">http://forums.sega.com/showthread.php?313485-Sega-Myths-Saturn-was-the-most-difficult-console-to-program-for-of-5th-Gen</a>
</li>

<li>SuperH RISC engine Family<br />
<a href="http://www.renesas.com/products/mpumcu/superh/index.jsp">http://www.renesas.com/products/mpumcu/superh/index.jsp</a>
</li>

<li>Sega Saturn<br />
<a href="http://en.wikipedia.org/wiki/Sega_saturn">http://en.wikipedia.org/wiki/Sega_saturn</a>
</li>

<li>Jaguar Sector - II<br />
<a href="http://www.jaguarsector.com/index.php">http://www.jaguarsector.com/index.php</a>
</li>

<li>Atari Age: Atari Jaguar History<br />
<a href="http://www.atariage.com/Jaguar/history.html">http://www.atariage.com/Jaguar/history.html</a>
</li>

<li>Jaguar<br />
<a href="http://www.giantbomb.com/jaguar/3045-28/">http://www.giantbomb.com/jaguar/3045-28/</a>
</li>

<li>Consoles that won't die: The Atari Jaguar<br />
<a href="http://venturebeat.com/2013/04/25/consoles-that-wont-die-atari-jaguar/">http://venturebeat.com/2013/04/25/consoles-that-wont-die-atari-jaguar/</a>
</li>

<li>Atari Jaguar and Atari Jaguar CD<br />
<a href="http://videogamecritic.com/jaguarinfo.htm">http://videogamecritic.com/jaguarinfo.htm</a>
</li>

<li>Atari Jaguar Documentation (Forum)<br />
<a href="http://www.jaguarsector.com/index.php?showforum=65">http://www.jaguarsector.com/index.php?showforum=65</a>
</li>

<li>Atari Jaguar Programming (Forum)<br />
<a href="http://www.jaguarsector.com/index.php?showforum=63">http://www.jaguarsector.com/index.php?showforum=63</a>
</li>

<li>The Jaguar Underground Documentation<br />
<a href="http://justclaws.atari.org/devcats/dox/dox.htm">http://justclaws.atari.org/devcats/dox/dox.htm</a>
</li>

<li>Blitter (Wikipedia CZ)<br />
<a href="http://cs.wikipedia.org/wiki/Blitter">http://cs.wikipedia.org/wiki/Blitter</a>
</li>

<li>Blitter (Wikipedia EN)<br />
<a href="http://en.wikipedia.org/wiki/Blitter">http://en.wikipedia.org/wiki/Blitter</a>
</li>

<li>Bit blit<br />
<a href="http://en.wikipedia.org/wiki/Bit_blit">http://en.wikipedia.org/wiki/Bit_blit</a>
</li>

<li>Disassembler for the portable Jaguar DSP emulator (zdrojový kód s&nbsp;instrukcemi)<br />
<a href="http://mamedev.org/source/src/emu/cpu/jaguar/jagdasm.c.html">http://mamedev.org/source/src/emu/cpu/jaguar/jagdasm.c.html</a>
</li>

<li>Fourth-Generation Consoles<br />
<a href="http://gaming.wikia.com/wiki/Fourth-Generation_Consoles">http://gaming.wikia.com/wiki/Fourth-Generation_Consoles</a>
</li>

<li>Fifth-Generation Consoles<br />
<a href="http://gaming.wikia.com/wiki/Fifth-Generation_Consoles">http://gaming.wikia.com/wiki/Fifth-Generation_Consoles</a>
</li>

<li>History of video game consoles (fifth generation)<br />
<a href="http://en.wikipedia.org/wiki/History_of_video_game_consoles_(fifth_generation)">http://en.wikipedia.org/wiki/History_of_video_game_consoles_(fifth_generation)</a>
</li>

<li>Atari Jaguar<br />
<a href="http://gaming.wikia.com/wiki/Atari_Jaguar">http://gaming.wikia.com/wiki/Atari_Jaguar</a>
</li>

<li>Atari Jaguar Games<br />
<a href="http://gaming.wikia.com/wiki/List_of_Atari_Jaguar_games">http://gaming.wikia.com/wiki/List_of_Atari_Jaguar_games</a>
</li>

<li>MyMedia Games Network Retrospective - Nintendo Super FX chip<br />
<a href="http://psp.mmgn.com/News/MyMedia-Games-Network-Retrospe-G6W">http://psp.mmgn.com/News/MyMedia-Games-Network-Retrospe-G6W</a>
</li>

<li>Wikipedia: Super FX<br />
<a href="http://en.wikipedia.org/wiki/Super_FX">http://en.wikipedia.org/wiki/Super_FX</a>
</li>

<li>IGN: Top 25 Consoles<br />
<a href="http://www.ign.com/top-25-consoles/13.html">http://www.ign.com/top-25-consoles/13.html</a>
</li>

<li>Sega Mega Drive<br />
<a href="http://sega.jp/archive/segahard/md/">http://sega.jp/archive/segahard/md/</a>
</li>

<li>The16bit Era Of Console Video Games<br />
<a href="http://tvtropes.org/pmwiki/pmwiki.php/Main/The16bitEraOfConsoleVideoGames">http://tvtropes.org/pmwiki/pmwiki.php/Main/The16bitEraOfConsoleVideoGames</a>
</li>

<li>The Console Wars<br />
<a href="http://www.cracked.com/funny-2590-the-console-wars/">http://www.cracked.com/funny-2590-the-console-wars/</a>
</li>

<li>Console Wars<br />
<a href="http://tvtropes.org/pmwiki/pmwiki.php/Main/ConsoleWars">http://tvtropes.org/pmwiki/pmwiki.php/Main/ConsoleWars</a>
</li>

<li>Era of the "Bit Wars"<br />
<a href="http://www.gtplanet.net/forum/threads/era-of-the-bit-wars.119796/">http://www.gtplanet.net/forum/threads/era-of-the-bit-wars.119796/</a>
</li>

<li>Rez Wars: How the Bit Wars never really ended<br />
<a href="http://www.ign.com/blogs/beastmastertoad/2013/01/31/rez-wars-how-the-bit-wars-never-really-ended">http://www.ign.com/blogs/beastmastertoad/2013/01/31/rez-wars-how-the-bit-wars-never-really-ended</a>
</li>

<li>Which system ended the "Bit Wars"?<br />
<a href="http://atariage.com/forums/topic/199163-which-system-ended-the-bit-wars/">http://atariage.com/forums/topic/199163-which-system-ended-the-bit-wars/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2013</small></p>
</body>
</html>

