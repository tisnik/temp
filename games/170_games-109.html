<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Historie vývoje poèítaèových her (109. èást - herní konzole Sony PlayStation: dokonèení)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Historie vývoje poèítaèových her (109. èást - herní konzole Sony PlayStation: dokonèení)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o historii vývoje poèítaèových her i herního hardware dokonèíme popis základních parametrù a vlastností dnes ji¾ legendární herní konzole Sony PlayStation. Nejprve se zmíníme o speciálních efektech nabízených grafickým subsystémem a posléze si popí¹eme zvukový subsystém i dal¹í vlastnosti PSX.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Historie vývoje poèítaèových her (109. èást - herní konzole Sony PlayStation: dokonèení)</a></p>
<p><a href="#k02">2. Dal¹í dùle¾ité parametry grafického subsystému herní konzole Sony PlayStation</a></p>
<p><a href="#k03">3. Pøíkazy pro vykreslování a pro konfiguraci grafické pipeline</a></p>
<p><a href="#k04">4. Re¾imy vykreslování</a></p>
<p><a href="#k05">5. Textury a texturovací jednotka</a></p>
<p><a href="#k06">6. Èip MDEC</a></p>
<p><a href="#k07">7. Geometry Transformation Engine</a></p>
<p><a href="#k08">8. Zvukový subsystém herní konzole Sony PlayStation</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Historie vývoje poèítaèových her (109. èást - herní konzole Sony PlayStation: dokonèení)</h2>

<p>V&nbsp;dne¹ní èásti seriálu o historii vývoje her i herního hardware
dokonèíme popis základních technických parametrù dnes ji¾ témìø legendární
herní konzole <i>Sony PlayStation</i>. V&nbsp;úvodních kapitolách pøímo
navá¾eme na pøedchozí díl, v&nbsp;jeho¾ závìru byla popsána struktura
<i>framebufferu</i> a takté¾ v¹echny typy grafických primitiv (geometrických
tvarù a <i>spritù</i>), jejich¾ vykreslování bylo podporováno pøímo
v&nbsp;renderovací jednotce (souèást <i>GPU</i>). Popí¹eme si pøedev¹ím rùzné
re¾imy vykreslování, díky nim¾ bylo umo¾nìno napøíklad simulovat mlhu,
poloprùhledné objekty atd. Posléze si alespoò ve struènosti popí¹eme takzvaný
<i>GTE</i> (<i>Geometry Transformation Engine</i>), zvukový subsystém a takté¾
jednotku CD-ROM, proto¾e právì dobrá podpora této technologie znamenala pro
<i>Sony PlayStation</i> velkou konkurenèní výhodu v&nbsp;porovnání
s&nbsp;nìkterými jinými herními konzolemi páté generace, které vyu¾ívaly
pøedev¹ím pamì»ové moduly (typickým pøíkladem je <i>Nintendo 64</i>, jeho¾
podrobnìj¹ím popisem se budeme zabývat pøí¹tì).</p>

<p>Minule jsme si mj.&nbsp;øekli, ¾e herní konzole <i>Sony PlayStation</i> je
zalo¾ena na nìkolika èipech vykonávajících ve¹kerou práci pøi vykreslování
dvourozmìrného èi tøírozmìrného herního svìta i pøi práci se zvukem a hudbou.
Základním èipem je samozøejmì vlastní hlavní mikroprocesor s&nbsp;architekturou
RISC (odvozený od èipu <i>R3000A</i>), kterému pøi práci sekundoval grafický
procesor, neboli <i>GPU (Graphics Processing Unit)</i>, jen¾ provádìl
vykreslování do <i>framebufferu</i> o kapacitì jednoho megabajtu. Hlavní
mikroprocesor sice neobsahoval klasický <i>FPU</i> (jednotku pro práci
s&nbsp;hodnotami s&nbsp;plovoucí øádovou èárkou), ov¹em namísto toho obsahoval
pro herní konzoli mnohem praktiètìj¹í modul nazvaný <i>GTE (Geometry
Transformation Engine)</i>, jen¾ se pou¾íval &ndash; jak ji¾ ostatnì jeho název
napovídá &ndash; k&nbsp;výpoètùm s&nbsp;vektory a maticemi, co¾ jsou operace
pou¾ívané (nejenom) v&nbsp;3D grafice. Dnes je tato jednotka souèástí ka¾dého
moderního grafického akcelerátoru.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Dal¹í dùle¾ité parametry grafického subsystému herní konzole Sony PlayStation</h2>

<p>Èinnost <i>GPU (Graphics Processing Unit)</i> v&nbsp;herní konzoli <i>Sony
PlayStation</i> lze zjednodu¹enì popsat následujícím zpùsobem: <i>GPU</i>
postupnì naèítá <a href="#k03">vykreslovací a nastavovací pøíkazy</a> ulo¾ené
do lineárnì vázaného seznamu a ka¾dý pøíkaz postupnì provádí (v&nbsp;poøadí
odpovídajícímu poøadí naèítání pøíkazù). Pokud se naète vykreslovací pøíkaz,
provede se rasterizace pøíslu¹ného grafického primitiva (bod, úseèka, obdélník,
otexturovaný obdélník, sprite, ...) v&nbsp;rasterizaèní jednotce <i>GPU</i>.
Rasterizace spoèívá ve vyplnìní v¹ech pixelù tvoøících obraz grafického
primitiva.</p>

<p>Pøi vykreslování se pøitom na základì <a href="#k04">aktuálnì nastaveného
re¾imu</a> mù¾e provádìt vyplòování obrazu grafického primitiva konstantní
barvou (<i>flat shading</i>), interpolace barev vrcholù (<i>Gouraudovo
stínování</i>), <a href="#k05">texturování</a> (vyplòování rastrovým vzorkem),
maskování pixelù na základì nejvy¹¹ího bitu, tzv. <i>m-bitu</i> ulo¾eného ve
framebufferu a koneènì pak ponìkud zjednodu¹ený, ale v&nbsp;praxi mnohdy zcela
dostaèující výpoèet prùhlednosti spoèívající v&nbsp;kombinaci pùvodní barvy
pixelu (barva pozadí èi barva ji¾ vykresleného objektu) s&nbsp;novì
vykreslovaným pixelem (nový objekt je pøekreslovaný pøes objekt starý).</p>

<p>V&nbsp;pøípadì pou¾ití texturování, tj.&nbsp;pøi vykreslování spritù èi
otexturovaných obdélníkù, se <i>texely</i> (pixely ulo¾ené v&nbsp;rastrové
textuøe) naèítaly pøímo z&nbsp;framebufferu. Nesmíme ov¹em zapomenout ani na
èip nazvaný <i>MDEC</i>, neboli plným názvem <i>Motion Decoder</i>. Tento èip
umo¾òoval urychlit dekódování (resp.&nbsp;ponìkud nepøesnì øeèeno dekompresi)
rastrových obrázkù ulo¾ených dle normy <i>JPEG</i>, èeho¾ bylo mo¾né vyu¾ít
napøíklad pøi zobrazování videa ulo¾eného ve formátu <i>MJPEG (Motion
JPEG)</i>. Podrobnosti o tomto zajímavém èipu, který umo¾nil je¹tì ve vìt¹í
míøe vyu¾ít v¹ech kladných vlastností mechaniky CD-ROM, kterou byla konzole
<i>Sony PlayStation</i> vybavena, si uvedeme <a href="#k06">v&nbsp;¹esté
kapitole</a>.</p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Pøíkazy pro vykreslování a pro konfiguraci grafické pipeline</h2>

<p>V&nbsp;pøedchozí èásti tohoto seriálu jsme se zmínili o nìkolika typech
grafických primitiv, jejich¾ vykreslování je podporováno pøímo
v&nbsp;hardwarové renderovací jednotce herní konzole <i>Sony PlayStation</i>.
Jedná se jak o rùzné jednoduché geometrické objekty (bod, úseèka, obdélník,
polygon), tak i o sprity, jejich¾ vykreslování bylo rychlej¹í, ne¾
v&nbsp;pøípadì pou¾ití obecných otexturovaných obdélníkù:</p>

<table>
<tr><th>#</th><th>Typ</th><th>Geometrie zadána</th><th>Popis grafického primitiva</th></tr>
<tr><td>1</td><td>bod     </td><td>1 vrchol</td><td>vykreslení jednoho pixelu zadanou barvou</td></tr>
<tr><td>2</td><td>úseèka  </td><td>2 vrcholy</td><td>vykreslení úseèky, mo¾nost jednorozmìrného Gouraudova stínování</td></tr>
<tr><td>3</td><td>polyèára</td><td>n vrcholù</td><td>vykreslení sekvence úseèek, mo¾nost jednorozmìrného Gouraudova stínování</td></tr>
<tr><td>4</td><td>obdélník</td><td>1 vrchol+rozmìry</td><td>zobrazen rychleji ne¾ obecný ètyøúhelník</td></tr>
<tr><td>5</td><td>sprite</td><td>1 vrchol+rozmìry</td><td>obdélník s texturou, rychlej¹í ne¾ obecný otexturovaný ètyøúhelník</td></tr>
<tr><td>6</td><td>polygon</td><td>3 nebo 4 vrcholy</td><td>ètyøúhelník je internì rozdìlen na dva trojúhelníky</td></tr>
<tr><td>7</td><td>otexturovaný polygon</td><td>3 nebo 4 vrcholy</td><td>opìt dochází k&nbsp;rozdìlení na dva trojúhelníky</td></tr>
</table>

<p>Podle konkrétního typu grafického primitiva rozpoznávala jednotka <i>GPU</i>
následující vykreslovací pøíkazy:</p>

<table>
<tr><th>#</th><th>Kód</th><th>Délka paketu</th><th>Typ primitiva</th></tr>
<tr><td> 1</td><td>0x20</td><td> 4 bajty</td><td>jednobarevný polygon zadaný tøemi vrcholy</td></tr>
<tr><td> 2</td><td>0x24</td><td> 7 bajtù</td><td>otexturovaný polygon zadaný tøemi vrcholy</td></tr>
<tr><td> 3</td><td>0x28</td><td> 5 bajtù</td><td>jednobarevný polygon zadaný ètyømi vrcholy</td></tr>
<tr><td> 4</td><td>0x2c</td><td> 9 bajtù</td><td>otexturovaný polygon zadaný ètyømi vrcholy</td></tr>
<tr><td> 5</td><td>0x30</td><td> 6 bajtù</td><td>polygon se tøemi vrcholy, ka¾dý vrchol mù¾e mít odli¹nou barvu</td></tr>
<tr><td> 6</td><td>0x34</td><td> 9 bajtù</td><td>otexturovaný polygon se tøemi vrcholy, ka¾dý má odli¹nou barvu</td></tr>
<tr><td> 7</td><td>0x38</td><td> 8 bajtù</td><td>polygon se ètyømi vrcholy, ka¾dý mù¾e mít odli¹nou barvu</td></tr>
<tr><td> 8</td><td>0x3c</td><td>12 bajtù</td><td>otexturovaný polygon se ètyømi vrcholy, ka¾dý má odli¹nou barvu</td></tr>
<tr><td> 9</td><td>0x40</td><td> 3 bajty</td><td>jednobarevná úseèka</td></tr>
<tr><td>10</td><td>0x48</td><td> x bajtù</td><td>obecná polyèára (promìnný poèet vrcholù)</td></tr>
<tr><td>11</td><td>0x50</td><td> 4 bajty</td><td>úseèka, ka¾dý její vrchol (poèáteèní, koncový) mù¾e mít odli¹nou barvu</td></tr>
<tr><td>12</td><td>0x58</td><td> x bajtù</td><td>obecná polyèára (promìnný poèet vrcholù) s odli¹nou barvou vrcholù</td></tr>
<tr><td>13</td><td>0x60</td><td> 3 bajty</td><td>obdélník se specifikovanou barvou</td></tr>
<tr><td>14</td><td>0x64</td><td> 4 bajty</td><td>sprite</td></tr>
<tr><td>15</td><td>0x68</td><td> 2 bajty</td><td>bod se specifikovanou barvou</td></tr>
<tr><td>16</td><td>0x70</td><td> 2 bajty</td><td>obdélník o rozmìrech 8&times;8</td></tr>
<tr><td>17</td><td>0x74</td><td> 3 bajty</td><td>sprite o rozmìrech 8&times;8</td></tr>
<tr><td>18</td><td>0x78</td><td> 2 bajty</td><td>obdélník o rozmìrech 16&times;16</td></tr>
<tr><td>19</td><td>0x7c</td><td> 3 bajty</td><td>sprite o rozmìrech 16&times;16</td></tr>
</table>



<p><a name="k04"></a></p>
<h2 id="k04">4. Re¾imy vykreslování</h2>

<p>Pøi pohledu na tabulku s&nbsp;pøíkazy pro vykreslování jednotlivých typù
grafických primitiv je &ndash; zejména z&nbsp;údajù o délkách paketù &ndash;
patrná snaha o to, aby v¹echny pøíkazy byly co nejkrat¹í. Z&nbsp;tohoto dùvodu
zde napøíklad najdeme jak pøíkaz pro kresbu obecného spritu, tak i speciální
pøíkazy pro sprity o velikost 8&times;8 pixelù a 16&times;16 pixelù. U
nìkterých typù grafických primitiv se zase odli¹ují pøíkazy pou¾ité ve chvíli,
kdy mají v¹echny vrcholy stejnou barvu a v&nbsp;pøípadì, kdy programátor
potøebovat vyu¾ít interpolaci barvy, neboli Gouraudovo stínování &ndash;
<i>Gouraud shading</i> (zde je nutné barvu ulo¾it pro ka¾dý vrchol zvlá¹»).
Zajímavá je takté¾ podpora pro obecné polyèáry, u nich¾ není dopøedu zadán
poèet vrcholù. Paket mù¾e obsahovat libovolný poèet vrcholù, pøièem¾ se za
posledním vrcholem zapisuje ukonèující kód s&nbsp;hodnotou 0x55555555 (který by
teoreticky znamenal vrchol na souøadnicích [0x5555, 0x5555]). Pro speciální
efekty bylo mo¾né pou¾ít i úseèku, v&nbsp;ní¾ mìl ka¾dý vrchol odli¹nou barvu a
pøi vykreslování se tedy musela pou¾ít interpolace barvy (jednorozmìrná
varianta Gouraudova stínování).</p>

<p>Zbývá nám je¹tì doplnit informaci o barvách grafických primitiv a/nebo
jednotlivých vrcholù. Nezávisle na formátu framebufferu byla barva v¾dy
reprezentována 24bitovou hodnotou. Kromì toho je¹tì ka¾dý vykreslovací pøíkaz
obsahoval jednobitovou hodnotu, kterou se zapínala èi vypínala poloprùhlednost.
Pokud byla prùhlednost povolena, mohla rasterizaèní jednotka pou¾ít jeden ze
ètyø re¾imù výpoètu prùhlednosti:</p>

<table>
<tr><th>Re¾im</th><th>Provádìný výpoèet</th></tr>
<tr><td>1</td><td>1.0 &times; dest + 0.5 &times; source</td></tr>
<tr><td>2</td><td>1.0 &times; dest + 1.0 &times; source</td></tr>
<tr><td>3</td><td>1.0 &times; dest - 1.0 &times; source</td></tr>
<tr><td>4</td><td>1.0 &times; dest + 0.25 &times; source</td></tr>
</table>

<p>Oznaèením <i>dest</i> je my¹lena barva pixelu ulo¾ená ve framebufferu,
oznaèením <i>source</i> pak barva pixelu vypoètená v&nbsp;rasterizaèní
jednotce.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Textury a texturovací jednotka</h2>

<p>Textury pou¾ité pøi vykreslování spritù popø.&nbsp;otexturovaných polygonù
musí být je¹tì pøed zaèátkem vykreslování ulo¾eny do framebufferu. Podporovány
jsou pøitom tøi formáty ulo¾ení. Pøi pou¾ití prvního formátu je ka¾dý
<i>texel</i> reprezentován ¹estnácti bity (dvìma bajty), pøièem¾ pro ka¾dou
barvovou slo¾ku RGB bylo pou¾ito pìt bitù a ¹estnáctý bit (s&nbsp;nejvy¹¹í
váhou) urèoval prùhlednost èi poloprùhlednost texelu. Druhý formát umo¾òoval do
dvou bajtù ulo¾it barvy dvou za sebou jdoucích texelù; v&nbsp;tomto pøípadì
byla barva ka¾dého texelu urèena osmibitovým indexem do barvové palety,
v&nbsp;ní¾ byla ka¾dá barva reprezentována patnácti bity. Tøetí formát byl
èásteènì podobný formátu druhému, ov¹em do dvou bajtù se zde ukládaly indexy
barvy ètyø texelù. Ka¾dý texel tedy mohl být nastaven na jednu z&nbsp;¹estnácti
barev; výsledkem byly ¹estnáctibarevné textury s&nbsp;pomìrnì malými pamì»ovými
nároky (polovièními oproti formátu druhému a dokonce ètvrtinovými oproti
formátu prvnímu).</p>

<p>Textury byly ve framebufferu ulo¾eny do takzvaných stránek textur
(<i>texture pages</i>) o rozmìrech 256&times;256 texelù. To znamenalo, ¾e
souøadnice v&nbsp;prostoru textury (takzvané <i>u-v</i> souøadnice) byly
osmibitové, co¾ sni¾ovalo pamì»ové nároky na ulo¾ení vykreslovacích pøíkazù.
Navíc nemìlo smysl podporovat textury o vìt¹ích rozmìrech, a to kvùli pomìrnì
malé kapacitì framebufferu (mnoho her pou¾ívalo napøíklad textury o rozmìrech
64&times;64 texelù). Pøi vykreslování otexturovaných polygonù èi spritù bylo
nutné naèítat texely z&nbsp;framebufferu a ukládat do nìj rozrastrovaný
grafický objekt. Tyto operace byly samozøejmì nároèné kvùli nutnosti
nìkolikanásobného pøístupu do pamìti framebufferu a proto byl grafický
subsystém vybaven vyrovnávací pamìtí pro textury. V&nbsp;závislosti na pou¾itém
re¾imu mohla tato vyrovnávací pamì» obsahovat jednu texturu o rozmìrech
32&times;32 texelù, 32&times;64 texelù èi 64&times;64 texelù.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Èip MDEC</h2>

<p>Dal¹í dùle¾itou souèástí herní konzole <i>Sony PlayStation</i> je èip
nazvaný <i>MDEC</i>, neboli plným názvem <i>Motion Decoder</i>. Tento èip byl
navr¾en takovým zpùsobem, aby umo¾òoval urychlit dekódování (resp.&nbsp;ponìkud
nepøesnì øeèeno dekompresi) rastrových obrázkù ulo¾ených dle normy <i>JPEG</i>,
èeho¾ bylo mo¾né vyu¾ít napøíklad pøi zobrazování videa ulo¾eného ve formátu
<i>MJPEG (Motion JPEG)</i>. Dekódování jednotlivých snímkù probíhalo po
takzvaných makroblocích o velikosti 16&times;16 pixelù. Vstupní makroblok
obsahoval barvy pixelù ve formátu <i>YUV (YCbCr)</i> (slo¾ky Cb a Cr mìly
polovièní frekvenci), které byly zpracovány diskrétní kosinovou transformací
(<i>DCT</i>) a následnì <i>RLE</i> komprimací (vy¹¹í frekvence v&nbsp;obraze
mìly umìle sní¾enou váhu díky kvantizaci).</p>

<a href="http://i.iinfo.cz/images/17/170-01.png"><img src="http://i.iinfo.cz/images/17/170-01-prev.png" class="image-157937" width="263" height="270" alt="&#160;" /></a>
<p><i>Obrázek 1: Pøevod mezi barvovým prostorem RGB a YCbCr (zde svìtlost
pixelu odpovídá úrovním slo¾ek Y, Cb a Cr).</i></p>

<p>Výstupní makroblok vypoètený èipem <i>MDEC</i>
obsahoval takté¾ hodnoty barev v&nbsp;matici 16&times;16 pixelù, ov¹em ji¾
v&nbsp;dekódované podobì a ve formátu RGB (24bpp popø.&nbsp;alternativnì
16bpp), co¾ pøesnì odpovídalo formátu framebufferu.</p>

<a href="http://i.iinfo.cz/images/284/170-02.png"><img src="http://i.iinfo.cz/images/284/170-02-prev.png" class="image-157938" width="270" height="270" alt="&#160;" /></a>
<p><i>Obrázek 2: Díky kvantizaci je v&nbsp;bì¾ných obrázcích mnoho koeficientù
získaných po DCT nulových, co¾ zvy¹uje kompresní pomìr po aplikaci RLE
(Run-Length Encoding).</i></p>

<p>Díky tomu, ¾e <i>MDEC</i> provádìl pouze operace nad makrobloky a nikoli
dal¹í komplikovanìj¹í èinnosti, byla jeho rychlost pomìrnì vysoká &ndash;
dosahovala pøibli¾nì 9000 makroblokù za sekundu, co¾ pøi rozli¹ení
320&times;240 pixelù umo¾òovalo zobrazovat video s&nbsp;tøiceti snímky za
sekundu (300 makroblokù na snímek). Pøenos dat do <i>MDEC</i> probíhal pøes
první DMA kanál, výstup byl do framebufferu ukládán pøes druhý DMA kanál.</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Geometry Transformation Engine</h2>

<p>Dal¹í souèástí herní konzole <i>Sony PlayStation</i>, o ní¾ jsme se ji¾
struènì zmínili, je modul nazvaný <i>Geometry Transformation Engine</i>, neboli
zkrácenì <i>GTE</i>. Tento modul dokázal provádìt nìkolik operací nad vektory a
maticemi. Pøi práci s&nbsp;vektory se rozli¹ovaly obecné vektory se tøemi
slo¾kami a normálové vektory, tj.&nbsp;vektory s&nbsp;délkou rovnou jedné. Mezi
podporované základní operace patøil posun bodu o zadaný vektor
(<i>translate</i>), rotace okolo jedné souøadné osy (<i>rotate</i>) a
perspektivní transformace, která slou¾í k&nbsp;projekci vrcholu
z&nbsp;trojrozmìrného prostoru do dvourozmìrné plochy pøedstavující plochu
obrazovky. Pro provedení rotace, posunu a perspektivní transformace slou¾ily
instrukce typu <strong>RTPS/RTPT</strong>, násobení vektoru konstantou
(skalárem) se provádìlo instrukcí typu <strong>GPL</strong>, pro násobení
matice a vektoru instrukce typu <strong>MVMVA</strong> a <i>GTE</i> navíc
obsahoval i dal¹í speciální instrukce, napøíklad pro interpolaci barvy,
èásteèný výpoèet barvy na základì Phongova osvìtlovacího modelu atd.</p>

<p>Modul <i>GTE</i> obsahoval 32 pracovních registrù a 32 øídicích registrù,
pøièem¾ ka¾dý z&nbsp;tìchto registrù mìl ¹íøku 32 bitù. Pracovní a øídicí
registry slou¾ily pro ulo¾ení prvkù vektorù a matic. V&nbsp;øídicích registrech
byl pou¾it formát s&nbsp;pevnou øádovou èárkou, kde vìt¹ina hodnot byla
reprezentována ¹estnácti bity: jeden bit slou¾il pro ulo¾ení znaménka, tøi bity
pro ulo¾ení celé èásti èísla a zbylých dvanáct bitù pro ulo¾ení desetinné èásti
èísla. Tento formát byl tedy vhodný pøedev¹ím pro reprezentace malých èísel
s&nbsp;absolutní hodnotou v&nbsp;rozsahu 0,0 a¾ 7,99975585938 &ndash; jde o
pomìrnì ideální formát pro reprezentaci matice rotace, normálových vektorù
atd.</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Zvukový subsystém herní konzole Sony PlayStation</h2>

<p>Posledním modulem herní konzole <i>Sony PlayStation</i>, s&nbsp;ním¾ se dnes
seznámíme, je modul nazvaný <i>SPU</i>, neboli celým jménem <i>Sound Processing
Unit</i>. Jedná se o modul urèený pro generování (stereo) hudby a zvukù a
takté¾ pro pøehrávání hudby ulo¾ené na discích CD-ROM (resp.&nbsp;CD-ROM XA,
co¾ je technologie, o ní¾ jsme se ji¾ zmínili v&nbsp;pøedchozí èásti tohoto
seriálu). Modul <i>SPU</i> zpracovává zvuková data a doká¾e generovat a¾
24hlasou hudbu èi zvuky. Pro ulo¾ení zvukových dat slou¾í buffer o kapacitì 512
kb, v&nbsp;nìm¾ jsou zvuková data rozdìlena po blocích o velikosti ¹estnácti
bajtù. V&nbsp;tìchto blocích jsou ulo¾eny jak vlastní komprimované samply, tak
i dvoubajtová hlavièka obsahující informaci o formátu samplù atd. První 4kb
v&nbsp;bufferu jsou urèeny pro ulo¾ení zvukových dat naètených z&nbsp;CD-ROM
(CD-ROM XA), která jsou navíc èásteènì digitálnì pøedzpracovaná (nastavení
hlasitosti atd.). Formát tìchto zvukových dat odpovídá mo¾nostem CD-Audio,
tj.&nbsp;jedná se o ¹estnáctibitové samply se vzorkovací frekvencí 44,1
kHz.</p>

<p>Zajímavìj¹í je ta èást modulu <i>SPU</i> slou¾ící pro generování hudby,
tj.&nbsp;nikoli pro pouhé pøehrávání samplovaných zvukù ulo¾ených na CD-ROM.
Jak ji¾ bylo øeèeno v&nbsp;pøedchozím odstavci, doká¾e <i>SPU</i> vytváøet a¾
24hlasou hudbu tvoøenou 24 generátory. Ka¾dý generátor buï pøehrává pøedem
pøipravené samply, ¹um, popø.&nbsp;mù¾e být vyu¾it ve funkci frekvenèního
modulátoru pro dal¹í generátor &ndash; tímto zpùsobem lze tvoøit hudbu
s&nbsp;vyu¾itím frekvenèní modulace, tj.&nbsp;podobným zpùsobem, s&nbsp;jakým
jsme se seznámili pøi popisu herních konzolí ètvrté generace. Z&nbsp;tohoto
dùvodu obsahuje ka¾dý generátor programovatelnou obálku <i>ADSR (Attack, Decay,
Sustain, Release)</i>, která ovlivòuje hlasitost generovaného signálu. Obálka
tvoøená èipem <i>SPU</i> má ponìkud ¹ir¹í mo¾nosti, ne¾ klasické <i>ADSR</i>
obálky, proto¾e lze volit i postupný pokles úrovnì <i>sustain</i>, která je ve
star¹ích generátorech buï konstantní nebo klesající bez mo¾nosti ovlivnit
úroveò tohoto poklesu.</p>

<p>Modul <i>SPU</i> se konfiguruje pomocí sady øídicích registrù,
s&nbsp;jejich¾ vyu¾itím lze nastavit jak základní parametry (hlasitost pro
pravý a nezávisle i pro levý kanál), tak i slo¾itìj¹í zvukové efekty, mezi nì¾
patøí napøíklad parametry ji¾ zmínìné <i>ADSR</i> obálky, reverb (a to i pro
hudbu ètenou z&nbsp;CD-ROM), parametry dolnopásmové propusti atd. Ve¹kerá práce
<i>SPU</i> je pøitom zcela nezávislá na èinnosti hlavního CPU, ov¹em <i>SPU</i>
lze nakonfigurovat takovým zpùsobem, aby se generovalo hardwarové pøeru¹ení pøi
pøehrání samplù z&nbsp;nìjakého zvukového kanálu, tak¾e CPU mù¾e napøíklad
provést rekonfiguraci <i>SPU</i>, vytvoøit nové samply apod.</p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Odkazy na Internetu</h2>

<ol>

<li>MIPS Architecture Overview<br />
<a href="http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html">http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html</a>
</li>

<li>MIPS Technologies R3000<br />
<a href="http://www.cpu-world.com/CPUs/R3000/">http://www.cpu-world.com/CPUs/R3000/</a>
</li>

<li>Sony PlayStation (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/PlayStation_(console)">http://en.wikipedia.org/wiki/PlayStation_(console)</a>
</li>

<li>The Official PlayStation muzeum<br />
<a href="http://playstationmuseum.com/playstation-systems/">http://playstationmuseum.com/playstation-systems/</a>
</li>

<li>CPU-collection: IDT R3010 FPU<br />
<a href="http://www.cpu-collection.de/?tn=0&l0=co&l1=IDT&l2=R3010+FPU">http://www.cpu-collection.de/?tn=0&amp;l0=co&amp;l1=IDT&amp;l2=R3010+FPU</a>
</li>

<li>The MIPS R2000 Instruction Set<br />
<a href="http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf">http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf</a>
</li>

<li>Maska mikroprocesoru RISC 1<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg</a>
</li>

<li>Maska mikroprocesoru RISC 2<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg</a>
</li>

<li>The MIPS Register Usage Conventions<br />
<a href="http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html">http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html</a>
</li>

<li>C.E. Sequin and D.A.Patterson: Design and Implementation of RISC I<br />
<a href="http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf">http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf</a>
</li>

<li>Berkeley RISC<br />
<a href="http://en.wikipedia.org/wiki/Berkeley_RISC">http://en.wikipedia.org/wiki/Berkeley_RISC</a>
</li>

<li>Great moments in microprocessor history<br />
<a href="http://www.ibm.com/developerworks/library/pa-microhist.html">http://www.ibm.com/developerworks/library/pa-microhist.html</a>
</li>

<li>Great Microprocessors of the Past and Present<br />
<a href="http://www.cpushack.com/CPU/cpu1.html">http://www.cpushack.com/CPU/cpu1.html</a>
</li>

<li>Sega documentation<br />
<a
href="http://koti.kapsi.fi/~antime/sega/docs.html">http://koti.kapsi.fi/~antime/sega/docs.html</a>
</li>

<li>1995 Programming on the Sega Saturn<br />
<a
href="http://cowboyprogramming.com/2010/06/03/1995-programming-on-the-sega-saturn/">http://cowboyprogramming.com/2010/06/03/1995-programming-on-the-sega-saturn/</a>
</li>

<li>Sega Myths-Saturn was the most difficult console to program for of 5th Gen<br />
<a href="http://forums.sega.com/showthread.php?313485-Sega-Myths-Saturn-was-the-most-difficult-console-to-program-for-of-5th-Gen">http://forums.sega.com/showthread.php?313485-Sega-Myths-Saturn-was-the-most-difficult-console-to-program-for-of-5th-Gen</a>
</li>

<li>SuperH RISC engine Family<br />
<a href="http://www.renesas.com/products/mpumcu/superh/index.jsp">http://www.renesas.com/products/mpumcu/superh/index.jsp</a>
</li>

<li>Sega Saturn<br />
<a href="http://en.wikipedia.org/wiki/Sega_saturn">http://en.wikipedia.org/wiki/Sega_saturn</a>
</li>

<li>Jaguar Sector - II<br />
<a href="http://www.jaguarsector.com/index.php">http://www.jaguarsector.com/index.php</a>
</li>

<li>Atari Age: Atari Jaguar History<br />
<a href="http://www.atariage.com/Jaguar/history.html">http://www.atariage.com/Jaguar/history.html</a>
</li>

<li>Jaguar<br />
<a href="http://www.giantbomb.com/jaguar/3045-28/">http://www.giantbomb.com/jaguar/3045-28/</a>
</li>

<li>Consoles that won't die: The Atari Jaguar<br />
<a href="http://venturebeat.com/2013/04/25/consoles-that-wont-die-atari-jaguar/">http://venturebeat.com/2013/04/25/consoles-that-wont-die-atari-jaguar/</a>
</li>

<li>Atari Jaguar and Atari Jaguar CD<br />
<a href="http://videogamecritic.com/jaguarinfo.htm">http://videogamecritic.com/jaguarinfo.htm</a>
</li>

<li>Atari Jaguar Documentation (Forum)<br />
<a href="http://www.jaguarsector.com/index.php?showforum=65">http://www.jaguarsector.com/index.php?showforum=65</a>
</li>

<li>Atari Jaguar Programming (Forum)<br />
<a href="http://www.jaguarsector.com/index.php?showforum=63">http://www.jaguarsector.com/index.php?showforum=63</a>
</li>

<li>The Jaguar Underground Documentation<br />
<a href="http://justclaws.atari.org/devcats/dox/dox.htm">http://justclaws.atari.org/devcats/dox/dox.htm</a>
</li>

<li>Blitter (Wikipedia CZ)<br />
<a href="http://cs.wikipedia.org/wiki/Blitter">http://cs.wikipedia.org/wiki/Blitter</a>
</li>

<li>Blitter (Wikipedia EN)<br />
<a href="http://en.wikipedia.org/wiki/Blitter">http://en.wikipedia.org/wiki/Blitter</a>
</li>

<li>Bit blit<br />
<a href="http://en.wikipedia.org/wiki/Bit_blit">http://en.wikipedia.org/wiki/Bit_blit</a>
</li>

<li>Disassembler for the portable Jaguar DSP emulator (zdrojový kód s&nbsp;instrukcemi)<br />
<a href="http://mamedev.org/source/src/emu/cpu/jaguar/jagdasm.c.html">http://mamedev.org/source/src/emu/cpu/jaguar/jagdasm.c.html</a>
</li>

<li>Fourth-Generation Consoles<br />
<a href="http://gaming.wikia.com/wiki/Fourth-Generation_Consoles">http://gaming.wikia.com/wiki/Fourth-Generation_Consoles</a>
</li>

<li>Fifth-Generation Consoles<br />
<a href="http://gaming.wikia.com/wiki/Fifth-Generation_Consoles">http://gaming.wikia.com/wiki/Fifth-Generation_Consoles</a>
</li>

<li>History of video game consoles (fifth generation)<br />
<a href="http://en.wikipedia.org/wiki/History_of_video_game_consoles_(fifth_generation)">http://en.wikipedia.org/wiki/History_of_video_game_consoles_(fifth_generation)</a>
</li>

<li>Atari Jaguar<br />
<a href="http://gaming.wikia.com/wiki/Atari_Jaguar">http://gaming.wikia.com/wiki/Atari_Jaguar</a>
</li>

<li>Atari Jaguar Games<br />
<a href="http://gaming.wikia.com/wiki/List_of_Atari_Jaguar_games">http://gaming.wikia.com/wiki/List_of_Atari_Jaguar_games</a>
</li>

<li>MyMedia Games Network Retrospective - Nintendo Super FX chip<br />
<a href="http://psp.mmgn.com/News/MyMedia-Games-Network-Retrospe-G6W">http://psp.mmgn.com/News/MyMedia-Games-Network-Retrospe-G6W</a>
</li>

<li>Wikipedia: Super FX<br />
<a href="http://en.wikipedia.org/wiki/Super_FX">http://en.wikipedia.org/wiki/Super_FX</a>
</li>

<li>IGN: Top 25 Consoles<br />
<a href="http://www.ign.com/top-25-consoles/13.html">http://www.ign.com/top-25-consoles/13.html</a>
</li>

<li>Sega Mega Drive<br />
<a href="http://sega.jp/archive/segahard/md/">http://sega.jp/archive/segahard/md/</a>
</li>

<li>The16bit Era Of Console Video Games<br />
<a href="http://tvtropes.org/pmwiki/pmwiki.php/Main/The16bitEraOfConsoleVideoGames">http://tvtropes.org/pmwiki/pmwiki.php/Main/The16bitEraOfConsoleVideoGames</a>
</li>

<li>The Console Wars<br />
<a href="http://www.cracked.com/funny-2590-the-console-wars/">http://www.cracked.com/funny-2590-the-console-wars/</a>
</li>

<li>Console Wars<br />
<a href="http://tvtropes.org/pmwiki/pmwiki.php/Main/ConsoleWars">http://tvtropes.org/pmwiki/pmwiki.php/Main/ConsoleWars</a>
</li>

<li>Era of the "Bit Wars"<br />
<a href="http://www.gtplanet.net/forum/threads/era-of-the-bit-wars.119796/">http://www.gtplanet.net/forum/threads/era-of-the-bit-wars.119796/</a>
</li>

<li>Rez Wars: How the Bit Wars never really ended<br />
<a href="http://www.ign.com/blogs/beastmastertoad/2013/01/31/rez-wars-how-the-bit-wars-never-really-ended">http://www.ign.com/blogs/beastmastertoad/2013/01/31/rez-wars-how-the-bit-wars-never-really-ended</a>
</li>

<li>Which system ended the "Bit Wars"?<br />
<a href="http://atariage.com/forums/topic/199163-which-system-ended-the-bit-wars/">http://atariage.com/forums/topic/199163-which-system-ended-the-bit-wars/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2014</small></p>
</body>
</html>

