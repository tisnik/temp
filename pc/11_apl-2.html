<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Programovací jazyk APL v pøíkladech: programování bez smyèek</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Programovací jazyk APL v pøíkladech: programování bez smyèek</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o historii výpoèetní techniky navá¾eme na èást pøedchozí, v ní¾ jsme si øekli základní informace o netradièním &bdquo;hieroglyfickém&ldquo; programovacím jazyku APL. Dnes budou popsány základní funkce a operátory pro manipulaci s vektory a maticemi, operátory reduce a scan a takté¾ zpùsob vytváøení u¾ivatelských funkcí.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Práce s&nbsp;vektory a maticemi</a></p>
<p><a href="#k02">2. Monadická a dyadická funkce &rho;</a></p>
<p><a href="#k03">3. Pøístup k&nbsp;prvkùm polí (pou¾ití indexù)</a></p>
<p><a href="#k04">4. Operátory</a></p>
<p><a href="#k05">5. Operátor &bdquo;reduce&ldquo;</a></p>
<p><a href="#k06">6. Operátor &bdquo;scan&ldquo;</a></p>
<p><a href="#k07">7. U¾ivatelské funkce</a></p>
<p><a href="#k08">8. Funkce s&nbsp;parametry, návratová hodnota funkcí</a></p>
<p><a href="#k09">9. Obsah závìreèné èásti èlánku o programovacím jazyce APL</a></p>



<p><a name="k01"></a></p>
<h2>1. Práce s&nbsp;vektory a maticemi</h2>

<p>V&nbsp;pøedchozí èásti seriálu o historii poèítaèù jsme si øekli základní
informace o netradièním programovacím jazyku nazvaném <i>APL</i> (<i>A
Programming Language</i>), jeho¾ autorem je Kenneth Iverson. Vysvìtlili jsme si
význam nìkterých základních (neboli primitivních) funkcí a zpùsob jejich
pou¾ití v&nbsp;jednoduchých výrazech. Primitivní funkce, které mohou mít buï
jeden parametr (<i>monadické funkce</i>) nebo dvojici parametrù (<i>dyadické
funkce</i>), se v&nbsp;jazyku <i>APL</i> zapisují formou speciálních symbolù
z&nbsp;nich¾ vìt¹inu není mo¾né reprezentovat pomocí znakù z&nbsp;ASCII
tabulky, co¾ je jeden z&nbsp;dùvodù, proè programy zapisované v&nbsp;jazyku
<i>APL</i> vypadají zcela jinak ne¾ programy vytváøené v&nbsp;mainstreamových
programovacích jazycích. Ov¹em zápis primitivních funkcí pomocí symbolù není
ten pravý dùvod, proè má jazyk <i>APL</i> své stálé obdivovatele. Skuteèný
dùvod spoèívá v&nbsp;podpoøe vícedimenzionálních polí, s&nbsp;nimi¾ je mo¾né
v&nbsp;mnoha pøípadech pracovat bez nutnosti pou¾ití programových smyèek.
Pøíklady si uká¾eme v&nbsp;navazujících kapitolách.</p>



<p><a name="k02"></a></p>
<h2>2. Monadická a dyadická funkce &rho;</h2>

<p>Vìt¹ina star¹ích i souèasných pøekladaèù a interpretrù jazyka <i>APL</i>
podporuje tvorbu polí s&nbsp;maximálnì 63 dimenzemi, ov¹em v&nbsp;praxi se
vìt¹inou mù¾eme setkat s&nbsp;0-dimenzionálními poli (skalárními hodnotami,
tj.&nbsp;èísly èi znaky), jednodimenzionálními poli (vektory) a
dvoudimenzionálními poli (maticemi). Pøi práci s&nbsp;poli hraje velkou roli
monadická a dyadická funkce &rho; (<i>ró</i>, <i>reshape</i>) a takté¾
monadická funkce &iota; (<i>jóta</i>, <i>index</i>, té¾ <i>èítaè</i>).
Monadická forma funkce &rho; slou¾í ke zji¹tìní prvkù vektoru èi velikosti
matice (popø.&nbsp;vícerozmìrného pole). Výsledkem této funkce je tedy vektor
obsahující tolik prvkù, kolik jich odpovídá dimenzi pole a hodnota ka¾dého
prvku ve výsledku odpovídá velikosti pole v&nbsp;dané dimenzi (v&nbsp;pøípadì
vektoru se tedy vrátí jediné èíslo reprezentující jeho délku, u matice dvojice
èíslic odpovídajících poètu øádkù a sloupcù, u trojrozmìrných polí trojice
èíslic atd.).</p>

<p>Dyadická forma funkce &rho; má i pøes pou¾ití stejného symbolu ponìkud
odli¹nou úlohu &ndash; slou¾í k&nbsp;vytvoøení (konstrukci) pole s&nbsp;danými
rozmìry (jedná se o první parametr zapisovaný pøed symbol této primitivní
funkce), pøièem¾ ve druhém parametru (zapisovaném za symbol funkce) jsou
uvedeny prvky, ze kterých se pole vytvoøí. Mù¾e se jednat buï o vektor nebo o
jiné pole, které je &bdquo;pøeskládáno&ldquo; tak, aby jeho rozmìry odpovídaly
zadanému prvnímu parametru (právì z&nbsp;této vlastnosti funkce &rho; je
odvozen její anglický název <i>reshape</i> neboli zmìna tvaru).
V&nbsp;nìkterých výrazech vypsaných ní¾e je pou¾ita i monadická funkce &iota;,
která slou¾í k&nbsp;vytvoøení (konstrukci) posloupnosti èíselných hodnot,
jejich¾ poèet odpovídá hodnotì parametru této funkce. Ve v¹ech dne¹ních
pøíkladech bude text zapisovaný programátorem odsazen o ètyøi znaky doprava,
zatímco text vypisovaný pøekladaèem bude pro odli¹ení zaèínat na prvním
sloupci:</p>

<pre>
    Vektor1 &#8592; 1 2 3 4 5 6
    Vektor1
1 2 3 4 5 6
    &rho;Vektor1
6

    Vektor2 &#8592; &iota;10
    Vektor2
1 2 3 4 5 6 7 8 9 10
    &rho;Vektor2
10

    Vektor3 &#8592; 10 &rho; 0
    Vektor3
0 0 0 0 0 0 0 0 0 0
    &rho;Vektor3
10

    Matice1 &#8592; 4 3 &rho; 1 2 3 4 5 6 7 8 9 10 11 12
    Matice1
1 2 3
4 5 6
7 8 9
10 11 12
    &rho;Matice1
4 3

    Matice2 &#8592; 3 3 &rho; &iota; 9
    Matice2
1 2 3
4 5 6
7 8 9
    &rho;Matice2
3 3

    Matice3 &#8592; 2 4 &rho; 0
    Matice3
0 0 0 0
0 0 0 0
    &rho;Matice3
2 4

    Matice4 &#8592; 2 4 &rho; Matice2
    Matice4
1 2 3 4
5 6 7 8
    &rho;Matice4
2 4

    Matice5 &#8592; 5 2 &rho; Vektor2
    Matice5
1 2
3 4
5 6
7 8
9 10
    &rho;Matice5
5 2
</pre>



<p><a name="k03"></a></p>
<h2>3. Pøístup k&nbsp;prvkùm polí (pou¾ití indexù)</h2>

<p>V&nbsp;programovacím jazyku <i>APL</i> je mo¾né, podobnì jako
v&nbsp;prakticky v¹ech moderních programovacích jazycích, pøistupovat
k&nbsp;jednotlivým prvkùm polí, tj.&nbsp;k&nbsp;prvkùm vektorù, matic atd. Na
následujícím pøíkladu je ukázán zpùsob vytvoøení jednorozmìrného pole (vektoru)
se sedmi prvky a pøístup ke tøetímu prvku tohoto pole pomocí indexu zapsaného
do hranatých závorek. Posléze je vytvoøeno dvourozmìrné pole (tj.&nbsp;matice)
velikosti 3&times;3 prvky a následnì je proveden pøístup k&nbsp;prvku le¾ícímu
uprostøed této matice. Dvojice indexù je v&nbsp;tomto pøípadì takté¾ zapsána do
závorek, pøièem¾ indexy jsou od sebe oddìleny støedníkem (nikoli èárkou, ta má
zcela jiný význam, proto¾e slou¾í ke spojování polí!) Pov¹imnìte si, ¾e prvky
pole jsou èíslovány od jednièky (na rozdíl od jazykù odvozených od céèka), co¾
zjednodu¹uje pomìrnì velkou èást algoritmù, pøedev¹ím v&nbsp;tìch pøípadech,
kdy se nepou¾ívají programové smyèky, kterým se v&nbsp;<i>APL</i> mù¾eme
v&nbsp;mnoha pøípadech velmi elegantnì vyhnout:</p>

<pre>
    Vektor &#8592; 11 22 33 44 55 66 77
    Vektor
11 22 33 44 55 66 77
    Vektor[3]
33

    Matice &#8592; 3 3 &rho; &iota; 9
    Matice
1 2 3
4 5 6
7 8 9
    Matice[2;2]
5
</pre>

<p>Vý¹e uvedená dvojice pøíkladù pravdìpodobnì ¾ádného vývojáøe nepøekvapila,
proto¾e pøístup k&nbsp;jednomu prvku pole je v&nbsp;naprosté vìt¹inì souèasných
programovacích jazykù velmi podobný, samozøejmì pokud zanedbáme nìkteré ménì
podstatné implementaèní detaily (zpùsob zápisu závorek, hodnota indexu prvního
prvku, zpùsob oddìlení indexù). Zajímavìj¹í je v¹ak to, ¾e v&nbsp;programovacím
jazyku <i>APL</i> je mo¾né vybrat libovolný poèet prvkù pole, pøièem¾ indexy
prvkù ve výbìru se mohou opakovat nebo být rùznì zpøeházené. Výsledkem v¹ech
následujících operací je vektor, tj.&nbsp;nikoli pouze skalární hodnota. U
posledního pøíkazu je navíc pou¾ita monadická varianta funkce &iota;, která
v&nbsp;generuje indexy od jednièky a¾ do zadané hodnoty (v&nbsp;tomto
konkrétním pøípadì se jedná o èísla 1 2 3 4 5, tak¾e se vrátí hodnoty prvního
a¾ pátého prvku):</p>

<pre>
    Pole &#8592; 11 22 33 44 55 66 77
    Pole
11 22 33 44 55 66 77
    Pole[1 2 3]
11 22 33
    Pole[3 2 1]
33 22 11
    Pole[1 3 5 5 3]
11 33 55 55 33
    Pole[&iota;5]
11 22 33 44 55
</pre>

<p>Ov¹em v¹echny vý¹e uvedené pøíklady jsou jen pouhým náznakem síly operací,
které je mo¾né s&nbsp;prvky polí provádìt. Prvkùm polí lze pøiøazovat hodnoty
(to samozøejmì nikoho neohromí), ov¹em mnohem zajímavìj¹í je, ¾e hodnoty lze
pøiøadit i více prvkùm polí souèasnì (v&nbsp;podstatì se jedná o opak vý¹e
ukázaných operací vrácení hodnot vybraných prvkù polí). V&nbsp;nìkterých
pøípadech je vhodné pracovat pøímo s&nbsp;celým sloupcem èi øádkem dvourozmìrné
i vícerozmìrné matice. I tuto operaci programovací jazyk <i>APL</i> samozøejmì
podporuje. Nejlépe se tato operace vysvìtluje na dvourozmìrných maticích: pokud
je zapotøebí vybrat celý øádek matice, postaèuje do hranatých závorek zadat
èíslo øádku, za ním¾ následuje pouze støedník (bez dal¹ích hodnot). Výbìr
sloupce je obdobný &ndash; do hranatých závorek se zapí¹e støedník následovaný
indexem sloupce (ve skuteènosti jsou hodnoty ulo¾ené ve sloupci pøevedeny na
øádkový vektor, co¾ je v¹ak v&nbsp;kontextu jazyka <i>APL</i> logické). Dokonce
je mo¾né jednotlivé zpùsoby zkombinovat, tj.&nbsp;napøíklad vybrat pouze
nìkolik hodnot na jednom øádku matice atd. &ndash; viz následující
pøíklady:</p>

<pre>
    Pole &#8592; 11 22 33 44 55 66 77
    Pole
11 22 33 44 55 66 77
    Pole[7] &#8592; 777
    Pole
11 22 33 44 55 66 777
    Pole[1 2 3] &#8592; 0 42 6502
    Pole
0 42 6502 44 55 66 777
    Pole[7 6] &#8592; 0 1
    Pole
0 42 6502 44 55 1 0
    Pole[&iota;5]
0 42 6502 44 55
    10&times;Pole[&iota;5]
0 420 65020 440 550

    Matice &#8592; 3 3 &rho; &iota; 9
    Matice
1 2 3
4 5 6
7 8 9
    Matice[2;2]
5
    Matice[1;]
1 2 3
    Matice[;1]
1 4 7
    Matice[;1] + Matice[;3]
4 10 16
    2&times;Matice[1;]
2 4 6
    Matice[3;1 3]
7 9
    Matice[;3] &#8592; Matice[;1] + Matice[;2]
    Matice[3;] &#8592; Matice[2;] &times; Matice[3;]
</pre>



<p><a name="k04"></a></p>
<h2>4. Operátory</h2>

<p>Dal¹ím zajímavým a pøitom velmi dùle¾itým nástrojem vývojáøù
v&nbsp;programovacím jazyce <i>APL</i> jsou takzvané <i>operátory</i>, pomocí
nich¾ je mo¾né napøíklad aplikovat nìjakou funkci na v¹echny prvky pole,
zkombinovat vzájemnì v¹echny prvky v&nbsp;poli (z&nbsp;vektoru o <i>n</i>
prvcích se aplikací operátoru <i>inner product</i> stane matice o rozmìrech
<i>n&times;n</i> prvkù) atd. Právì díky operátorùm nemusí programátoøi tvoøící
aplikace v&nbsp;jazyku <i>APL</i> vytváøet programové smyèky, proto¾e napøíklad
souèet (sumu) èi souèin (produkt) v¹ech prvkù vektoru lze velmi jednodu¹e
zapsat pomocí dyadické funkce <i>+</i> nebo <i>&times;</i> aplikované postupnì
na v¹echny prvky vstupního vektoru. Programovací jazyk <i>APL</i> obsahuje ¹est
základních operátorù, ov¹em nìkteré jeho modernìj¹í implementace nabízí
operátorù více (vìt¹inou osm). ©estice základních operátorù, se kterou se
mù¾eme setkat ve vìt¹inì dialektù jazyka <i>APL</i>, je vypsána
v&nbsp;následující tabulce:</p>

<table>
<tr><th>Operátor</th><th>Unicode</th><th>Jméno</th><th>Poznámka</th></tr>
<tr><td>&#168;  </td><td>00a8      </td><td>each</td></tr>
<tr><td>/       </td><td>002f      </td><td>slash, reduce</td><td><a href="#k05">kapitola 5</a></td></tr>
<tr><td>\       </td><td>005c      </td><td>backslash, scan</td><td><a href="#k06">kapitola 6</a></td></tr>
<tr><td>[]      </td><td>005b, 005d</td><td>axis</td><td><a href="#k03">kapitola 3</a></td></tr>
<tr><td>.       </td><td>002e      </td><td>inner product</td><td>bude popsán pøí¹tì</td></tr>
<tr><td>&#9702;.</td><td>25e6, 002e</td><td>outer product</td><td>bude popsán pøí¹tì</td></tr>
</table>



<p><a name="k05"></a></p>
<h2>5. Operátor &bdquo;reduce&ldquo;</h2>

<p>Základním operátorem, vyu¾ívaným v&nbsp;prakticky jakékoli aplikaci napsané
v&nbsp;programovacím jazyku <i>APL</i>, je operátor &bdquo;reduce&ldquo;
nazývaný také &bdquo;slash&ldquo; (druhý název tohoto operátoru vznikl ze
symbolu, kterým je operátor zapisovaný &ndash; <i>/</i>). Tento operátor se
zapisuje za symbol dyadické funkce a má ten význam, ¾e vybranou funkci
postupnì aplikuje (volá) na v¹echny prvky pole. Prvním argumentem ka¾dé
aplikace funkce je mezivýsledek (vìt¹inou skalární hodnota, prvním
mezivýsledkem je první prvek pole), druhým argumentem pak <i>n</i>-tý prvek
pole. Operátor <i>reduce</i> tedy pøedané pole zpracovává postupnì, prvek po
prvku. Typickým pøíkladem mù¾e být výpoèet sumy (souètu, v&nbsp;matematice
zapisovaný symbolem &Sigma;) v¹ech prvkù vektoru èi souèinu v¹ech jeho prvkù
(v&nbsp;matematice se pou¾ívá symbol &Pi;). Tyto dvì èasto pou¾ívané operace je
mo¾né s&nbsp;vyu¾itím operátoru <i>reduce</i> naprogramovat v&nbsp;jazyku
<i>APL</i> velmi snadno bez pou¾ití programové smyèky a pomocných
promìnných:</p>

<pre>
    +/ 1 2 3 4
10
    &times;/ 1 2 3 4
24
</pre>

<p>Pøi pou¾ití operátoru <i>reduce</i> samozøejmì mù¾eme pou¾ít jakoukoli
dyadickou funkci, napøíklad i minule popsané funkce &#5285; a &#5290;, které
vrací vìt¹í popø.&nbsp;men¹í z&nbsp;obou pøedaných argumentù. Pokud se tyto
funkce postupnì aplikují na celý vektor, vrátí nejvìt¹í nebo nejmen¹í prvek
tohoto vektoru:</p>

<pre>
    &#5285;/ 75 72 78 90 69 77 81 88
90

    &#5290;/ 75 72 78 90 69 77 81 88
69
</pre>

<p>Výpoèet prùmìru øady èísel ulo¾ených ve vektoru je velmi jednoduchý kdy¾ si
uvìdomíme, ¾e poèet èísel, tj.&nbsp;délku vektoru, lze zjistit pomocí funkce
&rho;. Nejprve se tedy v¹echna èísla seètou a následnì se mezivýsledek vydìlí
jejich poètem:</p>

<pre>
    X &#8592; 1 2 3 4 5
    (+/X)&divide;&rho;X
3
</pre>

<p>Nyní si uka¾me, jakým zpùsobem se pou¾ívá operátor <i>reduce</i> pøi práci
s&nbsp;maticemi. Pøi popisu tohoto operátoru jsme si øekli, ¾e se postupnì volá
nìjaká vybraná funkce na v¹echny prvky pole. V&nbsp;pøípadì vektoru byla
situace jednoduchá, proto¾e prvkem vektoru byly pøímo skalární hodnoty (èísla).
Pokud se v¹ak operátor <i>reduce</i> pou¾ije na dvourozmìrné matice (podobnì i
na vícedimenzionální struktury), jsou v&nbsp;tomto pøípadì prvkem pole my¹lené
celé vektory (øádky matice), na jejich¾ prvky je funkce aplikována (jinými
slovy &ndash; operátor je uplatòován na nejni¾¹í dimenzi,
tj.&nbsp;sloupcích):</p>

<pre>
    Matice &#8592; 3 3 &rho; &iota; 9
    Matice
1 2 3
4 5 6
7 8 9

    +/ Matice
6 15 24
</pre>

<p>Souèet v¹ech prvkù matice lze zajistit dvojím pou¾itím operátoru
<i>reduce</i>. Jeho první aplikace zajistí souèet v¹ech hodnot na jednotlivých
øádcích matice, druhá aplikace operátoru seète vektor souètù (6 15 24)
jednotlivých øádkù:</p>

<pre>
    +/ +/ Matice
45
</pre>

<p>Sumu lze samozøejmì spoèítat i pro vybraný sloupec èi øádek matice, dokonce
je mo¾né specifikovat dimenzi, ve které bude operátor uplatòován
(v&nbsp;pøípadì dvourozmìrných matic tak lze operátor aplikovat buï na sloupce
nebo na øádky bez nutnosti transpozice matice):</p>

<pre>
    +/ Matice[;1]
12

    +/[1] Matice
12 15 18
</pre>



<p><a name="k06"></a></p>
<h2>6. Operátor &bdquo;scan&ldquo;</h2>

<p>Dal¹ím operátorem, se kterým se v&nbsp;tomto èlánku krátce seznámíme, je
operátor nazvaný <i>scan</i> nebo také <i>backslash</i>. Tento operátor je
v&nbsp;programech zapisovaných v&nbsp;jazyku <i>APL</i> reprezentován, jak ji¾
ostatnì jeho druhé jméno napovídá, obráceným lomítkem &ndash; <i>\</i>.
Operátor <i>scan</i> má chování podobné vý¹e popsanému operátoru <i>reduce</i>,
ov¹em s&nbsp;jedním podstatným rozdílem &ndash; zatímco v&nbsp;pøípadì pou¾ití
operátoru <i>reduce</i> se dozvíme pouze celkový výsledek aplikace vybrané
funkce na pole, je u operátoru <i>scan</i> vrácen vektor v¹ech mezivýsledkù,
èeho¾ je mo¾né v&nbsp;nìkterých pøípadech vyu¾ít a opìt tak eliminovat potøebu
tvorby programových smyèek. Tento operátor lze pou¾ít spolu s&nbsp;jakoukoli
dyadickou funkcí. Na následujících pøíkladech si pov¹imnìte rozdílu
v&nbsp;chování obou operátorù:</p>

<pre>
    +/ 1 2 3 4 5
15

    +\ 1 2 3 4 5
1 3 6 10 15

    &times;/ &iota;4
24

    &times; \ &iota;4
1 2 6 24
</pre>



<p><a name="k07"></a></p>
<h2>7. U¾ivatelské funkce</h2>

<p>V&nbsp;programovacím jazyku <i>APL</i> je mo¾né, podobnì jako v&nbsp;mnoha
dal¹ích programovacích jazycích, vytváøet i u¾ivatelské funkce a roz¹iøovat tak
repertoár základních (primitivních) funkcí. Zatímco primitivní funkce jsou
pøedstavované speciálním symbolem (&rho;, &iota;, +, &times;, &divide;,
&#5285;, &#5290; atd.), u¾ivatelské funkce se pojmenovávají stejným zpùsobem
jako promìnné, co¾ znamená, ¾e se v&nbsp;jejich jménech mohou vyskytovat bì¾né
alfanumerické znaky (písmena a èíslice, èíslice se nesmí vyskytovat na zaèátku
jména funkce), podtr¾ítko a nìkteré speciální znaky, jakými jsou &Delta;
(delta) a <u>&Delta;</u> (underlined delta). Pokud tedy programátorùm
nevyhovuje zápis primitivních funkcí pomocí speciálních symbolù, mohou si
vytvoøit vlastní funkce, které vhodným zpùsobem &bdquo;obalí&ldquo; funkce
primitivní. U¾ivatelské funkce mohou být, podobnì jako funkce primitivní,
niladické (bez parametrù), monadické (s&nbsp;jedním parametrem) a dyadické (se
dvìma parametry).</p>

<p>Ve vývojovém prostøedí jazyka <i>APL</i> vìt¹inou existuje speciální editor
urèený pro editaci funkcí, který je mo¾né zavolat napøíklad pøíkazem
<i>)EDIT</i>, za ním¾ následuje jméno funkce (pøíkaz <i>&bdquo;)EDIT&ldquo;</i>
skuteènì zaèíná uzavírací kulatou závorkou). Pùvodní editor funkcí byl pouze
øádkový, v&nbsp;modernìj¹ích implementacích jazyka <i>APL</i> se vìt¹inou jedná
o plnohodnotný celoobrazovkový editor. Po vyvolání editoru se vìt¹inou
automaticky vytvoøí první øádek s&nbsp;názvem funkce, pøed ním¾ je uveden
symbol &nabla;. Celá editace konèí zápisem øádku s&nbsp;jediným symbolem
&nabla; (tentokrát ji¾ uvedeným bez jména funkce). V&nbsp;následujícím pøíkladu
je ukázána jednoduchá niladická (bezparametrická) funkce, která nevrací ¾ádnou
hodnotu, tj.&nbsp;v&nbsp;jiných jazycích by se jednalo o proceduru. Funkce si
po svém zavolání vy¾ádá od u¾ivatele zadání seznamu èísel a následnì spoèítá a
vytiskne jejich souèet, prùmìr a nejvìt¹í i nejmen¹í hodnotu:</p>

<pre>
    &nabla;SIMPLE_STAT
    'Zadej radu cisel'
    SEZNAM &#8592; &#9109; 
    'Bylo zadano' (&rho;SEZNAM) 'cisel'
    'Suma = '(+/SEZNAM)
    'Prumer = '((+/SEZNAM)&divide;&rho;SEZNAM)
    'Nejvetsi hodnota = '(&#5285;/SEZNAM)
    'Nejmensi hodnota = '(&#5290;/SEZNAM)
    &nabla;
</pre>



<p><a name="k08"></a></p>
<h2>8. Funkce s&nbsp;parametry, návratová hodnota funkcí</h2>

<p>Skuteèný programátor pou¾ívající jazyk <i>APL</i> by vý¹e uvedenou funkci
<i>SIMPLE_STAT</i> nenapsal v&nbsp;pøesnì té podobì, jak jsme si ji ukázali
v&nbsp;pøedchozí kapitole. Dùvodem je pøedev¹ím to, ¾e funkce obsahuje pomìrnì
velké mno¾ství programového kódu, který by bylo mo¾né vyu¾ít i v&nbsp;jiných
èástech aplikace a takté¾ to, ¾e funkce je pou¾itelná pouze pøi ruèním vstupu
dat z&nbsp;konzole (viz øádek SEZNAM &#8592; &#9109;). Programátoøi vìt¹inou
rozkládají funkce na jednodu¹¹í èásti, které lze snadnìji otestovat a
vícenásobnì pou¾ít. Prvním pøiblí¾ením dekompozice funkce <i>SIMPLE_STAT</i> by
napøíklad bylo vytvoøení monadické (jednoparametrické) u¾ivatelské funkce
<i>AVERAGE</i>, která vypoète prùmìr ze zadaného seznamu (vektoru) èísel a
výsledek posléze pøedá jako svou návratovou hodnotu. Pov¹imnìte si, jakým
zpùsobem je pøi definici funkce ji¾ na prvním øádku naznaèeno, ¾e se jedná o
funkci s&nbsp;jedním parameterm (<i>SEZNAM</i>) a pojmenováním speciální
lokální promìnné pøedstavující návratovou hodnotu funkce (<i>R</i>):</p>

<pre>
    &nabla;R &#8592; AVERAGE SEZNAM
    R &#8592; (+/SEZNAM)&divide;&rho;SEZNAM
    &nabla;
</pre>

<p>Novì vytvoøenou funkci <i>AVERAGE</i> lze pou¾ívat stejným zpùsobem jako
primitivní monadické funkce:</p>

<pre>
    AVERAGE 1 2 3 4 5 6
3.5

    NUMBERS &#8592; 10 20 30 40 50
    RESULT &#8592; AVERAGE NUMBERS
    RESULT
30
    RESULT &times; 2
60
    2 &times; AVERAGE NUMBERS
60
</pre>



<p><a name="k09"></a></p>
<h2>9. Obsah závìreèné èásti èlánku o programovacím jazyce APL</h2>

<p>Popis programovacího jazyka <i>APL</i> dokonèíme a¾ v&nbsp;následující èásti
seriálu o historii výpoèetní techniky. Uká¾eme si zpùsob vytváøení vnoøených
polí (hierarchických datových struktur), pou¾ití relaèních funkcí spolu
s&nbsp;funkcemi pro &bdquo;kompresi&ldquo; a &bdquo;dekompresi&ldquo; polí
(jedná se o velmi silnou programovací techniku) a takté¾ potì¹íme znalce Lispu
popisem funkcí <i>take</i> a <i>drop</i> (&#8593;, &#8595;), pomocí nich¾ je
mo¾né nahradit známé Lispovské funkce <i>car</i> a <i>cdr</i> pøi zpracování
seznamù, které jsou v&nbsp;jazyku <i>APL</i> implementovány jako vektory. Na
závìr budou popsány funkce pro manipulaci s&nbsp;maticemi (vèetnì operátorù
<i>.</i> a <i>&#9702;.</i>) a zpùsob práce s&nbsp;øetìzci.</p>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

