<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Vyrovnávací pamìti (cache)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Vyrovnávací pamìti (cache)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Vzhledem k tomu, ¾e rychlost mikroprocesorù roste díky stále platnému Mooreovu zákonu rychleji ne¾ rychlost dynamických pamìtí (pøedev¹ím pøi náhodném pøístupu), pou¾ívají se v prakticky v¹ech moderních poèítaèích vyrovnávací pamìti (cache), jejich¾ princip si dnes popí¹eme.</p>



<h1>Obsah</h1>
<p>
<a href="#k01">1. Vyrovnávací pamìti (cache)</a><br />
<a href="#k02">2. Hierarchie pamìtí</a><br />
<a href="#k03">3. Systémy bez vyrovnávacích pamìtí</a><br />
<a href="#k04">4. Vyrovnávací pamìti na platformì x86</a><br />
<a href="#k05">5. Princip práce vyrovnávacích pamìtí</a><br />
<a href="#k06">6. Kritéria vyrovnávací pamìti a jejich vliv na efektivitu</a><br />
<a href="#k07">7. Literatura a odkazy na Internetu</a><br />
</p>



<p><a name="k01"></a></p>
<h1>1. Vyrovnávací pamìti (cache)</h1>

<p>V&nbsp;pøedchozích èástech tohoto seriálu jsme si popsali èinnost
mikroprocesorù pøi zpracovávání programu rozlo¾eného do jednotlivých strojových
instrukcí i funkci operaèní pamìti vytvoøené vìt¹inou pomocí technologie DRAM,
tj.&nbsp;møí¾ky pamì»ových jednobitových bunìk zalo¾ených na jednom tranzistoru
s&nbsp;pøipojeným kondenzátorem. Vzhledem k&nbsp;tomu, ¾e rychlost
mikroprocesorù roste rychleji ne¾ rychlost dynamických pamìtí (pøedev¹ím pøi
náhodném pøístupu), bylo nutné do pùvodnì jednoduchého systému
mikroprocesor&ndash;operaèní pamì» (základ von Neumannovy architektury) zavést
takzvané vyrovnávací pamìti (<i>cache memory</i>). Ty na jednu stranu
statisticky zvy¹ují pravdìpodobnost, ¾e mikroprocesor bude pracovat na své
maximální rychlosti v&nbsp;pøípadì, ¾e jsou data pøítomna ve vyrovnávací
pamìti, na stranu druhou umo¾òují, aby se data mezi operaèní pamìtí a
vyrovnávací pamìtí pøená¹ela v&nbsp;blocích, co¾ je na souèasných technologiích
operaèních pamìtí (SDRAM, DDR, DDR2 atd.) mnohem rychlej¹í ne¾ náhodný
pøístup.</p>

<image id="6586" original="no" />
<p-center><i>Obrázek 1: Postupný rùst rychlostí dynamických pamìtí pro tøi
rùzné technologie (SDRAM, DDR, DDR2, RDRAM a XDR)</i></p-center>

<p>Zpùsob uspoøádání pamìtí, pøedev¹ím operaèní pamìti, do znaèné míry
ovlivòuje celou architekturu poèítaèe, která v&nbsp;mnoha pøípadech
z&nbsp;rùzných dùvodù odporuje pùvodní <i>von Neumannovì</i> architektuøe. Idea
hierarchického uspoøádání pamìtí je pomìrnì jednoduchá a vychází
z&nbsp;cenových a výkonnostních kritérií (v&nbsp;neposlední øadì se také musí
dbát na po¾adovaný elektrický pøíkon poèítaèe, proto¾e prakticky v¹echna dodaná
energie se v&nbsp;nìm pøemìòuje na teplo, které je zapotøebí rozptýlit do
okolí). V&nbsp;poèítaèi je umístìno více technologických typù pamì»ových
souèástek, od tìch nejrychlej¹ích (a také v&nbsp;pøepoètu na cenu jednoho bitu
nejdra¾¹ích) pamìtí s&nbsp;velmi malou kapacitou a¾ po velkokapacitní média,
napøíklad pevné disky tvoøící <i>èást virtuální pamìti</i>, u nich¾ je cena za
bit sice nejni¾¹í, ale také tomu odpovídá jejich rychlost, která je o nìkolik
øádù ni¾¹í, ne¾ je tomu u pamìtí, které stojí v&nbsp;celé hierarchii o jeden èi
více stupòù vý¹e.</p>

<image id="5801" />
<p-center><i>Obrázek 2: Von Neumannova architektura ve své klasické podobì</i></p-center>



<p><a name="k02"></a></p>
<h1>2. Hierarchie pamìtí</h1>

<p>Typická hierarchie souèasných osobních poèítaèù i serverù je mù¾e být
následující:</p>

<ol>

<li>Na vrcholku celé hierarchické struktury pamìtí se nachází velmi rychlá
pamì» tvoøená pracovními registry umístìnými pøímo na mikroprocesoru. Tato
pamì» má v&nbsp;porovnání s&nbsp;dal¹ími pamì»mi pomìrnì malou kapacitu
(napøíklad se u typických RISC procesorù jedná o 32 registrù po 32 bitech =
32&times;32 = 1024 bitù = 128 bytù), ov¹em na druhou stranu jsou pracovní
registry pøímo zapojeny do ostatních struktur mikroprocesoru a ètení i zápis je
nejrychlej¹í &ndash; vìt¹inou odpovídá jednomu taktu, který je v&nbsp;pøípadì
pou¾ití zøetìzeného zpracování instrukcí vyu¾it i nìjakou dal¹í operací.
Pøíli¹né zvy¹ování poètu pracovních registrù není vhodné, napøíklad
z&nbsp;dùvodu rychlé reakce na pøeru¹ení (obsahy registrù se musí uschovat a
posléze zase obnovit) èi rychlého pøepínání úloh. Jednou z&nbsp;metod pro
èásteèné obejití tohoto omezení je vyu¾ití <i>stínových registrù</i> (<i>shadow
registers</i>). Pro adresování registrù se vyu¾ívají k&nbsp;tomu urèené adresní
èásti instrukcí, které jsou mnohdy velmi krátké (napøíklad pro jednoznaèný
výbìr jednoho z&nbsp;32 registrù postaèí pouhých pìt bitù).</li>

<li>Na druhém místì hierarchie se nachází vyrovnávací pamì» (<i>cache</i>)
první úrovnì, oznaèovaná jako <i>Level 1 cache</i>. U&nbsp;nìkterých star¹ích
architektur mikroprocesorù se tato pamì» nacházela na samostatném èipu,
tj.&nbsp;oddìlenì od mikroprocesoru, dnes se v¹ak (i díky mnohem vy¹¹í
integraci) tato pamì» témìø v¾dy nachází pøímo na èipu obsahujícím samotný
mikroprocesor. Jedním z&nbsp;dùvodù je snaha o co nejrychlej¹í pøístupy do
vyrovnávací pamìti první úrovnì. Zajímavé je, ¾e z&nbsp;programátorského
hlediska je tato pamì» témìø neviditelná (vìt¹inou a¾ na nìkolik speciálních
instrukcí, které v¹ak bì¾í v&nbsp;takzvaném <i>ringu 0</i> a jsou tedy dostupné
pouze z&nbsp;jádra operaèního systému), programátor tedy nemù¾e urèit, která
data mají být umístìna ve vyrovnávací pamìti a která v&nbsp;pamìti operaèní.
Tato úroveò vyrovnávací pamìti bývá velmi èasto rozdìlena na samostatnì
pracující pamì» urèenou pro program (<i>I-cache</i>) a data (<i>D-cache</i>),
èím¾ se do jisté míry èistì von Neumannovská architektura stává architekturou
Harvardskou.</li>

<li>Na tøetím místì hierarchie bývá umístìna vyrovnávací pamì» druhé úrovnì,
oznaèovaná názvem <i>Level 2 cache</i> èi <i>Second level cache</i>. Tato pamì»
má vy¹¹í kapacitu ne¾ vyrovnávací pamì» první úrovnì, ov¹em její rychlost mù¾e
být ni¾¹í (napøíklad mù¾e být taktována externí frekvencí pamì»ové sbìrnice a
nikoli interní frekvencí mikroprocesoru, co¾ sni¾uje cenu celého systému).
Podobnì jako <i>Level 1 cache</i>, i <i>Level 2 cache</i> mù¾e být rozdìlena na
èást urèenou pro data a èást urèenou pro operaèní kódy instrukcí, ov¹em na
mnoha architekturách je tato pamì» unifikovaná. Vzhledem ke své vìt¹í kapacitì
(a také kvùli zvý¹ení výtì¾nosti) mù¾e být vyrovnávací pamì» druhé úrovnì
umístìna v&nbsp;samostatném èipu/èipech, mnohdy na malém zásuvném modulu spolu
s&nbsp;mikroprocesorem a dal¹ími podpùrnými obvody. Co se týèe výrobní
technologie, bývá <i>Level 2 cache</i> zalo¾ena buï na MOS SRAM (statické
pamìti se ¹estitranzistorovými pamì»ovými buòkami) nebo na bipolární
technologii (pøi extrémních po¾adavcích na rychlost se pou¾ívaly i bistabilní
klopné obvody ECL).</li>

<li>Vlastní operaèní pamì» se nachází a¾ na ètvrtém místì v&nbsp;hierarchii. Na
rozdíl od obou úrovní vyrovnávacích pamìtí je operaèní pamì» pøímo èi (dnes
èastìji) nepøímo adresovatelná a tedy plnì pøístupná programátorùm. Operaèní
pamì» je z&nbsp;pohledu mikroprocesoru velmi pomalá, pøedev¹ím pøi náhodném
pøístupu, co¾ je také jeden z&nbsp;hlavních dùvodù pou¾ití vyrovnávacích
pamìtí. Typickou technologií operaèních pamìtí je møí¾ka pamì»ových bunìk
tvoøených tranzistorem a kondenzátorem (resp.&nbsp;prvkem s&nbsp;urèitou
kapacitou), tj.&nbsp;jedná se o dynamickou pamì», která se musí
v&nbsp;pravidelných obnovovat, vìt¹inou pomocí takzvaného skrytého obnovení
(<i>hidden refresh</i>), jen¾ je provádìno bez zásahu mikroprocesoru i
programátora.</li>

<li>Vzhledem k&nbsp;tomu, ¾e v¹echny mikroprocesory urèené pro desktopy a
servery podporují takzvanou <i>virtuální pamì»</i>, pokraèuje hierarchie pamìtí
je¹tì ní¾e, proto¾e se operaèní pamì» roz¹iøuje o nìkolik øádù pomalej¹í a
souèasnì o nìkolik øádù objemnìj¹í pevné disky. Z&nbsp;hlediska programátora
tvoøícího bì¾né aplikace (pøesnìji øeèeno programy nebì¾ící s&nbsp;privilegii
jádra operaèního systému) je viditelná takzvaná <i>virtuální pamì»</i> tvoøená
jak operaèní pamìtí, tak i èástí kapacity pevného disku (èi Flash disku atd.).
V&nbsp;praxi mù¾e existence virtuální pamìti znamenat, ¾e nìkteré bloky pamìti
nejsou pøítomny pøímo v&nbsp;operaèní pamìti, ale jsou po urèitý èas ulo¾eny na
pevném disku. Pøi pokusu o pøístupu k&nbsp;tomuto bloku (a» ji¾ pro ètení èi
zápis) je daný blok naèten do volného místa operaèní pamìti a zpøístupnìn
programu (popø.&nbsp;se volné místo vytvoøí odlo¾ením jiného bloku na pevný
disk). Aplikaèní programátor se o tyto èinnosti nemusí starat, jsou to pro nìj
transparentní operace &ndash; z&nbsp;jeho pohledu je pamì» lineární sekvencí
adres, která mù¾e být maximálnì rozdìlena na nìkolika èástí (èást urèená pro
program, èást pro data, èást pro zásobník).</li>

</ol>

<image id="6232" />
<p-center><i>Obrázek 3: PA RISC firmy Hewlett-Packard (mikroprocesor spolu s&nbsp;podpùrnými obvody a vyrovnávacími pamìtmi druhé úrovnì)</i></p-center>



<p><a name="k03"></a></p>
<h1>3. Systémy bez vyrovnávacích pamìtí</h1>

<p>Na star¹ích architekturách, napøíklad osmibitových domácích poèítaèích, byla
celá hierarchie pamìti zredukována na pouhé dvì úrovnì. První úroveò opìt
tvoøily pracovní registry mikroprocesoru, tìch v¹ak bývalo z&nbsp;dne¹ního
pohledu relativnì málo, napøíklad v&nbsp;pøípadì mikroprocesoru 6502 se jednalo
o tøi osmibitové registry a u Intel 8080 o osm registrù. Druhou úroveò tvoøila
dynamická operaèní pamì», která v¹ak bývala obnovována za asistence
mikroprocesoru a vìt¹inou i speciálního podprogramu (neexistovala zde tedy
mo¾nost provádìní skrytých obnovení). Mikroprocesor 6502 je typickým zástupcem
procesorù vytvoøených v&nbsp;dobì, kdy býval pøístup do dynamické pamìti
rychlej¹í ne¾ doba provedení typické instrukce a souèasnì se vìt¹í poèet
pracovních registrù negativnì podílel na cenì mikroprocesoru (nehledì na dal¹í
komplikace, napøíklad pøi vyvolání pøeru¹ení). Z&nbsp;tohoto dùvodu 6502
obsahuje, jak ji¾ bylo øeèeno, pouhé tøi pracovní registry (akumulátor a dva
index registry), zato v¹ak má instrukce (pøesnìji øeèeno, adresní re¾imy) pro
rychlou práci s&nbsp;prvními 256 byty operaèní pamìti, nazvané <i>zero
page</i>. U ¹estnáctibitových mikroprocesorù se v¹ak úloha obrátila, proto¾e
provádìní instrukcí zaèalo být rychlej¹í, ne¾ pøístup do dynamické pamìti
(DRAM) a právì zde se (z&nbsp;pohledu osobních poèítaèù poprvé) objevují
vyrovnávací pamìti.</p>

<image id="6662" />
<p-center><i>Obrázek 4: Ve slavném poèítaèi ZX-81 vyrovnávací pamìti nenajdeme</i></p-center>



<p><a name="k04"></a></p>
<h1>4. Vyrovnávací pamìti na platformì x86</h1>

<p>U¾ poèítaèe s&nbsp;mikroprocesory 386 podporovaly vyrovnávací pamìti;
jednalo se ov¹em o pamìti umístìné mimo procesor, které pou¾ívaly strategii
<i>write-through</i> a byly spoleèné pro data i programový kód. Na platformì
x86 do¹lo poprvé k&nbsp;rozdìlení vyrovnávací pamìti na èást urèenou pro
program a èást urèenou pro data a¾ u prvních mikroprocesorù Intel Pentium,
které mìly tuto vyrovnávací pamì» (první úrovnì) umístìnou pøímo na èipu.
Pøedchùdce Pentií, tj.&nbsp;mikroprocesor 486 mìl na èipu také vyrovnávací
pamì», ov¹em s&nbsp;pomìrnì malou kapacitou, která u pùvodních mikroprocesorù
firmy Intel dosahovala kapacity pouhých osmi kilobytù (pomalej¹í strategie
<i>write-through</i>) a u nejnovìj¹ích modelù pak ¹estnácti kilobytù (ov¹em
s&nbsp;vyu¾itím strategie <i>write-back</i>). Externí vyrovnávací pamì» (druhé
úrovnì) bylo mo¾né nainstalovat do základní desky, kde se nacházely pøíslu¹né
patice DIL &ndash; u mnoha základních desek se v¹ak místo skuteèných
vyrovnávacích pamìtí v&nbsp;tìchto paticích nacházely "prázdné" èipy, které
neprovádìly ¾ádnou èinnost.</p>

<image id="6663" original="no" />
<p-center><i>Obrázek 5: Vícejádrový systém s&nbsp;vyrovnávacími pamì»mi úrovnì 1 rozdìlenými pro jednotlivá jádra a spoleènou vyrovnávací pamìtí druhé úrovnì</i></p-center>



<p><a name="k05"></a></p>
<h1>5. Princip práce vyrovnávacích pamìtí</h1>

<p>Vyrovnávací pamì» je fyzicky umístìna na datové sbìrnici mezi
mikroprocesorem a operaèní pamìtí. Pamì» je rozdìlena do blokù o konstantní
velikosti, které bývají nazývané <i>cache line</i>. Velikosti tìchto blokù jsou
rùzné, v&nbsp;praxi se pohybují od osmi bytù do jednoho kilobytu. Napøíklad
vyrovnávací pamì» o kapacitì 512&nbsp;kB a velikosti bloku 32 bytù obsahuje
celkem 16384 blokù. Operaèní pamì» je takté¾ logicky rozdìlena na bloky o
stejné velikosti, tìchto blokù je v¹ak mnohem více, ne¾ blokù ve vyrovnávací
pamìti (pro operaèní pamì» o kapacitì 64&nbsp;MB se jedná o 2097152 blokù).
Z&nbsp;tohoto pomìru také vyplývá, ¾e zdaleka ne v¹echny bloky operaèní pamìti
mohou být "ke¹ovány" ve vyrovnávací pamìti (pomìr blokù je 1:128). Právì na
strategii výbìru blokù (a také na tom, jakým zpùsobem mohou být bloky do
vyrovnávací pamìti mapovány) je závislá efektivita vyrovnávací pamìti. Ke
ka¾dému bloku umístìnému ve vyrovnávací pamìti jsou pøidány je¹tì dal¹í
dùle¾ité informace, pøedev¹ím takzvaný <i>tag</i>, co¾ je index odpovídajícího
bloku v&nbsp;operaèní pamìti (v&nbsp;podstatì se jedná o hodnotu
ukazatele/adresy podìlenou délkou bloku).</p>

<p>Ve chvíli, kdy mikroprocesor potøebuje pøeèíst nìjaká data (tj.&nbsp;obsah
pamì»ové buòky na nìjaké adrese, mù¾e se jednat jak o operaèní kód strojové
instrukce, tak i o skuteèná zpracovávaná data), provede se kontrola, zda se
tato data nachází ve vyrovnávací pamìti, tj.&nbsp;zda nìjaký blok obsahuje
po¾adovanou adresu. Pokud ano (nastane takzvaný <i>cache hit</i>), jsou data
z&nbsp;vyrovnávací pamìti pøeètena a pøedána mikroprocesoru a to mnohem
rychleji, ne¾ v&nbsp;pøípadì ètení dat z&nbsp;operaèní pamìti. Ov¹em ve chvíli,
kdy potøebná data nejsou nalezena ve vyrovnávací pamìti (tzv.&nbsp;<i>cache
miss</i>), musí do ní být pøenesena. Na základì alokaèní strategie (popsané
v&nbsp;následující èásti tohoto seriálu) se uvolní blok ve vyrovnávací pamìti a
data jsou do tohoto bloku naètena (pøená¹í se v¾dy celý blok, na co¾ je dobré
myslet pøi návrhu datových struktur i zpùsobu zpracování) a dále se pokraèuje
v&nbsp;pøenosu do mikroprocesoru.</p>

<p>Zápis dat (vìt¹inou) probíhá ponìkud slo¾itìj¹ím zpùsobem. V&nbsp;pøípadì,
¾e je blok, ve kterém se nachází zapisovaná adresa, ulo¾en ve vyrovnávací
pamìti, jsou data do vyrovnávací pamìti skuteènì zapsána a celý blok se oznaèí
bitem <i>dirty</i> (¹pinavý). Takový blok nemù¾e být zahozen, ale musí být
v&nbsp;pøípadì potøeby jeho uvolnìní nejdøíve ulo¾en zpìt do operaèní pamìti,
aby byla zaji¹tìna <i>koherence dat</i>. Tato strategie se oznaèuje
<i>write-back</i>. Døíve se pou¾ívala jednodu¹¹í metoda øízení vyrovnávací
pamìti, která je nazvaná <i>write-through</i>. Pøi pou¾ití této metody se data
zapisují jak do vyrovnávací pamìti (pøedpokládá se, ¾e se data budou opìtovnì
èíst) tak souèasnì "propisují" i do hlavní pamìti, co¾ je sice pomalej¹í, ale
øízení je naopak jednodu¹¹í (nemusí se testovat pøíznak <i>dirty</i> apod.). U
nìkterých poèítaèù, napøíklad u PC s&nbsp;procesorem 486 bylo mo¾né mezi obìma
strategiemi øízení vyrovnávací pamìti volit (v&nbsp;BIOSu), pøièem¾ rychlej¹í
strategie <i>write-back</i> mohla vést k&nbsp;nestabilitì systému.</p>



<p><a name="k06"></a></p>
<h1>6. Kritéria vyrovnávací pamìti a jejich vliv na efektivitu</h1>

<p>Pøi návrhu struktury, pøedev¹ím informaèní kapacity, rychlosti a strategie
øízení vyrovnávacích pamìtí v&nbsp;poèítaèi i pøi jejich pou¾ití v&nbsp;praxi
(napøíklad pøi nastavování parametrù jádra operaèního systému) je nutné
sledovat kritérium, kterým se vyjadøuje efektivnost pou¾ití vyrovnávacích
pamìtí. Jedná se o takzvaný <i>souèinitel výpadkù blokù</i>, který se vypoète
z&nbsp;podílu neuspokojivých pøístupù do vyrovnávací pamìti (tj.&nbsp;pøístupù,
které ve svém dùsledku vedou k&nbsp;nutnosti ètení èi zápisu bloku
z&nbsp;operaèní pamìti èi do operaèní pamìti) a celkového poètu pøístupù. Na
zaèátku práce poèítaèe je vyrovnávací pamì» prázdná a proto se souèinitel
výpadkù bloku rovná jedné &ndash; ka¾dý pokus o pøístup do vyrovnávací pamìti
vede k&nbsp;nutnosti naètení celého bloku z&nbsp;operaèní pamìti èi oznaèení
daného bloku pøíznakem <i>dirty</i> (tímto bitovým pøíznakem je oznaèený blok
urèený pro zápis do operaèní pamìti, pøíznak znaèí nesoulad mezi obsahem bloku
ve vyrovnávací pamìti a korespondujícího bloku v&nbsp;hlavní pamìti).</p>

<p>S&nbsp;rostoucím poètem pøístupù do pamìti, zejména pøi opakovaném volání
stejných programù èi práci se stále stejnými daty (v&nbsp;obou pøípadech se
uplatòuje známé pravidlo 80-20), hodnota souèinitele výpadkù blokù postupnì
klesá. Rychlost poklesu a konkrétní prùmìrná hodnota souèinitele výpadkù blokù
po ustálení závisí na pomìru kapacit vyrovnávací a operaèní pamìti i na tom,
jakým zpùsobem je implementováno øízení vyrovnávací pamìti (strategie), na
struktuøe zpracovávaných dat i na tom, jakým zpùsobem jsou aplikace i vlastní
operaèní systém naprogramovány (napøíklad nevhodnì napsaná programová smyèka
mù¾e program zpomalit a¾ o nìkolik øádù). V&nbsp;praxi lze dosáhnout hodnot
souèinitele výpadkù blokù men¹ích ne¾ 0,05, tj.&nbsp;jen v&nbsp;pìti procentech
pøípadù dochází k&nbsp;výpadku bloku a v&nbsp;devadesáti pìti procentech
vyrovnávací pamì» skuteènì poslou¾í ke svému úèelu.</p>

<p>Dal¹í dùle¾itou hodnotou pøi návrhu èi práci s&nbsp;vyrovnávacími pamì»mi je
takzvaná <i>efektivnost vyrovnávací pamìti</i>. Tu lze vypoèítat pomocí vzorce
(jedná se o ponìkud zjednodu¹ený vztah, ov¹em pro prvotní orientaci
v&nbsp;problému dostaèuje):</p>

<p><i>T<sub>ef</sub> = (1-SVB)&times;T<sub>V</sub> + (1+x)&times;SVB&times;T<sub>H</sub></i></p>

<p>kde:</p>

<ul>
<li><i>T<sub>ef</sub></i> je efektivní (zdánlivá) vybavovací doba pamìti, jak se jeví programátorùm i u¾ivatelùm</li>
<li><i>T<sub>V</sub></i> je vybavovací doba vyrovnávací pamìti</li>
<li><i>T<sub>H</sub></i> je vybavovací doba operaèní pamìti</li>
<li><i>SVB</i> je hodnota souèinitele výpadku blokù</li>
<li><i>x</i> je podíl blokù zmìnìných ve vyrovnávací pamìti</li>
</ul>

<p>Pokud bude napøíklad vyrovnávací pamì» vytvoøena pomocí technologie
desetkrát rychlej¹í, ne¾ je rychlost operaèní pamìti, hodnota <i>SVB</i> bude
0,05 (pìt procent) a hodnota <i>x</i> 0,25 (jedna ètvrtina), zkrátí se prùmìrná
vybavovací doba dat na ¹estinu pùvodní hodnoty, co¾ mù¾e být uspokojivý
výsledek. Dále uva¾me, ¾e kapacita vyrovnávací pamìti je rovna jedné tisícinì
kapacity operaèní pamìti (to zhruba odpovídá dne¹nímu stavu) a cena za bit
rychlé vyrovnávací pamìti je desetinásobná oproti bì¾né DRAM. Zavedením
vyrovnávací pamìti se cena pamì»ového subsystému jako celku zvý¹ila o pouhé
jedno procento (10&times;1/1000&times;100), zatímco rychlost je ¹estkrát vy¹¹í.
Právì zde tkví dùvod velké popularity vyrovnávacích pamìtí &ndash; zvý¹ení
výkonu za relativnì malé náklady.</p>

<image id="6664" original="no" />
<p-center><i>Obrázek 6: Datová a instrukèní vyrovnávací pamì» první úrovnì u systému s&nbsp;jádrem MIPS</i></p-center>



<p><a name="k07"></a></p>
<h1>7. Literatura a odkazy na Internetu</h1>

<ol>

<li>Pavel Valá¹ek, Roman Loskot: <i>Polovodièové pamìti</i>,<br />
BEN - Technická literatura, Praha 1998, ISBN-80-86056-18-X</li>

<li>Budínský J.: <i>Polovodièové pamìti a jejich pou¾ití</i>,<br />
SNTL, Praha 1977</li>

<li>Budínský J.: <i>Polovodièové pamìti - Názvosloví a definice</i>,<br />
TESLA VÚST, Praha 1980</li>

<li>Janù K.: <i>Pamìti a øadièe - èást I.</i>,<br />
ÈSVTS, Kni¾nice mikroprocesorová technika, Praha 1982</li>

<li><i>Great Microprocessors of the Past and Present (V 13.0.0)</i></li>

<li><a href="http://www.pcguide.com/ref/mbsys/cache/funcMapping-c.html">Cache Mapping and Associativity</a></li>

<li><a href="http://en.wikipedia.org/wiki/CPU_cache">CPU cache</a></li>

<li><a href="http://en.wikipedia.org/wiki/Cache_algorithms">Cache algorithms</a></li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2008</small></p>
</body>
</html>

