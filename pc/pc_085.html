<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafická karta EGA</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafická karta EGA</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Pøi pohledu do historie vývoje osobních poèítaèù a jejich grafických systémù mù¾eme nalézt nìkolik pøelomových období. Jedním z tìchto mezníkù jsou i roky 1984 a 1985, proto¾e v jejich rozmezí vznikly jak zcela nové typy osobních poèítaèù (Apple Macintosh, Amiga, Atari ST), tak i dal¹í typ grafické karty urèené pro poèítaèe IBM PC - jedná se o kartu EGA.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Pøelomové roky 1984 a 1985</a></p>
<p><a href="#k02">2. EGA &ndash; Enhanced Graphics Adapter</a></p>
<p><a href="#k03">3. Technické parametry karty EGA</a></p>
<p><a href="#k04">4. Bloková struktura karty EGA</a></p>
<p><a href="#k05">5. Textové re¾imy grafické karty EGA</a></p>
<p><a href="#k06">6. Struktura obrazové pamìti v&nbsp;textových re¾imech</a></p>
<p><a href="#k07">7. Grafické re¾imy karty EGA</a></p>
<p><a href="#k08">8. Barvová paleta a struktura obrazové pamìti v&nbsp;grafických re¾imech</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Pøelomové roky 1984 a 1985</h2>

<p>V&nbsp;pøedchozích dvou èástech seriálu o architekturách poèítaèù jsme si
popsali první grafické karty <i>MDA</i> a <i>CGA</i> firmy IBM z&nbsp;roku
1981, které byly urèené k&nbsp;instalaci do poèítaèù IBM PC, popø.&nbsp;i do
legálnì èi ilegálnì vyrábìných klonù tìchto strojù. Kromì toho jsme se zabývali
i grafickými kartami <i>Hercules</i> a <i>Hercules Plus</i>, ve kterých jsou
umnì spojeny pøednosti karty <i>MDA</i> (práce v&nbsp;textovém re¾imu
s&nbsp;èitelnými znaky) s&nbsp;mo¾ností práce v&nbsp;monochromatickém grafickém
re¾imu s&nbsp;rozli¹ením 720&times;348 pixelù. V&nbsp;perexu dne¹ního èlánku je
napsáno, ¾e jedním z&nbsp;mezníkù v&nbsp;historii vývoje osobních poèítaèù jsou
roky 1984 a 1985. V&nbsp;prùbìhu tìchto dvou let se na trhu objevily nové typy
osobních poèítaèù; shodou okolností se jedná o poèítaèe postavené na
mikroprocesoru <i>Motorola M68000</i>. Tyto poèítaèe mìly velký vliv mj.&nbsp;i
na dal¹í vývoj poèítaèové grafiky a grafických u¾ivatelských rozhraní.</p>

<a href="http://i.iinfo.cz/images/347/pc85-1.png"><img src="http://i.iinfo.cz/images/347/pc85-1-prev.png" alt="pc85" height="231" width="370" /></a>
<p><i>Obrázek 1: Verze hry Pacman pro poèítaèe vybavené grafickou kartou CGA.
Kvùli podpoøe pouze dvou fixních barvových palet (maximálnì 4 barvy) a
neexistenci spritù je tato verze Pacmana paradoxnì hor¹í ne¾ její konverze
urèené pro osmibitové domácí poèítaèe.</i></p>

<p>Ov¹em ani firma IBM nezahálela, proto¾e její in¾enýøi navrhli nový typ
grafické karty urèený pro poèítaèe IBM PC. Tato karta byla na trh uvedena
v&nbsp;roce 1984. Jedná se o ponìkud kontroverzní grafickou kartu <i>EGA</i>
neboli <i>Enhanced Graphics Adapter</i>, její¾ technické parametry i zpùsob
pou¾ití budou popsány v&nbsp;navazujících kapitolách.</p>

<a href="http://i.iinfo.cz/images/347/pc85-2.png"><img src="http://i.iinfo.cz/images/347/pc85-2-prev.png" alt="pc85" height="231" width="370" /></a>
<p><i>Obrázek 2: Textový re¾im grafické karty CGA se znaky ulo¾enými
v&nbsp;rastru 8&times;8 pixelù sice nabízel mo¾nost definovat pro ka¾dý znak
¹estnáct barev popøedí a osm barev pozadí, ale èitelnost textu byla
v&nbsp;porovnání s&nbsp;MDA èi Herculesem hor¹í.</i></p>



<p><a name="k02"></a></p>
<h2>2. EGA &ndash; Enhanced Graphics Adapter</h2>

<p>Na grafickou kartu <i>EGA</i> se mù¾eme dívat z&nbsp;nìkolika hledisek.
Z&nbsp;pohledu firmy IBM se jednalo o výrobek, který pøesnì zapadal do její
vývojové koncepce &ndash; karta zaruèovala zpìtnou kompatibilitu jak
s&nbsp;<i>MDA</i>, tak i <i>CGA</i> (vèetnì podpory monitorù, na rozdíl od
pøí¹tì popsaného grafického adaptéru <i>VGA</i>, u kterého do¹lo ke zmìnì
rozhraní) a její nové vlastnosti i programové rozhraní pøedstavované EGA BIOSem
odpovídalo spí¹e potøebám kanceláøských aplikací a nikoli hrám (IBM PC a
posléze i PC XT bylo koncipováno pøedev¹ím jako kanceláøský poèítaè).
Z&nbsp;hlediska mnohých u¾ivatelù se jednalo spí¹e o zklamání, proto¾e karta
<i>EGA</i> nemìla nìkteré jimi oèekávané vlastnosti, napøíklad rozsáhlej¹í
barvovou paletu, existenci spritù (pou¾itelných jak ve hrách, tak i pro
zobrazení kurzoru my¹i v&nbsp;graficky orientovaných aplikacích) èi podporu pro
vìt¹í rozli¹ení v&nbsp;textových i grafických re¾imech, nehledì na urèité
rozèarování pøi porovnání karty <i>EGA</i> s&nbsp;grafickými vlastnostmi
poèítaèù Atari ST a pøedev¹ím Amig (jinými slovy &ndash; u¾ivatelé i
programátoøi oèekávali po tøech letech vývoje ponìkud více).</p>

<img src="http://i.iinfo.cz/images/347/pc85-3.png" alt="pc85" height="200" width="320" />
<p><i>Obrázek 3: Po uvedení grafické karty EGA zaèaly vznikat nové hry, které
vyu¾ívaly její nové grafické re¾imy. Zde je zobrazen snímek ze hry &bdquo;Ski
or Die&ldquo;, která pracovala v&nbsp;grafickém re¾imu s&nbsp;rozli¹ením
320&times;200 pixelù s&nbsp;vyu¾itím standardní ¹estnáctibarevné
palety.</i></p>

<p>Ov¹em z&nbsp;historického hlediska nelze grafické kartì <i>EGA</i> upøít to,
¾e pomìrnì významným zpùsobem pøispìla ke zmìnì chápání funkce PCèek &ndash;
z&nbsp;ponìkud lep¹ích psacích strojù a tabulkových kalkulátorù (nejdøíve
<i>VisiCalc</i>, pozdìji slavný <i>Lotus 1-2-3</i> &ndash; oba mimochodem
pracující v&nbsp;textovém re¾imu) se i díky této grafické kartì staly
univerzální poèítaèe, pro nì¾ zaèaly vznikat i hry s&nbsp;mnohem lep¹í
grafickou kvalitou ne¾ v&nbsp;dobách kralování <i>CGA</i>. Také aplikace
s&nbsp;grafickým u¾ivatelským rozhraním zaèaly být teprve na této kartì
skuteènì pou¾itelné &ndash; jedná se napøíklad o první CADy pro poèítaèe PC,
aplikace pro sazbu textu (<i>Ventura Publisher</i>) ale i grafická nadstavba
nad MS-DOSem &ndash; systém Microsoft Windows. První verze MS Windows sice
dokázala pracovat i s&nbsp;grafickou kartou <i>CGA</i> (jak mnozí správnì
uhodli v&nbsp;diskusi k&nbsp;pøedminulé èásti seriálu), ov¹em rozli¹ení a
barevná hloubka nabízená touto grafickou kartou byla nedostaèující; napøíklad i
poèítaè Apple Macintosh zobrazoval na monitoru vìt¹í mno¾ství pixelù ne¾ karta
<i>CGA</i> ve svém &bdquo;hi-res&ldquo; re¾imu.</p>

<img src="http://i.iinfo.cz/images/347/pc85-4.png" alt="pc85" height="200" width="320" />
<p><i>Obrázek 4: Dal¹í snímek ze hry &bdquo;Ski or Die&ldquo;.</i></p>



<p><a name="k03"></a></p>
<h2>3. Technické parametry karty EGA</h2>

<p>Grafická karta <i>EGA</i> byla ve firmì IBM navr¾ena tak, aby byla v&nbsp;co
nejvìt¹í míøe kompatibilní se svými pøedchùdkynìmi, tj.&nbsp;kartami <i>MDA</i>
i <i>CGA</i>, a to jak na programové úrovni (volání slu¾eb BIOSu, emulace
obvodu <i>Motorola MC6845</i>, vèetnì jeho øídicích registrù), tak i
z&nbsp;hlediska pou¾itelných monitorù, proto¾e k&nbsp;<i>EGA</i> bylo mo¾né po
správném nastavení pøepínaèù na zadní stranì karty pøipojit monochromatický
monitor urèený pro <i>MDA/Hercules</i>, kompozitní <i>CGA</i> monitor nebo nový
typ monitoru navr¾ený právì pro potøeby karty <i>EGA</i>. V&nbsp;pøípadì
pou¾ití monochromatického (TTL) èi kompozitního monitoru v¹ak do¹lo (logicky)
k&nbsp;degradaci mo¾ností této grafické karty, nebo» její nové re¾imy byly
vyu¾itelné pouze na novém typu monitoru &ndash; star¹í monitory postrádaly buï
mo¾nost barevného zobrazení, nebo schopnost synchronizace obrazu s&nbsp;více
ne¾ 200 obrazovými øádky a z&nbsp;toho vyplývající vy¹¹í øádkovou
frekvencí.</p>

<a href="http://i.iinfo.cz/images/347/pc85-5.png"><img src="http://i.iinfo.cz/images/347/pc85-5-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 5: Jedna z&nbsp;nejznámìj¹ích her urèených pro grafickou kartu
EGA je hra Sim City.</i></p>

<p>Programová kompatibilita s&nbsp;<i>Herculesem</i> nebyla zaji¹tìna, proto¾e
firma IBM tuto konkurenèní kartu ve své podstatì ignorovala. Kromì textových a
grafických re¾imù pøevzatých z&nbsp;pøedchozích karet se na <i>EGA</i> objevují
i ji¾ zmínìné nové grafické re¾imy; plnì osazená karta umo¾òovala rozli¹ení
640&times;350 pixelù v&nbsp;¹estnácti barvách vybíraných z&nbsp;palety 64
barev. Kapacita obrazové pamìti umístìné na této grafické kartì se pohybovala
v&nbsp;rozmezí 64&nbsp;kB a¾ 256&nbsp;kB (konkrétnì bylo mo¾né pou¾ít kapacity
64, 128, 192 a 256 kB), pøièem¾ pozdìj¹í verze byly osazeny témìø v¾dy plnou
kapacitou 256&nbsp;kB, ov¹em star¹í programy se mohly spolehnout pouze na
zmínìnou základní kapacitu 64&nbsp;kB, z&nbsp;èeho¾ také vycházely pøi
nastavování grafických re¾imù. Vzhledem k&nbsp;tomu, ¾e musely být podporovány
re¾imy s&nbsp;rùzným poètem skenovacích (obrazových) øádkù, byla øádková
frekvence rovna 15,75 kHz (pùvodní monitory pro <i>CGA</i>), 18,432 (monitory
pro <i>MDA/Hercules</i>) nebo 21,8 kHz (nové &bdquo;enhanced&ldquo; monitory)
&ndash; na <i>EGA</i> tak mù¾eme nalézt nìkolik krystalù. Snímková frekvence se
u nových grafických re¾imù nastavovala na 60Hz.</p>

<a href="http://i.iinfo.cz/images/347/pc85-6.png"><img src="http://i.iinfo.cz/images/347/pc85-6-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 6: Grafický re¾im s&nbsp;rozli¹ením 640&times;350 pixelù
v&nbsp;¹estnácti barvách pou¾itý ve høe Sim City.</i></p>



<p><a name="k04"></a></p>
<h2>4. Bloková struktura karty EGA</h2>

<p>Na grafické kartì <i>EGA</i> jsou integrovány obvody øadièe obrazovky
(<i>CRTC &ndash; Cathode Ray Tube Controller</i>), obvod ovládající pøístup do
video pamìti pøi generování obrazu (<i>sekvencér</i>), øadiè pøístupu
mikroprocesoru k&nbsp;jednotlivým bitovým rovinám (<i>GDC</i>), øadièe
barvových atributù (<i>ATC &ndash; Attribute Controller</i>) a obvod pro
pøemapování barev (<i>LUT &ndash; Look-Up Table</i>). Z&nbsp;hlediska
programátorù je dùle¾ité, ¾e tyto obvody jsou plnì konfigurovatelné, proto¾e
jsou jejich øídicí registry mapovány do oblasti I/O portù mikroprocesoru
poèítaèe. Vzhledem k&nbsp;tomu, ¾e musela být dodr¾ena zpìtná kompatibilita
s&nbsp;grafickými kartami <i>MDA</i> i <i>CGA</i>, je grafická karta <i>EGA</i>
velmi komplikovaná a její programování není v&nbsp;¾ádném pøípadì jednoduché
(pøedev¹ím kdy¾ si uvìdomíme, ¾e tento grafický adaptér ve skuteènosti
programátorùm nenabízí ¾ádné speciální grafické prostøedky jako je podpora pro
sprity, blokové pøenosy dat atd.). Napøíklad pouze pøístup k&nbsp;bitovým
rovinám je mo¾né øe¹it ètyømi rùznými zpùsoby. V&nbsp;dal¹ích kapitolách si
popí¹eme podporované textové a grafické re¾imy, které je mo¾né s&nbsp;kartou
<i>EGA</i> pou¾ívat.</p>

<img src="http://i.iinfo.cz/images/347/pc85-7.png" alt="pc85" height="200" width="320" />
<p><i>Obrázek 7: Tento screenshot jsme si ji¾ ukázali v&nbsp;pøedchozí èásti
seriálu: jedná se o hru Golden Axe spu¹tìnou v&nbsp;re¾imu kompatibility
s&nbsp;grafickou kartou EGA. Vzhledem k&nbsp;omezenému poètu barev (maximálnì
16) i barvového prostoru, ze kterého se barvy vybírají (celkem 64 odstínù) je
pøi vykreslování pou¾it dithering, který je dobøe patrný pøi zvìt¹ení
obrázku.</i></p>
 


<p><a name="k05"></a></p>
<h2>5. Textové re¾imy grafické karty EGA</h2>

<p>Grafická karta <i>EGA</i> podporuje tøi textové re¾imy, ve kterých mohou
jednotlivé znaky i jejich pozadí nabývat jedné ze ¹estnácti volitelných barev.
První re¾im zobrazuje 40 znakù na 25 textových øádcích, jedná se tedy o
èásteènou emulaci textového re¾imu karty <i>CGA</i>, ov¹em s&nbsp;tím rozdílem,
¾e ka¾dý znak je vytvoøen v&nbsp;rastru 8&times;14 pixelù, co¾ je mnohem více
èitelnìj¹í, ne¾ pùvodních 8&times;8 pixelù. Ve druhém re¾imu je mo¾né zobrazit
80 znakù na 25 textových øádcích; maska znakù má opìt velikost 8&times;14
pixelù. Tøetí textový re¾im je zcela nový a je v&nbsp;nìm mo¾né zobrazit 80
znakù na 43 textových øádcích. Ka¾dý znak je v&nbsp;tomto pøípadì vytvoøen
v&nbsp;rastru pouhých 8&times;8 pixelù. Na první pohled &bdquo;podivný&ldquo;
poèet textových øádkù byl zvolen z&nbsp;toho dùvodu, ¾e 43&times;8=344, co¾
zhruba odpovídá poètu maximálnì zobrazitelných skenovacích (obrazových) øádkù,
který je roven 350 (v&nbsp;prvních dvou re¾imech se pou¾ívá právì
25&times;14=350 obrazových øádkù).</p>

<p>Grafická karta <i>EGA</i> zavedla v&nbsp;textových re¾imech dùle¾itou
novinku &ndash; znaková sada není ulo¾ena v&nbsp;pamìti EPROM, ale pøímo
v&nbsp;obrazové pamìti, tak¾e implementace národních znakù (Husova nabodeníèka
a jejich nesèetné varianty) je velmi jednoduchá (pøesnìji øeèeno, karta
samozøejmì obsahuje základní znakovou sadu v&nbsp;pamìti ROM, dokonce
v&nbsp;nìkolika variantách, tato sada se v¹ak pøi nastavení textového re¾imu
zkopíruje do obrazové pamìti). S&nbsp;tím souvisí i mo¾nost programové zmìny
poètu obrazových øádkù pou¾itých pro vykreslení jednoho øádku textového.
V&nbsp;pøedchozím odstavci jsme si popsali re¾imy pou¾ívající 8 a 14 obrazových
øádkù na jeden textový øádek, ov¹em tuto hodnotu lze snadno zmìnit
v&nbsp;rozmezí 1&ndash;32. Èím vy¹¹í jsou znaky (a tím i textové øádky), tím
ménì textových øádkù je mo¾né na obrazovce zobrazit.</p>

<a href="http://i.iinfo.cz/images/347/pc85-8.png"><img src="http://i.iinfo.cz/images/347/pc85-8-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 8: Úvodní obrazovka známé sí»ové hry Netwars, která vyu¾ívá
¹estnáctibarevný grafický re¾im karty EGA s&nbsp;rozli¹ením 640&times;350
pixelù.</i></p>



<p><a name="k06"></a></p>
<h2>6. Struktura obrazové pamìti v&nbsp;textových re¾imech</h2>

<p>Pøi nastavení textových re¾imù je obrazová pamì» vìt¹inou mapována od adresy
<strong>b800:0000</strong> do adresy <strong>b800:7fff</strong> (opìt zde
pou¾ívám adresování typu segment:offset, proto¾e v&nbsp;dobì nejvìt¹ího
rozmachu grafické karty <i>EGA</i> vìt¹ina aplikací pracovala v&nbsp;reálném
re¾imu procesoru). Pokud je pomocí DIPù (malých pøepínaèù umístìných vedle
konektorù) karta pøepnuta tak, aby emulovala <i>MDA</i> (a vlastnì i
<i>Hercules</i>), je obrazová pamì» mapována od adresy
<strong>b000:0000</strong> do adresy <strong>b000:7fff</strong>. V&nbsp;obou
pøípadech je obrazová mapa rozdìlena do ètyø (bitových) rovin. V&nbsp;první
rovinì se nachází vlastní text, ve druhé rovinì atributy znakù, tøetí rovina je
rezervována pro znakovou sadu a ètvrtá rovina neobsahuje ¾ádné relevantní
informace.</p>

<p>Pøi nastavení textového re¾imu pomocí slu¾eb BIOSu je adaptér nakonfigurován
tak, ¾e první dvì roviny jsou zøetìzeny a aplikacím se tak jeví, jakoby byl
ka¾dý znak ulo¾en na dvou sousedních bytech ve formátu ASCII kód+barvový
atribut. Samozøejmì je mo¾né provést pøeprogramování tak, aby bylo mo¾né mìnit
znakovou sadu (tøetí bitovou rovinu) èi pouze text. Adresu prvního
vykreslovaného znaku (i atributu) lze zmìnit a provádìt tak vertikální
scrolling &ndash; programátorùm je k&nbsp;dispozici celkem 65536/80=819
textových øádkù, tj.&nbsp;cca 32 obrazovek textu pøi pou¾ití re¾imu 80&times;25
znakù (ov¹em pøi zøetìzení dvou bitových rovin pouze 16 obrazovek).</p>

<a href="http://i.iinfo.cz/images/347/pc85-9.png"><img src="http://i.iinfo.cz/images/347/pc85-9-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 9: Hra Netwars zobrazovala objekty buï jako drátové (wireframe)
modely nebo s&nbsp;vyu¾itím vyplnìných trojúhelníkù. Volba závisela pøedev¹ím
na výkonnosti poèítaèe, proto¾e vykreslování 3D scény bylo samozøejmì provádìno
programovì.</i></p>



<p><a name="k07"></a></p>
<h2>7. Grafické re¾imy karty EGA</h2>

<p>Karta <i>EGA</i> podporuje pomìrnì velké mno¾ství nových grafických re¾imù i
re¾imù urèených pro zachování kompatibility se star¹ími programy, které
vyu¾ívaly mo¾nosti karty <i>CGA</i>:</p>

<ol>

<li>Re¾im s&nbsp;rozli¹ením 320&times;200 pixelù ve ètyøech barvách &ndash;
jedná se o emulaci vícebarevného re¾imu grafické karty <i>CGA</i>.</li>

<li>Re¾im s&nbsp;rozli¹ením 640&times;200 pixelù ve dvou barvách &ndash; opìt
se jedná o emulaci, tentokrát v¹ak &bdquo;hi-res&ldquo; re¾imu grafické karty
<i>CGA</i>.</li>

<li>Re¾im s&nbsp;rozli¹ením 320&times;200 pixelù v&nbsp;¹estnácti barvách. Jde
o nový re¾im, který byl s&nbsp;úspìchem pou¾it zejména u her (Gobliins,
Lemmings, Dungeon Master, Civilizace, Golden Axe apod.)</li>

<li>Re¾im s&nbsp;rozli¹ením 640&times;200 pixelù v&nbsp;¹estnácti barvách. Pro
tento re¾im je zapotøebí alokovat pouze cca 64kB pamìti, je tedy podporován na
v¹ech kartách <i>EGA</i>.</li>

<li>Re¾im s&nbsp;rozli¹ením 640&times;350 pixelù ve ètyøech barvách. Pro tento
re¾im je zapotøebí alokovat pouze cca 56kB pamìti, bì¾í tedy na v¹ech kartách
<i>EGA</i>.</li>

<li>Re¾im s&nbsp;rozli¹ením 640&times;350 pixelù v&nbsp;¹estnácti barvách. Pro
tento re¾im je zapotøebí alokovat cca 112kB pamìti, to znamená ¾e vy¾aduje
plnohodnotnou kartu <i>EGA</i>. Na kartách s&nbsp;men¹í kapacitou obrazové
pamìti není tento re¾im dostupný. Pou¾ití &ndash; jak grafické u¾ivatelské
rozhraní mnohých aplikací (T602), tak i nìkteré hry, napøíklad Simcity
apod.</li>

</ol>

<a href="http://i.iinfo.cz/images/347/pc85-10.png"><img src="http://i.iinfo.cz/images/347/pc85-10-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 10: Netwars v&nbsp;re¾imu zobrazení vyplòovaných (solid)
objektù.</i></p>



<p><a name="k08"></a></p>
<h2>8. Barvová paleta a struktura obrazové pamìti v&nbsp;grafických re¾imech</h2>

<p>V&nbsp;nových grafických re¾imech karty <i>EGA</i> je mo¾né vybrat paletu
¹estnácti barev z&nbsp;celkových 2<sup>6</sup>=64 barev. Z&nbsp;toho vyplývá,
¾e pro ka¾dou barvovou slo¾ku byly k&nbsp;dispozici dva bity a tím pádem ètyøi
hodnoty intenzity; konkrétnì nulová intenzita, 1/3 maximální intenzity, 2/3
maximální intenzity a maximální intenzita. Rozhraní k&nbsp;monitoru zùstalo
stále digitální (TTL signály, na rozdíl od analogových barvonosných signálù
pou¾itých u pozdìj¹í karty VGA), pouze se zvý¹il poèet pou¾itých signálových
vodièù nesoucích informace o barvách pixelù.</p>

<p>Zajímavý byl v&nbsp;grafických re¾imech pøístup do obrazové pamìti, která
byla (z&nbsp;hlediska procesoru) mapována v&nbsp;adresovém rozsahu
<strong>a000:0000-a000:ffff</strong>. Obrazové (skenovací) øádky jsou sice
koneènì (!) ulo¾eny v&nbsp;lineární sekvenci (na rozdíl od grafických karet
<i>CGA</i> a <i>Herculesu</i>), ale nebyla by to IBM, aby si nevymyslela dal¹í
vlastnost, která programátorùm znepøíjemòovala ¾ivot &ndash; bitové roviny.
Barvy jednotlivých pixelù jsou toti¾ rozmístìny v&nbsp;jedné, dvou èi ètyø
bitových rovinách, které jsou mapovány na stejné adresy. Jedná se tudí¾ o
ponìkud jiný pøístup ne¾ byl pou¾itý napøíklad v&nbsp;poèítaèích <i>Amiga</i>,
u nich¾ se v¹echny bitové roviny mapovaly do adresního prostoru procesoru
souèasnì (<i>Amiga</i> ov¹em byla vybavena skuteèným 32bitovým procesorem :-).
Pro pøístup k&nbsp;jednotlivým bitovým rovinám se musely naprogramovat registry
øídicího bloku <i>GDC</i>, co¾ je pomìrnì pomalá èinnost.</p>

<p>Patrnì nejprimitivnìj¹í grafická operace &ndash; <strong>putpixel</strong>
&ndash; se tak velmi podstatným zpùsobem zkomplikovala a zpomalila
(v&nbsp;nejhor¹ím pøípadì bylo nutné provést ètyøi ètení a ètyøi zápisy do
obrazové pamìti). Na druhou stranu nìkteré jiné grafické operace bylo mo¾né
urychlit &ndash; napøíklad bylo mo¾né v&nbsp;jedné rovinì zobrazovat skrolující
text, v&nbsp;rovinì druhé a tøetí animovat obrázek a ètvrtou rovinu ponechat
pro zobrazení nehybného pozadí &ndash; v¹e záviselo pouze na nastavení vhodné
barvové palety, proto¾e výsledná barva pixelù byla získána na základì hodnot
ulo¾ených ve v¹ech rovinách &bdquo;pod sebou&ldquo;. Dùvod, proè nebylo mo¾né
v¹echny bitové roviny namapovat souèasnì do adresního prostoru procesoru, je
jednoduchý &ndash; v&nbsp;reálném re¾imu mohl procesor adresovat pouze 1 MB
pamìti (+necelých 64 kB nad tímto limitem), pøièem¾ 640 kB bylo rezervováno pro
potøeby operaèního systému a aplikací (proto¾e 640 kB pøece staèí ka¾dému, ¾e)
a do zbylých 384 kB se mapoval samotný BIOS, obrazová pamì» grafické karty,
buffery sí»ových karet, NetBIOS, stránky pamìti EMS atd. Z&nbsp;tìchto dùvodù
mohly grafické karty vyu¾ívat pouze 128 kB adresního prostoru, pøièem¾ ve v¹ech
standardních grafických re¾imech se pou¾ívalo maximálnì 64 kB a bylo tedy nutné
do tohoto rozsahu mapovat celou video pamì», která mohla mít u karty <i>EGA</i>
velikost a¾ 256 kB.</p>

<a href="http://i.iinfo.cz/images/347/pc85-11.png"><img src="http://i.iinfo.cz/images/347/pc85-11-prev.png" alt="pc85" height="202" width="370" /></a>
<p><i>Obrázek 11: Pomìrnì velká èást aplikací podporujících grafickou kartu EGA
neprovádìla pøenastavení barev v&nbsp;barvové paletì. Jednou z&nbsp;výjimek je
napøíklad známý textový editor T602, který pro svoje úèely (pozadí textu a
barvu písma) barevnou paletu modifikoval.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>Support/peripheral/other chips - 6800 family<br />
<a href="http://www.cpu-world.com/Support/6800.html">http://www.cpu-world.com/Support/6800.html</a>
</li>

<li>Motorola 6845<br />
<a href="http://en.wikipedia.org/wiki/Motorola_6845">http://en.wikipedia.org/wiki/Motorola_6845</a>
</li>

<li>The 6845 Cathode Ray Tube Controller (CRTC)<br />
<a href="http://www.tinyvga.com/6845">http://www.tinyvga.com/6845</a>
</li>

<li>IBM Monochrome Display Adapter<br />
<a href="http://en.wikipedia.org/wiki/Monochrome_Display_Adapter">http://en.wikipedia.org/wiki/Monochrome_Display_Adapter</a>
</li>

<li>Color Graphics Adapter<br />
<a href="http://en.wikipedia.org/wiki/Color_Graphics_Adapter">http://en.wikipedia.org/wiki/Color_Graphics_Adapter</a>
</li>

<li>Wikipedia CZ: Sbìrnice:<br />
<a href="http://cs.wikipedia.org/wiki/Sb%C4%9Brnice">http://cs.wikipedia.org/wiki/Sb%C4%9Brnice</a></li>

<li>Wikipedia EN: Industry Standard Architecture:<br />
<a href="http://en.wikipedia.org/wiki/Industry_Standard_Architecture">http://en.wikipedia.org/wiki/Industry_Standard_Architecture</a></li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

