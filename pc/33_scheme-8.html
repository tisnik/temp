<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Skriptování v GIMPu 5 &ndash; textové objekty a cesty</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Skriptování v GIMPu 5 &ndash; textové objekty a cesty</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti èlánku o programovacím jazyku Scheme o a zpùsobech jeho vyu¾ití ve známém grafickém editoru GIMP si uká¾eme, jakým zpùsobem je mo¾né ve skriptech pracovat s textovými objekty a cestami. Díky podpoøe cest lze v GIMPu, i kdy¾ se jedná o rastrový editor, pracovat i s vektorovými objekty.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Práce s&nbsp;textovými objekty v&nbsp;GIMPu</a></p>
<p><a href="#k02">2. Vytvoøení textového objektu pomocí skriptu</a></p>
<p><a href="#k03">3. První demonstraèní pøíklad &ndash; vypsání textu do obrázku</a></p>
<p><a href="#k04">4. Druhý demonstraèní pøíklad &ndash; interaktivní nastavení vlastností textového objektu</a></p>
<p><a href="#k05">5. Cesty v&nbsp;grafickém editoru GIMP</a></p>
<p><a href="#k06">6. Pou¾ití cest v&nbsp;GIMPu</a></p>
<p><a href="#k07">7. Základní vlastnosti Bézierových køivek</a></p>
<p><a href="#k08">8. Obsah následující èásti seriálu</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Práce s&nbsp;textovými objekty v&nbsp;GIMPu</h2>

<p>V&nbsp;pøedchozích tøech èástech seriálu o tvorbì skriptù pro známý rastrový
grafický editor <i>GIMP</i> jsme si kromì dal¹ích informací popsali i práci
s&nbsp;výbìry (<i>selections</i>); napøíklad jsme si ukázali, jak lze výbìry
vytváøet pøímo ve skriptech s&nbsp;vyu¾itím základních geometrických tvarù
(elipsy/kru¾nice a obdélníka/ètverce) a mno¾inových operací (sjednocení dvou
mno¾in, doplòku mno¾in a inverze mno¾iny). Také jsme si øekli, jakým zpùsobem
se ve skriptech pracuje s&nbsp;vrstvami neboli hladinami (<i>layers</i>).
S&nbsp;výbìry i hladinami v¹ak pomìrnì úzce souvisí i problematika práce
s&nbsp;takzvanými textovými objekty, s&nbsp;jejich¾ vyu¾itím je mo¾né do
editovaných obrázkù vykreslovat textové øetìzce, vytváøet výbìry, jejich¾ tvar
je odvozen z&nbsp;tvarù znakù ve fontu, pøevádìt texty na cesty (<i>paths</i>)
atd.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-1.png"><img src="http://i.iinfo.cz/images/8/33scheme5-1-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 1: Po zvolení nástroje pro psaní textù se v&nbsp;obrázku vytvoøí
nová hladina nesoucí v¹echny potøebné metainformace o vytvoøeném textu.
S&nbsp;touto hladinou je posléze mo¾né provádìt mno¾ství dal¹ích
operací.</i></p>

<p>Grafický editor <i>GIMP</i> obsahuje od své verze 2.0 nástroj pro vytvoøení
textového objektu, na nìj¾ se mù¾eme z&nbsp;u¾ivatelského hlediska dívat jako
na zvlá¹tní typ hladiny vytvoøené ve chvíli zápisu textového øetìzce do
dialogového okna. Textová hladina se li¹í od bì¾ných &bdquo;rastrových&ldquo;
hladin (nesoucích informace o barvách jednotlivých pixelù) pøedev¹ím v&nbsp;tom
ohledu, ¾e jsou v&nbsp;ní ulo¾eny v¹echny potøebné metainformace o zapsaném
textu. Napøíklad se jedná o font vybraný u¾ivatelem ve speciálním dialogu,
zvolenou velikost tohoto fontu, zpùsob zarovnání textu, smìr psaní textu atd.
Tyto informace mohou být kdykoli u¾ivatelem (a samozøejmì i skriptem) zmìnìny,
co¾ se ihned projeví na vizuální podobì vypsaného textu.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-2.png"><img src="http://i.iinfo.cz/images/8/33scheme5-2-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 2: Textový objekt lze pøevést napøíklad na výbìr a poté
s&nbsp;tímto výbìrem provádìt v¹echny operace, které je mo¾né aplikovat i na
výbìry vytvoøené jinými prostøedky grafického editoru GIMP.</i></p>

<p>Teprve ve chvíli, kdy je textová hladina zru¹ena, napøíklad kvùli svému
spojení (<i>merge</i>) s&nbsp;jinou hladinou, jsou ztraceny i v¹echny
metainformace o textu, z&nbsp;nìho¾ se tak stane &bdquo;pouze&ldquo; mno¾ství
obarvených pixelù. S&nbsp;textovým objektem je v¹ak mo¾né provádìt i nìkteré
dal¹í operace, napøíklad pøevod textu na výbìr (<i>selection</i>) èi
transformaci textu na cestu (<i>path</i>). Díky tomu je napøíklad mo¾né
provádìt rùzné deformace textu nikoli na úrovni rastrového obrázku (pøi nich¾
by docházelo ke ztrátì informace), ale na úrovni vektorového popisu textu, co¾
je problematika, kterou se budeme podrobnìji zabývat ve druhé polovinì dne¹ního
èlánku.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-3.png"><img src="http://i.iinfo.cz/images/8/33scheme5-3-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 3: Textový objekt po svém pøevedení na výbìr (selection) a
následném zobrazení výbìru v&nbsp;re¾imu rychlé masky (Quick Mask) vyvolaného
buï z&nbsp;menu nebo klávesovou zkratkou Shift+Q.</i></p>



<p><a name="k02"></a></p>
<h2>2. Vytvoøení textového objektu pomocí skriptu</h2>

<p>V&nbsp;této kapitole si øekneme, jakým zpùsobem je mo¾né textový objekt
vytvoøit pomocí skriptu a jak lze následnì tento objekt vykreslit do aktivní
(vybrané) hladiny. Pro tyto úèely jsou v&nbsp;aplikaèním programovém rozhraní
(API) grafického editoru <i>GIMP</i> vyhrazeny dvì funkce. První z&nbsp;tìchto
funkcí, je¾ se jmenuje <strong>gimp-text-fontname</strong>, slou¾í
k&nbsp;vlastnímu vytvoøení textového objektu &ndash; ten lze vytvoøit buï ve
formì nové textové hladiny (s&nbsp;vlastnostmi popsanými v&nbsp;pøedchozí
kapitole) nebo ve formì takzvaného plovoucího výbìru (<i>floating
selection</i>). V&nbsp;pøípadì, ¾e je textový objekt vytvoøen ve formì výbìru,
lze ho &bdquo;uchytit&ldquo; do vybrané hladiny pomocí funkce
<strong>gimp-floating-sel-anchor</strong>. Po provedení této dvojice funkcí je
text vykreslen (rozrastrován) do vybrané hladiny.</p>

<img src="http://i.iinfo.cz/images/8/33scheme5-4.png" width="452" height="525" alt=" " />
<p><i>Obrázek 4: Nový plnobarevný (truecolor) obrázek o rozmìrech 400&times;400
pixelù vytvoøený pøímo v&nbsp;GIMPu, který bude pou¾it pro otestování
funkcionality prvního demonstraèního pøíkladu.</i></p>

<p>Zatímco se funkci <strong>gimp-floating-sel-anchor</strong> pøedává pouze
plovoucí výbìr, který se má ukotvit v&nbsp;aktivní hladinì, je poèet parametrù
funkce <strong>gimp-text-fontname</strong> mnohem vy¹¹í, co¾ je ostatnì patrné
pøi pohledu na následující tabulku, v&nbsp;ní¾ jsou parametry této funkce
popsány:</p>

<table>
<tr><th>Poøadí parametru</th><th>Význam</th></tr>
<tr><td> 1</td><td>identifikátor obrázku, v&nbsp;nìm¾ se má textový objekt vytvoøit</td></tr>
<tr><td> 2</td><td>identifikátor hladiny v&nbsp;pøípadì, ¾e se textový objekt vytváøí ve formì plovoucího výbìru</td></tr>
<tr><td> 3</td><td>x-ová souøadnice poèátku textového objektu</td></tr>
<tr><td> 4</td><td>y-ová souøadnice poèátku textového objektu</td></tr>
<tr><td> 5</td><td>vlastní text, který se má vykreslit</td></tr>
<tr><td> 6</td><td>¹íøka okraje</td></tr>
<tr><td> 7</td><td>povolení èi zákaz antialiasingu</td></tr>
<tr><td> 8</td><td>velikost textu zadaná buï v&nbsp;bodech nebo pixelech</td></tr>
<tr><td> 9</td><td>volba jednotek, v&nbsp;nich¾ je specifikovaná velikost textu (body, pixely)</td></tr>
<tr><td>10</td><td>jméno fontu, který se má pou¾ít pro vytvoøení textového objektu</td></tr>
</table>

<img src="http://i.iinfo.cz/images/8/33scheme5-5.png" width="452" height="525" alt=" " />
<p><i>Obrázek 5: Po spu¹tìní prvního demonstraèního pøíkladu se do obrázku
(pøesnìji øeèeno do jeho aktivní hladiny) vykreslí text zvolenou
barvou.</i></p>



<p><a name="k03"></a></p>
<h2>3. První demonstraèní pøíklad &ndash; vypsání textu do obrázku</h2>

<p>První demonstraèní pøíklad po svém spu¹tìní vytvoøí v&nbsp;aktivním obrázku
a ve vybrané hladinì plovoucí výbìr s&nbsp;textem a následnì tento výbìr
v&nbsp;hladinì ukotví, èím¾ dojde k&nbsp;vykreslení textu. U¾ivatel pøitom
nemusí specifikovat ¾ádné parametry, proto¾e v¹echny potøebné parametry
vy¾adované funkcí <strong>gimp-text-fontname</strong> jsou ve skriptu ulo¾eny
ve formì konstant, tak¾e je první demonstraèní pøíklad z&nbsp;tohoto hlediska
pomìrnì jednoduchý:</p>

<pre>
; Skriptování v GIMPu (páté pokraèování)
; Demonstraèní pøíklad èíslo 1

(define (script-fu-text-demo
                             selected-image
                             selected-layer
                             )

    (define (create-text-object selected-image selected-layer)
        (car (gimp-text-fontname
            selected-image ; obrázek, do kterého se má text vykreslit
            selected-layer ; hladina pro vytvoøení textového objektu
            5 150          ; souøadnice, na nì¾ se textový objekt vlo¾í
            "www.root.cz"  ; text, který se má vykreslit
            0              ; ¹íøka okraje
            1              ; povolení antialiasingu
            64             ; velikost textu
            0              ; jednotky pro zadání velikosti: pixely
            "Sans"         ; jméno fontu
            )))

    ; vlo¾ení znaèky zaèátku skupiny operací, které mohou
    ; být vráceny jediným pøíkazem UNDO (CTRL+Z)
    (gimp-undo-push-group-start selected-image)

    ; vytvoøení a následné uchycení textového objektu
    (gimp-floating-sel-anchor (create-text-object selected-image selected-layer))

    ; ukonèení skupiny operací, které mohou
    ; být vráceny jediným pøíkazem UNDO (CTRL+Z)
    (gimp-undo-push-group-end selected-image)

    ; pøinutíme GIMP, aby finální obrázek pøekreslil
    (gimp-displays-flush)
)

; základní informace o skriptu a definice dialogu
; zobrazeného u¾ivateli
(script-fu-register
    "script-fu-text-demo"
    "Text demo"
    "Basic manipulation with the text object"
    "Pavel Tisnovsky"
    "Pavel Tisnovsky"
    "2010-06-01"
    "RGB*, GRAY*"
    SF-IMAGE    "Image"         0
    SF-DRAWABLE "Layer"         0
)

; registrace skriptu do menu
(script-fu-menu-register "script-fu-text-demo"
                         "&lt;Image&gt;/Root.cz")

; finito
</pre>

<img src="http://i.iinfo.cz/images/8/33scheme5-6.png" width="452" height="526" alt=" " />
<p><i>Obrázek 6: GIMP plnì podporuje kódování UTF-8, tak¾e je mo¾né pracovat
jak s&nbsp;èeskými znaky, tak i s&nbsp;øeckou abecedou èi azbukou.</i></p>



<p><a name="k04"></a></p>
<h2>4. Druhý demonstraèní pøíklad &ndash; interaktivní nastavení vlastností textového objektu</h2>

<p>Druhý skript, který si v&nbsp;dne¹ním èlánku popí¹eme a uká¾eme, vychází
z&nbsp;prvního demonstraèního pøíkladu, od kterého se v¹ak v&nbsp;nìkolika
ohledech odli¹uje; pøedev¹ím existencí dialogu zobrazeného po spu¹tìní skriptu,
v&nbsp;nìm¾ je mo¾né zadat nìkteré parametry vykreslovaného textu. Jedná se
napøíklad o výbìr fontu (po stisku pøíslu¹ného tlaèítka se zobrazí nový dialog
s&nbsp;náhledem v¹ech fontù dostupných <i>GIMPu</i>), volbu velikosti písma,
povolení èi zákaz antialiasingu (zahlazování hran znakù) pøi vykreslování a
nakonec i ¹íøku okraje textového objektu. Do pøíslu¹ného textového øádku lze
samozøejmì vepsat i text, který se má vykreslit. V¹echny u¾ivatelem zadané
parametry jsou pøedány do skriptu, v&nbsp;nìm¾ jsou vyu¾ity pøi volání vý¹e
popsané funkce <strong>gimp-text-fontname</strong>.</p>

<img src="http://i.iinfo.cz/images/8/33scheme5-7.png" width="374" height="299" alt=" " />
<p><i>Obrázek 7: Dialog zobrazený po spu¹tìní druhého demonstraèního
pøíkladu</i></p>

<p>Následuje výpis zdrojového kódu druhého demonstraèního pøíkladu:</p>

<pre>
; Skriptování v GIMPu (páté pokraèování)
; Demonstraèní pøíklad èíslo 2

(define (script-fu-text-demo2
                             selected-image
                             selected-layer
                             input-text
                             selected-font
                             text-size
                             antialias
                             border-size
                             )

    (define (create-text-object selected-image selected-layer
             antialias text-size border-size input-text selected-font)
        (car (gimp-text-fontname
            selected-image ; obrázek, do kterého se má text vykreslit
            selected-layer ; hladina pro vytvoøení textového objektu
            5 150          ; souøadnice, na nì¾ se textový objekt vlo¾í
            input-text     ; text, který se má vykreslit
            border-size    ; ¹íøka okraje
            antialias      ; povolení antialiasingu
            text-size      ; velikost textu
            0              ; jednotky pro zadání velikosti: pixely
            selected-font  ; jméno fontu
            )))

    ; vlo¾ení znaèky zaèátku skupiny operací, které mohou
    ; být vráceny jediným pøíkazem UNDO (CTRL+Z)
    (gimp-undo-push-group-start selected-image)

    ; vytvoøení a následné uchycení textového objektu
    (gimp-floating-sel-anchor (create-text-object selected-image selected-layer
        antialias text-size border-size input-text selected-font))

    ; ukonèení skupiny operací, které mohou
    ; být vráceny jediným pøíkazem UNDO (CTRL+Z)
    (gimp-undo-push-group-end selected-image)

    ; pøinutíme GIMP, aby finální obrázek pøekreslil
    (gimp-displays-flush)
)

; základní informace o skriptu a definice dialogu
; zobrazeného u¾ivateli
(script-fu-register
    "script-fu-text-demo2"
    "Text demo 2"
    "Basic manipulation with the text object"
    "Pavel Tisnovsky"
    "Pavel Tisnovsky"
    "2010-06-01"
    "RGB*, GRAY*"
    SF-IMAGE      "Image"        0
    SF-DRAWABLE   "Layer"        0
    SF-STRING     "Text"         "www.root.cz"
    SF-FONT       "Font"         "Sans"
    SF-ADJUSTMENT "Text size"    '(10 1 300 1 10 0 0)
    SF-TOGGLE     "Antialias"    TRUE
    SF-ADJUSTMENT "Border size"  '(0 1 100 1 10 0 0)
)

; registrace skriptu do menu
(script-fu-menu-register "script-fu-text-demo2"
                         "&lt;Image&gt;/Root.cz")

; finito
</pre>

<img src="http://i.iinfo.cz/images/8/33scheme5-8.png" width="253" height="319" alt=" " />
<p><i>Obrázek 8: Výbìr fontu z&nbsp;formuláøe vyvolaného z&nbsp;úvodního
dialogu druhého demonstraèního pøíkladu.</i></p>

<img src="http://i.iinfo.cz/images/8/33scheme5-9.png" width="453" height="527" alt=" " />
<p><i>Obrázek 9: Obrázek vykreslený druhým demonstraèním pøíkladem.</i></p>



<p><a name="k05"></a></p>
<h2>5. Cesty v&nbsp;grafickém editoru GIMP</h2>

<p>Dal¹ím u¾iteèným a zajímavým typem objektù, které se pou¾ívají
v&nbsp;rastrovém grafickém editoru <i>GIMP</i> a s&nbsp;nimi¾ se v&nbsp;dne¹ním
èlánku alespoò v&nbsp;krátkosti seznámíme, jsou takzvané <i>cesty</i>
(<i>paths</i>). Cesta je vektorový grafický objekt, tj.&nbsp;objekt popsaný
geometrickými atributy, nikoli mno¾inou pixelù, slo¾ený z&nbsp;libovolného
mno¾ství takzvaných segmentù, které na sebe vìt¹inou navazují svými koncovými
body. Ka¾dý segment je pøedstavovaný buï úseèkou nebo Bézierovou køivkou,
jejich¾ základní vlastnosti budou zmínìny v&nbsp;navazující kapitole. Cesta
mù¾e být buï otevøená (jedná se tedy o lomenou èáru nebo køivku) nebo uzavøená
&ndash; v&nbsp;tomto pøípadì je koncový bod posledního segmentu toto¾ný
s&nbsp;poèáteèním bodem segmentu prvního.</p>

<img src="http://i.iinfo.cz/images/8/33scheme5-10.png" width="231" height="246" alt=" " />
<p><i>Obrázek 10: Ètyøi varianty cest vytvoøených v&nbsp;GIMPu: otevøená cesta
tvoøená polyèárou (lomenou èarou), uzavøená cesta ve tvaru polygonu, uzavøená
cesta tvoøená pouze Bézierovými køivkami a uzavøená cesta tvoøená jak
úseèkovými segmenty, tak i segmenty slo¾enými z&nbsp;Bézierových
køivek.</i></p>

<p>Cesty lze v&nbsp;grafickém editoru <i>GIMP</i> vytvoøit nìkolika rùznými
zpùsoby &ndash; speciálním nástrojem pro rýsování cest (tento nástroj se
vyvolává buï ikonou umístìnou na nástrojovém panelu, z&nbsp;menu nebo
klávesovou zkratkou <strong>B</strong>), dále pak transformací textového
objektu na cestu èi, co¾ je mo¾ná nejzajímavìj¹í, transformací výbìru
(<i>selection</i>) na cestu. V&nbsp;posledním pøípadì vlastnì <i>GIMP</i> musí
provádìt vektorizaci rastrových dat na vektorové objekty spolu
s&nbsp;optimalizací výsledné cesty tak, aby obsahovala co nejmen¹í mno¾ství
segmentù a souèasnì s&nbsp;dostateènou pøesností aproximovala pùvodní tvar
výbìru.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-11.png"><img src="http://i.iinfo.cz/images/8/33scheme5-11-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 11: Vytvoøení výbìru pomocí nástrojù pro definici eliptické a
obdélníkové oblasti s&nbsp;prùbì¾nou aplikací mno¾inové operace
sjednocení.</i></p>



<p><a name="k06"></a></p>
<h2>6. Pou¾ití cest v&nbsp;GIMPu</h2>

<p>V&nbsp;èem spoèívá význam a zajímavost cest? Cesty jsou pomìrnì u¾iteèné
napøíklad pøi kreslení rùzných znaèek, log, jednoduchých geometrických obrazcù
ale i slo¾itìj¹ích tvarù, proto¾e se jedná o jediný typ vektorových objektù, se
kterými je mo¾né v&nbsp;grafickém editoru <i>GIMP</i> pracovat, samozøejmì se
v¹emi výhodami, které nám vektorový popis nabízí oproti popisu rastrovému.
Interní reprezentace cest je pamì»ovì velmi efektivní (cesty slo¾ené
z&nbsp;nìkolika segmentù jsou ulo¾eny doslova na nìkolika bajtech), lze
s&nbsp;nimi beze ztráty kvality provádìt mno¾ství geometrických transformací,
vèetnì otáèení a zmìny mìøítka, koncové body segmentù a øídicí body Bézierových
køivek lze pøesouvat po plo¹e obrázku atd. Navíc mohou u¾ivatelùm pøi kreslení
pomoci takzvané úchyty, které se vytváøí vyta¾ením z&nbsp;levého a horního
okraje obrázku.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-12.png"><img src="http://i.iinfo.cz/images/8/33scheme5-12-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 12: Pøevod výbìru (zobrazeného na jedenáctém obrázku) na
cestu.</i></p>

<p>Cesty lze dále vykreslit pøíkazem <i>Stroke Path</i>, pøièem¾ je mo¾né
detailnì zvolit, jakým zpùsobem bude cesta vykreslena: napøíklad èárkovanou
køivkou, s&nbsp;vyu¾itím vybraného ¹tìtce, rozpra¹ovaèe atd. Ov¹em cestu lze
takté¾ pøevést na výbìr (<i>selection</i>) pøíkazem <i>Select/From Path</i>
(klávesová zkratka <strong>Shift+V</strong>) a následnì tento výbìr pou¾ít pro
vyplnìní èásti obrázku, oøez obrázku atd. Poznámka: pøi pøevodu cesty na výbìr
se pùvodnì otevøená cesta (lomená èára, køivka) v¾dy automaticky uzavøe.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-13.png"><img src="http://i.iinfo.cz/images/8/33scheme5-13-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 13: Dialog zobrazený pøi vyvolání pøíkazu pro vykreslení cesty.
V&nbsp;pozadí lze vidìt ji¾ vykreslenou cestu a pomocné úchyty (modré èárkované
úseèky) pou¾ité pøi pøesném umis»ování koncových bodù segmentù, ze kterých se
cesta skládá.</i></p>



<p><a name="k07"></a></p>
<h2>7. Základní vlastnosti Bézierových køivek</h2>

<p>Bézierovy køivky, které lze v&nbsp;grafickém editoru <i>GIMP</i> pou¾ít pro
vytváøení segmentù cest, patøí v&nbsp;poèítaèové grafice mezi jedny
z&nbsp;nejpou¾ívanìj¹ích typù parametrických (aproximaèních) køivek. Jsou toti¾
velmi jednoduché jak na vytváøení a editaci (tj.&nbsp;nepøiná¹í ¾ádné vìt¹í
komplikace pro u¾ivatele), tak i velmi rychlé pøi vykreslování, co¾ je výhoda
pro programátora, nebo pro hardwarovou implementaci vykreslování (to se projeví
napøíklad i v&nbsp;rychlej¹ím RIPování PostScriptových souborù). Bézierovy
køivky stupnì dvì a tøi, tj.&nbsp;kvadriky a kubiky, jsou pou¾ity v&nbsp;mnoha
aplikacích a technologiích, vèetnì PostScriptu a PostScriptových fontù (kubické
køivky), TrueType fontù (kvadratické køivky), formátech aplikace
<i>Inkscape</i>, <i>CorelDraw!</i>, <i>Adobe Illustrator</i> i ve
&bdquo;vektorovém&ldquo; XML formátu <i>SVG &ndash; Scalable Vector
Graphics</i>, který je mimochodem v&nbsp;nových verzích <i>GIMPu</i> pøi práci
s&nbsp;cestami podporován (resp.&nbsp;v&nbsp;nìm existuje podpora pro naèítání
cest ulo¾ených v&nbsp;<i>SVG</i>, nikoli plnohodnotná práce se v¹emi objekty,
animacemi a skripty, které je mo¾né ve formátu <i>SVG</i> ukládat).</p>

<img src="http://i.iinfo.cz/images/8/33scheme5-14.png" width="400" height="300" alt=" " />
<p><i>Obrázek 14: Kubická Bézierova køivka definovaná pomocí ètveøice øídicích
bodù. Tento typ køivky v¾dy prochází prvním a posledním øídicím bodem, ostatní
body urèují její tvar a køivka jimi obecnì neprochází.</i></p>

<p><i>Bézierova køivka</i> obecnì prochází pouze svým prvním a posledním bodem
(jedná se o takzvané kotvicí body), ostatní body pouze ovlivòují výsledný tvar
køivky &ndash; jde tedy o aproximaèní køivky, i kdy¾ je lze po programových
výpoètech pou¾ít i pro interpolaci. Ve speciálních pøípadech v¹ak køivka mù¾e
procházet i dal¹ími (øídicími) body, napøíklad tehdy, kdy¾ v¹echny body le¾í na
jedné pøímce. Pomocí prvního bodu (kotvicího) a druhého bodu (øídicího)
<i>P<sub>0</sub></i> a <i>P<sub>1</sub></i> se urèuje teèný vektor na zaèátku
køivky. Pøedposlední bod (øídicí) a poslední bod (kotvicí)
<i>P<sub>n-1</sub></i> a <i>P<sub>n</sub></i> zase urèují teèný vektor na konci
køivky. Této vlastnosti se velmi èasto vyu¾ívá pøi hladkém navazování
Bézierových køivek, typicky i v&nbsp;PostScriptu pøi tvorbì cest èi obrysù
fontù. Samozøejmì je také mo¾né hladce navázat Bézierovu køivku na úseèku èi
kruhový oblouk &ndash; v&nbsp;<i>GIMPu</i> jsou v¹ak, jak ji¾ víme, podporovány
pouze cesty, které se skládají z&nbsp;úseèkových segmentù a ze segmentù
pøedstavovaných Bézierovými køivkami.</p>

<img src="http://i.iinfo.cz/images/8/33scheme5-15.png" width="433" height="540" alt=" " />
<p><i>Obrázek 15: Rùzné tvary Bézierových kubických køivek vytvoøených
v&nbsp;PostScriptu a vykreslených v&nbsp;programovém prohlí¾eèi PostScriptových
souborù. V&nbsp;pravé èásti PostScriptového dokumentu je zobrazena cesta
vytvoøená z&nbsp;nìkolika segmentù Bézierových kubických køivek.</i></p>

<p>V&nbsp;poèítaèové grafice patøí mezi nejpou¾ívanìj¹í typ parametrických
køivek Bézierovy kubické køivky, jejich¾ podporu nabízí témìø jakýkoli
vyspìlej¹í program pracující s&nbsp;vektorovou grafikou &ndash; jedná se opìt o
ji¾ zmiòovaný <i>Inkscape</i>, <i>CorelDraw!</i>, <i>Adobe Illustrator</i>,
<i>OpenOffice Draw</i> a samozøejmì té¾ grafický editor <i>GIMP</i>.
U&nbsp;systémù CAD a CAM je situace slo¾itìj¹í, proto¾e tam si své místo na¹ly
<i>B-splajny</i> a <i>NURBS</i>, tj.&nbsp;odli¹né a v&nbsp;nìkolika ohledech
slo¾itìj¹í typy køivek. Av¹ak i v&nbsp;tìchto programech se Bézierovy kubické
køivky èasto pou¾ívají, minimálnì pøi práci s&nbsp;PostScriptovými fonty.
Bézierovy kubické køivky jsou zadány pomocí ètyø bodù v&nbsp;plo¹e èi prostoru.
Køivka pøitom prochází prvním a posledním (kotvicím) bodem, druhý a tøetí bod
(øídicí) urèuje teèné vektory na zaèátku a konci køivky. Køivka tedy druhým a
tøetím øídicím bodem obecnì neprochází &ndash; viz té¾ obrázek èíslo 14.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-16.png"><img src="http://i.iinfo.cz/images/8/33scheme5-16-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 16: Vytvoøení Bézierovy kubické køivky v&nbsp;grafickém editoru
GIMP pomocí nástroje pro tvorbu cest. Aktivní koncový bod je zvýraznìn
mezikru¾ím (pravá èást obrázku), z&nbsp;øídicího bodu vychází teèný vektor, na
jeho¾ konci se nachází øídicí bod Bézierovy køivky.</i></p>



<p><a name="k08"></a></p>
<h2>8. Obsah následující èásti seriálu</h2>

<p>V&nbsp;následující èásti èlánku o programovacím jazyku Scheme o a rùzných
zpùsobech jeho vyu¾ití ve známém grafickém editoru <i>GIMP</i> si na nìkolika
demonstraèních pøíkladech uká¾eme, jak je mo¾né s&nbsp;vyu¾itím cest
vykreslovat rùzné geometrické objekty, pøevádìt textové vrstvy na cesty
s&nbsp;následnou úpravou tvarù jednotlivých znakù a na závìr se zmíníme o
základech práce s&nbsp;grafickým formátem <i>SVG</i> v&nbsp;<i>GIMPu</i>.</p>

<a href="http://i.iinfo.cz/images/8/33scheme5-17.png"><img src="http://i.iinfo.cz/images/8/33scheme5-17-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 17: Pøevedení textové hladiny na cestu.</i></p>

<a href="http://i.iinfo.cz/images/8/33scheme5-18.png"><img src="http://i.iinfo.cz/images/8/33scheme5-18-prev.png" width="370" height="217" alt=" " /></a>
<p><i>Obrázek 18: Vykreslení cesty vytvoøené konverzí z&nbsp;textové hladiny.
Pøi vykreslení se nejprve pou¾il nástroj tu¾ka o ¹íøce dvou pixelù a posléze
nástroj ¹tìtec s&nbsp;kruhovou stopou a simulací dynamiky kreslení.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>Odstranìní ¹umu<br />
<a href="http://cs.wikipedia.org/wiki/Odstran%C4%9Bn%C3%AD_%C5%A1umu">http://cs.wikipedia.org/wiki/Odstran%C4%9Bn%C3%AD_%C5%A1umu</a>
</li>

<li>Detekce hran<br />
<a href="http://cs.wikipedia.org/wiki/Detekce_hran">http://cs.wikipedia.org/wiki/Detekce_hran</a>
</li>

<li>Konvoluce<br />
<a href="http://cs.wikipedia.org/wiki/Konvoluce">http://cs.wikipedia.org/wiki/Konvoluce</a>
</li>

<li>Starry sky<br />
<a href="http://www.td-e.com/soft/starry-sky.php">http://www.td-e.com/soft/starry-sky.php</a>
</li>

<li>A Script-Fu Tutorial<br />
<a href="http://www.linuxtopia.org/online_books/graphics_tools/gimp_user_manual/en/gimp-using-script-fu-tutorial.html">http://www.linuxtopia.org/online_books/graphics_tools/gimp_user_manual/en/gimp-using-script-fu-tutorial.html</a>
</li>

<li>A Script-Fu Tutorial<br />
<a href="http://docs.gimp.org/en/gimp-using-script-fu-tutorial.html">http://docs.gimp.org/en/gimp-using-script-fu-tutorial.html</a>
</li>

<li>Script-fu Tutorial<br />
<a href="http://www.seul.org/~grumbel/gimp/script-fu/script-fu-tut.html">http://www.seul.org/~grumbel/gimp/script-fu/script-fu-tut.html</a>
</li>

<li>Lambda calculus<br />
<a href="http://en.wikipedia.org/wiki/Lambda_calculus">http://en.wikipedia.org/wiki/Lambda_calculus</a>
</li>

<li>A Short Introduction to the Lambda Calculus<br />
<a href="http://www.cs.bham.ac.uk/~axj/pub/papers/lambda-calculus.pdf">http://www.cs.bham.ac.uk/~axj/pub/papers/lambda-calculus.pdf</a>
</li>

<li>A Tutorial Introduction to the Lambda Calculus<br />
<a href="http://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf">http://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf</a>
</li>

<li>(welcome '(schemers . org))<br />
<a href="http://www.schemers.org/">http://www.schemers.org/</a>
</li>

<li>Revised<sup>5</sup> Report on the Algorithmic Language Scheme<br />
<a href="http://www.schemers.org/Documents/Standards/R5RS/">http://www.schemers.org/Documents/Standards/R5RS/</a>
</li>

<li>The Revised<sup>6</sup> Report on the Algorithmic Language Scheme<br />
<a href="http://www.r6rs.org/">http://www.r6rs.org/</a>
</li>

<li>Scheme<br />
<a href="http://groups.csail.mit.edu/mac/projects/scheme/">http://groups.csail.mit.edu/mac/projects/scheme/</a>
</li>

<li>The Kawa language framework<br />
<a href="http://www.gnu.org/software/kawa/">http://www.gnu.org/software/kawa/</a>
</li>

<li>Scheme 48<br />
<a href="http://s48.org/">http://s48.org/</a>
</li>

<li>Introductory textbooks for Schemers<br />
<a href="http://www.schemers.org/Documents/#intro-texts">http://www.schemers.org/Documents/#intro-texts</a>
</li>

<li>Scheme (programming language)<br />
<a href="http://en.wikipedia.org/wiki/Scheme_(programming_language)">http://en.wikipedia.org/wiki/Scheme_(programming_language)</a>
</li>

<li>Scheme<br />
<a href="http://cs.wikipedia.org/wiki/Scheme">http://cs.wikipedia.org/wiki/Scheme</a>
</li>

<li>Scheme-faq<br />
<a href="http://community.schemewiki.org/?scheme-faq">http://community.schemewiki.org/?scheme-faq</a>
</li>

<li>Scheme implementations<br />
<a href="http://community.schemewiki.org/?scheme-faq-standards#implementations">http://community.schemewiki.org/?scheme-faq-standards#implementations</a>
</li>

<li>Successful Scheme<br />
<a href="http://www.itworld.com/swol-1013-regex">http://www.itworld.com/swol-1013-regex</a>
</li>

<li>Guy L. Steele, Jr.<br />
<a href="http://en.wikipedia.org/wiki/Guy_L._Steele">http://en.wikipedia.org/wiki/Guy_L._Steele</a>
</li>

<li>Gerald Jay Sussman<br />
<a href="http://en.wikipedia.org/wiki/Gerald_Jay_Sussman">http://en.wikipedia.org/wiki/Gerald_Jay_Sussman</a>
</li>

<li>PLT Scheme<br />
<a href="http://www.plt-scheme.org/">http://www.plt-scheme.org/</a>
</li>

<li>Quick: An Introduction to PLT Scheme with Pictures<br />
<a href="http://docs.plt-scheme.org/quick/">http://docs.plt-scheme.org/quick/</a>
</li>

<li>PLT Scheme<br />
<a href="http://en.wikipedia.org/wiki/Plt_scheme">http://en.wikipedia.org/wiki/Plt_scheme</a>
</li>

<li>PLT Scheme Guide<br />
<a href="http://docs.plt-scheme.org/guide/">http://docs.plt-scheme.org/guide/</a>
</li>

<li>The DrScheme Project: An Overview<br />
<a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.9543">http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.9543</a>
</li>

<li>DrScheme<br />
<a href="http://en.wikipedia.org/wiki/DrScheme">http://en.wikipedia.org/wiki/DrScheme</a>
</li>

<li>How to Design Programs<br />
<a href="http://www.htdp.org/">http://www.htdp.org/</a>
</li>

<li>An Introduction to Scheme<br />
<a href="http://www.acm.org/crossroads/xrds1-2/scheme.html">http://www.acm.org/crossroads/xrds1-2/scheme.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2010</small></p>
</body>
</html>

