<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafika na osmibitových poèítaèích firmy Sinclair</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafika na osmibitových poèítaèích firmy Sinclair</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Mezi nejznámìj¹í osmibitové domácí mikroproèítaèe patøí i stroje vyrábìné firmou Sinclair Research, pøedev¹ím typy ZX80, ZX81 a ZX Spectrum. V dne¹ním èlánku si popí¹eme grafické schopnosti tìchto poèítaèù a pøedev¹ím zpùsob generování video signálu.</p>



<h2>Obsah</h2>
<p>
<a href="#k01">1. Grafika na osmibitových poèítaèích firmy Sinclair</a><br />
<a href="#k02">2. Generování obrazu na poèítaèi ZX80</a><br />
<a href="#k03">3. Osmibitový poèítaè ZX81</a><br />
<a href="#k04">4. Poèítaè ZX Spectrum</a><br />
<a href="#k05">5. Základní parametry ZX Spectra</a><br />
<a href="#k06">6. Grafický re¾im ZX Spectra</a><br />
<a href="#k07">7. Odkazy na Internetu</a><br />
<a href="#k08">8. Obsah dal¹í èásti seriálu</a><br />
</p>



<p><a name="k01"></a></p>
<h2>1. Grafika na osmibitových poèítaèích firmy Sinclair</h2>

<p>Osmibitové domácí poèítaèe firmy <i>Sinclair</i> zpùsobily po svém uvedení
na trh pomìrnì významnou revoluci v&nbsp;chápání výpoèetní techniky. Byly to
toti¾ &ndash; alespoò v&nbsp;Evropì &ndash; poèítaèe, které si mohl díky své
nízké cenì poøídit témìø ka¾dý a právì na základì popularity tìchto systémù
pøestali lidé vnímat poèítaèe jako drahé, velké a nepraktické skøínì umístìné
ve výpoèetních centrech. Navíc se po hardwarové stránce jednalo o relativnì
jednoduché, i kdy¾ &ndash; co se týèe funkce &ndash; pomìrnì sofistikované
systémy, tak¾e je bylo velmi snadné &bdquo;klonovat&ldquo; (vyrábìt kopie), co¾
sice nebylo ve v¹ech pøípadech legální, ale zcela jistì to zapøíèinilo velkou
popularitu tìchto poèítaèù i programátorskou podporu prakticky po celém
vyspìlém svìtì, vèetnì tehdej¹ího východního bloku. V&nbsp;bývalé ÈSSR se
vyrábìly minimálnì dva klony <i>ZX Spectra</i> &ndash; <i>Didaktik Gama</i>
(s&nbsp;vìt¹í kapacitou pamìti a originální ULA) a <i>Didaktik M</i> (pamì»
stejná jako pùvodní Spectrum, ov¹em se Sovìtským ULA) &ndash; které byly
dokonce oproti originálu vylep¹ené, napøíklad vy¹¹í kapacitou operaèní pamìti,
snáze pou¾itelnou klávesnicí, èi zabudováním disketové jednotky (poèítaèùm
vyrábìným v&nbsp;ÈSSR bude vìnován samostatný èlánek). V&nbsp;následujících
kapitolách si popí¹eme jak zpùsob tvorby grafiky na pùvodních mikropoèítaèích
<i>ZX80</i> a <i>ZX81</i>, tak i grafiku na slavném <i>ZX Spectru</i> a jeho
následovnících.</p>

<a href="http://i.iinfo.cz/images/123/pc6701.jpg"><img src="http://i.iinfo.cz/images/123/pc6701-prev.jpg" width="208" height="270" alt="pc6701" /></a>
<p><i>Obrázek 1: Dobová reklama na mikropoèítaè ZX81, jeho¾ cena (bez
periferních zaøízení) byla men¹í ne¾ 100 liber, tak¾e se spolu se ZX80 jednalo
o nejlevnìj¹í skuteènì programovatelný poèítaè na trhu. I pøes nìkteré
nedostatky se tento mikropoèítaè stal velmi oblíbený a pøipravil cestu pro
svého slavného nástupce &ndash; ZX Spectrum.</i></p>



<p><a name="k02"></a></p>
<h2>2. Generování obrazu na poèítaèi ZX80</h2>

<p>Prvním skuteèným poèítaèem vyrábìným firmou <i>Sinclair Research</i>, byl
domácí osmibitový poèítaè <i>ZX80</i>, jen¾ byl na trh uveden v&nbsp;lednu 1980
&ndash; odtud je ostatnì odvozen i jeho název. Cena poèítaèe v&nbsp;základní
výbavì s&nbsp;1 kB RAM byla rovna 99,95 librám (jednalo se o cenu stavebnice,
proto¾e ji¾ sestavený poèítaè pøekroèil svou cenou 100 liber). Po hardwarové
stránce ¹lo o velmi jednoduchý systém s&nbsp;pouhými osmnácti èipy, vèetnì
mikroprocesoru a pamìtí DRAM i ROM. V&nbsp;základní konfiguraci byl <i>ZX80</i>
vybaven pouhým jedním kilobajtem operaèní pamìti, kterou bylo mo¾né roz¹íøit a¾
na 16 kB, pamìtí ROM o kapacitì 4 kB, jen¾ obsahovala interpret pomìrnì
jednoduchého jazyka Basic a mikroprocesorem Zilog Z80A s&nbsp;hodinovou
frekvencí 3,25 MHz (od této frekvence je odvozeno generování video signálu).
Program bylo mo¾né zaznamenat na kazetu èi pásku pøes externí magnetofon,
podobnì jako u dal¹ích osmibitových poèítaèù (disketové jednotky byly na
zaèátku osmdesátých let minulého století pomìrnì drahé, nepoèítáme-li ov¹em
slavnou disketovou jednotku pro <i>Apple-II</i> zkonstruovanou Stevem
Wozniakem).</p>

<a href="http://i.iinfo.cz/images/241/pc6702.jpg"><img src="http://i.iinfo.cz/images/241/pc6702-prev.jpg" width="370" height="247" alt="pc6702" /></a>
<p><i>Obrázek 2: Domácí osmibitový mikropoèítaè ZX80. V&nbsp;prùbìhu jediného
roku, kdy byl tento poèítaè vyrábìn, se prodalo cca 70000 kusù, co¾ je na
tehdej¹í dobu velmi vysoké èíslo.</i></p>

<p>V&nbsp;pøedchozí èásti tohoto seriálu jsme si kromì dal¹ích informací o
grafických subsystémech poèítaèù øekli, ¾e osmibitové domácí mikropoèítaèe
<i>Sinclair ZX80</i> a <i>Sinclair ZX81</i> pracovaly pouze v&nbsp;textovém
re¾imu, v&nbsp;nìm¾ bylo na jedné textové øádce ulo¾eno maximálnì 32 znakù a
celkový poèet øádkù byl roven 24 (slovo &bdquo;maximálnì&ldquo; jsem pou¾il
zámìrnì, proto¾e se délka jednotlivých øádkù mohla li¹it, jak si øekneme
v&nbsp;navazujících odstavcích). Vzhledem k&nbsp;tomu, ¾e prvních osm znakù ze
speciální znakové sady tohoto poèítaèe obsahovalo ètverce a obdélníky se
stranou rovnou jedné polovinì ¹íøky znaku a k&nbsp;dispozici byly i inverzní
varianty znakù (viz tøetí obrázek), bylo mo¾né z&nbsp;tìchto ¹estnácti znakù
pomìrnì jednodu¹e sestavit bitmapu o rozli¹ení 64&times;48
&bdquo;ètvereèkù&ldquo; (ve skuteènosti byl ka¾dý &bdquo;ètvereèek&ldquo;
pøedstavován maticí o velikosti 4&times;4 pixely). Potøebná kapacita pamìti pro
takto vytvoøenou &bdquo;bitmapu&ldquo; dosahovala a¾ 768 bajtù, co¾ pøedstavuje
celé tøi ètvrtiny kapacity operaèní pamìti pùvodního <i>ZX80</i>, které bylo,
jak jsme si ji¾ øekli v&nbsp;pøedchozím odstavci, ve své základní verzi
vybaveno pouhým jedním kilobajtem operaèní pamìti.</p>

<img src="http://i.iinfo.cz/images/122/pc6703.png" width="304" height="540" alt="pc6703" />
<p><i>Obrázek 3: Znaková sada mikropoèítaèe ZX80 a takté¾ i mikropoèítaèe ZX81,
která byla ulo¾ena v&nbsp;pamìti ROM, její¾ celková kapacita dosahovala 4kB
resp.&nbsp;8kB (nejvíce místa zabral interpret jazyka Basic). S&nbsp;vyu¾itím
znakù z&nbsp;této sady bylo mo¾né vykreslit i pomìrnì vìrohodné obrázky a
slo¾ité herní scény. Pov¹imnìte si, ¾e tato znaková sada neodpovídá ASCII a
navíc obsahuje pouze 64 znakù; dal¹ích 64 znakù jsou jen inverzní
varianty.</i></p>

<p>Programátoøi v¹ak záhy pøi¹li na zpùsob, jakým je mo¾né programovì ovládat
vykreslování a teoreticky tak dosáhnout maximálního hardwarovì podporovaného
rozli¹ení na tomto poèítaèi &ndash; 256&times;192 pixelù (ov¹em zobrazovala se
pouze èerná a ¹edá barva, podpora pro barevný výstup byla a¾ doménou slavného
<i>ZX Spectra</i>). V&nbsp;následujícím textu si proto popí¹eme jak zpùsob
&bdquo;standardního&ldquo; vytváøení obrazu na tomto poèítaèi, tak i rùzné
triky, které je mo¾né se <i>ZX80</i> provádìt. Zpùsob vykreslování je u
poèítaèe <i>ZX80</i> velmi pomìrnì nápaditý, nebo» se návrháøùm tohoto systému
podaøilo sní¾it poèet nutných integrovaných obvodù na naprosté minimum a navíc
je jak pro ulo¾ení zobrazovaných dat, tak i vlastního programu (psaného
vìt¹inou v&nbsp;BASICu) vyu¾ito pouze nepatrné mno¾ství pamìti &ndash; pouhý
jeden kilobajt. My¹lenka ulo¾ení obrazových dat je pomìrnì jednoduchá &ndash;
vzhledem k&nbsp;tomu, ¾e výpis zdrojového kódu BASICového programu vìt¹inou
nezabere celý textový øádek (32 znakù), jsou jednotlivé øádky ulo¾eny
v&nbsp;pamìti za sebou jako øetìzce o rùzné délce (samotný BASICový program je
dokonce je¹tì mnohem krat¹í, nebo» v&nbsp;pamìti jsou ulo¾eny pouze tokeny
jednotlivých pøíkazù &ndash; ve své podstatì jde o pøedchùdce dne¹ních
bajtkódù).</p>

<img src="http://i.iinfo.cz/images/656/pc6704.png" width="256" height="177" alt="pc6704" />
<p><i>Obrázek 4: V¹echny objekty v&nbsp;této høe jsou vykresleny pomocí
semigrafických znakù nabízených mikropoèítaèem ZX80. Napøíklad kola dìl jsou
vytvoøena z&nbsp;inverzních nul, støely jsou pøedstavovány ètvereèkem o
rozmìrech 4&times;4 pixely (viz první znaky ve znakové sadì) apod.</i></p>

<p>Kódy znakù ulo¾ených v&nbsp;øetìzcích rùzné délky (ka¾dý øetìzec byl od
dal¹ího øádku oddìlen znakem NEWLINE) byly ve vykreslovací rutinì postupnì
naèítány mikroprocesorem a na základì právì aktuálního vykreslovaného
obrazového mikroøádku (znaky byly vysoké pøesnì osm mikroøádkù, termínem
mikroøádek je zde my¹lena jedna obrazová linka na televizní obrazovce) byl
z&nbsp;pamìti ROM naèten bajt pøedstavující osm pixelù daného znaku. Výpoèet
adresy s&nbsp;ulo¾eným bitovým vzorkem byl jednoduchý &ndash; kód znaku se
vynásobil 64 (co¾ lze provést bitovým posunem) a k&nbsp;této hodnotì se
pøièetlo èíslo vykreslovaného mikroøádku modulo 8. Samotné naètení bitù sice
inicioval mikroprocesor (vystavil na adresovou sbìrnici adresu vypoètenou vý¹e
uvedeným zpùsobem), ov¹em skuteèný obsah získaný z&nbsp;pamìti ROM byl pøenesen
do pomocných obvodù, které tyto bity zpracovaly &ndash; celou osmici bitù
pøevedly na video signál, tj.&nbsp;èernou èi bílou (¹edou barvu). Tímto
zpùsobem se naèetly a vykreslily v¹echny osmice bitù le¾ících na jednom
mikroøádku. Vzhledem k&nbsp;tomu, ¾e na jednom textovém øádku je ulo¾eno 32
znakù, je jeden mikroøádek tvoøen 32&times;8=256 bity (pixely).</p>

<img src="http://i.iinfo.cz/images/326/pc6705.png" width="256" height="192" alt="pc6705" />
<p><i>Obrázek 5: Dal¹í hra vyu¾ívající originální znakovou sadu poèítaèe
ZX80.</i></p>

<p>Vzhledem ke konstrukci <i>ZX80</i> sice nebylo mo¾né, aby adresa, ze které
se bity pøedstavující mikroøádek znaku naèítají, ukazovala do pamìti RAM (nelze
si tedy vytvoøit u¾ivatelsky definovanou sadu znakù), ale s&nbsp;vyu¾itím
¹ikovné manipulace s&nbsp;registrem <strong>I</strong>, který ukazoval na
tabulku znakù, mohl být ka¾dý mikroøádek znaku pøeèten z&nbsp;jiné oblasti ROM,
èeho¾ nìkteré hry vyu¾ívaly pro zvý¹ení rozli¹ení pøi vykreslování bitmap a¾ na
teoretickou hodnotu 256&times;192 pixelù. Ov¹em ne v¹echny bitové kombinace lze
zobrazit, proto¾e znaková sada obsahuje pouze 64 znakù a jejich inverzních
protìj¹kù &ndash; na ka¾dém mikroøádku lze tedy zvolit pouze jednu ze 128
kombinací, i kdy¾ pro osm bitù (pixelù) existuje kombinací 256.</p>

<img src="http://i.iinfo.cz/images/100/pc6706.png" width="256" height="193" alt="pc6706" />
<p><i>Obrázek 6: Vìt¹ina screenshotù tìchto her byla získána pomocí emulátorù
ZX81 &ndash; viz odkazy uvedené v&nbsp;pøedposlední kapitole.</i></p>



<p><a name="k03"></a></p>
<h2>3. Osmibitový poèítaè ZX81</h2>

<p>Následovníkem vý¹e popsaného domácího poèítaèe <i>ZX80</i> byl mikropoèítaè
<i>ZX81</i>, který byl na trh uveden poèátkem roku 1981. Tento poèítaè byl
obchodnì velmi úspì¹ný, jen za prvních deset mìsícù se prodalo ètvrt milionu
kusù, celkovì bylo vyrobeno a prodáno pøes jeden milion tìchto systémù. Ve své
podstatì se jedná o vylep¹ení <i>ZX80</i>, proto¾e základní funkcionalita
zùstala zachována. Osmnáct samostatných integrovaných obvodù se slouèilo do
jednoho èipu ULA (Uncomitted Logic Array), kapacita pamìti ROM se zdvojnásobila
na 8 kB (zejména do¹lo k&nbsp;pøidání rutin pro výpoèty v&nbsp;systému
pohyblivé øádové èárky) a i kapacita operaèní pamìti dosahovala namísto
pùvodního jednoho kilobajtu 16 kB a¾ 64 kB (ov¹em adresovatelných bylo
maximálnì 56 kB, nebo» zbylá èást adresového prostoru byla vyhrazena pro pamì»
ROM). Takté¾ byla vylep¹ena klávesnice i samotný obal, ve kterém je
mikropoèítaè umístìn. Nás v¹ak v&nbsp;tomto èlánku zajímají pøedev¹ím grafické
schopnosti tohoto poèítaèe. Princip zobrazování sice zùstal stejný, jako
v&nbsp;pøípadì <i>ZX80</i>, ale u¾ivatelé se doèkali jednoho pomìrnì zásadního
vylep¹ení.</p>

<img src="http://i.iinfo.cz/images/367/pc6707.png" width="280" height="248" alt="pc6707" />
<p><i>Obrázek 7: Domácí osmibitový mikropoèítaè ZX81</i></p>

<p>Tímto vylep¹ením bylo zavedení takzvaného re¾imu <strong>SLOW</strong>.
Pùvodní re¾im zobrazování (<strong>FAST</strong>) popsaný v&nbsp;pøedchozí
kapitole mìl jednu nevýhodu &ndash; vzhledem k&nbsp;tomu, ¾e zobrazování øídil
samotný mikroprocesor, byla v&nbsp;dobì bìhu programu obrazovka èerná, proto¾e
celý jeho výpoèetní výkon byl spotøebován pro interpetaci a spou¹tìní
jednotlivých pøíkazù. Takté¾ stisk klávesy znamenal pøeru¹ení vykreslovací
rutiny, které se projevilo viditelným poblikáváním. Zavedením re¾imu
<strong>SLOW</strong> se cca 75% strojového èasu spotøebovalo na vykreslování
obrazu a pouze zbylých 25% bylo mo¾né vyu¾ít pro bìh programu &ndash; volné
strojové cykly se nacházely pouze v&nbsp;èase vykreslování horního a spodního
èerného okraje. Mezi re¾imy <strong>FAST</strong> a <strong>SLOW</strong> se
bylo mo¾né pøepínat, mnoho u¾ivatelù dokonce pou¾ívalo témìø výhradnì re¾im
<strong>FAST</strong>, a to i v dobì psaní programu (právì tehdy docházelo
k&nbsp;nepøíjemnému poblikávání).</p>

<a href="http://i.iinfo.cz/images/597/pc6708.png"><img src="http://i.iinfo.cz/images/597/pc6708-prev.png" width="271" height="270" alt="pc6708" /></a>df
<p><i>Obrázek 8: Osazený plo¹ný spoj mikroproèítaèe ZX81. Poèet èipù je zde
skuteènì minimální.</i></p>

<a href="http://i.iinfo.cz/images/242/pc6709.png"><img src="http://i.iinfo.cz/images/242/pc6709-prev.png" width="307" height="270" alt="pc6709" /></a>
<p><i>Obrázek 9: Schéma zapojení poèítaèe ZX81. Pov¹imnìte si, jakým zpùsobem
je propojen mikroprocesor s&nbsp;èipem ULA i pamì»mi RAM a ROM. Na sbìrnici je
napojena i osmice rezistorù, které nahrazují øadiè sbìrnice &ndash; ULA tak
mù¾e snadno èíst kódy znakù z&nbsp;pamìti ROM, ani¾ by bylo zapotøebí procesor
fyzicky odpojit od sbìrnice.</i></p>



<p><a name="k04"></a></p>
<h2>4. Poèítaè ZX Spectrum</h2>

<p>Pravdìpodobnì nejslavnìj¹ím poèítaèem firmy <i>Sinclair Research</i> je
<i>ZX Spectrum</i> a jeho následovníci, tj.&nbsp;modely <i>ZX Spectrum+</i> a
<i>ZX Spectrum 128</i> i jejich rozlièné varianty. Pùvodní <i>ZX Spectrum</i>
(&bdquo;gumák&ldquo;) bylo nabízeno ve dvou variantách. Levnìj¹í varianta,
která byla prodávána za 125 liber, obsahovala 16 kB operaèní pamìti, zatímco
varianta dra¾¹í (nabízená za 175 liber) mìla celých 48 kB RAM. Levnìj¹í model
bylo mo¾né za cca 60 liber upgradovat, tj.&nbsp;roz¹íøit pamì» o 32 kB RAM.
Dal¹ím modelem bylo <i>ZX Spectrum+</i>, které bylo vybaveno klávesnicí
s&nbsp;kurzorovými tlaèítky i Resetem. Udává se, ¾e po uvedení ZX Spectra na
trh se ka¾dý týden prodalo a¾ 15 tisíc kusù tohoto poèítaèe. Velká popularita
mezi u¾ivateli se samozøejmì odrazila i v&nbsp;poètu aplikací &ndash;
v&nbsp;dobì nejvìt¹í slávy ZX Spectra bylo vytvoøeno více ne¾ 10000 her a
dal¹ích programù, ov¹em aplikace pro nìj vznikají i nyní &ndash; pøedev¹ím se
jedná o nové hry (napøíklad existuje i <i>Doom</i> pro Spectrum) a dema.</p>

<img src="http://i.iinfo.cz/images/136/pc6710.jpg" width="350" height="255" alt="pc6710" />
<p><i>Obrázek 10: Slavný &bdquo;gumák&ldquo; ZX Spectrum.</i></p>



<p><a name="k05"></a></p>
<h2>5. Základní parametry ZX Spectra</h2>

<p>V¹echny typy poèítaèù <i>ZX Spectrum</i> se v&nbsp;nìkolika ohledech li¹ily
od pùvodních <i>ZX80</i> a <i>ZX81</i>, i kdy¾ základ, tj.&nbsp;mikroprocesor
Zilog Z80, byl pou¾itý ve v¹ech poèítaèích firmy <i>Sinclair</i> (zde se jeho
frekvence zvý¹ila na 3,5 MHz). Pøedev¹ím
do¹lo k&nbsp;roz¹íøení pamìti ROM na 16 kB, tak¾e bylo mo¾né pou¾ít vylep¹enou
verzi Basicu, která obsahovala nové pøíkazy i funkce. Takté¾ byl vylep¹ený
zpùsob záznamu dat na magnetofon. Ale nejvìt¹í novinkou, která velkou mìrou
pøispìla k&nbsp;popularitì <i>ZX Spectra</i>, byla upravená verze èipu
<i>ULA</i>, jen¾ se mimo dal¹ích oprací starala i o generování obrazu, které
ji¾ bylo ve vìt¹í míøe nezávislé na mikroprocesoru, ne¾ tomu bylo u poèítaèù
<i>ZX80</i> a <i>ZX81</i>. ZX Spectra takté¾ zaèaly pou¾ívat klasický
framebuffer s&nbsp;jeho &ndash; pro tento poèítaè typickým &ndash; rozdìlením
na dvì poloviny &ndash; bitmapu o rozli¹ení 256&times;192 pixelù a atributovou
pamì» s&nbsp;32&times;24 bloky, v&nbsp;nich¾ bylo mo¾né, nezávisle na ostatních
blocích, mìnit barvu popøedí a pozadí.</p>

<a href="http://i.iinfo.cz/images/146/pc6711.png"><img src="http://i.iinfo.cz/images/146/pc6711-prev.png" width="370" height="231" alt="pc6711" /></a>
<p><i>Obrázek 11: Nìkteré hry dokázaly i pøes omezení grafického re¾imu ZX
Spectra vykreslit vícebarevné objekty, i kdy¾ pøi jejich pøekryvu docházelo
k&nbsp;ne¾ádoucím zmìnám barev.</i></p>



<p><a name="k06"></a></p>
<h2>6. Grafický re¾im ZX Spectra</h2>

<p>Pamì»ový prostor ZX Spectra, tj.&nbsp;64 pøímo adresovatelných kilobajtù,
byl rozdìlen na tøi èásti. Na zaèátku se nacházela oblast pamìti ROM o
velikosti 16 kB s&nbsp;interpreterem jazyka Basic, rutinami pro práci
v&nbsp;pohyblivé øádové èárce apod. Za pamìtí ROM bylo 16 kB RAM, do které mìl
pøístup jak mikroprocesor, tak i èip ULA (který zde mìl ulo¾ený framebuffer) a
poslední oblast o kapacitì 32 kB byla dostupná pouze mikroprocesoru.
V&nbsp;dal¹ím textu se budeme zabývat pouze ¹estnáctikilobajtovou oblastí
pamìti RAM, do které mìl pøístup jak mikroprocesor, tak i èip ULA.
Z&nbsp;hlediska programátora byla tato pamì» &bdquo;pomalej¹í&ldquo; ne¾
zbylých 32 kB, co¾ mj.&nbsp;znamenalo, ¾e se do této oblasti neumis»ovaly
èasovì nároèné rutiny, napøíklad podprogramy pro pøehrávání zvukù èi práci
s&nbsp;magnetofonem. Èip ULA si toti¾ postupnì naèítal hodnoty jednotlivých
pixelù i pøíslu¹né barvové atributy tìchto pixelù pøi generování video
signálu.</p>

<a href="http://i.iinfo.cz/images/384/pc6712.png"><img src="http://i.iinfo.cz/images/384/pc6712-prev.png" width="370" height="231" alt="pc6712" /></a>
<p><i>Obrázek 12: U protihráèù ve høe Starquake se objevuje známé
&bdquo;pøekrývání&ldquo; barev u postavièek, které jsou blízko sebe. Viz dva
protihráèi zobrazení vpravo uprostøed.</i></p>

<p>Zobrazovaná bitmapa mìla rozli¹ení 256&times;192 pixelù, tj.&nbsp;její
velikost lze snadno vypoèítat: 256&times;192/8=6144 bajtù. Ka¾dý pixel byl
v&nbsp;této bitmapì reprezentován jediným bitem, kterým se volilo, zda se jedná
o pixel patøící k&nbsp;popøedí èi pozadí. Barvy popøedí a pozadí nemohly být
nastaveny pro ka¾dý pixel zvlá¹», ale pouze pro celý blok 8&times;8 pixelù. Pro
tento blok se v&nbsp;jednom bajtu zvaném <i>atribut</i> ukládaly jak informace
o popøedí a pozadí (k&nbsp;dispozici bylo osm základních barev, tj.&nbsp;jejich
indexy bylo mo¾né ulo¾it ve tøech bitech), tak i intenzita barev (vy¹¹í/ni¾¹í)
a pøíznak, zda má celý blok blikat, tj.&nbsp;mìnit barvu popøedí a pozadí.
Atributù bylo celkem 32&times;24=768, tak¾e celková kapacita pamìti pro ulo¾ení
celého obrázku byla rovna 6144+768=6912 bajtùm, co¾ zhruba odpovídá typické
kapacitì framebufferù u domácích osmibitových poèítaèù (vìt¹í framebuffery byly
nepraktické, proto¾e zabíraly velkou èást drahé operaèní pamìti a takté¾
tehdej¹í mikroprocesory by musely provádìt pøesuny objemnìj¹ích blokù dat pøi
zmìnì obrazu). Pøesné èasování èipu ULA pøi vykreslování obrazu si vysvìtlíme
v&nbsp;navazující èásti tohoto seriálu. Frekvence mikroprocesoru, tj. 3,5 MHz
toti¾ nebyla zvolena náhodnì &ndash; pøesnì odpovídá poètu taktù nutných
pro generování video signálu pro televize pracující v&nbsp;normì PAL.</p>

<a href="http://i.iinfo.cz/images/465/pc6713.png"><img src="http://i.iinfo.cz/images/465/pc6713-prev.png" width="370" height="231" alt="pc6713" /></a>
<p><i>Obrázek 13: Na obrázku hry Barbarian je patrné, jakým zpùsobem je
obrazová pamì» organizovaná, pøedev¹ím omezení daná atributy o velikosti
8&times;8 pixelù.</i></p>



<p><a name="k07"></a></p>
<h2>7. Odkazy na Internetu</h2>

<ol>

<li>ZX80 &ndash; fotka plo¹ného spoje<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/zx80/images/zx80_pcb_jpg.jpg">http://www.nvg.ntnu.no/sinclair/computers/zx80/images/zx80_pcb_jpg.jpg</a>
</li>

<li>ZX80 Circuit Diagram (fotografie)<br />
<a href="http://woodworths.com/EBay_Auctions/Auction11.htm">http://woodworths.com/EBay_Auctions/Auction11.htm</a>
</li>

<li>ZX80 Circuit Diagram (lep¹í kvalita ne¾ na pøedchozím odkazu)<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/zx80/images/zx80_circuit.gif">http://www.nvg.ntnu.no/sinclair/computers/zx80/images/zx80_circuit.gif</a>
</li>

<li>ZX80 Photos<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/zx80/zx80_photos.htm">http://www.nvg.ntnu.no/sinclair/computers/zx80/zx80_photos.htm</a>
</li>

<li>Emulátor ZX Spectra napsaný v Javì<br />
<a href="http://www.zzspectrum.org/">http://www.zzspectrum.org/</a>
</li>

<li>ZX81/ZX80 Emulator napsaný v Javì<br />
<a href="http://www.zx81stuff.org.uk/zx81/jtyone.html">http://www.zx81stuff.org.uk/zx81/jtyone.html</a>
</li>

<li>Daves Old Computers - Sinclair ZX80/81 - Timex 1000<br />
<a href="http://www.classiccmp.org/dunfield/sinclair/index.htm">http://www.classiccmp.org/dunfield/sinclair/index.htm</a>
</li>

<li>New games for ZX81<br />
<a href="http://www.armchairarcade.com/neo/taxonomy/term/233">http://www.armchairarcade.com/neo/taxonomy/term/233</a>
</li>

<li>RetroThing - ZX81<br />
<a href="http://www.retrothing.com/2008/04/build-your-ow-2.html">http://www.retrothing.com/2008/04/build-your-ow-2.html</a>
</li>

<li>Sinclair ZX81 Chopperdrop 3000<br />
<a href="http://www.youtube.com/watch?v=MY6TGQEvvX4">http://www.youtube.com/watch?v=MY6TGQEvvX4</a>
</li>

<li>DOOM game on ZX Spectrum<br />
<a href="http://www.youtube.com/watch?v=3v7cFGneuaw&amp;feature=related">http://www.youtube.com/watch?v=3v7cFGneuaw&amp;feature=related</a>
</li>

<li>Trader ZX81 part 1<br />
<a href="http://www.youtube.com/watch?v=FhElddXeLDU&amp;feature=fvsr">http://www.youtube.com/watch?v=FhElddXeLDU&amp;feature=fvsr</a>
</li>

<li>ZX81 forever<br />
<a href="http://www.zx-team.de/andre/">http://www.zx-team.de/andre/</a>
</li>

<li>ZX81 Caverns - pøedìlávka hry pro ZX81<br />
<a href="http://www.martinruffe.co.uk/view.aspx?id=36">http://www.martinruffe.co.uk/view.aspx?id=36</a>
</li>

<li>Steven's ZX81 Computer - ukázky programù pro ZX81 a dal¹í informace<br />
<a href="http://www.geocities.com/CapeCanaveral/Hangar/1969/zx81/">http://www.geocities.com/CapeCanaveral/Hangar/1969/zx81/</a>
</li>

<li>Sinclair ZX81 FAQ<br />
<a href="http://www.honneamise.u-net.com/zx81/zx81faq.html">http://www.honneamise.u-net.com/zx81/zx81faq.html</a>
</li>

</ol>

<img src="http://i.iinfo.cz/images/79/pc6714.png" width="256" height="192" alt="pc6714" />
<p><i>Obrázek 14: Pøi peèlivé práci je mo¾né omezení pøedstavovaná atributy
obejít, jak dokazuje tato bitmapa pro ZX Spectrum.</i></p>



<p><a name="k08"></a></p>
<h2>8. Obsah dal¹í èásti seriálu</h2>

<p>V&nbsp;následující èásti tohoto seriálu dokonèíme popis grafických mo¾ností
ZX Spectra, tj.&nbsp;zamìøíme se na rùzné triky, pomocí nich¾ bylo mo¾né zvý¹it
poèet barev v&nbsp;obraze, kreslit na okrajích obrazovky èi zvý¹it poèet barev
v&nbsp;jednotlivých blocích (atributech). Takté¾ si popí¹eme dal¹í poèítaèe
firmy <i>Sinclair</i> (popø.&nbsp;<i>Amstrad</i>, která celou poèítaèovou
divizi koupila), zejména poèítaèe <i>Sam Coupé</i> a <i>Sinclair QL</i>.</p>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

