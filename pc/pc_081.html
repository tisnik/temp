<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafický subsystém poèítaèù Amiga II</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafický subsystém poèítaèù Amiga II</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù se budeme zabývat popisem podporovaných grafických re¾imù a grafických efektù, které je mo¾né vyu¾ít na v¹ech typech poèítaèù Amiga, tj. i na modelech vybavených originálním èipsetem. Kromì funkce koprocesorù Copper a Blitter si popí¹eme i zpùsob generování obrazu v rùzných re¾imech.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Koprocesor <i>Copper</i></a></p>
<p><a href="#k02">2. Koprocesor <i>Blitter</i></a></p>
<p><a href="#k03">3. Generování video signálu</a></p>
<p><a href="#k04">4. Standardní rozli¹ení grafických re¾imù podporovaná originálním èipsetem</a></p>
<p><a href="#k05">5. Standardní grafické re¾imy vyu¾ívající 1 a¾ 5 bitových rovin</a></p>
<p><a href="#k06">6. Mód Dual playfield</a></p>
<p><a href="#k07">7. Mód EHB (Extra Half-Brite)</a></p>
<p><a href="#k08">8. Mód HAM (Hold-And-Modify)</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Koprocesor <i>Copper</i></h2>

<p>Jedním z&nbsp;koprocesorù, které mohou pracovat relativnì nezávisle na
hlavním procesoru (<i>Motorola 680x0</i>) i dal¹ích zákaznických èipech
obsa¾ených v&nbsp;Amigách, je <i>Copper</i>. Tento koprocesor je zabudován do
minule popsaného èipu <i>Agnus</i>. Koprocesor <i>Copper</i> lze pøi jeho
vhodné konfiguraci vyu¾ít pro øízení celého grafického subsystému bez zatí¾ení
(popø.&nbsp;jen s&nbsp;nepatrným zpomalením) hlavního mikroprocesoru, proto¾e
doká¾e naèítat data i instrukce pomocí pøímého pøístupu do pamìti (DMA), který
je provádìn v&nbsp;lichých cyklech, tak¾e nedochází ke kolizím
s&nbsp;vykreslováním spritù, ovladaèem disku èi zvukovým subsystémem.
<i>Copper</i> je mo¾né naprogramovat tak, aby èekal na urèitou pozici
elektronového paprsku pøi vykreslování, pøièem¾ ve chvíli, kdy paprsek této
pozice dosáhne, mù¾e <i>Copper</i> zapsat data z&nbsp;nìjaké pamì»ové buòky do
urèeného øídicího registru, èím¾ je mo¾né napøíklad zmìnit grafický re¾im,
modifikovat barvy v&nbsp;barvové paletì, posunout sprity na obrazovce, øídit
dále popsaný <i>Blitter</i> atd.</p>

<img src="http://i.iinfo.cz/images/545/pc81-1.png" alt="pc81" height="256" width="320" />
<p><i>Obrázek 1: Na této obrazovce ze hry Chaos Engine je na systémech
podporujících televizní normu NTSC vyu¾it grafický re¾im s&nbsp;rozli¹ením
320&times;200 pixelù s&nbsp;32 barvami (tj.&nbsp;je vyu¾ito pìt bitových
rovin).</i></p>

<p>Pozice paprsku, na kterou <i>Copper</i> &bdquo;èíhá&ldquo;, mohou být
specifikovány jak ve vertikálním smìru, tak i smìru horizontálním, co¾
pøedstavuje pomìrnì významné vylep¹ení oproti star¹ím grafickým èipùm, které
dokázaly napøíklad generovat pøeru¹ení na urèitém obrazovém øádku. Pøíkladem
mù¾e být ji¾ døíve popsaný èip <i>Antic</i> pou¾itý u osmibitových poèítaèù
<i>Atari</i>, který ve své instrukèní sadì obsahoval i pøíznaky generování
pøeru¹ení na zvoleném øádku èi øádcích, toto pøeru¹ení se v¹ak vyvolalo v¾dy
pøed vykreslením tohoto øádku, nehledì na to, ¾e zpracování pøeru¹ení
mikroprocesorem je relativnì pomalé, tak¾e nebylo mo¾né provádìt operace
s&nbsp;pøesností na jednotky pixelù, co¾ <i>Copper</i> øe¹í tak, ¾e provede
zápis do registrù sám, bez nutnosti volat pøeru¹ovací rutinu (<i>Copper</i>
pracuje s&nbsp;pøesností ètyø pixelù v&nbsp;re¾imech s&nbsp;nízkým
horizontálním rozli¹ením a osmi pixelù v&nbsp;re¾imech s&nbsp;rozli¹ením
vysokým). Vlastní detekce pozice paprsku je ve své podstatì pomìrnì jednoduchá,
proto¾e <i>Copper</i> porovnává programátorem zapsanou hodnotu
s&nbsp;aktuálními hodnotami èítaèe obrazových øádkù a èítaèe pozice
vykreslovaného pixelu na øádku.</p>

<img src="http://i.iinfo.cz/images/545/pc81-2.png" alt="pc81" height="424" width="329" />
<p><i>Obrázek 2: Barvová paleta pou¾itá pøi vykreslení prvního obrázku.</i></p>



<p><a name="k02"></a></p>
<h2>2. Koprocesor <i>Blitter</i></h2>

<p>Druhý koprocesor, který je souèástí èipu <i>Agnus</i>, se jmenuje
<i>Blitter</i>. Ji¾ jméno tohoto koprocesoru naznaèuje, kterou operaci
s&nbsp;ním lze provádìt &ndash; jedná se o pøesun obdélníkových blokù pamìti
(neboli <i>bit block transfer &ndash; bit blt &ndash; bit blit)</i>. Ov¹em
Amigácký <i>Blitter</i> umo¾òuje provádìní i nìkolika dal¹ích
sofistikovanìj¹ích operací, napøíklad aplikaci logické operace pøi pøená¹ení
dat, bitový posun dat pøi jejich pøenosu, vyplòování oblastí a dokonce i
vykreslování úseèek. Tyto operace doká¾e <i>Blitter</i> provádìt vìt¹inou
rychleji ne¾ v&nbsp;pøípadì, ¾e by byly vykonávané pøímo mikroprocesorem;
napøíklad blokový pøesun dat je cca dvakrát rychlej¹í. Navíc je mo¾né pøi
kopírování dat provést vyplnìní oblastí, co¾ znamená, ¾e v&nbsp;pøípadì
bitmapových obrázkù doká¾e <i>Blitter</i> vykreslit horizontální úseèku mezi
dvojicí pixelù le¾ících na jednom obrazovém øádku (hranice se nejdøíve urèí
napøíklad pomocí úseèky vykreslené samotným <i>Blitterem</i>).</p>

<img src="http://i.iinfo.cz/images/545/pc81-3.png" alt="pc81" height="256" width="320" />
<p><i>Obrázek 3: Titulní obrazovka hry Shadow of the Beast takté¾ vyu¾ívá
(v&nbsp;pøípadì televizní normy NTSC) grafický re¾im s&nbsp;rozli¹ením
320&times;200 pixelù a 32 barev.</i></p>

<p>V&nbsp;pøípadì, ¾e je <i>Blitter</i> nastavený do re¾imu vykreslování
úseèek, je mo¾né s&nbsp;jeho pomocí vykreslovat úseèky s&nbsp;maximální délkou
1024 pixelù. Programátor, který potøebuje s&nbsp;vyu¾itím <i>Blitteru</i>
vykreslit úseèku, ji nejdøíve musí &bdquo;natoèit&ldquo; tak, aby le¾ela
v&nbsp;prvním oktantu, tj.&nbsp;její smìrnice byla v&nbsp;rozsahu
0&deg;&ndash;45&deg;. Posléze se <i>Blitteru</i> pøes jeho øídicí registry zadá
skuteèný oktant, ve kterém úseèka le¾í (hodnota 0&ndash;7), horizontální i
vertikální délka úseèky (obì délky jsou pøed zápisem do øídicích registrù
zkombinovány pomocí jednoduchých vzorcù obsahujících souèty, rozdíly a bitové
posuny), pozice poèáteèního pixelu úseèky a nakonec bitová maska, pomocí ní¾ je
mo¾né definovat vzorek, se kterým je úseèka kreslena. Rychlost vykreslování
úseèek je na svoji dobu úctyhodná &ndash; dosahuje øádovì milionù pixelù za
sekundu (poèet skuteènì vykreslených úseèek kolísá v&nbsp;závislosti na jejich
délce, nastaveném grafickém re¾imu, operacích, které probíhají souèasnì
s&nbsp;vykreslením úseèky a v&nbsp;neposlední øadì i na pou¾itém televizním
systému, proto¾e Amigy urèené pro NTSC pou¾ívaly hodinovou frekvenci 7,16 MHz,
zatímco Amigy podporující normu PAL byly s&nbsp;7,09 MHz nepatrnì
pomalej¹í).</p>

<img src="http://i.iinfo.cz/images/545/pc81-4.png" alt="pc81" height="424" width="329" />
<p><i>Obrázek 4: Barvová paleta pou¾itá pøi vykreslení tøetího obrázku.</i></p>



<p><a name="k03"></a></p>
<h2>3. Generování video signálu</h2>

<p>Poèítaèe <i>Amiga</i> byly vybaveny FM modulátorem, tak¾e je bylo mo¾né
pøipojit k&nbsp;bì¾nému televizoru, podobnì jako vìt¹inu osmibitových poèítaèù
i nìkterých modelù <i>Atari ST</i>. Vzhledem k&nbsp;rozdílùm mezi televizními
normami PAL (Evropa a dal¹í regiony) a NTSC (pøedev¹ím USA) se rozli¹ení i
èasování grafických re¾imù li¹ilo podle toho, pro jakou televizní normu byl
daný stroj nakonfigurován. Na systémech podporujících televizní normu NTSC se
generovalo 262 obrazových øádkù v&nbsp;ka¾dém pùlsnímku, z&nbsp;nich¾
viditelných bylo minimálnì 200 a maximální poèet obrazových øádkù, které Amiga
dokázala vybarvit (nebyly èerné) byl 241. V&nbsp;pøípadì normy PAL se
generovalo 312 obrazových øádkù v&nbsp;ka¾dém pùlsnímku, z&nbsp;nich¾ 256 bylo
zaruèenì viditelných; v&nbsp;pøípadì potøeby bylo mo¾né poèet viditelných øádkù
zvý¹it na 283, ov¹em bez záruky, ¾e v¹echny øádky budou skuteènì na stínítku
obrazovky zobrazeny. I obnovovací frekvence (poèet pùlsnímkù zobrazených za
jednu sekundu) se li¹ila podle pou¾ité televizní normy &ndash; necelých 60 Hz
v&nbsp;pøípadì NTSC a 50 Hz u normy PAL.</p>

<img src="http://i.iinfo.cz/images/545/pc81-5.png" alt="pc81" height="256" width="320" />
<p><i>Obrázek 5: Úvodní obrazovka Amigácké verze hry R-Type pou¾ívá pouze ètyøi
bitové roviny, tj.&nbsp;maximálnì ¹estnáct barev.</i></p>

<p>Standardní grafické re¾imy tedy vyu¾ívaly 200 (NTSC) èi 256 (PAL) obrazových
øádkù, pøièem¾ v¾dy dva po sobì jdoucí pùlsnímky byly shodné &ndash; právì
tímto zpùsobem se televizní obraz generoval na prakticky v¹ech osmibitových
poèítaèích. Ov¹em <i>Amiga</i> dokázala zdvojnásobit vertikální rozli¹ení tak,
¾e se sudý a lichý pùlsnímek li¹ily, podobnì jako tomu je u reálného
televizního vysílání. Jedná se o takzvané prokládání (<i>interlace</i>),
proto¾e v&nbsp;prvním pùlsnímku jsou zobrazeny liché obrazové øádky a ve druhém
pùlsnímku øádky sudé. Tímto zpùsobem bylo mo¾né zvý¹it vertikální rozli¹ení na
400 øádkù v&nbsp;pøípadì normy NTSC (maximálnì 483 øádkù z&nbsp;525),
popø.&nbsp;512 øádkù v&nbsp;normì PAL (maximálnì 567 øádkù z&nbsp;625).
Mimochodem, grafické re¾imy s&nbsp;prokládáním pùlsnímkù byly pou¾ity i u
nìkterých grafických karet SVGA na poèítaèích PC, ov¹em kvùli ¹patné kvalitì
obrazu (de facto se obnovovací frekvence sni¾uje na polovinu a dívat se del¹í
dobu na monitor s&nbsp;obnovovací frekvencí napøíklad 43 Hz není nic
pøíjemného) se od jejich pou¾ívání postupnì upustilo a dne¹ní LCD ho
pravdìpodobnì ani nepodporují.</p>

<img src="http://i.iinfo.cz/images/545/pc81-6.png" alt="pc81" height="424" width="329" />
<p><i>Obrázek 6: Barvová paleta pou¾itá pøi vykreslení pátého obrázku.</i></p>



<p><a name="k04"></a></p>
<h2>4. Standardní rozli¹ení grafických re¾imù podporovaná originálním èipsetem</h2>

<p>V&nbsp;následující tabulce jsou vypsány standardní grafické re¾imy, které
podporoval originální èipset poèítaèù <i>Amiga</i>. Zmìnou øídicích registrù je
mo¾né horizontální i vertikální rozli¹ení zmìnit, pøièem¾ limity pro vertikální
rozli¹ení jsou zmínìny v&nbsp;pøedchozí kapitole. Ní¾e vypsané grafické re¾imy
jsou podporovány i v¹emi dal¹ími èipsety poèítaèù <i>Amiga</i>, tj.&nbsp;jak
<i>ECS &ndash; Enhanced Chip Set</i>, tak i <i>AGA &ndash; Advanced Graphics
Architecture</i>. Ve sloupci &bdquo;Poèet barev&ldquo; je uveden jak maximální
poèet barev ve standardních grafických re¾imech, tak i to, zda lze pou¾ít módy
<i>EHB</i> (Extra Half-Brite) èi <i>HAM</i> (Hold-And-Modify), které jsou
popsány ní¾e. V&nbsp;posledním sloupci je uveden zaokrouhlený pomìr vý¹ky a
¹íøky pixelu, ov¹em zde je nutné øíci, ¾e napøíklad hodnota 1:1 nemusí na v¹ech
televizorech znamenat, ¾e je pixel skuteènì ètvercový (navíc je v&nbsp;pøípadì
normy PAL pomìr roven spí¹e 15:16 ne¾ pøesnì 1:1). Z&nbsp;tabulky je
mj.&nbsp;patrné i to, ¾e u re¾imù s&nbsp;horizontálním rozli¹ením 640 pixelù se
sni¾uje poèet souèasnì zobrazitelných barev a tím i poèet pou¾itých bitových
rovin.</p>

<table>
<tr><th>Video systém</th><th>Jméno</th><th>Rozli¹ení</th><th>Poèet barev</th><th>Vý¹ka:¹íøka pixelu</th></tr>
<tr><td>NTSC</td><td>LowRes           </td><td>320&times;200</td><td>2 &ndash; 32, EHB, HAM</td><td>1:1</td></tr>
<tr><td>NTSC</td><td>LowRes interlaced</td><td>320&times;400</td><td>2 &ndash; 32, EHB, HAM</td><td>2:1</td></tr>
<tr><td>NTSC</td><td>HiRes            </td><td>640&times;200</td><td>2 &ndash; 16          </td><td>1:2</td></tr>
<tr><td>NTSC</td><td>HiRes interlaced </td><td>640&times;400</td><td>2 &ndash; 16          </td><td>1:1</td></tr>
<tr><td>PAL </td><td>LowRes           </td><td>320&times;256</td><td>2 &ndash; 32, EHB, HAM</td><td>1:1</td></tr>
<tr><td>PAL </td><td>LowRes interlaced</td><td>320&times;512</td><td>2 &ndash; 32, EHB, HAM</td><td>2:1</td></tr>
<tr><td>PAL </td><td>HiRes            </td><td>640&times;256</td><td>2 &ndash; 16          </td><td>1:2</td></tr>
<tr><td>PAL </td><td>HiRes interlaced </td><td>640&times;512</td><td>2 &ndash; 16          </td><td>1:1</td></tr>
</table>

<img src="http://i.iinfo.cz/images/545/pc81-7.png" alt="pc81" height="256" width="320" />
<p><i>Obrázek 7: Amigácká verze hry R-Type je ponìkud barevnìj¹í ne¾ pùvodní
verze naprogramovaná pro osmibitové poèítaèe.</i></p>



<p><a name="k05"></a></p>
<h2>5. Standardní grafické re¾imy vyu¾ívající 1 a¾ 5 bitových rovin</h2>

<p>V&nbsp;pøedchozí èásti tohoto seriálu jsme si øekli, ¾e èip <i>Denise</i>,
který se v&nbsp;poèítaèích Amiga stará o generování grafického obrazu,
podporuje nìkolik typù grafických re¾imù. Základní re¾imy vyu¾ívají jednu a¾
pìt bitových rovin z&nbsp;maximálního poètu ¹esti rovin, tj.&nbsp;bez pou¾ití
dal¹ích trikù (napøíklad zmìny barvové palety) je v&nbsp;tìchto re¾imech mo¾né
zobrazit dvì (2<sup>1</sup>) a¾ 32 (2<sup>5</sup>) barev. Barva ka¾dého pixelu
je urèena na základì bitových hodnot pøeètených z&nbsp;jednotlivých bitových
rovin (ka¾dému pixelu odpovídá jeden bit v&nbsp;ka¾dé bitové rovinì &ndash; viz
té¾ osmý obrázek).  Zkombinováním jednoho a¾ pìti bitù vznikne hodnota
v&nbsp;rozsahu 0&ndash;31, která je pou¾ita pøi pøístupu do barvové palety,
jen¾ je na Amigách s&nbsp;pùvodním èipsetem pøedstavována 32 øídicími registry.
V&nbsp;ka¾dém z&nbsp;tìchto registrù je ulo¾en jeden z&nbsp;4096 podporovaných
barvových odstínù (ka¾dá barvová slo¾ka je pøedstavována ètyømi bity,
tj.&nbsp;celkový poèet barev je roven
2<sup>4</sup>&times;2<sup>4</sup>&times;2<sup>4</sup>=16<sup>3</sup>=4096.
Rozmìry bitových rovin je mo¾né mìnit, co¾ znamená, ¾e bitová rovina mù¾e být
ve skuteènosti vìt¹í, ne¾ zobrazená èást (výøez). Tím je umo¾nìn horizontální i
vertikální scrolling (posun obrazu), který lze provádìt bez nutnosti pøesunu
obrazových dat.</p>

<img src="http://i.iinfo.cz/images/545/pc81-8.png" alt="pc81" height="191" width="368" />
<p><i>Obrázek 8: Pøíklad konfigurace grafického re¾imu se tøemi bitovými
rovinami. Hodnota pixelu je &bdquo;rozlo¾ena&ldquo; mezi jednotlivé bitové
roviny (v&nbsp;ka¾dé rovinì je ulo¾en jen jeden bit pro daný pixel). Pøeètené
bity jsou zkombinovány (jednodu¹e seøazeny za sebe) a výsledná hodnota je
pou¾ita pøi pøístupu do barvové palety.</i></p>



<p><a name="k06"></a></p>
<h2>6. Mód Dual playfield</h2>

<p>V&nbsp;pøedchozí kapitole jsme si øekli, ¾e èip <i>Denise</i> doká¾e
souèasnì pracovat a¾ se ¹esti bitovými rovinami. Ve standardních grafických
re¾imech se v¹ak vyu¾ívá jen pìt bitových rovin a to pøedev¹ím z&nbsp;toho
dùvodu, ¾e originální èipset má pro ulo¾ení barvové palety rezervováno pouze 32
øídicích registrù. Ov¹em i ¹estou bitovou rovinu lze vyu¾ít a to dokonce
nìkolika navzájem zcela odli¹nými zpùsoby. Jedním z&nbsp;módù grafického
subsystému poèítaèù <i>Amiga</i>, který doká¾e se ¹estou bitovou rovinou
pracovat, je takzvaný re¾im <i>Dual playfield</i>. Pøi zapnutí tohoto re¾imu
jsou pro vytvoøení obrazu pou¾ity dva relativnì nezávislé playfieldy
(v&nbsp;podstatì rastrové obrázky), pøièem¾ ka¾dý se mù¾e skládat a¾ ze tøí
bitových rovin. V&nbsp;ka¾dém playfieldu lze zobrazit maximálnì sedm barev,
zbývající osmá barva je prùhledná (tak¾e pøes pixely, které jsou takto
&bdquo;obarveny&ldquo;, lze vidìt druhý playfield popø.&nbsp;barvu pozadí).</p>

<a href="http://i.iinfo.cz/images/545/pc81-9.png"><img src="http://i.iinfo.cz/images/545/pc81-9-prev.png" alt="pc81" height="220" width="370" /></a>
<p><i>Obrázek 9: Tento obrázek vyu¾ívá (i kdy¾ to na první pohled nevypadá)
pouze jednu bitovou rovinu, tak¾e se rozli¹ují jen dvì barvy pixelù (èerná a
tmavì modrá). Ov¹em hodnota jednoho z&nbsp;øídicích registrù barvové palety
(který na zaèátku vykreslování obsahuje modrou barvu) je postupnì mìnìna, èím¾
dochází i ke zmìnì barev pøíslu¹ných pixelù.</i></p>

<p>Pro urèení barev pixelù prvního playfieldu lze pou¾ít barvové registry 0-7
(ve skuteènosti index 0 pøedstavuje prùhledný pixel) a pro barvy pixelù druhého
playfieldu se pou¾ívají barvové registry 8-15 (a index 8 mají prùhledné
pixely). Tento mód se pou¾ívá napøíklad v&nbsp;nìkterých hrách, v&nbsp;nich¾
jeden playfield mù¾e pøedstavovat ovládací panel pøes který lze vidìt (díky
prùhledným pixelùm) vlastní prostøedí hry vykreslené do druhého playfieldu.
Mo¾né konfigurace bitových rovin v&nbsp;módu Dual playfield jsou zobrazeny
ní¾e:</p>

<pre>
 Poèet zapnutých 
 bitových rovin   Plafield 1 *            Playfield 2 *
------------------------------------------------------
     0              none                     none
                ____________
               |            |
     1         | 1          |
               |            |
               |____________|
                ____________            ____________
               |            |          |            |
     2         | 1          |          | 2          |
               |            |          |            |
               |____________|          |____________|
                ____________            ____________
               |            |          |            |
     3         | 1 _________|__        | 2          |
               |  |            |       |            |
               |__| 3          |       |____________|
                  |            |
                  |____________|
                ____________            ____________
               |            |          |            |
     4         | 1 _________|__        | 2 _________|__
               |  |            |       |  |            |
               |__| 3          |       |__| 4          |
                  |            |          |            |
                  |____________|          |____________|
                ____________            ____________
               |            |          |            |
     5         | 1 _________|__        | 2 _________|__
               |  |            |       |  |            |
               |__| 3 _________|__     |__| 4          |
                  |  |            |       |            |
                  |__| 5          |       |____________|
                     |            |
                     |____________|
                ____________            ____________
               |            |          |            |
     6         | 1 _________|__        | 2 _________|__
               |  |            |       |  |            |
               |__| 3 _________|__     |__| 4 _________|__
                  |  |            |       |  |            |
                  |__| 5          |       |__| 6          |
                     |            |          |            |
                     |____________|          |____________|
</pre>



<p><a name="k07"></a></p>
<h2>7. Mód EHB (Extra Half-Brite)</h2>

<p>Dal¹ím módem, ve kterém se vyu¾ívá v¹ech ¹esti bitových rovin, je mód
oznaèovaný <i>EHB</i> neboli <i>Extra Half-Brite</i>. Pøi zapnutí tohoto módu
se prvních pìt bitových rovin chová prakticky stejnì jako u standardních
grafických re¾imù popsaných v&nbsp;páté kapitole, tj.&nbsp;barva ka¾dého pixelu
je pøedstavována pìti bity, pøièem¾ ka¾dý bit le¾í v&nbsp;jedné bitové rovinì.
Takto ulo¾ená hodnota pøedstavuje index do barvové palety, co¾ znamená, ¾e
ka¾dý pixel mù¾e být obarvený jednou z&nbsp;32 barev ulo¾ených v&nbsp;barvové
paletì (jak ji¾ víme, existuje v&nbsp;originálním èipsetu pouze 32 øídicích
registrù pøedstavujících barvovou paletu, co¾ je jeden z&nbsp;hlavních dùvodù
existence módu <i>EHB</i>). Pomocí logických hodnot ulo¾ených v&nbsp;¹esté
bitové rovinì se urèuje, zda se má intenzita daného pixelu sní¾it na polovinu
èi nikoli. To tedy znamená, ¾e na obrazovce lze zobrazit 64 rùzných barevných
odstínù, ov¹em pouze polovina z&nbsp;nich se pøímo vybírá pøes barvovou paletu
a druhá polovina je z&nbsp;nich odvozena. Pomìrnì velké mno¾ství obrázkù
obsahuje barevné pøechody (zmìna intenzity pixelù), tak¾e je pro nì mód
<i>EHB</i> pou¾itelný.</p>

<a href="http://i.iinfo.cz/images/545/pc81-10.png"><img src="http://i.iinfo.cz/images/545/pc81-10-prev.png" alt="pc81" height="270" width="328" /></a>
<p><i>Obrázek 10: Obrázek, který je vykreslený v&nbsp;módu Extra
Half-Brite.</i></p>

<img src="http://i.iinfo.cz/images/545/pc81-11.png" alt="pc81" height="424" width="329" />
<p><i>Obrázek 11: Barvová paleta obrázku èíslo 10. Pov¹imnìte si, ¾e prvních 32
barev se opakuje, ov¹em se sní¾enou intenzitou.</i></p>



<p><a name="k08"></a></p>
<h2>8. Mód HAM (Hold-And-Modify)</h2>

<p>Posledním re¾imem, kterým se dnes budeme zabývat, je re¾im oznaèovaný
zkratkou <i>HAM</i>, neboli <i>Hold-And-Modify</i>. I v&nbsp;tomto re¾imu je,
podobnì jako v&nbsp;re¾imu pøedchozím, (vìt¹inou) vyu¾ito v¹ech ¹esti bitových
rovin, které v¹ak mají rozdílný význam. V&nbsp;prvních ètyøech rovinách jsou
ulo¾eny hodnoty pixelù pou¾ité pøi výbìru barev pomocí barvové palety (co¾
znamená, ¾e je vyu¾ito pouze 16 øídicích registrù), popø.&nbsp;pro zmìnu jedné
z&nbsp;barvových slo¾ek (viz dal¹í text). V&nbsp;páté a ¹esté bitové rovinì
jsou ulo¾eny øídicí bity (v¾dy dva bity pro ka¾dý pixel), které urèují, zda
hodnota ulo¾ená v&nbsp;prvních ètyøech bitových rovinách bude pova¾ována za
index do barvové palety èi zda se jedná o hodnotu jedné ze tøí barvových slo¾ek
modelu RGB &ndash; viz následující tabulka:</p>

<table>
<tr><th>Bit b6</th><th>Bit b5</th><th>Význam</th></tr>
<tr><td>0</td><td>0</td><td>výbìr barvy z&nbsp;palety stejným zpùsobem, jako ve standardním grafickém re¾imu</td></tr>
<tr><td>0</td><td>1</td><td>zmìna modré slo¾ky (ètyø bitù) podle hodnot naètených z rovin 1-4</td></tr>
<tr><td>1</td><td>0</td><td>zmìna èervené slo¾ky (ètyø bitù) podle hodnot naètených z rovin 1-4</td></tr>
<tr><td>1</td><td>1</td><td>zmìna zelené slo¾ky (ètyø bitù) podle hodnot naètených z rovin 1-4</td></tr>
</table>

<p>V&nbsp;tomto re¾imu lze souèasnì zobrazit v¹ech 4096 barevných odstínù
(<i>Amiga</i> v&nbsp;tomto ohledu pøedbìhla mo¾nosti PCèek o nìkolik let),
ov¹em &ndash; jak je ostatnì patrné i z&nbsp;pøedchozího textu &ndash; hodnoty
sousedních pixelù nemohou být v¾dy zcela libovolné, nebo» mezi nimi existuje
závislost. I z&nbsp;tohoto dùvodu se jedná o re¾im pou¾ívaný pøedev¹ím pro
statické obrázky, nebo» u nich mù¾e grafik provést jejich optimalizaci pøímo
v&nbsp;grafickém editoru (mnoho grafických editorù pro <i>Amigu</i> re¾im
<i>HAM</i> pøímo podporovalo).</p>

<a href="http://i.iinfo.cz/images/545/pc81-12.png"><img src="http://i.iinfo.cz/images/545/pc81-12-prev.png" alt="pc81" height="231" width="370" /></a>
<p><i>Obrázek 12: Na tomto obrázku vykresleném s&nbsp;vyu¾itím módu HAM, je
celkem 327 barev.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>Hold-And-Modify<br />
<a href="http://en.wikipedia.org/wiki/Amiga_Hold-And-Modify">http://en.wikipedia.org/wiki/Amiga_Hold-And-Modify</a>
</li>

<li>Amiga Halfbrite mode<br />
<a href="http://en.wikipedia.org/wiki/Amiga_Hold-And-Modify">http://en.wikipedia.org/wiki/Amiga_Hold-And-Modify</a>
</li>

<li>HAM8 Explained<br />
<a href="http://www.amigans.net/modules/AMS/article.php?storyid=22">http://www.amigans.net/modules/AMS/article.php?storyid=22</a>
</li>

<li>Amiga FAQ (Frequently asked questions) (Part 1 of 4)<br />
<a href="http://www.faqs.org/faqs/amiga/introduction/part1/">http://www.faqs.org/faqs/amiga/introduction/part1/</a>
</li>

<li>Amiga FAQ (Frequently asked questions) (Part 2 of 4)<br />
<a href="http://www.faqs.org/faqs/amiga/introduction/part2/">http://www.faqs.org/faqs/amiga/introduction/part2/</a>
</li>

<li>Amiga FAQ (Frequently asked questions) (Part 3 of 4)<br />
<a href="http://www.faqs.org/faqs/amiga/introduction/part3/">http://www.faqs.org/faqs/amiga/introduction/part3/</a>
</li>

<li>Amiga FAQ (Frequently asked questions) (Part 4 of 4)<br />
<a href="http://www.faqs.org/faqs/amiga/introduction/part4/">http://www.faqs.org/faqs/amiga/introduction/part4/</a>
</li>

<li>Amiga Coding Wiki<br />
<a href="http://www.amigacoding.com/index.php/Main_Page">http://www.amigacoding.com/index.php/Main_Page</a>
</li>

<li>Amiga screen<br />
<a href="http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node0061.html">http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node0061.html</a>
</li>

<li>Amiga HAM mode<br />
<a href="http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node008F.html">http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node008F.html</a>
</li>

<li>Copper WAIT instruction<br />
<a href="http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node004B.html">http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node004B.html</a>
</li>

<li>Copper MOVE instruction<br />
<a href="http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node004A.html">http://amigadev.elowar.com/read/ADCD_2.1/Hardware_Manual_guide/node004A.html</a>
</li>

<li>
Amiga<br />
<a href="http://en.wikipedia.org/wiki/Amiga">http://en.wikipedia.org/wiki/Amiga</a>
</li>

<li>
GalaxSIM: Solutions for Digital Living<br />
<a href="http://www.amiga.com/">http://www.amiga.com/</a>
</li>

<li>
Denise Pin Assignment<br />
<a href="http://www.ntrautanen.fi/computers/hardware/misc/denise.htm">http://www.ntrautanen.fi/computers/hardware/misc/denise.htm</a>
</li>

<li>
Motorola 68000<br />
<a href="http://en.wikipedia.org/wiki/68000">http://en.wikipedia.org/wiki/68000</a>
</li>

<li>
Motorola 68008<br />
<a href="http://en.wikipedia.org/wiki/Motorola_68008">http://en.wikipedia.org/wiki/Motorola_68008</a>
</li>

<li>
Motorola 68020<br />
<a href="http://en.wikipedia.org/wiki/Motorola_68020">http://en.wikipedia.org/wiki/Motorola_68020</a>
</li>

<li>
Motorola 68030<br />
<a href="http://en.wikipedia.org/wiki/Motorola_68030">http://en.wikipedia.org/wiki/Motorola_68030</a>
</li>

<li>Great Microprocessors Past and Present<br />
<a href="http://www.microprocessor.sscc.ru/great">http://www.microprocessor.sscc.ru/great</a>
</li>

<li>Custom Chips: Paula<br />
<a href="http://www.amiga-hardware.com/showhardware.cgi?HARDID=1460">http://www.amiga-hardware.com/showhardware.cgi?HARDID=1460</a>
</li>

<li>Big Book of Amiga Hardware<br />
<a href="http://www.amiga-resistance.info/bboahfaq/">http://www.amiga-resistance.info/bboahfaq/</a>
</li>

<li>Amiga Hardware Database<br />
<a href="http://amiga.resource.cx/">http://amiga.resource.cx/</a>
</li>

<li>ExoticA<br />
<a href="http://www.exotica.org.uk/wiki/Main_Page">http://www.exotica.org.uk/wiki/Main_Page</a>
</li>

<li>The absolute basics of Amiga audio<br />
<a href="http://www.sufo.estates.co.uk/amiga/amimus.html">http://www.sufo.estates.co.uk/amiga/amimus.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2007</small></p>
</body>
</html>

