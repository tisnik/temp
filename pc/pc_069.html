<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafické èipy v osmibitových poèítaèích Atari</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafické èipy v osmibitových poèítaèích Atari</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù budou popsány grafické schopnosti slavných osmibitových domácích poèítaèù vyrábìných firmou Atari. Tyto poèítaèe byly mj. vybaveny i dvojicí èipù ANTIC a GTIA (popø. CTIA), které se staraly jak o generování video signálu, tak i o práci s takzvanými sprity.</p>



<h2>Obsah</h2>
<p>
<a href="#k01">1. Grafické èipy v osmibitových poèítaèích Atari</a><br />
<a href="#k02">2. Èip ANTIC &ndash; Alpha-Numeric Television Interface Circuit</a><br />
<a href="#k03">3. ANTIC a display-list</a><br />
<a href="#k04">4. Grafické re¾imy podporované èipem ANTIC</a><br />
<a href="#k05">5. Pøístup ANTICu do operaèní pamìti</a><br />
<a href="#k06">6. Èasování pøi generování obrazu</a><br />
<a href="#k07">7. Èip GTIA &ndash; George's Television Interface Adapter</a><br />
<a href="#k08">8. Vykreslování spritù a detekce kolizí</a><br />
<a href="#k09">9. Odkazy na Internetu</a><br />
</p>



<p><a name="k01"></a></p>
<h2>1. Grafické mo¾nosti osmibitových poèítaèù Atari</h2>

<p>Osmibitové domácí mikropoèítaèe vyrábìné firmou <i>Atari</i> mìly
architekturu ponìkud odli¹nou od pøedminule a minule popsaného <i>ZX
Spectra</i> a samozøejmì zcela odli¹nou od minimalistického <i>ZX80</i> èi
<i>ZX81</i>. Pro generování obrazu se v&nbsp;tìchto poèítaèích pou¾ívala
dvojice relativnì komplikovaných èíslicových obvodù nazvaných <i>ANTIC</i> a
<i>GTIA</i>, které byly vytvoøeny speciálnì pro potøeby firmy <i>Atari</i>
(dnes jsou na Internetu dostupné interní dokumenty se strukturou obou obvodù
rozkreslenou a¾ na úroveò jednotlivých hradel). Ka¾dý z&nbsp;tìchto obvodù byl
umístìn ve standardním pouzdøe DIL se ètyøiceti vývody, podobnì jako ji¾
popsaný zvukový èip <i>POKEY</i> i samotný osmibitový mikroprocesor <i>MOS
6502</i> verze <i>B</i> èi <i>C</i> (vìt¹ina poèítaèù <i>Atari</i>, kromì
pùvodní øady 400/800, pou¾ívala verzi <i>C</i>, proto¾e ta mìla vyvedený pin
HALT pou¾ívaný pøi kooperaci mikroprocesoru a ostatních èipù pøi generování
video signálu).</p>

<img src="http://i.iinfo.cz/images/409/pc6901.png" width="336" height="240" alt="pc6901" />
<p><i>Obrázek 1: Standardní textový re¾im osmibitových poèítaèù Atari, ve
kterém se na jednom textovém øádku zobrazovalo 40 znakù a poèet textových øádkù
dosahoval hodnoty 24. Technicky se jednalo o monochromatický re¾im, proto¾e
barva pozadí a popøedí mìla v¾dy stejný odstín (standardnì bledìmodrý), li¹ila
se pouze úroveò (intenzita) barev. Ka¾dý znak byl zobrazen v&nbsp;rastru
8&times;8 pixelù, znaky byly programovì mìnitelné (jejich bitové mapy mohly být
umístìny do pamìti RAM). Pro textový kurzor, zde zobrazený pod slovem READY,
existovala pøímá podpora v&nbsp;èipu ANTIC.</i></p>

<p>Funkce obvodù <i>ANTIC</i> a <i>GTIA</i> se vzájemnì doplòovala. První
z&nbsp;tìchto obvodù slou¾il pøedev¹ím pro generování obrazu v&nbsp;textovém èi
grafickém re¾imu (v&nbsp;terminologii firmy <i>Atari</i> se pro tento obraz
v¾il termín <i>playfield</i>) a takté¾ pro jemný horizontální a vertikální
posun obrazu. Funkce druhého obvodu spoèívala v&nbsp;aplikaci barev (jednalo se
o pøevod bitových vzorkù posílaných èipem <i>ANTIC</i> na barvy na základì
vybrané barvové palety) a takté¾ k&nbsp;zobrazení <i>spritù</i> i detekci
kolizí mezi jednotlivými sprity popø.&nbsp;mezi spritem a pozadím vykreslované
scény. Hardwarová podpora spritù byla v&nbsp;dobì osmibitových poèítaèù velmi
dùle¾itá, nebo» umo¾nila (pøedev¹ím ve hrách) zobrazení pohybujících se objektù
a detekci kolizí tìchto objektù se svým okolím bez nutnosti programové
implementace této funkcionality, která by zbyteènì zatì¾ovala mikroprocesor
&ndash; podporu pro sprity ostatnì mají i mnohé dal¹í osmibitové poèítaèe,
zejména známý <i>Commodore C64</i>, jeho¾ grafické schopnosti budou popsány
pøí¹tì.</p>

<img src="http://i.iinfo.cz/images/65/pc6902.png" width="336" height="240" alt="pc6902" />
<p><i>Obrázek 2: Pomìrnì jednoduchým zpùsobem je mo¾né standardní textový re¾im
upravit tak, aby byl ka¾dý øádek zobrazený odli¹nou barvou &ndash; postaèilo na
zaèátku ka¾dého øádku (pøi návratu elektronového paprsku, kdy není provádìno
vykreslování) zmìnit hodnotu jednoho barvového registru. Tento trik se na
osmibitových poèítaèích Atari pou¾íval v&nbsp;mnoha podobách, asi nejznámìj¹í
je logo firmy Atari vyvedené ve v¹ech 128 dostupných barvových
odstínech.</i></p>



<p><a name="k02"></a></p>
<h2>2. Èip ANTIC &ndash; Alpha-Numeric Television Interface Circuit</h2>

<p>Pravdìpodobnì nejzajímavìj¹í je na osmibitových poèítaèích <i>Atari</i>
právì zaèlenìní èipu <i>ANTIC</i> (Alpha-Numeric Television Interface Circuit)
do celého poèítaèového systému &ndash; tento obvod byl toti¾ ve skuteènosti
relativnì samostatnì pracujícím grafickým procesorem (<i>GPU</i> &ndash; i kdy¾
dnes dostalo toto oznaèení ponìkud odli¹ný význam), jeliko¾ ho bylo mo¾né øídit
vlastní sadou instrukcí a takté¾ dokázal obsluhovat pøístup do operaèní pamìti
bez zásahu mikroprocesoru. Instrukce pro <i>ANTIC</i> byly ulo¾ené
v&nbsp;operaèní pamìti, stejnì jako vlastní obrazová pamì»
(<i>framebuffer</i>). Umístìní obou datových blokù se mohlo mìnit, co¾ znamená,
¾e se ka¾dý programátor mohl sám rozhodnout, jak má vypadat organizace pamìti
poèítaèe (na mnoha jiných osmibitových i ¹estnáctibitových poèítaèích byl
pamì»ový rozsah obrazové pamìti nemìnný, co¾ v&nbsp;nìkterých pøípadech
znamenalo urèité omezení, napøíklad pøi vertikálním posunu obrazu).</p>

<img src="http://i.iinfo.cz/images/259/pc6903.png" width="336" height="240" alt="pc6903" />
<p><i>Obrázek 3: Monochromatický grafický re¾im známý pod oznaèením GRAPHICS 8
podle pøíkazu, kterým se v&nbsp;Basicu nastavoval. V&nbsp;tomto re¾imu bylo
mo¾né na jednom obrazovém øádku zobrazit 320 pixelù, u nich¾ se, podobnì jako
ve standardním textovém re¾imu, rozli¹ovala pouze intenzita barvy &ndash;
barevný odstín byl pro pozadí i popøedí toto¾ný. Ve spodní èásti obrazovky se
nachází ètyøi volitelné textové øádky, ve kterých jsou vypsány pøíkazy pro
zobrazení úseèky.</i></p>



<p><a name="k03"></a></p>
<h2>3. ANTIC a display-list</h2>

<p>Na v¹ech osmibitových poèítaèích <i>Atari</i> se výsledný obraz skládal ze
dvou èástí. První èást (kterou dnes známe pod pojmem <i>framebuffer</i>) se
nazývala pozadí, neboli hrací pole (<i>playfield</i>), druhá èást byla slo¾ena
z&nbsp;osmi <i>spritù</i>. Hlavní úloha èipu <i>ANTIC</i> spoèívala ve
vytváøení pozadí na základì &bdquo;programu&ldquo; nazývaného
<i>display-list</i>, pomocí nìho¾ bylo mo¾né pro ka¾dý vykreslovaný obrazový
øádek (<i>scanline</i>) nastavit jeden ze ètrnácti textových èi grafických
re¾imù, které se navzájem li¹ily svým rozli¹ením (velikostí pixelù
v&nbsp;horizontálním i vertikálním smìru), poètem souèasnì zobrazitelných barev
a samozøejmì té¾ velikostí alokované obrazové pamìti &ndash; èím men¹í byly
rozmìry pixelù na øádku a èím vìt¹í poèet barev bylo mo¾né na jednom øádku
zobrazit, tím vìt¹í èást operaèní pamìti bylo nutné pro ka¾dý obrazový øádek
naalokovat (standardnì se poèet bajtù na jeden obrazový øádek pohyboval
v&nbsp;rozmezí 10 a¾ 40). Nìkteré podporované re¾imy byly znakové (na øádku
byly umístìny znaky rùzné velikosti), dal¹í re¾imy byly bitmapové.</p>

<img src="http://i.iinfo.cz/images/182/pc6904.png" width="400" height="350" alt="pc6904" />
<p><i>Obrázek 4: Tok dat mezi operaèní pamìtí, mikroprocesorem a èipy ANTIC i
GTIA pøi generování video signálu.</i></p>

<p>V&nbsp;instrukèním souboru èipu <i>ANTIC</i> se nacházely také pøíznakové
bity, pomocí kterých bylo pro ka¾dý øádek mo¾né povolit pøeru¹ení DLI
(<i>Display-List Interrupt</i>), které bylo automaticky vyvoláváno pøi
horizontálním zpìtném bìhu elektronového paprsku na televizní obrazovce. Takté¾
bylo mo¾né pro ka¾dý obrazový øádek povolit jemný posuv o maximálnì osm pixelù
doleva èi doprava, èím¾ bylo umo¾nìno pouze s&nbsp;vyu¾itím nìkolika instrukcí
mikroprocesoru realizovat jednoduchý posun obrazovky (<i>scrolling</i>) nebo
pouze posun její èásti. Typickým pøíkladem hry, která jemný <i>scrolling</i> ve
velké míøe pou¾ívala, je <i>Boulder Dash</i>. Tato hra je zajímavá také tím, ¾e
se pro zobrazování herní scény pou¾íval speciální textový re¾im
s&nbsp;polovièním horizontálním rozli¹ením a mo¾ností v&nbsp;jednom znaku
rozli¹it pìt barev (tento textový re¾im byl mezi tvùrci her pomìrnì oblíbený,
dal¹í hrou, která ho pou¾ívala, je napøíklad <i>Blue Max</i>). Pøednost pou¾ití
textového re¾imu oproti re¾imu bitmapovému spoèívá ve snadném a rychlém
vykreslení celé scény &ndash; posun hráèe, kamenu nebo drahokamu je proveden
zmìnou jednoho èi dvou bajtù namísto nutnosti vykreslení celé bitmapy.</p>

<img src="http://i.iinfo.cz/images/528/pc6905.png" width="336" height="240" alt="pc6905" />
<p><i>Obrázek 5: Hra Boulder Dash ve své verzi pro osmibitové poèítaèe Atari do
znaèné míry vyu¾ívala mo¾ností poskytovaných èipem ANTIC i jeho
display-listu.</i></p>



<p><a name="k04"></a></p>
<h2>4. Grafické re¾imy podporované èipem ANTIC</h2>

<p>V&nbsp;následující tabulce jsou pro ilustraci nìkterých mo¾ností èipu
<i>ANTIC</i> uvedeny vybrané základní re¾imy, které je mo¾né nastavit pro ka¾dý
obrazový øádek zvlá¹». V&nbsp;prvním sloupci je èíslo (kód) instrukce pro èip
<i>ANTIC</i>, ve sloupci druhém pak èíslo, které se pøedává pøíkazu
<strong>GRAPHICS</strong> v&nbsp;<i>Basicu</i> pøi nastavování textového èi
grafického re¾imu. Pov¹imnìte si, ¾e textový re¾im èíslo 3 není pøímo
z&nbsp;<i>Basicu</i> pøístupný. Jedná se o re¾im s&nbsp;vy¹¹ími znaky, který
lze s&nbsp;výhodou vyu¾ít napøíklad v&nbsp;textových editorech pou¾ívajících
font s&nbsp;&bdquo;nabodeníèky&ldquo;. Pokud je tedy po¾adováno, aby se
zobrazil textový re¾im s&nbsp;40 znaky na øádek a 24 textovými øádky, musí
display-list øídicí èip <i>ANTIC</i> obsahovat mj.&nbsp;i 24 instrukcí
s&nbsp;kódem 2. Ve skuteènosti je v¹ak display-list ponìkud slo¾itìj¹í, proto¾e
obsahuje i instrukci pro vykreslení horního jednobarevného okraje, instrukci
pro nastavení zaèátku obrazové pamìti (adresu prvního znaku na obrazovce) a na
samotném konci display-listu takté¾ instrukci pro skok na jeho zaèátek.</p>

<img src="http://i.iinfo.cz/images/495/pc6906.png" width="336" height="240" alt="pc6906" />
<p><i>Obrázek 6: Grafický re¾im èíslo 15, jeho¾ horizontální rozli¹ení je 160
pixelù. Ka¾dému pixelu je mo¾né pøiøadit jednu ze ètyø barev, barevná paleta je
volitelná (ony ètyøi barvy jsou tedy na sobì nezávislé). V&nbsp;dolní èásti
obrazovky se opìt nachází ètyøøádkové textové okno, ve kterém je napsaný
program, pomocí nìj¾ se obrazec vykreslil (po v¹ech tìch letech programování
v&nbsp;moderních programovacích jazycích byl návrat k&nbsp;Atari Basicu velmi
osvì¾ující :-)</i></p>

<table>
<tr><th>Instrukce ANTIC</th><th>GRAPHICS x</th><th>Re¾im</th><th>Rozli¹ení</th><th>Poèet barev</th><th>Poznámka</th></tr>
<tr><td>2</td><td>0</td><td>textový </td><td>40 znakù na øádek  </td><td>2</td><td>standardní textový re¾im</td></tr>
<tr><td>3</td><td>&times;</td><td>textový </td><td>40 znakù na øádek  </td><td>2</td><td>textový re¾im s vy¹¹ími znaky</td></tr>
<tr><td>4</td><td>12</td><td>textový </td><td>40 znakù na øádek  </td><td>5</td><td>vý¹ka znaku 8 pixelù</td></tr>
<tr><td>5</td><td>13</td><td>textový </td><td>40 znakù na øádek  </td><td>5</td><td>vý¹ka znaku 16 pixelù</td></tr>
<tr><td>6</td><td>1</td><td>textový </td><td>20 znakù na øádek  </td><td>5</td><td>vý¹ka znaku 8 pixelù</td></tr>
<tr><td>7</td><td>2</td><td>textový </td><td>20 znakù na øádek  </td><td>5</td><td>vý¹ka znaku 16 pixelù</td></tr>
<tr><td>8</td><td>3</td><td>grafický</td><td>40 pixelù na øádek </td><td>4</td><td>neznám ¾ádnou aplikaci, která by tento re¾im pou¾ívala</td></tr>
<tr><td>9</td><td>4</td><td>grafický</td><td>80 pixelù na øádek </td><td>2</td><td></td></tr>
<tr><td>A</td><td>5</td><td>grafický</td><td>80 pixelù na øádek </td><td>4</td><td></td></tr>
<tr><td>B</td><td>6</td><td>grafický</td><td>160 pixelù na øádek</td><td>2</td><td>vý¹ka pixelu dva obrazové øádky, vertikální rozli¹ení cca 96 pixelù</td></tr>
<tr><td>C</td><td>14</td><td>grafický</td><td>160 pixelù na øádek</td><td>2</td><td>vý¹ka pixelu jeden obrazový øádek, vertikální rozli¹ení cca 192 pixelù</td></tr>
<tr><td>D</td><td>7</td><td>grafický</td><td>160 pixelù na øádek</td><td>4</td><td>vý¹ka pixelu dva obrazové øádky, vertikální rozli¹ení cca 96 pixelù</td></tr>
<tr><td>E</td><td>15</td><td>grafický</td><td>160 pixelù na øádek</td><td>4</td><td>vý¹ka pixelu jeden obrazový øádek, vertikální rozli¹ení cca 192 pixelù</td></tr>
<tr><td>F</td><td>8</td><td>grafický</td><td>320 pixelù na øádek</td><td>2</td><td>nejvy¹¹í mo¾né standardní rozli¹ení</td></tr>
</table>

<br />

<img src="http://i.iinfo.cz/images/569/pc6907.png" width="336" height="240" alt="pc6907" />
<p><i>Obrázek 7: Kombinace grafických re¾imù ve høe International
Karate.</i></p>



<p><a name="k05"></a></p>
<h2>5. Pøístup ANTICu do operaèní pamìti</h2>

<p>O pøístup k&nbsp;operaèní pamìti se èip <i>ANTIC</i> a <i>GTIA</i> dìlil
s&nbsp;mikroprocesorem, co¾ vedlo k&nbsp;nutnosti pøebírání øízení adresové a
datové sbìrnice v¾dy pouze jedním z&nbsp;tìchto èipù (podobnì tomu ostatnì bylo
i u minule a pøedminule popsaného <i>ZX Spectra</i>). Pøevzetí øízení sbìrnice
se provádìlo pomocí signálu <i>HALT</i>, kterým bylo mo¾né mikroprocesor na
blí¾e neurèenou dobu zastavit. Pøenos hodnot jednotlivých pixelù tvoøících
vykreslovanou bitmapu z&nbsp;operaèní pamìti do èipu <i>ANTIC</i> byl provádìn
bez úèasti mikroprocesoru pomocí pøímého pøístupu do pamìti &ndash; DMA. Pøímý
pøístup do pamìti bylo mo¾né vypnout, èím¾ se výkon celého poèítaèe zvý¹il cca
o 30% (mikroprocesor se nemusel dìlit o sbìrnici), v&nbsp;závislosti na
pou¾itém grafickém re¾imu (pøi vypnutém DMA zùstal obraz samozøejmì èerný,
proto¾e <i>ANTIC</i> nemìl povolen pøístup k&nbsp;obrazovým datùm ani ke svému
vlastnímu &bdquo;programu&ldquo; &ndash; display listu). Z&nbsp;operaèní pamìti
se v&nbsp;pøípadì povolení <i>DMA</i> nenaèítaly pouze hodnoty jednotlivých
pixelù, ale také bitmapy znakù (v&nbsp;textových re¾imech) èi bitmapy tvoøící
sprity.</p>

<img src="http://i.iinfo.cz/images/477/pc6908.png" width="336" height="240" alt="pc6908" />
<p><i>Obrázek 8: Pomocí zmìny barvové palety v&nbsp;pøesnì naèasovaných
okam¾icích je mo¾né simulovat i grafický efekt známý pod jménem
&bdquo;plasma&ldquo; bez nutnosti pøesunù dat ve framebufferu.</i></p>



<p><a name="k06"></a></p>
<h2>6. Èasování pøi generování obrazu</h2>

<p>Pro vykreslování obrazu na televizi èi monitoru pou¾ívaly poèítaèe
<i>Atari</i> celkem 262 obrazových øádkù, pøièem¾ frekvence mikroprocesoru byla
zvolena tak, aby byl ka¾dý pixel v&nbsp;nejjemnìj¹ím grafickém èi textovém
re¾imu (GRAPHICS 0, GRAPHICS 8) vykreslený pøesnì v&nbsp;jedné ètvrtinì cyklu
(taktu hodin) a takté¾ aby bylo mo¾né provést zmìnu barvy dvakrát v&nbsp;jednom
cyklu, tj.&nbsp;v¾dy pro dvojici sousedních pixelù. Pokud vezmeme do úvahy
frekvenci mikroprocesoru pou¾ívanou pro poèítaèe pracující v&nbsp;televizní
normì NTSC (1,79 MHz), zjistíme, ¾e poèet cyklù hodin na jeden obrazový øádek
je roven 114 (1,79/59,94/262&times;10&nbsp;6), ov¹em pro samotné vykreslování
je pou¾ito pouze 88 cyklù. Zbylé cykly mù¾e mikroprocesor vhodným zpùsobem
vyu¾ít, nebo» se v&nbsp;jejich prùbìhu elektronový paprsek vrací na zaèátek
dal¹ího obrazového øádku; je zda napøíklad mo¾né manipulovat s&nbsp;barvovou
paletou. 88 cyklù pro ka¾dý obrazový øádek znamená mo¾nost zmìnit na nìm barvu
celkem 176&times;, tj.&nbsp;vícebarevné grafické re¾imy mají horizontální
rozli¹ení 176 pixelù. Toto rozli¹ení se sni¾ovalo na standardních 160 pixelù,
zbylé pixely tvoøily okraj obrazovky.</p>

<img src="http://i.iinfo.cz/images/427/pc6909.png" width="336" height="240" alt="pc6909" />
<p><i>Obrázek 9: Textový re¾im se znaky, jejich¾ pixely mají dvojnásobnou
velikost v&nbsp;horizontálním i vertikálním smìru. Podle nejvy¹¹ích dvou bitù
kódu znaku se rozli¹ovaly ètyøi barvy (pátá barva byla vyhrazena pro pozadí),
ov¹em znaková sada se zmen¹ila na 64 znakù.</i></p>

<p>V&nbsp;monochromatických re¾imech nebylo mo¾né mìnit barvu sousedních
pixelù, pouze její intenzitu. Na druhou stranu v¹ak bylo mo¾né zdvojnásobit
horizontální rozli¹ení. Z&nbsp;tohoto dùvodu napøíklad nelze v&nbsp;grafickém
re¾imu 8 (320&times;192 pixelù) zobrazovat zelené pixely na èerveném pozadí,
pouze svìtle zelené pixely na tmavì zeleném pozadí, tmavì modré pixely na
svìtle modrém pozadí atd. V&nbsp;ostatních re¾imech, kdy je pro ka¾dý pixel
k&nbsp;dispozici &bdquo;celý&ldquo; barvový cyklus (polovina cyklu strojového),
je ji¾ mo¾né barvy nastavoval libovolnì. Mezi monochromatické re¾imy patøí ji¾
zmínìný grafický re¾im èíslo 8 (320&times;192 pixelù) a takté¾ i standardní
textový re¾im s&nbsp;24 textovými øádky a 40 znaky na øádek. Ka¾dý znak je
v&nbsp;tomto re¾imu pøedstavován ètvercem o velikosti 8&times;8 pixelù,
tj.&nbsp;výsledné rozli¹ení je zcela stejné jako u grafického re¾imu 8.</p>

<img src="http://i.iinfo.cz/images/496/pc6910.png" width="336" height="240" alt="pc6910" />
<p><i>Obrázek 10: Hra Amaroute bì¾ící v&nbsp;monochromatickém re¾imu
s&nbsp;nejvy¹¹ím rozli¹ením 320&times;192 pixelù. Pov¹imnìte si korektního
skrývání vzdálených objektù; pravdìpodobnì se pou¾ívá optimalizovaná podoba
malíøova algoritmu.</i></p>

<p>Podobným zpùsobem se pùvodních 262 obrazových øádkù sni¾ovalo vlivem
vertikálního zatemnìní (návratu paprsku do levého horního rohu obrazovky) i
zaèernìných okrajù na 240 øádkù, pøièem¾ standardní grafické re¾imy
z&nbsp;tìchto 240 øádkù vyu¾ívaly pouze 192 øádkù (ov¹em zvý¹ení vertikálního
rozli¹ení bylo snadné díky existenci display listu). Pro poèítaèe urèené pro
televizní normu PAL platily obdobné vztahy, pouze se nepatrnì (o cca 16 kHz)
sní¾ila frekvence mikroprocesoru, zvý¹ilo se vertikální rozli¹ení a naopak
redukoval poèet snímkù zobrazených na televizní obrazovce za sekundu (NTSC:
59,94 snímkù, PAL: 49,86 snímkù). Navíc se pøi výstupu na televize pracující
v&nbsp;normì PAL neobjevovaly nìkteré vady v&nbsp;podání barev sousedních
pixelù v&nbsp;re¾imech s&nbsp;320 pixely na jednom øádku (kvùli podobným vadám,
které pøímo vychází z&nbsp;normy NTSC si nìkteøí lidé tuto zkratku vysvìtlují
jako <i>Never The Same Colors</i> :-).</p>

<img src="http://i.iinfo.cz/images/402/pc6911.png" width="336" height="240" alt="pc6911" />
<p><i>Obrázek 11: Dal¹í screenshot ze hry Amaroute.</i></p>



<p><a name="k07"></a></p>
<h2>7. Èip GTIA &ndash; George's Television Interface Adapter</h2>

<p>S&nbsp;vý¹e popsaným obvodem <i>ANTIC</i> úzce spolupracoval èíslicový obvod
nazvaný <i>GTIA</i> (Graphics Television Interface Adapter nebo té¾ George's
Television Interface Adapter, podle jména svého tvùrce), který nahradil pùvodní
èip <i>CTIA</i> (Color Television Interface Adapter). Tento èip roz¹iøoval
grafické re¾imy poèítaèù <i>Atari</i> o dal¹í trojici &ndash; jednalo se o
re¾imy s&nbsp;horizontálním rozli¹ením sní¾eným na 80 pixelù, proto¾e ka¾dý
pixel byl pøedstavován ètveøicí bitù (jeden øádek má pøi pou¾ití standardních
re¾imù ve framebufferu velikost 20 nebo 40 bajtù, v&nbsp;roz¹íøeném hracím poli
pak maximálnì 48 bajtù). Ve skuteènosti byly v¹echny tøi nové grafické re¾imy
zalo¾ené na monochromatickém re¾imu èíslo 8, který umo¾òoval na jednom øádku
standardnì zobrazit 320 pixelù. Èip <i>GTIA</i> v¾dy ètveøici sousedních pixelù
slouèil a výsledné ètyøi bity mu slou¾ily buï pro výbìr barvy z&nbsp;barvové
palety (k&nbsp;dispozici bylo devìt barev z&nbsp;mo¾ných ¹estnácti &ndash;
jedná se o celkem zbyteèné omezení dané poètem barvových registrù), urèení
odstínu barvy (úroveò, tj.&nbsp;svìtlost byla konstantní),
popø.&nbsp;k&nbsp;urèení úrovnì barvy, zatímco odstín byl konstantní (tímto
zpùsobem bylo mo¾né napøíklad pracovat s&nbsp;èernobílými fotografiemi). Èip
<i>GTIA</i> tedy ponechával znaènou èást práce (èasování, provádìní
display-listu atd., pøístup do pamìti) na obvodu <i>ANTIC</i>.</p>

<img src="http://i.iinfo.cz/images/640/pc6912.png" width="336" height="240" alt="pc6912" />
<p><i>Obrázek 12: Hra Draconus se mj.&nbsp;vyznaèovala vyu¾itím ditheringu a
hracího pole s&nbsp;odstínem jedné barvy, které høe dodávají zvlá¹tní
kouzlo.</i></p>



<p><a name="k08"></a></p>
<h2>8. Vykreslování spritù a detekce kolizí</h2>

<p>Èip <i>GTIA</i> kromì zavedení tøí nových grafických re¾imù umo¾òoval
vykreslit ètyøi sprity s&nbsp;rozli¹ením maximálnì 8&times;256 pixelù
(popø.&nbsp;8&times;128 pixelù) a dal¹í ètyøi sprity s&nbsp;rozli¹ením
2&times;256 pixelù, které bylo mo¾no spojit do jednoho (pátého) vìt¹ího spritu
s&nbsp;rozli¹ením 8&times;256 pixelù. Sprity ¹iroké 8 pixelù se
v&nbsp;literatuøe nazývají hráèi (<i>players</i>), úzké dvoupixelové sprity
støely (<i>missiles</i>). Sprity byly jednobarevné, více barev bylo mo¾no
dosáhnout logickými operacemi nad pøekrývajícími se sprity (poèítaèe Commodore
C64 naproti tomu nabízely i sprity v&nbsp;re¾imu <i>multicolor</i>). Ka¾dý
sprite mohl pomocí jedné instrukce mìnit svoji horizontální velikost i
horizontální pozici, pøièem¾ polohy spritù byly navzájem nezávislé. Vertikální
pozice spritù se mìnila blokovým pøesunem bitmapy spritu v&nbsp;operaèní
pamìti. Bylo také mo¾né definovat priority vykreslování spritù vùèi sobì
navzájem i vùèi pozadí, tj.&nbsp;zda se má sprite vykreslovat nad herním polem
(popø.&nbsp;jiným spritem) èi se naopak pod nìkterými barvami skrývat.</p>

<img src="http://i.iinfo.cz/images/150/pc6913.png" width="336" height="240" alt="pc6913" />
<p><i>Obrázek 13: Úvodní obrazovka hry Draconus II.</i></p>

<p>Kromì toho, ¾e se dala mìnit prioria jednotlivých spritù bylo také mo¾né
detekovat kolizi spritu s&nbsp;jiným spritem popø.&nbsp;s&nbsp;nìjakou barvou
hracího pole. Pøi kolizi (do úvahy se samozøejmì braly pouze viditelné pixely
spritu) se nastavil pøíslu¹ný bit ve stavových registrech, odkud bylo mo¾né
kdykoli poté zjistit, zda ke kolizi do¹lo èi nikoli. Díky této funkcionalitì
bylo mo¾né velmi snadno otestovat napøíklad náraz hráèe do stìny, zásah hráèe
støelou atd. Vzhledem k&nbsp;tomu, ¾e sprity byly pouze jednobarevné, museli
se vícebarevní hráèi sestavovat z&nbsp;nìkolika spritù. Omezení poètu spritù
naproti tomu nebylo kritické, nebo» jeden sprite mohl být ve skuteènosti
pou¾itý pro zobrazení vìt¹ího mno¾ství objektù ve scénì &ndash; jediným
omezením bylo, ¾e tyto objekty nesmìly le¾et na stejném obrazovém øádku.</p>

<img src="http://i.iinfo.cz/images/393/pc6914.gif" width="328" height="235" alt="pc6914" />
<p><i>Obrázek 14: Hra Zybex se pojetím grafiky blí¾í vý¹e zmínìné høe
Draconus.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>
<a href="http://raster.infos.cz/atari/">Radek ©tìrba (Raster): Svìt osmibitových poèítaèù Atari</a>
</li>

<li>
<a href="http://www.atarimagazines.com/">Atari Magazines</a>
</li>

<li>
<a href="http://www.atarimagazines.com/compute/issue26/Atari_Video_Graphics_And_The_New_GTIA.php">Atari Video Graphics And The New GTIA</a>
</li>

<li>
<a href="http://members.chello.at/theodor.lauppert/games/ar-c.htm">Alternate Reality - RPG pro osmibitová Atari</a>
</li>

<li>
<a href="http://faqs.cs.uu.nl/na-dir/atari-8-bit/faq.html">http://faqs.cs.uu.nl/na-dir/atari-8-bit/faq.html</a>
</li>

<li>
<a href="http://www.faqs.org/faqs/atari-8-bit/faq/preamble.html">http://www.faqs.org/faqs/atari-8-bit/faq/preamble.html</a> 
</li>

<li>
<a href="ftp://rtfm.mit.edu/pub/faqs/atari-8-bit/welcome">ftp://rtfm.mit.edu/pub/faqs/atari-8-bit/welcome</a>
</li>

<li>
<a href="http://faqs.cs.uu.nl/na-dir/atari-8-bit/welcome.html">http://faqs.cs.uu.nl/na-dir/atari-8-bit/welcome.html</a>
</li>

<li>
<a href="http://www.faqs.org/faqs/atari-8-bit/welcome/">http://www.faqs.org/faqs/atari-8-bit/welcome/</a>
</li>

<li>
<a href="http://atari.fandal.cz/stuff.php">Fandal's Stuff</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

