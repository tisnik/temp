<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafika na osmibitových poèítaèích firmy Sinclair II</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafika na osmibitových poèítaèích firmy Sinclair II</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù dokonèíme popis grafických mo¾ností ZX Spectra, vèetnì èasování pøi generování grafiky. Takté¾ si popí¹eme zpùsob práce s grafikou u dal¹ích poèítaèù firmy Sinclair a nakonec zajímavý (i kdy¾ komerènì nepøíli¹ úspì¹ný) poèítaè Sam Coupé.</p>



<h2>Obsah</h2>
<p>

<a href="#k01">1. Organizace video pamìti ZX Spectra</a><br />
<a href="#k02">2. Èasování v&nbsp;grafickém re¾imu ZX Spectra</a><br />
<a href="#k03">3. Grafické triky na ZX Spectru</a><br />
<a href="#k04">4. ZX Spectrum +128K</a><br />
<a href="#k05">5. Sinclair QL</a><br />
<a href="#k06">6. Grafické mo¾nosti poèítaèe Sinclair QL</a><br />
<a href="#k07">7. Poèítaè Sam Coupé</a><br />
<a href="#k08">8. Odkazy na Internetu</a><br />
<a href="#k09">9. Obsah následující èásti seriálu</a><br />
</p>



<p><a name="k01"></a></p>
<h2>1. Organizace video pamìti ZX Spectra</h2>

<p>Ji¾ v&nbsp;pøedchozí èásti tohoto seriálu jsme si popsali základní strukturu
obrazové pamìti poèítaèe <i>ZX Spectrum</i>. Z&nbsp;pohledu mikroprocesoru
(tj.&nbsp;jeho adresové sbìrnice) zaèínala tato pamì» na adrese 16384, proto¾e
do prvních 16 kB byla namapována pamì» ROM a od adresy 32768 se nacházel blok
pamìti RAM o kapacitì 32 kB, do které mìl pøístup pouze mikroprocesor. Jediný
blok pamìti, který byl sdílený mezi ULA (èip, který se mj.&nbsp;staral o
generování video signálu) a mikroprocesorem, se nacházel od zmínìné adresy
16384 a¾ do adresy 32767. Z&nbsp;hlediska programátorù se tato oblast pamìti
jevila jako pomalej¹í, proto¾e mikroprocesor musel v&nbsp;nìkterých okam¾icích
èekat, a¾ ULA dokonèí ètení obrazových dat. Z&nbsp;praktického hlediska to
znamenalo, ¾e se do této oblasti pamìti ukládaly pouze data èi programové
rutiny, pøi jejich¾ volání nebylo nutné pou¾ívat pøesné èasování.</p>

<img alt="obr" src="http://i.iinfo.cz/images/498/pc6801.png" />
<p><i>Obrázek 1: Doom pro ZX Spectrum!</i></p>

<p>Obrazová pamì» je rozdìlena na dvì èásti &ndash; bitmapu s&nbsp;rozli¹ením
256&times;192 pixelù o velikosti 256&times;192/8=6144 bajtù a maticí
<i>atributù</i> s&nbsp;32&times;24=768 bajty. Ka¾dému pixelu je v&nbsp;bitmapì
pøiøazen jediný bit rozli¹ující, zda se jedná o pixel s&nbsp;barvou pozadí èi
popøedí, tj.&nbsp;v&nbsp;jednom bajtu jsou ulo¾eny informace o osmi pixelech
le¾ících na jednom obrazovém øádku. Pixely na jednom obrazovém øádku, tvoøící
blok o délce 32 bajtù, jsou ulo¾eny lineárnì za sebou, ov¹em jednotlivé
obrazové øádky jsou v&nbsp;pamìti ulo¾eny napøeskáèku: ¹estnáctibitovou adresu
lze v&nbsp;pøípadì práce s&nbsp;obrazovou pamìtí rozdìlit na více èástí tak,
jak je naznaèeno ní¾e (ka¾dé písmeno odpovídá jednomu bitu ¹estnáctibitové
adresy):</p>

<pre>
010 BB SSS RRR CCCCC

BS:    èíslo bloku 0,1,2 (v&nbsp;bloku èíslo 3 je atributová pamì»)
SSS:   èíslo øádky v&nbsp;jednom znaku, který je vysoký osm obrazových øádkù
RRR:   pozice textového øádku v&nbsp;bloku. Ka¾dý blok je vysoký 64 obrazových øádkù, co¾ odpovídá osmi øádkùm textovým
CCCCC: index sloupce bajtu v&nbsp;rozmezí 0..31, kde je ulo¾ena osmice sousedních pixelù
</pre>

<img alt="obr" src="http://i.iinfo.cz/images/296/pc6802.png" />
<p><i>Obrázek 2: Úvodní obrazovka svìtoznámé hry Manic Miner.</i></p>

<p>Nejlépe je tato organizace pamìti patrná pøi nahrávání programu
z&nbsp;kazety, nebo» nahrávací rutina pouze naèítá data a postupnì je ukládá od
adresy 16384, tj.&nbsp;na obrazovce se nahrávaná bitmapa objevuje po
jednotlivých &bdquo;zpøeházených&ldquo; øádcích: nejprve první øádky
z&nbsp;ka¾dého bloku (první øádek na obrazovce, øádek èíslo 64 a øádek èíslo
128), potom øádky posunuté o sedm pixelù dolù atd.</p>

<img alt="obr" src="http://i.iinfo.cz/images/266/pc6803.png" />
<p><i>Obrázek 3: První úroveò hry Manic Miner.</i></p>

<p>K&nbsp;bitmapì byla navíc pøiøazena vý¹e zmínìná atributová pamì» o
velikosti 32&times;24=768 bajtù, v&nbsp;ní¾ je pro blok 8&times;8 pixelù
zaznamenána barva popøedí, barva pozadí, intenzita barvy pixelu a pøíznak
blikání (pravidelného prohazování barvy popøedí a pozadí). ZX Spectrum mìlo
pevnì nastavenou barvovou paletu s&nbsp;osmi základními barvami, pøièem¾ sedm
barev (kromì barvy èerné) mohlo být zobrazeno s&nbsp;nízkou èi vysokou
intenzitou. Celkem tedy bylo mo¾né na obrazovce pou¾ít patnáct barevných
odstínù, ov¹em s&nbsp;tím omezením, ¾e se v&nbsp;bloku 8&times;8 pixelù mohly
vyskytovat maximálnì dvì barvy &ndash; viz napøíklad <a
href="http://gfxzone.planet-d.net/articles/zx_spectrum_graphics-explanation_symbol_places.png">tento
ilustraèní obrázek</a>. Tato architektura obrazové pamìti má jednu zásadní
výhodu &ndash; pro ulo¾ení celého obrázku bylo zapotøebí pouze 6144+768=6912
bajtù. Nevýhodou je vznik ne¾ádoucích jevù v&nbsp;pøípadì, ¾e dojde ke kolizi
více objektù s&nbsp;rùznými barvami v&nbsp;jednom bloku 8&times;8 pixelù.</p>

<img alt="obr" src="http://i.iinfo.cz/images/253/pc6804.png" />
<p><i>Obrázek 4: Tento úvodní obrázek je høe Tomahawk (simulátor stejnojmenného
vrtulníku) obsahoval pouze 6 barev.</i></p>



<p><a name="k02"></a></p>
<h2>2. Èasování v&nbsp;grafickém re¾imu ZX Spectra</h2>

<p>V&nbsp;dal¹í kapitole si øekneme, jaké grafické triky je mo¾né na ZX Spectru
pou¾ít, ov¹em pro lep¹í pochopení nìkterých trikù je vhodné znát, jak je
generování video signálu èasováno. V&nbsp;pøedchozí èásti tohoto seriálu jsme
si øekli, ¾e mikroprocesor Zilog Z80, který byl v&nbsp;ZX Spectru pou¾itý, byl
taktovaný na 3,5 MHz, tj.&nbsp;za jednu sekundu probìhlo 3500000 hodinových
cyklù. Televizní obraz je v&nbsp;normì PAL obnovovaný padesátkrát za sekundu,
co¾ znamená, ¾e jeden snímek trvá pøesnì 3500000/50=70000 hodinových cyklù. Na
obrazovce je v&nbsp;ka¾dém snímku (pøesnìji pùlsnímku) vykresleno 312,5
obrazových øádkù, tak¾e jednoduchým výpoètem zjistíme, ¾e jeden obrazový øádek
je vykreslen za 224 hodinových cyklù. Zmínìných 312,5 obrazových øádkù se dìlí
na tøi oblasti: 64 øádkù pro horní okraj (má konstantní barvu), 192 øádkù
s&nbsp;vlastním obrazem a koneènì 56,5 øádkù pro dolní okraj. Ve skuteènosti
je horní okraj ni¾¹í ne¾ celých 64 øádkù, proto¾e nìjaký èas zabere návrat
elektronového paprsku do levého horního rohu obrazovky.</p>

<img alt="obr" src="http://i.iinfo.cz/images/495/pc6805.png" />
<p><i>Obrázek 5: Ukázka souèasné tvorby grafiky pro ZX Spectrum, tento obrázek
obsahuje pouze devìt barev a vyu¾ívá ditheringu.</i></p>

<p>V&nbsp;224 hodinových cyklech, které jsou vyhrazeny pro ka¾dý obrazový
øádek, se vykreslí 256 pixelù, pøièem¾ ka¾dý pixel je vykreslen v&nbsp;polovinì
hodinového cyklu (to znamená, ¾e ULA musí ka¾dé 4 cykly naèíst dvojici bajtù
&ndash; osmici pixelù a atributový bajt). Pro vykreslení celého obrazového
øádku je tedy zapotøebí 128 cyklù, pøièem¾ zbývajících 224-128=96 cyklù trvá
vykreslení pravého a levého okraje (24+24 cyklù) a takté¾ návrat elektronového
paprsku na dal¹í øádek (48 cyklù). Co je dùle¾ité &ndash; pøi vykreslování
v¹ech okrajù je mo¾né zasahovat do obrazové pamìti a ULA pro ka¾dý obrazový
øádek ète v¹echny pøíslu¹né barvové atributy, tj.&nbsp;neobsahuje ¾ádnou pamì»,
do kterých by se jednou naètené hodnoty ulo¾ily. To mj.&nbsp;znamená, ¾e
atributová pamì» má sice velikost 768 bajtù, ale pøi vykreslení jednoho snímku
se ve skuteènosti pøeète 6144 bajtù (ka¾dý bajt osmkrát).</p>



<p><a name="k03"></a></p>
<h2>3. Grafické triky na ZX Spectru</h2>

<p>Pomìrnì brzy po zaèátku prodeje ZX Spectra programátoøi vymysleli nìkteré
triky, kterými mohli èásteènì obejít omezení daná pevnou grafickou paletou a
pamìtí atributù. Pravdìpodobnì prvním trikem bylo pou¾ití <i>ditheringu</i>
(ten ostatnì dodnes vyu¾ívají napøíklad i laserové tiskárny èi osvitové
jednotky). V¹echny screenshoty, které jsou v&nbsp;tomto èlánku zobrazeny
pochází z&nbsp;emulátorù a snímky jsou tak ostré &ndash; je viditelný ka¾dý
pixel. Ve skuteènosti pøi zobrazení na televizní obrazovce docházelo
k&nbsp;rozmazávání obrázku, pøedev¹ím v&nbsp;horizontálním smìru, èeho¾ se dalo
vyu¾ít právì s&nbsp;pomocí ditheringu &ndash; viz pátý a ¹estý obrázek. Dal¹ím
trikem byla zmìna atributové pamìti v&nbsp;prùbìhu zobrazování jednotlivých
øádkù. V&nbsp;pøedchozí kapitole jsme si øekli, ¾e ULA v¾dy naèítá obsah
atributové pamìti pro celý obrazový øádek, tudí¾ je mo¾né s&nbsp;vyu¾itím
pøesného èasování hodnotu atributù mìnit pro ka¾dý øádek zvlá¹» a vlastnì tak
zvý¹it rozli¹ení atributové pamìti z&nbsp;32&times;24 blokù na 32&times;192
blokù. Ov¹em rychlost mikroprocesoru na pùvodním ZX Spectru nebyla tak vysoká,
aby bylo mo¾né pøepsat v¹ech 32 bajtù v&nbsp;prùbìhu jednoho øádku
(resp.&nbsp;pøi návratu paprsku na dal¹í øádek), proto se v&nbsp;praxi mìnila
v¾dy jen zhruba polovina atributù &ndash; tento re¾im se nìkdy oznaèuje
8&times;2.</p>

<img alt="obr" src="http://i.iinfo.cz/images/263/pc6806.png" />
<p><i>Obrázek 6: Na tomto obrázku je pouze pìt barev, v&nbsp;pravé horní èásti
je patrné, ve kterém místì se nachází hranice blokù 8&times;8 pixelù.</i></p>

<p>Dal¹í trik je zalo¾en na jednoduché my¹lence &ndash; pokud nedoká¾eme zvý¹it
rozli¹ení ani poèet barev v&nbsp;jednom snímku (prostorové oblasti), mù¾eme
provádìt zmìny v&nbsp;oblasti èasové. Na ZX Spectru +128K (viz dal¹í kapitolu)
lze vyu¾ít dvojici video bufferù, tj.&nbsp;dvojici obrázkù, mezi kterými se lze
pøepínat jedinou instrukcí <i>OUT</i>. Rychlým pøepínáním vhodnì zvolených
obrázkù je mo¾né zvý¹it poèet barev, proto¾e lidské oko si tyto snímky ve své
podstatì zprùmìruje. Tímto zpùsobem se i na ZX Spectru zobrazovala napøíklad
hnìdá barva, která není v&nbsp;jeho pùvodní paletì pøítomna. Pøepínáním tøí
snímkù lze zobrazit a¾ 100 barev, ov¹em poblikávání obrazu mù¾e být nepøíjemné.
Tento trik je velmi slo¾ité implementovat v&nbsp;moderních emulátorech ZX
Spectra, proto¾e frekvence obrazu na dne¹ních monitorech se odli¹uje od
pùvodních 25Hz/50Hz televizní obrazovky.</p>



<p><a name="k04"></a></p>
<h2>4. ZX Spectrum +128K</h2>

<p>O osmibitovém poèítaèi <i>ZX Spectrum +128K</i> z&nbsp;roku 1986 jsme se ji¾
zmínili v&nbsp;pøedchozích èástech tohoto seriálu, konkrétnì pøi popisu
zvukového èipu <i>AY-3-8910</i>, jen¾ byl pou¾it jak v&nbsp;tomto velice
úspì¹ném osmibitovém poèítaèi, tak i napøíklad v&nbsp;poèítaèích øady <i>Atari
ST</i>. Zatímco vzhledovì se tento poèítaè pøíli¹ neli¹il od svých pøedchùdcù,
napøíklad <i>ZX Spectrum+</i>, celková architektura poèítaèe byla
v&nbsp;nìkolika smìrech vylep¹ena. Pøedev¹ím byl zvukový systém poèítaèe
(tj.&nbsp;jednobitový &bdquo;pøevodník&ldquo; napojený na reproduktor) roz¹íøen
o ji¾ zmínìný èip <i>AY-3-8910</i>, pøesnìji øeèeno o jeho variantu
<i>AY-8912</i>, která kromì zvukového výstupu obsahovala i jeden osmibitový
port pou¾itý pro pøipojení MIDI zaøízení a externí klávesnice. Dále byla
zvý¹ena kapacita pamìti ROM ze 16 kB na 32 kB, co¾ napøíklad umo¾nilo pou¾ití
vylep¹eného interpretru Basicu i jeho editoru. Kapacita pamìti RAM je
zakódována v&nbsp;samotném názvu poèítaèe &ndash; má velikost 128 kB.</p>

<img alt="obr" src="http://i.iinfo.cz/images/161/pc6807.jpg" />
<p><i>Obrázek 7: ZX Spectrum +128K</i></p>

<p>Èásteèné vylep¹ení doznal také grafický subsystém. Nejvìt¹í zmìnou (spí¹e
roz¹íøením) bylo to, ¾e se framebuffer mohl nacházet na dvou místech
v&nbsp;operaèní pamìti. To znamenalo, ¾e se dal velmi snadno implementovat
napøíklad <i>double buffering</i>, tj.&nbsp;technika, pøi které se do jednoho
(neviditelného) bufferu provádìlo vykreslování, zatímco obsah druhého bufferu
byl zobrazován (vykreslování tedy nevedlo napøíklad k&nbsp;ne¾ádoucímu
&bdquo;snì¾ení&ldquo;). Po vykreslení scény se funkce obou bufferù prohodily.
Dva buffery bylo mo¾né pou¾ít i pro implementaci vý¹e popsaného triku
<i>GigaScreen</i>, pøi kterém se na obrazovce rychle mìní dva speciálnì
upravené obrázky.</p>

<p>Dal¹ího vylep¹ení grafického subsystému se v¹ak programátoøi ani u¾ivatelé
nedoèkali (pravdìpodobnì kvùli snaze o co nejvìt¹í zpìtnou kompatibilitu)
&ndash; podpora pro skuteèný textový re¾im, sprity èi plynulý scrolling
obrazovky neexistovala, tyto efekty musely být naprogramovány, na rozdíl od
nìkterých jiných osmibitových poèítaèù, které pro tyto èinnosti obsahovaly
specializované èipy.</p>



<p><a name="k05"></a></p>
<h2>5. Sinclair QL</h2>

<p>Nejvýkonnìj¹ím poèítaèem vyrobeným firmou <i>Sinclair Research</i> byl
osobní poèítaè nazvaný <i>Sinclair QL</i>. Zkratka <i>QL</i> je odvozena od
sousloví Quantum Leap neboli kvantový pøechod. Tímto názvem pravdìpodobnì
chtìla firma naznaèit výkonový i technologický skok mezi pùvodní øadou
<i>ZX</i> a poèítaèi <i>QL</i>. O technologický skok se skuteènì jednalo
&ndash; <i>Sinclair QL</i> toti¾ obsahoval mikroprocesor øady <i>Motorola
68000</i>, konkrétnì typ <i>Motorola 68008</i> taktovaný na sedmi a pùl
megahertzích, co¾ je na dobu vzniku velmi slu¹ná frekvence (vzpomeòme na
pozdìj¹í Amigy èi Atari ST). Vzhledem k&nbsp;tomu, ¾e poèítaè byl pøedstaven
v&nbsp;roce 1984, se jednalo o jeden z&nbsp;prvních skuteènì
tøicetidvoubitových osobních poèítaèù na trhu (bitová ¹íøka není urèena externí
sbìrnicí, ale interní datovou sbìrnicí mikroprocesoru a ¹íøkou operandù
vstupujících do ALU); prvenství si dr¾í slavný Apple Macintosh (viz reklama na
Macintosh, která je natoèena v&nbsp;prostøedí románu 1984). Jedním
z&nbsp;u¾ivatelù tohoto poèítaèe byl i jistý Linus Torvalds, jeho¾ jméno
ètenáøi Root.cz pravdìpodobnì ji¾ zaslechli :-)</p>

<img alt="obr" src="http://i.iinfo.cz/images/474/pc6808.jpg" />
<p><i>Obrázek 8: Sinclair QL.</i></p>

<p>Na rozdíl od Macintoshe se v¹ak Sinclair QL nesetkal s&nbsp;vìt¹ím obchodním
úspìchem. Uvádí se, ¾e za necelé dva roky (ne¾ byla výroba ukonèena) bylo
prodáno cca 150 tisíc kusù, co¾ ji¾ nepøedstavuje pro polovinu osmdesátých let
¾ádné ohromující èíslo. Pravdìpodobným dùvodem neúspìchu je nástup nové
generace poèítaèù firem <i>Atari</i> a <i>Commodore</i> (CBM) a také to, ¾e
poèítaè nebyl zpìtnì kompatibilní se <i>ZX Spectrem</i>. Pomìrnì zajímavá je
v¹ak jeho architektura. Kromì ji¾ zmínìného tøicetidvoubitového mikroprocesoru
se na jeho základní desce nacházely dva zákaznické obvody oznaèené
<i>ZX8301</i> a <i>ZX8302</i> (pùvodnì se toti¾ Sinclair QL mìl jmenovat
<i>ZX83</i>, z&nbsp;èeho¾ vychází i prefix oznaèení této dvojice integrovaných
obvodù) a navíc mikroøadiè <i>Intel 8049</i> (jedná se o øadu <i>Intel 8048</i>
z&nbsp;ní¾ vychází i dodnes populární øada <i>Intel 8051</i>), který
mj.&nbsp;slou¾il pro generování zvuku a komunikaci s&nbsp;klávesnicí a my¹í.
Zajímavé je, ¾e poèítaè nebyl vybaven disketovou jednotkou, ale pamì»ovým
zaøízením <i>Microdrive</i> (nekoneènou magnetickou páskou), které jsme si ji¾
v&nbsp;tomto seriálu popsali.</p>

<img alt="obr" src="http://i.iinfo.cz/images/412/pc6809.jpg" />
<p><i>Obrázek 9: Dal¹í pohled na Sinclair QL.</i></p>



<p><a name="k06"></a></p>
<h2>6. Grafické mo¾nosti poèítaèe Sinclair QL</h2>

<p>Nás v¹ak bude v&nbsp;kontextu grafických subsystémù zajímat pøedev¹ím první
zákaznický obvod &ndash; <i>ZX8301</i>, nazývaný té¾ Master Chip. Tento obvod
plní v&nbsp;poèítaèi dvì funkce: obnovu obsahu dynamických pamìtí (DRAM
refresh) a generování video signálu. Pøi práci s&nbsp;video signálem dokázal
èip <i>ZX8301</i> pracovat ve dvou grafických re¾imech. První re¾im nabízel
velmi slu¹né rozli¹ení 512&times;256 pixelù, pøièem¾ ka¾dý pixel mohl mít
nastavenu jednu ze ètyø barev (èerná, èervená, zelená, bílá). Ve druhém re¾imu
bylo rozli¹ení v&nbsp;horizontální ose sní¾eno na polovinu,
tj.&nbsp;256&times;256, ov¹em poèet barev pro jeden pixel se zvý¹il ze ètyø na
osm (výbìr se mohl provádìt z&nbsp;palety 256 barev) a navíc se jedním bitem
dalo nastavit, zda má pixel blikat. Velikost framebufferu je v&nbsp;obou
pøípadech shodná: 512&times;256&times;2/8=32768 bajtù;
256&times;256&times;4/8=32768 bajtù, tj.&nbsp;pøesnì 32 kB, navíc je poèet
pixelù na øádku pøedstavován "kulatým" èíslem, co¾ v&nbsp;nìkterých pøípadech
vede ke zjednodu¹ení grafických algoritmù, napøíklad i rutiny
<i>putpixel</i>.</p>

<img alt="obr" src="http://i.iinfo.cz/images/329/pc6810.png" />
<p><i>Obrázek 10: Obrazovka poèítaèe Sinclair QL s&nbsp;textovým
editorem.</i></p>

<p>Èip <i>ZX8301</i> takté¾ podporoval pøepínání mezi dvìma framebuffery, èím¾
se dal velmi jednodu¹e implementovat double buffering, pomocí nìho¾ lze
provádìt animace bez ne¾ádoucího poblikávání obrazu. Pøepínání mezi dvìma
framebuffery znamená, ¾e do jednoho bufferu se vykresluje scéna zatímco druhý
buffer je zobrazen na obrazovce monitoru. Pokud vás grafické schopnosti
poèítaèe <i>Sinclair QL</i> neohromily, tak vìzte, ¾e první generace poèítaèù
IBM PC byla vybavena kartou CGA (Color Graphics Adapter) s&nbsp;polovièní
kapacitou framebufferu a tím pádem i omezenìj¹ími schopnostmi (o double
bufferingu ani nemluvì).</p>



<p><a name="k07"></a></p>
<h2>7. Poèítaè Sam Coupé</h2>

<p>O poèítaèi <i>Sam Coupé</i>, který je ideovým pokraèovatelem vývojové øady
poèítaèù ZX Spectrum (i kdy¾ se jedná o výrobek jiné firmy), bylo ji¾ mnohokrát
napsáno, ¾e na trh pøi¹el pøíli¹ pozdì a k&nbsp;tomu je¹tì ve ¹patné zemi;
konkrétnì ve Velké Británii a ne v&nbsp;USA. Toto tvrzení asi bude do jisté
míry pravdivé, proto¾e tento poèítaè je prakticky neznámý a nijak výraznìji se
neroz¹íøil, i kdy¾ po technické stránce se jednalo o vyzrálý produkt. Pou¾itým
procesorem byl opìt oblíbený <i>Zilog Z80</i>. Taktovací frekvence se oproti
<i>ZX Spectru</i> zvý¹ila z&nbsp;pùvodních 3,5 MHz na 6 MHz, co¾ zhruba
odpovídá poèítaèùm PC XT, které v&nbsp;té dobì obsahovaly hybrid Intel 8088.
Kapacita operaèní pamìti stoupla na 256 kB resp. 512 kB (podle modelu), externì
bylo mo¾né pamì» roz¹íøit dokonce a¾ na 4,5 MB. Pamì» ROM v¹ak zùstávala
pomìrnì malá &ndash; 32 kB, na co¾ si stì¾oval i tvùrce interpretru jazyka
Basic. O zvuk se staral èip Philips SM 1099, který dokázal vygenerovat
¹estikanálovou stereo hudbu vytváøenou pomocí v&nbsp;té dobì oblíbené FM
syntézy; jeho schopnosti zhruba odpovídají dvojici ji¾ popsaných zvukových èipù
<i>AY-3-8910</i>.</p>

<img alt="obr" src="http://i.iinfo.cz/images/75/pc6811.jpg" />
<p><i>Obrázek 11: Poèítaè SAM Coupé.</i></p>

<p>Grafické mo¾nosti tohoto poèítaèe byly na velmi dobré úrovni a tvoøily
urèitý pøechod mezi osmibitovými poèítaèi a poèítaèi ¹estnáctibitovými.
Programátorùm byly dostupné celkem ètyøi základní grafické re¾imy:</p>

<ul>

<li>Grafický re¾im kompatibilní se <i>ZX Spectrem</i> o rozli¹ení bitmapy
256&times;192 pixelù a mapou 32&times;24 barvových atributù (16 barev).
Èasování pøi vykreslování v¹ak bylo oproti pùvodnímu <i>ZX Spectru</i>
odli¹né.</li>

<li>Grafický re¾im s&nbsp;bitmapou o rozli¹ení 256&times;192 pixelù a mapou
32&times;192 atributù. To znamená, ¾e pro ka¾dou osmici pixelù na øádku bylo
mo¾né zvolit jednu ze ¹estnácti barev popøedí èi pozadí a pùvodní atributové
bloky 8&times;8 pixelù se &bdquo;smrskly&ldquo; na obdélník 8&times;1
pixel.</li>

<li>Grafický re¾im o rozli¹ení 256&times;192 pixelù, ka¾dý pixel mù¾e nabývat jedné ze ètyø barev
a pro ka¾dý øádek lze vybrat ¹estnáct barev z&nbsp;celkového poètu 128mi barev.
V&nbsp;tomto re¾imu je kapacita framebufferu nejvìt¹í, èemu¾ ov¹em odpovídají i
jeho mo¾nosti.</li>

<li>Textovì-grafický re¾im 512&times;192 pixelù (znakovì cca 85 znakù na 24
øádkù), ka¾dý pixel mù¾e opìt nabýt jedné ze ètyø barev</li>

</ul>

<img alt="obr" src="http://i.iinfo.cz/images/431/pc6812.png" />
<p><i>Obrázek 12: Na SAM Coupé existovala i známá hra Lemmings...</i></p>

<p>Celkem bylo mo¾né zobrazit 128 barev, pro ka¾dý obrazový øádek se toti¾
barvová paleta dala pøepínat. Dokonce bylo mo¾né pro ka¾dý obrazový øádek
zmìnit grafický re¾im (pøes obvod ASIC, konkrétnì jednalo o èip Motorola MC
1377P), podobnì jako u osmibitových domácích poèítaèù firem Atari a Commodore.
Pro zpìtnou kompatibilitu bylo mo¾né vyu¾ít grafický re¾im pùvodního ZX
Spectra, tj.&nbsp;bitmapu o rozli¹ení 256&times;192 pixelù s&nbsp;barvovými
atributy pro blok o velikosti 8&times;8 pixelù. Vzhledem k&nbsp;tomu, ¾e se
èasování pøi vytváøení obrazu od pùvodního Spectra odli¹ovalo, nebylo napøíklad
mo¾né spustit nìkteré hry, popø.&nbsp;je bylo nutné vhodným zpùsobem
upravit.</p>

<img alt="obr" src="http://i.iinfo.cz/images/105/pc6813.png" />
<p><i>Obrázek 13: ... stejnì jako Prince of Persia.</i></p>



<p><a name="k08"></a></p>
<h2>8. Odkazy na Internetu</h2>

<ol>

<li>World of Spectrum<br />
<a href="http://www.worldofspectrum.org/">http://www.worldofspectrum.org/</a>
</li>

<li>ZX Spectrum - dokumentace<br />
<a href="http://www.worldofspectrum.org/documentation.html">http://www.worldofspectrum.org/documentation.html</a>
</li>

<li>The World of Spectrum FAQ<br />
<a href="http://www.worldofspectrum.org/WoSFAQ.html">http://www.worldofspectrum.org/WoSFAQ.html</a>
</li>

<li>Sinclair QL homepage<br />
<a href="http://www.dilwyn.me.uk/">http://www.dilwyn.me.uk/</a>
</li>

<li>Wikipedia CZ: Sinclair QL<br />
<a href="http://cs.wikipedia.org/wiki/Sinclair_QL">http://cs.wikipedia.org/wiki/Sinclair_QL</a>
</li>

<li>Wikipedia EN: Sinclair QL<br />
<a href="http://en.wikipedia.org/wiki/Sinclair_QL">http://en.wikipedia.org/wiki/Sinclair_QL</a>
</li>

<li>Sinclair QL - ?<br />
<a href="http://bruxy.regnet.cz/zxs/ql.html">http://bruxy.regnet.cz/zxs/ql.html</a>
</li>

<li>Popis poèítaèe Sinclair QL<br />
<a href="http://www.sothius.com/hypertxt/welcome.html?sinclairql.html">http://www.sothius.com/hypertxt/welcome.html?sinclairql.html</a>
</li>

<li>Sinclair QL Peripherals<br />
<a href="http://www.binarydinosaurs.co.uk/Museum/Sinclair/ql/addons.php">http://www.binarydinosaurs.co.uk/Museum/Sinclair/ql/addons.php</a>
</li>

<li>SAM Coupé<br />
<a href="http://bruxy.regnet.cz/zxs/sam.html">http://bruxy.regnet.cz/zxs/sam.html</a>
</li>

<li>Wikipedia EN: SAM Coupé<br />
<a href="http://en.wikipedia.org/wiki/Sam_Coupe">http://en.wikipedia.org/wiki/Sam_Coupe</a>
</li>

<li>Emulátor ZX Spectra napsaný v&nbsp;Javì<br />
<a href="http://www.zzspectrum.org/">http://www.zzspectrum.org/</a>
</li>

<li>DOOM game on ZX Spectrum<br />
<a href="http://www.youtube.com/watch?v=3v7cFGneuaw&amp;feature=related">http://www.youtube.com/watch?v=3v7cFGneuaw&amp;feature=related</a>
</li>

<li>A Short History of Computer Graphics<br />
<a href="http://cs.fit.edu/~wds/classes/graphics/History/history/history.html">http://cs.fit.edu/~wds/classes/graphics/History/history/history.html</a>
</li>

<li>ZX Spectrum Graphics Modes<br />
<a href="http://gfxzone.planet-d.net/articles/zx_spectrum_graphics-article_01.html">http://gfxzone.planet-d.net/articles/zx_spectrum_graphics-article_01.html</a></li>

</ol>



<p><a name="k09"></a></p>
<h2>9. Obsah následující èásti seriálu</h2>

<p>V&nbsp;následujících tøech èástech seriálu o architekturách poèítaèù budou
popsány grafické schopnosti slavných osmibitových domácích poèítaèù vyrábìných
firmami <i>Atari</i>, <i>Commodore</i> a <i>Apple</i>. V¹ichni tøi zmínìní
výrobci své stroje osadili osmibitovým mikroprocesorem <i>MOS 6502</i>, který
byl navr¾ený Chuckem Peddlem (zajímavé je, ¾e tyto mikroprocesory se dodnes,
samozøejmì v&nbsp;inovované podobì, vyrábí). Zatímco poèítaèe <i>Atari</i> byly
vybaveny dvojicí &bdquo;grafických&ldquo; èipù nazvaných <i>ANTIC</i> a
<i>GTIA</i> (<i>ANTIC</i> mìl dokonce i vlastní instrukèní sadu, tak¾e je
v&nbsp;nìkolika ohledech pøedchùdcem moderních GPU), v&nbsp;poèítaèích
<i>Commodore</i> se o generování grafického obrazu staral jediný èip <i>VIC
II</i>, který podporoval jak dva grafické re¾imy (takzvaný <i>multicolor</i> a
<i>hi-res</i>), tak i vykreslování spritù, kterými bylo mo¾né pohybovat
v&nbsp;horizontálním i vertikálním smìru (na <i>Atari</i> se pohyb spritù ve
vertikálním smìru øe¹il pøesouváním dat v&nbsp;pamìti, mo¾ná právì proto se na
tìchto poèítaèích setkáme s&nbsp;hrami, kde se hráèi a jejich protihráèi
pohybují pøedev¹ím v&nbsp;horizontálním smìru).</p>

<img alt="obr" src="http://i.iinfo.cz/images/548/pc6814.png" />
<p><i>Obrázek 14: Hra International Karate spu¹tìná v&nbsp;emulátoru osmibitového poèítaèe Atari.</i></p>

<p>Pro grafický èip <i>VIC-II</i> bylo vymy¹leno pomìrnì velké mno¾ství rùzných
trikù, pomocí nich¾ se napøíklad mohl zvý¹it celkový poèet barev na obrazovce,
provádìt vykreslování i do okrajù obrazovky (&bdquo;otevøení&ldquo; okraje),
zobrazit na jedné obrazovce vìt¹í poèet spritù, ne¾ bylo podle pùvodní
dokumentace mo¾né i mnoho dal¹ích více èi ménì originálních efektù. Mnoho
grafických efektù je mo¾né provádìt i s&nbsp;èipy <i>ANTIC</i> a <i>GTIA</i>
&ndash; kromì zvý¹ení rozli¹ení ve vodorovném i svislém smìru se takté¾ dal
zvý¹it poèet maximálnì zobrazitelných barev, provádìt jemné skrolování obrazu
do v¹ech stran, zobrazit vìt¹í poèet spritù (popø.&nbsp;vícebarevné sprity)
atd. Kromì mo¾ností èipù <i>ANTIC</i>, <i>GTIA</i> a <i>VIC II</i> budou
popsány i první poèítaèe firmy <i>Apple</i>, pøedev¹ím slavný (alespoò
v&nbsp;USA) poèítaè <i>Apple II</i>, který pro mnoho lidí pøedstavoval pøechod
mezi domácími a osobními (kanceláøskými) poèítaèi, zejména díky prvním
kanceláøským aplikacím &ndash; textovým procesorùm a tabulkovému kalkulátoru
<i>VisiCalc</i>.</p>

<img alt="obr" src="http://i.iinfo.cz/images/286/pc6815.png" />
<p><i>Obrázek 15: Hra International Karate na Commodore C64.</i></p>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

