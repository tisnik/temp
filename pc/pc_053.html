<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Zvukový èip POKEY</title><!-- 8582 -->
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Zvukový èip POKEY</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù si podrobnìji popí¹eme schopnosti zvukového èipu POKEY (kód obvodu je C012294). Tento èip byl pou¾it prakticky ve v¹ech osmibitových poèítaèích Atari, herních konzolích i této firmy a mnoha herních automatech.</p>



<h1>Obsah</h1>
<p>
<a href="#k01">1. Zvukové mo¾nosti osmibitových poèítaèù Atari</a><br />
<a href="#k02">2. Zvuková syntéza pomocí obvodu POKEY</a><br />
<a href="#k03">3. Poly èítaèe</a><br />
<a href="#k04">4. Sampling</a><br />
<a href="#k05">5. Programové øízení obvodu POKEY</a><br />
<a href="#k06">6. Ukázky zvukù a hudby generované èipem POKEY</a><br />
<a href="#k07">7. Odkazy na Internetu</a><br />
<a href="#k08">8. Obsah dal¹í èásti seriálu</a><br />
</p>



<p><a name="k01"></a></p>
<h1>1. Zvukové mo¾nosti osmibitových poèítaèù Atari</h1>

<p>Typickým zástupcem osmibitových domácích poèítaèù, které vyu¾ívaly pro
syntézu zvuku i hudby speciální integrovaný obvod, jsou v¹echny osmibitové
poèítaèe firmy <i>Atari</i> (jednalo se napøíklad o modely <i>Atari 400, Atari
800, Atari 600XL/800XL/1200XL, Atari 800XE a Atari 130XE</i>). Pro syntézu
zvuku (a také nìkolik dal¹ích dùle¾itých operací popsaných na konci této
kapitoly) byl firmou Atari vyvinut integrovaný obvod nazvaný <i>POKEY</i>,
jeho¾ jméno je odvozeno od sousloví <i>POtentiometer and KEYboard</i>. Tento
èip nebyl pou¾itý pouze v&nbsp;domácích poèítaèích, ale také v&nbsp;nìkterých
herních konzolách firmy <i>Atari</i> a takté¾ herních automatech (ostatnì pro
firmu <i>Atari</i> pøedstavovala výroba herních konzolí i automatù v&nbsp;jednu
chvíli pøevá¾nou èást ziskù). V&nbsp;pøípadì <i>POKEY</i> se jedná o hybridní
integrovaný obvod, který obsahuje jak digitální èást (právì ta je pou¾ita i pro
zvukovou syntézu), tak i èást analogovou &ndash; obvod je vybaven mj.&nbsp;i
funkcí pro pøevod analogového signálu na osmibitové vzorky, èeho¾ firma Atari
vyu¾ívala pro pøipojení ovladaèù typu <i>paddle</i> ke svým poèítaèùm i herním
konzolím (na tyto ovladaèe mù¾eme pohlí¾et jako na konstrukènì jednodu¹¹í
pøedchùdce analogových joystickù).</p>

<image id="8574" original="no" />
<p-center><i>Obrázek 1: Osmibitový domácí poèítaè Atari 800XL. V&nbsp;horním
konektoru je zasunuta cartridge obsahující pamì» typu EPROM s&nbsp;aplikací
(zde hrou) a nìkolik podpùrných souèástek. Podobné cartridge, i kdy¾ bez
køiklavì barevných obalù, se vyrábìly i u nás &ndash; obsahovaly napøíklad
assemblery, &bdquo;turba&ldquo; pro kazetové magnetofony, kopírovací programy
apod.</i></p-center>

<p>Kromì zvukové syntézy se integrovaný obvod <i>POKEY</i> pou¾íval i pro dat
ètení klávesnice (pøímá podpora pro maximálnì 64 kláves + 3 speciálnì
zpracovávané klávesy Control, Shift a Break), komunikaci se zaøízeními
pøipojenými pøes sériový port (jedná se o známé rozhraní <i>SIO &ndash; Serial
Input/Output</i>), jako generátor pseudonáhodných èísel i ve funkci èasovaèe
(tøi zvukové kanály bylo mo¾né pøepnout do funkce èasovaèe, èeho¾ se vyu¾ívalo
pøi práci s&nbsp;kazetovým magnetofonem). Právì slouèení mnoha rùzných funkcí
do jednoho ètyøicetipinového integrovaného obvodu umo¾nilo sní¾it celkový poèet
obvodù ve v¹ech osmibitových poèítaèích Atari, co¾ samozøejmì &ndash;
v&nbsp;mnohem vìt¹í míøe ne¾ dnes &ndash; souvisí i s&nbsp;celkovou relativnì
nízkou výrobní cenou poèítaèe èi konzole, jeho ni¾¹í poruchovostí apod. (pro
upøesnìní: v&nbsp;osmibitových Atari se nacházely ètyøi &bdquo;velké&ldquo;
obvody se ètyøiceti piny &ndash; mikroprocesor <i>MOS 6502</i>, grafický
koprocesor <i>ANTIC</i>, grafický èip <i>GTIA</i> a takté¾ dnes popisovaný
multifunkèní obvod <i>POKEY</i>).</p>

<image id="8575" original="no" />
<p-center><i>Obrázek 2: Originální ovladaèe typu paddle vyrábìné firmou Atari.
Tyto ovladaèe bylo mo¾né pøipojit jak k&nbsp;herním konzolím Atari 2600 a Atari
5200, tak i k&nbsp;osmibitovým domácím poèítaèùm Atari 400, 800, 800XL, 130XE
atd.</i></p-center>



<p><a name="k02"></a></p>
<h1>2. Zvuková syntéza pomocí obvodu POKEY</h1>

<p>V&nbsp;pøedchozí kapitole jsme si øekli, ¾e integrovaný obvod <i>POKEY</i>
slou¾í mj.&nbsp;i ke zvukové syntéze. Zvuk je mo¾né generovat pomocí ètyø
zvukových kanálù (lze tedy vytváøet a¾ ètyøhlasou polyfonii), pøièem¾ v¾dy dva
kanály lze v&nbsp;pøípadì potøeby spojit do kanálu jednoho, u nìho¾ je mo¾né
pøesnìji øídit frekvenci zvuku (v&nbsp;podstatì to znamená, ¾e se dva
osmibitové èítaèe/dìlièe spojí do jednoho èítaèe ¹estnáctibitového a zmìní se
zdroj vstupních hodinových signálù &ndash; viz dal¹í text). Ka¾dý zvukový kanál
produkuje obdélníkový signál s&nbsp;amplitudou, kterou je mo¾né nastavit do
jedné ze ¹estnácti úrovní (pro specifikaci amplitudy ka¾dého kanálu jsou
vyhrazeny v&nbsp;ovládacích registrech pouze ètyøi bity). Nulová logická
hodnota obdélníkového signálu na vstupu v¾dy vede k&nbsp;nulovému napìtí na
výstupu zvukového kanálu; logická jednièka je pøevedena na jednu ze ¹estnácti
úrovní napìtí. Závislost mezi zvolenou úrovní a napìtím není pøesnì lineární;
takté¾ generovaný signál není (napøíklad po pøipojení na osciloskop) zcela
obdélníkový, èeho¾ se v&nbsp;pozdìj¹í dobì vyu¾ívalo pøi tvorbì
trojúhelníkových prùbìhù (ov¹em nutno øíci, ¾e za znaèné pomoci mikroprocesoru
a pøesného èasování).</p>

<image id="8576" />
<p-center><i>Obrázek 3: Oznaèení pinù obvodu POKEY.</i></p-center>

<p>Frekvence zvuku v&nbsp;ka¾dém zvukovém kanálu je øízena dìlièem <i>1:N</i>,
který je internì implementovaný jako èítaè (ostatnì právì na základì èítaèù
obvod <i>POKEY</i> detekuje stlaèené klávesy, generuje pseudonáhodná èísla,
provádí A/D pøevod z&nbsp;ovladaèù <i>paddle</i> a komunikuje se <i>SIO</i>).
Pokud nejsou zvukové kanály spojeny do dvojic, je vstupní frekvence dìlena
hodnotou <i>2x+1</i>, kde <i>x</i> je èíslo v&nbsp;rozsahu 0&ndash;255 zapsané
do øídicího registru obvodu <i>POKEY</i>. V¾dy dva zvukové kanály je mo¾né
spojit, èím¾ se sice sní¾í poèet souèasnì pøehrávaných zvukù, ale zvý¹í se
pøesnost èítaèe, proto¾e vstupní frekvence mù¾e být dìlena hodnotou <i>1</i> a¾
<i>2&times;2<sup>16</sup>+1=131073</i> (v&nbsp;tomto pøípadì se v¹ak volí vy¹¹í
frekvence hodinových signálù na vstupu obvodu &ndash; z&nbsp;cca 16 kHz na 64
kHz, jinak by po vydìlení pøíli¹ velkou hodnotou byl na výstupu zvukových
kanálù infrazvuk, který se v&nbsp;pøípadì obdélníkového prùbìhu projevuje pouze
&bdquo;lupáním&ldquo; membrány reproduktoru pøi skokové zmìnì amplitudy).
Zmìnou obsahu øídicího registru obvodu <i>POKEY</i> je mo¾né nakonfigurovat
jednu ze tøí kombinací zvukových kanálù:</p>

<ul>

<li>Ètyøi zvukové kanály, frekvence ka¾dého z&nbsp;nich je vytvoøena pomocí
osmibitového dìlièe. Tato konfigurace èipu <i>POKEY</i> je pou¾ita pøi práci se
zvukem z&nbsp;Atari BASICu (známý pøíkaz <strong>SOUND a,b,c,d</strong>).
V&nbsp;tomto re¾imu lze generovat tóny v&nbsp;rozsahu zhruba ètyø oktáv.</li>

<li>Dva zvukové kanály, frekvence ka¾dého z&nbsp;nich je vytvoøena pomocí
¹estnáctibitového dìlièe, který vznikl spojením dvou dìlièù osmibitových.
Tónový rozsah z&nbsp;obou stran v&nbsp;tomto pøípadì pøesahuje limity lidského
sluchu (infrazvuk, ultrazvuk).</li>

<li>Jeden zvukový kanál øízený ¹estnáctibitovým dìlièem a dva kanály øízené
dìlièem osmibitovým (tuto konfiguraci vyu¾ívalo mnoho hudebníkù, kteøí pøesnìji
øízený kanál pou¾ili pro basový hudební nástroj a dal¹í dva kanály pro perkusní
nástroj &ndash; nìkdy samplovaný &ndash; a hlavní melodii hranou vìt¹inou
na vy¹¹ích frekvencích).</li>

</ul>

<image id="8577" original="no"/>
<p-center><i>Obrázek 4: Poèítaè Atari 800 XL s&nbsp;ponìkud odli¹ným designem
klávesnice &ndash; funkce ovládané klávesou <strong>CONTROL</strong> zde nejsou
popsány inverznì, ale jsou pouze orámovány.</i></p-center>



<p><a name="k03"></a></p>
<h1>3. Poly èítaèe</h1>

<p>Obdélníkový signál na výstupu ka¾dého zvukového kanálu mù¾e být buï
periodický (a tedy pravidelný), nebo mù¾e být øízen takzvaným <i>poly
èítaèem</i>, který produkuje pseudonáhodné binární hodnoty. Obvod <i>POKEY</i>
obsahuje celkem tøi poly èítaèe (ètyøbitový, pìtibitový, sedmnáctibitový),
jejich¾ výstup mù¾e øídit vybraný zvukový kanál (zvukové kanály se dìlí o
stejné poly èítaèe, ov¹em ka¾dý zvukový kanál mù¾e mít nastavenou jinou
frekvenci, tj.&nbsp;i výsledný zvuk bude odli¹ný). U sedmnáctibitového poly
èítaèe (viz dal¹í odstavce) je vzdálenost mezi stejnými vzorky (perioda) tak
velká, ¾e ho lze pova¾ovat za generátor náhodných impulsù, který vytváøí bílý
¹um. Princip øízení zvukového kanálu poly èítaèem je velmi jednoduchý &ndash;
øízení je provádìno obyèejným logickým hradlem a klopným obvodem typu D. Poly
èítaèe sice mìní hodnotu na svém výstupu velmi rychle (jsou øízeny pøímo
hodinovým signálem mikroprocesoru, tj.&nbsp;cca 1,79&nbsp;MHz pro poèítaèe
pracující v&nbsp;normì NTSC a 1,77&nbsp;MHz pro poèítaèe s&nbsp;televizní
normou PAL), ale maximální frekvence na výstupu zvukového kanálu je kvùli
zapojenému logickému hradlu omezena frekvencí získanou pomocí dìlièe
<i>1:N</i>.</p>

<image id="8578" />
<p-center><i>Obrázek 5: Theta Music Composer, jeden z&nbsp;nejlep¹ích editorù
hudby na osmibitová Atari.</i></p-center>

<p>Samotný poly èítaè, tj.&nbsp;generátor pseudonáhodného ¹umu, je tvoøen
posuvným registrem øízeným externím hodinovým signálem. S&nbsp;ka¾dým taktem
hodin dojde k&nbsp;posunu obsahu registru (tj.&nbsp;ètyø, pìti, sedmnácti a ve
speciálním pøípadì devíti bitù) o jednu pozici. Na vstup posuvného registru je
zpìtnovazební smyèkou pøivedena binární hodnota získaná pomocí hradla typu XOR
pøipojeného svými vstupy na tøetí a poslední bit posuvného registru &ndash;
hodnota, na výstupu hradla je tedy zapsána do první pozice. Pokud vezmeme do
úvahy logickou funkci, kterou hradlo typu XOR reprezentuje, dojdeme
k&nbsp;závìru, ¾e po inicializaci èipu <i>POKEY</i> mù¾e mít posuvný registr
prakticky jakoukoli <strong>nenulovou</strong> hodnotu, proto¾e i za této
situace rychle dojde k&nbsp;jeho naplnìní pseudonáhodnými daty, které se poté
periodicky opakují s&nbsp;periodou, její¾ délka závisí na bitové délce
samotného posuvného registru. Pokud má registr délku <i>n</i> bitù, je perioda
rovna <i>2<sup>n</sup>-1</i> taktùm, proto¾e jeden zbývající stav &ndash; samé
nulové bity &ndash; tvoøí samostatný (nezajímavý) cyklus. Poslední bit
posuvného registru pøedstavuje i jeho finální výstup, tj.&nbsp;sekvenci
pseudonáhodných binárních hodnot, kterou po zpracování obvodem <i>POKEY</i>
(zejména po nastavení amplitudy) sly¹íme.</p>

<p>Zatímco ètyøbitové a pìtibitové poly èítaèe produkují pomìrnì rychle se
opakující pseudonáhodné sekvence (lze s&nbsp;nimi napodobit napøíklad zvuk
leteckých motorù), sedmnáctibitový poly èítaè ji¾ má délku sekvence tak
dlouhou, ¾e s&nbsp;ním lze generovat <i>náhodný</i> zvuk. Tento èítaè lze také
pøekonfigurovat tak, ¾e se jeho délka sní¾í na devìt bitù.</p>

<p>Funkci polyèítaèe si mù¾eme odsimulovat pomocí jednoduchého céèkového
programu, který po svém spu¹tìní vypí¹e na obrazovku v¹ech <i>n</i> stavù
polyèítaèe o zadané délce (viz symbolická konstanta
<strong>POLYCOUNTER_LENGTH</strong>). Pomocí konstant
<strong>BIT_A_INDEX</strong> a <strong>BIT_B_INDEX</strong> lze urèit pozice
bitù, které vstupují do hradla XOR, jeho¾ výstup tvoøí zpìtnovazebnou
smyèku:</p>

<code-area>// vypis stavu polycitace
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define POLYCOUNTER_LENGTH 5
#define BIT_A_INDEX 3
#define BIT_B_INDEX 5

// vypis vsech bitu polycitace
void printPoly( int polycounter )
{
    int i;
    // pro vsechny bity posuvneho registru
    for ( i=0; i&lt;POLYCOUNTER_LENGTH; i++ )
    {
        // vypis binarni hodnoty jednoho bitu
        putchar('0'+ (polycounter &amp; 1) );
        // posun na dalsi bit
        polycounter = polycounter &gt;&gt; 1;
    }
    putchar('\n');
}

int main(void)
{
    // pocatecni hodnota polycitace
    int polycounter = 1;
    int i;
    for ( i=0; i &lt; (1&lt;&lt;POLYCOUNTER_LENGTH); i++ )
    {
        // vypis hodnoty pocitadla i hexadecimalni hodnoty polycitace
        // hodnota polycitace musi byt maskovana na svou max. bitovou delku
        printf("%02d\t%02x\t", i+1, polycounter &amp; ((1&lt;&lt;POLYCOUNTER_LENGTH)-1));
        // vypis vsech bitu polycitace
        printPoly(polycounter);

        // ziskani hodnoty prvniho bitu, ktery jde do zpetnovazebni smycky
        int bitA = (polycounter &gt;&gt; (BIT_A_INDEX-1) ) &amp; 1;

        // ziskani hodnoty druheho bitu, ktery jde do zpetnovazebni smycky
        int bitB = (polycounter &gt;&gt; (BIT_B_INDEX-1) ) &amp; 1;

        // simulace funkce hradla typu XOR
        int inputBit = bitA ^ bitB;

        // posun o jeden bit doleva a nastaveni
        // nove hodnoty prvniho bitu (LSB)
        polycounter = (polycounter &lt;&lt; 1) | inputBit;
    }
    return 0;
}
</code-area>

<p>Výstup z&nbsp;programu pro pìtibitový polyèítaè (v¹ech 31 nenulových stavù
èítaèe):</p>

<code-area>01   01      10000
02      02      01000
03      04      00100
04      09      10010
05      12      01001
06      05      10100
07      0b      11010
08      16      01101
09      0c      00110
10      19      10011
11      13      11001
12      07      11100
13      0f      11110
14      1f      11111
15      1e      01111
16      1c      00111
17      18      00011
18      11      10001
19      03      11000
20      06      01100
21      0d      10110
22      1b      11011
23      17      11101
24      0e      01110
25      1d      10111
26      1a      01011
27      15      10101
28      0a      01010
29      14      00101
30      08      00010
31      10      00001
32      01      10000
</code-area>

<p>Druhý program vypisuje hodnoty posledního bitu polyèítaèe, který se
v&nbsp;èipu <i>POKEY</i> pou¾ívá pro generování pseudonáhodných zvukù. Aby bylo
patrné, ¾e se bitová sekvence na výstupu nìkolikrát opakuje, je vypsáno nìkolik
period, ka¾dá na zvlá¹tním øádku:</p>

<code-area>// simulace funkce polycitace (polycounteru)
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define POLYCOUNTER_LENGTH 5
#define BIT_A_INDEX 3
#define BIT_B_INDEX 5

int main(void)
{
    // pocatecni hodnota polycitace
    int polycounter = 1;
    int i,j;
    // projdeme pres nekolik period, aby bylo patrne, ze se hodnoty opakuji
    for ( j=0; j &lt; 10; j++ )
    {
        // vypis cele jedne periody polycitace
        for ( i=0; i &lt; (1&lt;&lt;POLYCOUNTER_LENGTH)-1; i++ )
        {
            // ziskani hodnoty prvniho bitu, ktery jde do zpetnovazebni smycky
            int bitA = (polycounter &gt;&gt; (BIT_A_INDEX-1) ) &amp; 1;

            // ziskani hodnoty druheho bitu, ktery jde do zpetnovazebni smycky
            int bitB = (polycounter &gt;&gt; (BIT_B_INDEX-1) ) &amp; 1;

            // nejvyssi bit polycitace tvori i jeho vystup
            int outputBit = (polycounter &gt;&gt; (POLYCOUNTER_LENGTH-1) ) &amp; 1;

            // vypis vystupni hodnoty
            putchar('0' + outputBit);

            // simulace funkce hradla typu XOR
            int inputBit = bitA ^ bitB;

            // posun o jeden bit doleva a nastaveni
            // nove hodnoty prvniho bitu (LSB)
            polycounter = (polycounter &lt;&lt; 1) | inputBit;
        }
        putchar('\n');
    }
    return 0;
}
</code-area>

<p>Výstup po spu¹tìní druhého programu:</p>

<code-area>0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
0000100101100111110001101110101
</code-area>



<p><a name="k04"></a></p>
<h1>4. Sampling</h1>

<p>V&nbsp;pøípadì potøeby (a také dostateèného výkonu mikroprocesoru) je mo¾né
generování obdélníkového signálu zcela vypnout a øídit pouze amplitudu na
výstupu ka¾dého zvukového kanálu &ndash; tímto zpùsobem lze pøehrávat i
nasamplované zvuky, ov¹em kvùli vý¹e uvedeným vlastnostem èipu <i>POKEY</i> je
mo¾né pou¾ít pouze ¹estnáct úrovní hlasitosti, tj.&nbsp;jedná se o ètyøbitový
sampling s&nbsp;dynamickým rozsahem pouze 24 dB (naproti tomu CD-Audio vyu¾ívá
¹estnáctibitový sampling s&nbsp;dynamickým rozsahem 96 dB a zvuková karta Sound
Blaster 1 pou¾ívá osmibitový sampling s&nbsp;dynamickým rozsahem cca 48 dB, co¾
zhruba odpovídá magnetofonovému záznamu). V&nbsp;pøípadì potøeby je v¹ak mo¾né
digitalizovaný zvuk pøehrávat souèasnì na v¹ech ètyøech zvukových kanálech,
èím¾ se poèet úrovní &ndash; a tím i dynamický rozsah &ndash; nepatrnì zvy¹uje
(souèet intenzit není lineární ale logaritmický). Nasamplovaná øeè byla na
osmibitových poèítaèích <i>Atari</i> pou¾ita napøíklad ve hrách
<i>Ghostbusters</i> (<att-url id="">krátká ukázka</att-url>) èi <i>Berzerk</i>
(tøi vìtièky z&nbsp;této legendární hry, ve které se vyskytuje známý Evil Otto,
si mù¾ete poslechnout <att-url id="">po výbìru tohoto odkazu</att-url>).</p>

<image id="8579" />
<p-center><i>Obrázek 6: Raster Music Tracker &ndash; pøehrávaè hudby na Atari,
jeho¾ autorem je známý Radek ©tìrba (Raster)</i></p-center>



<p><a name="k05"></a></p>
<h1>5. Programové øízení obvodu POKEY</h1>

<p>Pro øízení zvukových kanálù obsahuje integrovaný obvod <i>POKEY</i> devìt
osmibitových registrù, které jsou na poèítaèích Atari mapovány na adresy
53760-53768 (zde stojí za pøipomenutí fakt, ¾e pøí¹tì popsaný zvukový èip SID
obsahuje øídicích registrù mnohem více, proto¾e je mo¾né mìnit více vlastností
zvukové syntézy, napøíklad obálky, tvary signálù aj.). Tìchto devìt registrù je
mo¾né rozdìlit do tøí skupin. V&nbsp;první skupinì se nachází celkem ètyøi
registry obsahující osmibitové hodnoty frekvenèního dìlièe. Pro ka¾dý zvukový
kanál (kterých je, jak ji¾ víme z&nbsp;pøedchozího textu, celkem ètyøi), je
urèen jeden z&nbsp;tìchto registrù. To znamená, ¾e ka¾dý kanál mù¾e pou¾ívat
odli¹nou frekvenci výstupního zvuku a tím i výstupní tón. V&nbsp;nìkterých
pøípadech mù¾e být pouhých 256 rùzných frekvencí pomìrnì hrubé, proto je mo¾né
v¾dy dva zvukové kanály spojit a vyu¾ít ¹estnáctibitového dìlièe. Ve druhé
skupinì se nachází takté¾ ètyøi registry, ka¾dý registr je urèený pro jeden ze
zvukových kanálù. Ètyøi bity ka¾dého registru urèují hlasitost zvuku, jedním
bitem se zapíná èi vypíná pulsní re¾im a tøemi posledními bity se urèuje
zkreslení, pøesnìji øeèeno zpùsob zapojení vý¹e popsaných poly èítaèù do celého
øetìzce generujícího zvuk. Kromì toho lze urèit, ¾e první ze dvou kanálù
vytvoøí frekvenèní filtr typu horní propust (resp.&nbsp;jeho velmi hrubou
obdobu zalo¾enou na logické operaci a ne na skuteèném frekvenèním filtru).</p>

<image id="8580" original="no" />
<p-center><i>Obrázek 7: Filtr tvoøený jedním zvukovým kanálem, který je
aplikovaný na druhý zvukový kanál.</i></p-center>



<p><a name="k06"></a></p>
<h1>6. Ukázky zvukù a hudby generované èipem POKEY</h1>

<p>Zvuky a melodie, jejich¾ ukázky si mù¾ete stáhnout ve formátu MP3
z&nbsp;tabulky zobrazení ní¾e, byly získány pøedev¹ím z&nbsp;archivu
<strong>ASMA &ndash; Atari SAP music archive</strong> (<a
href="http://asma.atari.org/">http://asma.atari.org/</a>), ve kterém jsou
dostupné ve formátu <strong>SAP</strong> (v&nbsp;souèasnosti je v&nbsp;archivu
ulo¾eno cca 2500 ukázek). Formát <strong>SAP</strong> je velmi úsporný, proto¾e
v&nbsp;souborech jsou ukládány pouze hodnoty øídicích registrù èipu
<i>POKEY</i>, nikoli celé samply. Z&nbsp;toho dùvodu napøíklad hudba pùvodnì
ulo¾ená v&nbsp;souboru typu <strong>SAP</strong> na pouhých ètyøech kilobajtech
zabere po transformaci do &bdquo;úsporného&ldquo; formátu MP3 i nìkolik
megabajtù (v&nbsp;následující èásti tohoto seriálu budou uvedeny ukázky melodií
pro èip <i>SID</i>, u nich¾ je pou¾itý principiálnì stejný formát). Existuje
nìkolik pøehrávaèù pro formát <strong>SAP</strong>; pravdìpodobnì
nejpou¾ívanìj¹ím zpùsobem pøehrávání tìchto souborù je v¹ak pou¾ití pluginù pro
universální pøehrávaè <i>Winamp</i> èi (na Linuxu) <i>XMMS</i>.</p>

<table>
<tr><th>Popis</th></tr>
<tr><td><att-url id="706">Samplovaný zvuk ze hry Berzerk</att-url></td></tr>
<tr><td><att-url id="707">Samplovaný zvuk ze hry Ghostbusters</att-url></td></tr>
<tr><td><att-url id="708">Hudba ze hry Warhawk (Rob Hubbard)</att-url></td></tr>
<tr><td><att-url id="709">Hudba ze hry Jet Set Willy (Rob Hubbard)</att-url></td></tr>
<tr><td><att-url id="710">Hudba ze hry Draconus (Adam Gilmore)</att-url></td></tr>
<tr><td><att-url id="711">Hudba ze hry Zybex (Adam Gilmore)</att-url></td></tr>
</table>



<p><a name="k07"></a></p>
<h1>7. Odkazy na Internetu</h1>

<ol>

<li>Atari.org<br />
<a href="http://www.atari.org/">http://www.atari.org/</a>
</li>

<li>Atari POKEY<br />
<a href="http://www.absoluteastronomy.com/topics/Atari_POKEY">http://www.absoluteastronomy.com/topics/Atari_POKEY</a>
</li>

<li>Chiptune<br />
<a href="http://www.absoluteastronomy.com/topics/Chiptune">http://www.absoluteastronomy.com/topics/Chiptune</a>
</li>

<li>ASAP - Another Slight Atari Player<br />
<a href="http://asap.sourceforge.net/">http://asap.sourceforge.net/</a>
</li>

<li>Atari SAP music archive<br />
<a href="http://asma.atari.org/">http://asma.atari.org/</a>
</li>

<li>RASTER Music Tracker (RMT)<br />
<a href="http://raster.infos.cz/atari/rmt/rmt.htm">http://raster.infos.cz/atari/rmt/rmt.htm</a>
</li>

<li>ATARI + ATARI = STEREO ???<br />
<a href="http://anonym.mouse.sweb.cz/stereo.htm">http://anonym.mouse.sweb.cz/stereo.htm</a>
</li>

<li>Otázky o Atárku<br />
<a href="http://raster.infos.cz/atari/afaq/afaq.htm">http://raster.infos.cz/atari/afaq/afaq.htm</a>
</li>

</ol>



<p><a name="k08"></a></p>
<h1>8. Obsah dal¹í èásti seriálu</h1>

<p>Pùvodnì jsem mìl v&nbsp;úmyslu v&nbsp;dne¹ním èlánku popsat kromì èipu
<i>POKEY</i> i slavný zvukový èip <i>SID</i> firmy <i>Commodore</i>, nicménì se
ukázalo, ¾e kvùli velkému mno¾ství informací bude vhodnìj¹í èlánek rozdìlit na
dva samostatné díly. Proto se budeme dodnes stále pou¾ívanému <i>SIDu</i>
vìnovat a¾ v&nbsp;následujícím pokraèování tohoto seriálu (nehledì na to, ¾e
porovnávat v&nbsp;jednom textu <i>POKEY</i> a <i>SID</i> by i dnes bylo pro
autora pomìrnì nebezpeèné :-).</p>

<image id="8581" original="no" />
<p-center><i>Obrázek 8: Osmibitový domácí poèítaè Commodore C64 (vybavený
prakticky stejným mikroprocesorem jako konkurenèní osmibitová Atari), jeho¾
svìtový úspìch do znaèné míry závisel (kromì dumpingových cen) i na
schopnostech èipù SID (zvuky) a VIC (grafika).</i></p-center>


<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2008</small></p>
</body>
</html>

