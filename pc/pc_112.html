<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Pamì»ová zaøízení pou¾ívaná u osmibitových mikropoèítaèù v souèasnosti</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Pamì»ová zaøízení pou¾ívaná u osmibitových mikropoèítaèù v souèasnosti</h1>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù si popí¹eme nìkterá pamì»ová zaøízení, která jsou v souèasnosti pou¾ívána pro ukládání aplikací i u¾ivatelských dat na osmibitových mikropoèítaèích. Zatímco se v dobách nejvìt¹ího rozmachu osmibitových poèítaèù pou¾ívaly pøedev¹ím kotouèové i kazetové datarekordéry a disketové jednotky, v souèasnosti se jedná pøedev¹ím o pevné disky a dokonce i o pamì»ové karty (Compact Flash atd.).</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Pamì»ová zaøízení pou¾ívaná u osmibitových mikropoèítaèù v&nbsp;souèasnosti</a></p>
<p><a href="#k02">2. Emulace funkcí datarekordéru jiným typem zaøízení</a></p>
<p><a href="#k03">3. SIO2PC</a></p>
<p><a href="#k04">4. Pøenos dat po sbìrnici SIO</a></p>
<p><a href="#k05">5. SIO2USB</a></p>
<p><a href="#k06">6. Zaøízení SDrive</a></p>
<p><a href="#k07">7. Obsah následující èásti seriálu</a></p>
<p><a href="#k08">8. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Pamì»ová zaøízení pou¾ívaná u osmibitových mikropoèítaèù v souèasnosti</h2>

<p>V&nbsp;pøedchozí èásti seriálu o architekturách poèítaèù jsme si popsali
nìkterá pamì»ová periferní zaøízení, která se pou¾ívala u osmibitových domácích
mikropoèítaèù pøevá¾nì v&nbsp;osmdesátých a na zaèátku devadesátých let
minulého století, tj.&nbsp;v&nbsp;dobì nejvìt¹ího rozmachu tìchto strojù.
Jednalo se pøedev¹ím o datarekordéry s&nbsp;magnetickou páskou umístìnou buï na
kotouèích nebo v&nbsp;kompaktních kazetách a také o rùzné typy disketových
jednotek (mechanik). Co se týèe disketových jednotek, tak první verze disket
pou¾ívaných v&nbsp;praxi mìly velikost osm palcù, co¾ mj.&nbsp;znamenalo ¾e
byly velmi neskladné a také citlivé na ohyb nebo dokonce zlom. Pro pøenosy
tìchto disket se pou¾ívaly speciální boxy a zakládání diskety do disketové
mechaniky vy¾adovalo urèitou zruènost, nebo» u nìkterých mechanik se silnou
vratnou pru¾inou mohlo dojít k&nbsp;ohybu diskety, který mnohdy znamenal její
nefunkènost (kvùli velkému tøení pøi otáèení) popø.&nbsp;ztrátu zaznamenaných
dat.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-1.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-1-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 1: Osmibitový domácí mikropoèítaè Sinclair ZX Spectrum +2 se
zabudovaným datarekordérem.</i></p>

<p>S&nbsp;disketami této velikosti jsme se mohli mj.&nbsp;setkat i u
èeskoslovenských osmibitových poèítaèù, konkrétnì u mikropoèítaèe
<i>IQ-151</i>, ke kterému se dala pøipojit dvojitá disketová mechanika,
z&nbsp;ní¾ bylo mo¾né nahrávat aplikace buï do jednoho poèítaèe nebo dokonce do
více poèítaèù spojených pomocí lokální poèítaèové sítì. Velká èást uèeben
s&nbsp;mikropoèítaèi <i>IQ-151</i> byla vybavena právì touto disketovou
mechanikou, &bdquo;uèitelským&ldquo; poèítaèem (který mohl vykonávat nìkteré
privilegované funkce) a potom bì¾nými &bdquo;studentskými&ldquo; IQ-èky; v¹e
bylo propojeno lokální sítí s&nbsp;centrálním uzlem. Ov¹em osmipalcové
disketové mechaniky byly v&nbsp;dobì nejvìt¹í slávy osmibitových mikropoèítaèù
ji¾ zastaralé, tak¾e jejich pou¾ití u <i>IQ-151</i> bylo spí¹e výjimkou (i kdy¾
zajisté zajímavou) ne¾li pravidlem.</p>

<img src="http://i.iinfo.cz/images/579/pc112a-2.jpg" width="266" height="222" alt=" " />
<p><i>Obrázek 2: Osmipalcová disketa nebyla, na rozdíl od mlad¹í a
z&nbsp;historického hlediska mnohem úspì¹nìj¹í diskety 3 1/2 palcové, pøíli¹
skladná.</i></p>

<p>V&nbsp;dobách osmibitových poèítaèù byly mnohem roz¹íøenìj¹í disketové
mechaniky pou¾ívající diskety o velikosti 5 1/4 palce, diskety o velikosti 3
1/2 palce firmy <i>Sony</i> (která je vyrábìla po dobu tøiceti let a¾ do
minulého týdne, co¾ se prozatím nepo¹tìstilo snad ¾ádnému jinému pamì»ovému
médiu) a takté¾ disketové mechaniky pou¾ívající rùzné proprietární diskety (2,8
palcové diskety u poèítaèù <i>Sharp MZ 800</i>, tøípalcové diskety firmy
<i>Amstrad</i> atd.). Z&nbsp;rùzných formátù disket se nakonec prosadily
pøedev¹ím ji¾ zmínìné diskety o velikosti 3 1/2 palce, a to zejména z&nbsp;toho
dùvodu, ¾e je v&nbsp;roce 1984 zaèala pou¾ívat firma <i>Apple</i> ve svých
poèítaèích <i>Apple Macintosh</i> a posléze té¾ dal¹í výrobci osobních
poèítaèù, pøedev¹ím firma <i>Atari</i> se svou øadou <i>Atari ST</i> (1985),
<i>Commodore</i> ve svých poèítaèích <i>Amiga</i> (takté¾ 1985) a nakonec i
samotná <i>IBM</i> v&nbsp;poèítaèích <i>IBM PS/2</i> (1987).</p>

<a href="http://i.iinfo.cz/images/579/pc112a-3.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-3-prev.jpg" width="370" height="247" alt=" " /></a>
<p><i>Obrázek 3: Porovnání tøí typù disketových mechanik. Zcela napravo se
nachází osmipalcová disketová mechanika, uprostøed mechanika pro diskety o
velikosti 5 1/4 palce a nalevo mechanika, v&nbsp;ní¾ lze pou¾ívat diskety o
velikosti 3 1/2 palce.</i></p>

<p>Ov¹em pomìrnì rychlý pokrok ve vývoji záznamových technologií se nevyhnul
ani u¾ivatelùm osmibitových domácích mikropoèítaèù. V&nbsp;souèasnosti se ji¾
pro tyto poèítaèe datarekordéry ani disketové jednotky pøíli¹ èasto nepou¾ívají
(mají ov¹em samozøejmì svùj nezastupitelný historický význam). Namísto toho se
i pro tyto poèítaèe pou¾ívají moderní zaøízení typu pevný disk, SSD, rùzné
pamì»ové karty, napøíklad typu <i>Compact Flash</i> èi <i>xD</i>, nebo, i kdy¾
ménì èasto, nìkteré typy optických médií (CD-ROM, DVD). V&nbsp;následujících
kapitolách si struènì popí¹eme nìkterá známá nebo zajímavá øe¹ení, která se
ujala u nìkterých typù domácích osmibitových poèítaèù. Zamìøíme se pøedev¹ím na
poèítaèe <i>Atari</i> a v&nbsp;následující èásti tohoto seriálu si té¾ uká¾eme
øe¹ení pro poèítaèe <i>Apple I</i> a <i>Apple ][</i>, které byly velmi
roz¹íøeny pøedev¹ím na ¹kolách i firmách v&nbsp;USA (na nìkterých ¹kolách se
prý dokonce pou¾ívají dodnes) a samozøejmì i pro <i>ZX Spectrum</i> a jeho
mnohé klony vèetnì èeskoslovenských poèítaèù <i>Didaktik</i>.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-4.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-4-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 4: Pohled na kazetový datarekordér XC 12 pou¾ívaný u osmibitových
poèítaèù Atari.</i></p>



<p><a name="k02"></a></p>
<h2>2. Emulace funkcí datarekordéru jiným typem zaøízení</h2>

<p>Pravdìpodobnì nejsnaz¹ím zpùsobem, jakým bylo mo¾né roz¹íøit repertoár
pamì»ových zaøízení pøipojitelných k&nbsp;osmibitovým domácím poèítaèùm, byla
úprava nìjakého existujícího audio (zvukového) pøehrávaèe takovým zpùsobem, aby
ho bylo mo¾né pøipojit k&nbsp;poèítaèi do stejného konektoru, jaký byl urèen
pro standardní datarekordér. Toto øe¹ení s&nbsp;sebou pøiná¹elo nìkolik výhod
ale samozøejmì i nevýhod. Mezi hlavní výhodu patøí to, ¾e pokud audio zaøízení
skuteènì emulovalo pùvodní datarekordér, tak jeho funkce byla z&nbsp;hlediska
poèítaèe (resp.&nbsp;ovladaèe popø.&nbsp;operaèního systému) zcela
transparentní a v&nbsp;mnoha pøípadech nerozeznatelná od funkce pùvodního
datarekordéru. Jinými slovy to znamená, ¾e poèítaè vùbec nemusel
&bdquo;poznat&ldquo;, ¾e komunikuje se zcela odli¹ným zaøízením, tak¾e se ji¾
hotové aplikace nemusely ¾ádným zpùsobem upravovat (je dokonce mo¾né emulovat i
rùzné ochrany proti kopírování a dal¹í techniky).</p>

<a href="http://i.iinfo.cz/images/579/pc112a-5.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-5-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 5: Datarekordér XC 12 bez vrchního krytu.</i></p>

<p>Právì tato výhoda je jedním z&nbsp;dùvodù, proè lze i dnes (kdy máme
k&nbsp;dispozici mnohem sofistikovanìj¹í zpùsoby záznamu dat) získávat
napøíklad aplikace pro <i>ZX Spectrum</i> ve formátech <strong>TAP</strong> a
<strong>TZX</strong>, co¾ jsou vlastnì digitalizované &bdquo;obrazy&ldquo;
pùvodního záznamu na magnetické pásce (se v¹emi hlavièkami, neviditelnými
Basicovými zavadìèi a dal¹ími triky, které tvùrci aplikací pro tyto poèítaèe
pou¾ívali). Nevýhoda emulace pùvodních datarekordérù je zøejmá &ndash; je jím
dlouhá doba ètení a zápisu dat. Pokud naètení aplikace z&nbsp;pùvodního
datarekordéru trvalo napøíklad ètyøi minuty, je pøi pou¾ití emulace tato doba
stejnì dlouhá, bez ohledu na to, ¾e pou¾ité zaøízení (napøíklad CD-ROM, pevný
disk, pamì»ová karta atd.) umo¾òuje o nìkolik øádù rychlej¹í pøenosy dat.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-6.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-6-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 6: Datarekordér XC 12 &ndash; pohled zespodu na samostatnou
mechaniku.</i></p>

<p>V&nbsp;pøedchozím odstavci jsme se ji¾ letmo zmínili o tom, která zaøízení
bylo mo¾né pou¾ít pro emulaci datarekordéru. Po roz¹íøení bì¾ných zvukových
kompaktních diskù po roce 1990 vznikly pro nìkteré typy poèítaèù audio CD
obsahující velké mno¾ství rùzných aplikací zaznamenaných ve zvukové podobì,
stejným zpùsobem jako na pùvodních kazetách. Nahrávání tìchto aplikací bylo
jednoduché &ndash; vìt¹inou postaèilo pøímo propojit zesílený výstup z&nbsp;CD
pøehrávaèe s&nbsp;konektorem pro pøipojení datarekordéru na osmibitovém
poèítaèi a o samotné nahrávání se ji¾ postaraly systémové rutiny (popøípadì
rùzná &bdquo;turba&ldquo;). Pøedností pou¾ití CD byla (kromì trvanlivosti
záznamu) i eliminace nutnosti pøetáèení &ndash; ka¾dá aplikace mohla být
pøedstavena jednou skladbou, kterých lze na jedno audio CD ulo¾it a¾ 99.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-7.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-7-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 7: Datarekordér XC 12 (resp.&nbsp;samostatná mechanika)
s&nbsp;vlo¾enou kazetou.</i></p>

<p>Vznikaly dokonce i rùzné modifikace tohoto zapojení jejich¾ cílem bylo
zvý¹ení kapacity audio CD &ndash; typicky se pou¾íval stereofonní záznam,
pøièem¾ pravý kanál obsahoval jiná data ne¾ kanál levý. Jednoduchým pøepínaèem
na vstupu do poèítaèe se tedy volilo, která &bdquo;polovina&ldquo; disku CD se
bude v&nbsp;danou chvíli pou¾ívat. Nìkteøí majitelé osmibitových poèítaèù
nahrazovali bì¾nou kompaktní kazetu konvertorem zapojeným na video pøehrávaè,
i kdy¾ v&nbsp;tomto pøípadì bylo mnohem vhodnìj¹í (pøedev¹ím z&nbsp;hlediska
vyu¾itelné kapacity datového média) pou¾ití video kazety pro záznam dat pøímo
do obrazové stopy, nikoli do stopy zvukové. Tato úprava videa se vyu¾ívala
napøíklad na poèítaèích <i>Atari ST</i> èi <i>Amiga</i>.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-8.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-8-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 8: Detail pøetáèecího mechanismu, stabilizátoru rychlosti, mazací
hlavy a kombinované ètecí/zápisové hlavy.</i></p>

<p>S&nbsp;podobným øe¹ením se mù¾eme setkat i v&nbsp;souèasnosti, kdy je
pùvodní datarekordér emulován buï zvukovou kartou osobního poèítaèe (PC) nebo
se k&nbsp;osmibitovému poèítaèi pøipojují rùzné kapesní pøehrávaèe MP3, mnohdy
doplnìné o dal¹í zesilovaè (viz devátý obrázek). Ztrátová komprimace MP3 je
sice urèena pøedev¹ím pro práci s&nbsp;audio signálem (nìkterá kmitoètová pásma
jsou pøi komprimaci potlaèena), ale kupodivu nijak zásadnì neovlivòuje ani
binární signál pou¾ívaný osmibitovými mikropoèítaèi. Závìrem je mo¾né øíci, ¾e
tyto techniky jsou vhodné pøedev¹ím pro trvalou úschovu aplikací a dat
v&nbsp;pùvodní podobì (tj.&nbsp;tak, jak vznikly pøed dvaceti a více lety), co¾
má význam zejména z&nbsp;historického hlediska (navíc se, na rozdíl od pùvodních
datarekordérù, u¾ivatel zpravidla nedoèká døíve se pravidelnì vyskytujících
&bdquo;oblíbených&ldquo; hlá¹ení typu <i>TAPE ERROR</i> èi <i>LOAD ERROR</i>
:-).</p>

<img src="http://i.iinfo.cz/images/579/pc112a-9.jpg" width="401" height="540" alt=" " />
<p><i>Obrázek 9: Jednoduchý zesilovaè, který umo¾òuje nahrávat programy
z&nbsp;bì¾ného notebooku (nebo i iPodu èi dal¹ího MP3 pøehrávaèe) do poèítaèù
ZX Spectrum èi jeho klonù. Vìt¹inou je sice mo¾né propojit notebook se ZX
Spectrem pøímo, ale v&nbsp;nìkterých pøípadech není výstupní hlasitost
dostateèná, aby ZX Spectrum správnì dekódovalo pøená¹ený signál.</i></p>



<p><a name="k03"></a></p>
<h2>3. SIO2PC</h2>

<p>Jedním z&nbsp;èasto pou¾ívaných øe¹ení ulo¾ení aplikací i dat pro osmibitové
poèítaèe <i>Atari</i> pøedstavuje pomìrnì jednoduchý konvertor nazvaný
pøíznaènì <i>SIO2PC</i>, jen¾ slou¾í pro propojení domácího mikropoèítaèe
<i>Atari</i> s&nbsp;jakýmkoli jiným poèítaèem vybaveným sériovým portem
<i>RS-232C</i> (vìt¹inou se jedná o osobní poèítaèe kompatibilní s&nbsp;PC).
V¹echny osmibitové poèítaèe <i>Atari</i> jsou vybaveny rozhraním nazvaným
<i>SIO</i> (Serial Input/Output) doplnìným o nìkolik signálových vodièù
pou¾ívaných pøedev¹ím datarekordérem (ten byl prakticky jediným
&bdquo;neinteligentním&ldquo; zaøízením pøipojovaným na konektor <i>SIO</i>).
Pøes <i>SIO</i> bylo mo¾né k&nbsp;poèítaèùm <i>Atari</i> pøipojit velké
mno¾ství rùzných periferních zaøízení, vèetnì disketových jednotek, tiskáren
ale napøíklad i modemù.</p>

<img src="http://i.iinfo.cz/images/579/pc112a-10.png" width="320" height="199" alt=" " />
<p><i>Obrázek 10: Tøináctipinový konektor rozhraní SIO.</i></p>

<p>Právì tato zaøízení (a nejenom je) lze s&nbsp;vyu¾itím konvertoru
<i>SIO2PC</i> emulovat, tak¾e se disk osobního poèítaèe PC mù¾e stát virtuální
disketovou jednotkou osmibitového <i>Atari</i>, poèítaè <i>Atari</i> mù¾e pøes
tento konvertor tisknout buï do souboru nebo na libovolnou tiskárnu pøipojenou
k&nbsp;PCèku atd. Samotné zapojení konvertoru <i>SIO2PC</i> existuje ve více
verzích, z&nbsp;nich¾ jedna (vyu¾ívající obvod SN75189N, MC1489N, 14C89,
75LS189 èi 75C189) je zobrazena na jedenáctém obrázku (samotné zapojení není
pøíli¹ slo¾ité, pøevá¾nì se jedná o úpravu napì»ových úrovní z&nbsp;TTL
pou¾itých u <i>SIO</i> na úrovnì pou¾ívané sériovým portem).</p>

<a href="http://i.iinfo.cz/images/579/pc112a-11.png"><img src="http://i.iinfo.cz/images/579/pc112a-11-prev.png" width="370" height="184" alt=" " /></a>
<p><i>Obrázek 11: Jedno z&nbsp;mo¾ných zapojení SIO2PC.</i></p>

<p>Ze schématu zobrazeného na jedenáctém obrázku je patrné, ¾e se pro
komunikaci pou¾ilo pouze nìkolik signálù tøináctipinového konektoru <i>SIO</i>.
Konkrétnì se jedná o piny s&nbsp;napájením (+5V a GND), vstupní a výstupní
datové signály a signál indikující pøenos pøíkazu. Tato pìtice vodièù tvoøí
plnohodnotný duplexní asynchronní sériový kanál, který navíc díky pou¾itému
pøenosovému protokolu (adresování zaøízení) doká¾e obslou¾it vìt¹í mno¾ství
periferních zaøízení, napøíklad ètyøi disketové jednotky a tiskárnu.
V&nbsp;následující tabulce jsou pro zajímavost vypsány funkce v¹ech pinù
konektoru <i>SIO</i>:</p>

<table>
<tr><th>Pin</th><th>Oznaèení</th><th>Význam</th></tr>
<tr><td>1 </td><td>Clock Input  </td><td>Hodiny vstup</td></tr>
<tr><td>2 </td><td>Clock Output </td><td>Hodiny výstup</td></tr>
<tr><td>3 </td><td>Data Input   </td><td>Data vstup</td></tr>
<tr><td>4 </td><td>Ground       </td><td>Zem</td></tr>
<tr><td>5 </td><td>Data Output  </td><td>Data výstup</td></tr>
<tr><td>6 </td><td>Ground       </td><td>Zem</td></tr>
<tr><td>7 </td><td>Command      </td><td>Povel (aktivní v logické nule)</td></tr>
<tr><td>8 </td><td>Motor Control</td><td>Øízení motoru (datarekordér)</td></tr>
<tr><td>9 </td><td>Proceed      </td><td>Potvrzení (aktivní v logické nule)</td></tr>
<tr><td>10</td><td>+5V / Ready  </td><td>+5V / Pøipraven</td></tr>
<tr><td>11</td><td>Audio Input  </td><td>Vstup audio (datarekordér)</td></tr>
<tr><td>12</td><td>+12V         </td><td>+12V</td></tr>
<tr><td>13</td><td>Interrupt    </td><td>Pøeru¹ení (aktivní v logické nule)</td></tr>
</table>

<a href="http://i.iinfo.cz/images/579/pc112a-12.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-12-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 12: Vylep¹ená varianta konvertoru SIO2PC. Na levé stranì
konvertoru je pøipojený kabel RS-232C, na stranì pravé kabel SIO.</i></p>



<p><a name="k04"></a></p>
<h2>4. Pøenos dat po sbìrnici SIO</h2>

<p>Standardní rychlost pøenosu dat po sbìrnici <i>SIO</i> odpovídá pøenosové
rychlosti pùvodních disketových jednotek, tj.&nbsp;19200 baudùm (tuto rychlost
je mo¾né na stranì sériového portu osobního poèítaèe nastavit pøes øídicí
registr obvodu 8251, mimochodem se jedná o cca 8,5&times; vìt¹í pøenosovou
rychlost ne¾ v&nbsp;pøípadì Turba 2000). Existuje i mo¾nost zrychleného
pøenosu, který byl v&nbsp;minulosti pou¾it napøíklad ve <i>SpartaDOSu</i>;
konkrétnì se jedná o pøenosové rychlosti cca 38000 baudù. Data jsou pøená¹ena
po jednotlivých bajtech, pøièem¾ se pøed ka¾dým bajtem nejprve pøená¹í start
bit a po bajtu následuje stop bit (délka start i stop bitu odpovídá délce
datových bitù). Vzhledem k&nbsp;tomu, ¾e pøes <i>SIO</i> mù¾e s&nbsp;poèítaèem
komunikovat vìt¹í poèet periferních zaøízení (zapojených za sebou), je ka¾dá
operace na této sbìrnici zahájena takzvaným pøíkazovým rámcem, jeho¾ délka je
pìt bajtù. To, ¾e se zahajuje pøenos pøíkazového rámce a nikoli dat, je
diagnostikováno pomocí signálu <strong>Command</strong> (pin èíslo 7).
Struktura tohoto rámce je velmi jednoduchá, jak je to ostatnì patrné pøi
pohledu do následující tabulky:</p>

<table>
<tr><th>Poøadí bajtu</th><th>Název</th><th>Význam</th></tr>
<tr><td>1</td><td>Device ID</td><td>Disketa D1: odpovídá 0x31, D2: 0x32 atd.</td></tr>
<tr><td>2</td><td>Command  </td><td>R &ndash; read, W &ndash; write, P &ndash; put, S &ndash; status request</td></tr>
<tr><td>3</td><td>Aux1     </td><td>pøi práci s&nbsp;disketou èíslo sektoru</td></tr>
<tr><td>4</td><td>Aux2     </td><td>dtto</td></tr>
<tr><td>5</td><td>Checksum </td><td>kontrolní souèet pøedchozí ètveøice bajtù</td></tr>
</table>

<br />

<a href="http://i.iinfo.cz/images/579/pc112a-13.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-13-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 13: Dal¹í fotografie vylep¹ené varianty konvertoru
SIO2PC.</i></p>

<p>Vlastní pøenos dat podle standardního protokolu vypadá následovnì (popis je
ponìkud zjednodu¹en, nebo» jsem vynechal informace o èekacích dobách mezi
jednotlivými pøíkazy; ty toti¾ nejsou pro pochopení èinnosti protokolu
nezbytné):</p>

<ol>
<li>Poèítaè signalizuje pøenos pøíkazového rámce pøechodem signálu
<strong>Command</strong> na úroveò logické nuly.</li>
<li>Poèítaè po¹le pìtici bajtù pøíkazového rámce (viz pøedchozí tabulka se
strukturou tohoto rámce).</li>
<li>Poèítaè signalizuje ukonèení pøenosu pøíkazového rámce pøechodem signálu
<strong>Command</strong> na úroveò logické jednièky.</li>
<li>Vybrané periferní zaøízení po¹le zpìt bajt s&nbsp;potvrzením pøijetí pøíkazu.</li>
<li>Následuje pøenos dat vybraným smìrem &ndash; typicky se jedná o 128 bajtù
(jeden sektor) následovaný kontrolním souètem.</li>
<li>V&nbsp;závislosti na smìru pøenosu dat zaøízení po¹le bajt s&nbsp;informací
o potvrzení pøijatých dat (acknowledge) nebo o ukonèení pøenosu (complete)
s&nbsp;jejich následným pøijetím (acknowledge).</li>
</ol>

<a href="http://i.iinfo.cz/images/579/pc112a-17.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-17-prev.jpg" width="370" height="216" alt=" " /></a>
<p><i>Obrázek 14: Pou¾ití SIO2PC v&nbsp;praxi. Osobní poèítaè emuluje pomocí
aplikace APE for Windows disketovou jednotku (monitor napravo), pøes ní¾ je do
osmibitového mikropoèítaèe Atari nahrána hra (zobrazená na televizoru nalevo).
Samotný konvertor je umístìn zhruba ve støedu fotografie &ndash; pøed stolní
lampou.</i></p>



<p><a name="k05"></a></p>
<h2>5. SIO2USB</h2>

<p>Na vý¹e popsaný konvertor <i>SIO2PC</i> ideovì navazuje modernìj¹í konvertor
nazvaný pøíhodnì <i>SIO2USB</i>, který je sice z&nbsp;hlediska samotného
elektrického zapojení ponìkud slo¾itìj¹í (co¾ vychází pøedev¹ím z&nbsp;pomìrnì
znaèných rozdílností mezi sériovým portem <i>RS-232C</i> a sbìrnicí
<i>USB</i>), ale základní vlastnosti pùvodního <i>SIO2PC</i>, zejména to, ¾e
osmibitový poèítaè <i>Atari</i> se ke konvertoru chová jako k&nbsp;dal¹í
disketové jednotce (èi jednotkám), zùstaly zachovány. <i>SIO2USB</i> se,
podobnì jako <i>SIO2PC</i>, k&nbsp;poèítaèùm <i>Atari</i> zapojuje jako
poslední zaøízení na sbìrnici <i>SIO</i>. Naopak na stranì osobního poèítaèe se
tento konvertor tváøí jako virtuální sériový port (COM), co¾ mj.&nbsp;umo¾òuje,
aby bylo mo¾né vyu¾ít vìt¹inu stávajících aplikací, které s&nbsp;poèítaèi
<i>Atari</i> pùvodnì komunikovaly pomocí <i>RS-232C</i>. Emulace sériového
portu musí být témìø dokonalá, pøedev¹ím proto, ¾e <i>SIO</i> signál
<strong>Command</strong> je pøivádìn na signál <strong>RI</strong> sériového
portu <i>RS-232C</i>.</p>

<img src="http://i.iinfo.cz/images/579/pc112a-14.jpg" width="250" height="250" alt=" " />
<p><i>Obrázek 15: Základ konvertoru SIO2USB &ndash; plo¹ný spoj osazený èipem
FT232R, který na sbìrnici USB vytvoøí ovladaèe virtuálního sériového portu
(COM).</i></p>

<p>U¾ivatelùm jsou nabízeny dvì základní verze konvertoru <i>SIO2USB</i>. První
verze obsahuje pøímo tøináctipinový <i>SIO</i> konektor (obrázek 17).
Alternativnì je k&nbsp;dispozici i verze se svorkovnicí popø.&nbsp;pouze
s&nbsp;pìti pájecími místy pro ty u¾ivatele, kteøí nemají k&nbsp;dispozici
originální <i>SIO</i> kabel s&nbsp;dvojicí konektorù, ale napøíklad pouze kabel
získaný z&nbsp;datarekordéru (který byl na druhém konci jednodu¹e uøíznut :-).
V&nbsp;obou pøípadech se po pøipojení <i>SIO2USB</i> k&nbsp;osobnímu poèítaèi
nejprve musí nainstalovat ovladaè virtuálního sériového portu (COM), který je
následnì mo¾né vyu¾ívat prakticky libovolnou aplikací pracující pùvodnì se
sériovými porty. Ze zapojení konvertoru <i>SIO2USB</i> je toti¾ zøejmé, ¾e se
jedná pouze o upravený <i>SIO2PC</i> &ndash; datové linky ze <i>SIO</i>,
tj.&nbsp;signály <strong>Data Output</strong> a <strong>Data Input</strong>
jsou pøevedeny na signály <strong>TXD</strong> a <strong>RXD</strong>
odpovídající specifikaci <i>RS-232C</i> (a¾ na odli¹né napì»ové úrovnì) a
signál <strong>Command</strong> je pøeveden na signál <strong>RI</strong>.</p>

<img src="http://i.iinfo.cz/images/579/pc112a-15.jpg" width="248" height="250" alt=" " />
<p><i>Obrázek 16: Zapojení výstupu z&nbsp;konektoru SIO na SIO2USB.</i></p>

<p>V&nbsp;souèasnosti jsou nabízena i dal¹í zaøízení pojmenovaná
<i>SIO2USB</i>. Jedno z&nbsp;tìchto zaøízení pracuje ponìkud odli¹ným zpùsobem,
ne¾ zaøízení popsané v&nbsp;pøedchozích odstavcích, proto¾e umo¾òuje pøímé
pøipojení flash disku do konektoru <i>USB</i>. Poèítaè <i>Atari</i>
k&nbsp;tomuto flash disku pøistupuje stejným zpùsobem jako k&nbsp;disketové
jednotce (souborový systém systému <i>DOS</i> na <i>Atari</i> je emulován pøímo
v&nbsp;<i>SIO2USB</i>), tj.&nbsp;z&nbsp;celého øetìzce je odstranìna nutnost
pøipojení osobního poèítaèe.</p>

<a href="http://i.iinfo.cz/images/579/pc112a-16.jpg"><img src="http://i.iinfo.cz/images/579/pc112a-16-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 17: Komerènì prodávaný konvertor SIO2USB (odli¹ný od pøedchozího
konvertoru).</i></p>



<p><a name="k06"></a></p>
<h2>6. Zaøízení SDrive</h2>

<p>Posledním zaøízením urèeným pro pou¾ití spolu s&nbsp;osmibitovými domácími
poèítaèi <i>Atari</i>, které si v&nbsp;dne¹ním èlánku popí¹eme, je zaøízení
pojmenované <i>SDrive</i>. Jedná se o zaøízení vyvinuté pomìrnì nedávno (2008,
2009) v&nbsp;tuzemsku, které je urèeno pro emulaci funkcí disketové jednotky èi
nìkolika disketových jednotek pøipojených na sbìrnici <i>SIO</i>. Ov¹em &ndash;
na rozdíl od vý¹e popsaných konvertorù <i>SIO2PC</i> a <i>SIO2USB</i> &ndash;
se v&nbsp;pøípadì <i>SDrive</i> jedná o samostatnì pracující zaøízení (není
nutný osobní poèítaè), do nìj¾ je mo¾né vkládat pamì»ové karty typu <i>SD
(Secure Digital)</i>. Tyto pamì»ové karty musí obsahovat souborový systém
<i>FAT16</i>, z&nbsp;èeho¾ vyplývá i omezení na maximální velikost souborového
systému 2 GB (ale popravdì øeèeno je tato kapacita z&nbsp;pohledu majitelù
osmibitových poèítaèù s&nbsp;64 kB RAM obrovská a takøka nezaplnitelná :-).
Pøedností pou¾ití souborového systému <i>FAT16</i> je jeho kompatibilita snad
se v¹emi v&nbsp;souèasnosti existujícími operaèními systémy, samozøejmì vèetnì
MS Windows a Linuxu.</p>

<img src="http://i.iinfo.cz/images/668/pc11218.jpg" width="368" height="276" alt=" " />
<p><i>Obrázek 18: Zaøízení SDrive v&nbsp;celé své kráse.</i></p>

<p>Zajímavé je, ¾e ovládací program bì¾í pøímo na poèítaèi <i>Atari</i> (tak¾e
samotný <i>SDrive</i> napøíklad nemusí obsahovat displej ani vìt¹í mno¾ství
ovládacích prvkù) a je ulo¾en na pamì»ové kartì, nikoli v&nbsp;pamìti ROM,
EPROM èi Flash, tak¾e jeho upgrade je velmi snadný &ndash; nová verze programu
se stáhne z&nbsp;internetu a nahraje do pamì»ové karty. Zpùsob spu¹tìní
ovládacího programu je takté¾ velmi snadný, proto¾e vyu¾ívá mo¾ností samotného
operaèního systému <i>Atari</i> &ndash; pokud pamì»ová karta vlo¾ená do
<i>SDrive</i> obsahuje v&nbsp;koøenovém adresáøi soubor
<strong>SDRIVE.ATR</strong> (a» ji¾ je jeho obsah jakýkoli), je vytvoøena
virtuální disketová jednotka D1: obsahující tento spustitelný soubor, který je
mo¾né pøi startu poèítaèe <i>Atari</i> automaticky nahrát do operaèní pamìti a
následnì spustit. Dodávaný ovládací program umo¾òuje napøíklad pøiøazovat
obrazy disket (ulo¾ené v&nbsp;pamì»ové kartì v&nbsp;souborech typu
<strong>.ATR</strong> a <strong>.XFD</strong>) virtuálním disketovým jednotkám
atd.</p>

<img src="http://i.iinfo.cz/images/222/pc11219.jpg" width="368" height="276" alt=" " />
<p><i>Obrázek 19: Souèástková základna SDrive je skuteènì
minimalistická.</i></p>

<p>Jak se ji¾ stalo v&nbsp;tuzemsku dobrým zvykem (viz napøíklad minule zmínìné
<i>Turbo 2000</i>, plotter <i>Alfi</i> nebo z&nbsp;modernìj¹ích projektù
<i>Ronja</i> :-), je celé zaøízení <i>SDrive</i> navr¾eno takovým zpùsobem, aby
jeho stavba byla jednoduchá a takté¾ levná. Z&nbsp;toho vyplývá i pou¾ití
jednostranného plo¹ného spoje, jednoèipového mikropoèítaèe (mikroøadièe)
<i>Atmel ATmega8</i> v&nbsp;patici DIL28 (lze ji bez obav pájet i trafopájkou)
a nìkolika dal¹ích souèástek, napøíklad pøepínaèù, LED atd. Jak firmware
nahraný do mikroøadièe, tak i samotný ovládací program pro poèítaèe
<i>Atari</i> je zveøejnìn vèetnì zdrojových kódù.</p>

<img src="http://i.iinfo.cz/images/361/pc11220.jpg" width="368" height="276" alt=" " />
<p><i>Obrázek 20: Ovládací program zaøízení SDrive bì¾ící pøímo na osmibitovém
Atari.</i></p>



<p><a name="k07"></a></p>
<h2>7. Obsah následující èásti seriálu</h2>

<p>V&nbsp;následující èásti seriálu o architekturách poèítaèù si øekneme, jakým
zpùsobem je v&nbsp;souèasnosti øe¹en problém ukládání dat na osmibitových
mikropoèítaèích <i>Apple I</i> (najít funkèní poèítaè tohoto typu je ji¾ dnes
velká rarita), <i>Apple ][</i>, <i>ZX Spectrum</i> a jeho klonech, samozøejmì
vèetnì èeskoslovenských poèítaèù <i>Didaktik</i>. Popí¹eme si napøíklad projekt
<i>ZXCF</i> a pøedev¹ím <i>DivIDE</i>. Posléze si opìt na chvíli odpoèineme od
popisu technického vybavení domácích osmibitových poèítaèù a jejich periferií.
Namísto toho si, alespoò ve struènosti, pøedstavíme nejznámìj¹í,
nejpou¾ívanìj¹í a nìkdy té¾ nejzatracovanìj¹í programovací jazyk, který se
(nejenom) na osmibitových domácích mikropoèítaèích pou¾íval. Ètenáøi
pravdìpodobnì ji¾ tu¹í o jaký jazyk se jedná &ndash; jeho název je
<i>BASIC</i>.</p>

<a href="http://i.iinfo.cz/images/539/pc11221.jpg"><img src="http://i.iinfo.cz/images/539/pc11221-prev.jpg" width="370" height="183" alt=" " /></a>
<p><i>Obrázek 21: Zásuvná karta pro poèítaèe Apple I, do ní¾ je mo¾né vlo¾it
pamì»ovou kartu Compact Flash.</i></p>

<a href="http://i.iinfo.cz/images/208/pc11222.jpg"><img src="http://i.iinfo.cz/images/208/pc11222-prev.jpg" width="370" height="193" alt=" " /></a>
<p><i>Obrázek 22: Podobná zásuvná karta, ov¹em urèená pro slavné poèítaèe Apple
][.</i></p>

<a href="http://i.iinfo.cz/images/326/pc11223.jpg"><img src="http://i.iinfo.cz/images/326/pc11223-prev.jpg" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 23: Plnì obsazený domácí osmibitový mikropoèítaè Apple
][, aneb souèasné pou¾ití moderní technologie a technologie staré 33
let.</i></p>



<p><a name="k08"></a></p>
<h2>8. Odkazy na Internetu</h2>

<ol>

<li>APE Home Page<br />
<a href="http://www.atarimax.com/">http://www.atarimax.com/</a>
</li>

<li>APE Main Screen<br />
<a href="http://www.atarimax.com/ape/screenshots.html">http://www.atarimax.com/ape/screenshots.html</a>
</li>

<li>Project: CFFA for Apple 1, Replica1, and Obtronix Clones<br />
<a href="http://dreher.net/?s=projects/CFforApple1&amp;c=projects/CFforApple1/main.php">http://dreher.net/?s=projects/CFforApple1&amp;c=projects/CFforApple1/main.php</a>
</li>

<li>Project: CFFA for Apple II, II+, IIe, IIe enh, IIgs<br />
<a href="http://dreher.net/?s=projects/CFforAppleII&amp;c=projects/CFforAppleII/main.php/">http://dreher.net/?s=projects/CFforAppleII&amp;c=projects/CFforAppleII/main.php/</a>
</li>

<li>SDrive by C.P.U. (èeská  verze stránek)<br />
<a href="http://raster.infos.cz/atari/hw/sdrive/sdrive.htm">http://raster.infos.cz/atari/hw/sdrive/sdrive.htm</a>
</li>

<li>SDrive by C.P.U. (anglická verze stránek)<br />
<a href="http://raster.infos.cz/atari/hw/sdrive/sdriveen.htm">http://raster.infos.cz/atari/hw/sdrive/sdriveen.htm</a>
</li>

<li>DivIDE ZX Spectrum, Didaktik<br />
<a href="http://www.divide.cz/">http://www.divide.cz/</a>
</li>

<li>DivIDE manual<br />
<a href="http://www.divide.cz/?x=manual">http://www.divide.cz/?x=manual</a>
</li>

<li>SIO2PC<br />
<a href="http://www.atarimax.com/sio2pc/documentation/">http://www.atarimax.com/sio2pc/documentation/</a>
</li>

<li>SIO2PC (èeské stránky o tomto rozhraní)<br />
<a href="http://raster.infos.cz/atari/hw/sio2pc.htm">http://raster.infos.cz/atari/hw/sio2pc.htm</a>
</li>

<li>ATARI 8 bit Serial Input/Output (SIO) Connector Pinout<br />
<a href="http://www.allpinouts.org/index.php/ATARI_8_bit_Serial_Input/Output_(SIO)">http://www.allpinouts.org/index.php/ATARI_8_bit_Serial_Input/Output_(SIO)</a>
</li>

<li>Atarimax/ABBUC USB Cartridge<br />
<a href="http://www.atarimax.com/usbcart/documentation/">http://www.atarimax.com/usbcart/documentation/</a>
</li>

<li>SIO-to-USB<br />
<a href="http://www.allpinouts.org/index.php/ATARI_8_bit_Serial_Input/Output_(SIO)">http://www.allpinouts.org/index.php/ATARI_8_bit_Serial_Input/Output_(SIO)</a>
</li>

<li>Epitaf pro disketu<br />
<a href="http://pctuning.tyden.cz/multimedia/16-elektronika/17490-epitaf-pro-disketu">http://pctuning.tyden.cz/multimedia/16-elektronika/17490-epitaf-pro-disketu</a>
</li>

<li>Storage Solutions for the Sinclair ZX Spectrum<br />
<a href="http://www.rwapsoftware.co.uk/spectrum/spectrum_storage.html">http://www.rwapsoftware.co.uk/spectrum/spectrum_storage.html</a>
</li>

<li>ZX Spectrum in the 21st Century?<br />
<a href="http://tarjan.uw.hu/zxclones_en.htm">http://tarjan.uw.hu/zxclones_en.htm</a>
</li>

<li>Sinclair Serial InterFace<br />
<a href="http://sif.itherm.cz/">http://sif.itherm.cz/</a>
</li>

<li>Compact Cassette<br />
<a href="http://en.wikipedia.org/wiki/Compact_Cassette">http://en.wikipedia.org/wiki/Compact_Cassette</a>
</li>

<li>World of Spectrum &ndash; Hardware Index<br />
<a href="http://www.worldofspectrum.org/hardware/hwindex.html">http://www.worldofspectrum.org/hardware/hwindex.html</a>
</li>

<li>ZX Microdrive<br />
<a href="http://en.wikipedia.org/wiki/ZX_Microdrive">http://en.wikipedia.org/wiki/ZX_Microdrive</a>
</li>

<li>Planet Sinclair<br />
<a href="http://www.nvg.ntnu.no/sinclair/">http://www.nvg.ntnu.no/sinclair/</a>
</li>

<li>Sinclair Peripherals<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/peripherals/peripherals.htm">http://www.nvg.ntnu.no/sinclair/computers/peripherals/peripherals.htm</a>
</li>

<li>Microdrive<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/peripherals/microdrive.htm">http://www.nvg.ntnu.no/sinclair/computers/peripherals/microdrive.htm</a>
</li>

<li>Speccy.cz<br />
<a href="http://www.speccy.cz/">http://www.speccy.cz/</a>
</li>

<li>ZX Spectrum Microdrive farm<br />
<a href="http://video.google.com/videoplay?docid=2011691753416908964#">http://video.google.com/videoplay?docid=2011691753416908964#</a>
</li>

<li>WD279X-02 FLOPPY DISK FORMATTER/CONTROLLER FAMILY<br />
<a href="http://www.datasheetcatalog.com/datasheets_pdf/W/D/2/7/WD2797.shtml">http://www.datasheetcatalog.com/datasheets_pdf/W/D/2/7/WD2797.shtml</a>
</li>

<li>Formát systému MDOS<br />
<a href="http://cygnus.speccy.cz/popis_mdos-format.php">http://cygnus.speccy.cz/popis_mdos-format.php</a>
</li>

<li>Loading a ZX Spectrum via an iPod Mini<br />
<a href="http://szeligaski.blogspot.com/2005/09/loading-zx-spectrum-via-ipod-mini.html">http://szeligaski.blogspot.com/2005/09/loading-zx-spectrum-via-ipod-mini.html</a>
</li>

<li>ZX Spectrum Hardware Diy Site<br />
<a href="http://user.tninet.se/~vjz762w/">http://user.tninet.se/~vjz762w/</a>
</li>

<li>ZX Interface 1<br />
<a href="http://en.wikipedia.org/wiki/ZX_Interface_1">http://en.wikipedia.org/wiki/ZX_Interface_1</a>
</li>

<li>ZX Interface 2<br />
<a href="http://en.wikipedia.org/wiki/ZX_Interface_2">http://en.wikipedia.org/wiki/ZX_Interface_2</a>
</li>

<li>ZX Interface 1 (1983)<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/peripherals/interface1.htm">http://www.nvg.ntnu.no/sinclair/computers/peripherals/interface1.htm</a>
</li>

<li>ZX Interface 2 (1983)<br />
<a href="http://www.nvg.ntnu.no/sinclair/computers/peripherals/interface2.htm">http://www.nvg.ntnu.no/sinclair/computers/peripherals/interface2.htm</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2010</small></p>
</body>
</html>

