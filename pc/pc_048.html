<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Gameport na osobních poèítaèích</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Gameport na osobních poèítaèích</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù si popí¹eme takzvaný gameport. Jedná se o dnes ji¾ ponìkud zastaralý typ rozhraní, které je urèeno pro pøipojení analogových joystickù a ovladaèù typu paddle, pozdìji i MIDI. Gameport v¹ak lze vyu¾ít i pro ètení rùzných èidel èi napájení externích zaøízení.</p>



<h1>Obsah</h1>
<p>
<a href="#k01">1. Gameport na osobních poèítaèích</a><br />
<a href="#k02">2. Popis pinù konektoru gameportu</a><br />
<a href="#k03">3. Digitální vstupy</a><br />
<a href="#k04">4. Analogové vstupy</a><br />
<a href="#k05">5. Ovládání gameportu</a><br />
<a href="#k06">6. Zpùsoby vyu¾ití gameportu</a><br />
<a href="#k07">7. Literatura a odkazy na Internetu</a><br />
</p>



<p><a name="k01"></a></p>
<h1>1. Gameport na osobních poèítaèích</h1>

<p>Dal¹ím rozhraním, se kterým se mù¾eme pøi práci na osobních poèítaèích
(vìt¹inou desktopech a dokonce i na nìkterých star¹ích noteboocích) setkat, je
takzvaný <i>gameport</i>. Firma IBM toto rozhraní pùvodnì navrhla tak, aby bylo
mo¾né k&nbsp;poèítaèi jednodu¹e pøipojit ovladaèe typu <i>paddle</i>. Ka¾dý
ovladaè <i>paddle</i> obsahuje pouze minimální mno¾ství souèástek &ndash;
potenciometr a tlaèítko èi mikrospínaè (viz první obrázek). Pozdìji se, spolu
se vznikem nových ¾ánrù her (leteckých simulátorù apod.), zaèaly ke gameportu
pøipojovat místo ovladaèù <i>padle</i> analogové joysticky, ve kterých se sice
také nachází potenciometry, ale místo pøímého otáèení jejich osou je pou¾ito
naklánìní páky joysticku pøevedené vìt¹inou na lineární pohyb (v&nbsp;základnì
joysticku se nachází dva lineární odporové dìlièe). O pøevod (analogové)
hodnoty odporu potenciometru do digitální formy se musely postarat obvody
gameportu, zabudované pøímo v&nbsp;poèítaèi nebo umístìné na pøídavné kartì
(pùvodní gameport byl skuteènì realizovaný jako samostatná pøídavná karta
urèená pro osmibitovou sbìrnici <i>ISA</i>, která obsahovala pouze ètyøi
monostabilní klopné obvody, nìkolik diskrétních souèástek a adresový
dekodér).</p>

<image id="8251" />
<p-center><i>Obrázek 1: Originální ovladaèe typu paddle vyrábìné firmou Atari.
Tyto ovladaèe bylo mo¾né pøipojit jak k&nbsp;herním konzolím Atari 2600 a Atari
5200, tak i k&nbsp;osmibitovým domácím poèítaèùm Atari 400, 800, 800XL, 130XE
atd.</i></p-center>

<p>Aby se cena gameportu co nejvíce sní¾ila, bylo pro jeho realizaci zvoleno co
nejjednodu¹¹í obvodové øe¹ení (analogovì-digitální pøevodník zalo¾ený na
monostabilním klopném obvodu pùvodnì realizovaném pomocí slavného èipu 555,
pøesnìji øeèeno na jeho variantì oznaèované kódem 558, která na jednom èipu
sdru¾ovala hned ètyøi obvody 555), co¾ v¹ak, jak si øekneme v&nbsp;navazujících
kapitolách, klade mnohem vìt¹í po¾adavky na programové vybavení, zejména
v&nbsp;moderních multitaskových operaèních systémech.</p>

<p>Oznaèení vývodù èipu 558, který obsahuje ètyøi obvody 555. Spoleèné jsou
(samozøejmì) piny pro napájení a také signál /RST (reset), co¾ nevadí, proto¾e
hodnoty v¹ech ètyø analogových vstupù se zji¹»ují ve stejnou chvíli:</p>

<pre>
       +---+--+---+
    1Q |1  +--+ 16| 4Q
1RCext |2       15| 4RCext
   1TR |3       14| 4TR
    CV |4       13| /RST
   VCC |5  558  12| GND
   2TR |6       11| 3TR
2RCext |7       10| 3RCext
    2Q |8        9| 3Q
       +----------+  
</pre>

<p>V&nbsp;souèasnosti je gameport pova¾ován (z&nbsp;hlediska typického
u¾ivatele PC vcelku oprávnìnì) za zastaralý, jeho funkci do znaèné míry
nahradila universální sériová sbìrnice (<i>USB</i>), ke které se pøipojuje
vìt¹ina herních ovladaèù. V&nbsp;nìkterých pøípadech se v¹ak gameport stále
pou¾ívá; pøedev¹ím pro pøipojení jednodu¹¹ích èidel èi mìøicích pøístrojù,
snímaèù polohy atd. (není nutné vyrábìt èi nakoupit analogovì-digitální
pøevodníky pro USB nebo PCI, co¾ s&nbsp;sebou pøiná¹í mj.&nbsp;i problémy
s&nbsp;ovladaèi). Pøedností gameportu je mo¾nost snadného pøipojení a¾ ètyø na
sobì nezávislých analogových vstupù, ètyø vstupù digitálních a také to, ¾e
z&nbsp;gameportu lze získat napìtí +5V, které mù¾e pro zmínìná èidla a mìøicí
pøístroje zajistit napájení bez nutnosti pou¾ití externích napájecích zdrojù
(napìtí dodávané zdrojem v&nbsp;PC je vyhlazené, bez ne¾ádoucích ru¹ení).</p>

<image id="8252" original="no" />
<p-center><i>Obrázek 2: Základní deska star¹ího typu (AT s&nbsp;volitelným ATX
napájením), která neobsahuje pøímo konektory jednotlivých portù (ty se objevily
a¾ u formátu ATX), ale &bdquo;pouze&ldquo; skupinu pinù, které jsou
s&nbsp;pøíslu¹ným konektorem propojeny krátkým kabelem. Na tomto obrázku jsou
piny pro pøipojení paralelního portu oznaèeny zelenì, modøe jsou orámovány piny
pro dvojici sériových portù a èervenì piny pro dnes popisovaný
gameport.</i></p-center>



<p><a name="k02"></a></p>
<h1>2. Popis pinù konektoru gameportu</h1>

<p>Pro <i>gameport</i> se na osobních poèítaèích kompatibilních s&nbsp;IBM PC
pou¾ívá konektor typu DB s&nbsp;patnácti piny umístìnými ve dvou øadách (8+7
pinù). Piny je mo¾né podle jejich funkce rozdìlit do ètyø skupin. Na piny
oznaèené symbolem <strong>+5V</strong> je vyvedeno (jak se dá oèekávat)
napájecí napìtí +5V, které je pùvodnì urèeno pro pøipojení potenciometrù
pøedstavujících X-ovou nebo Y-ovou osu prvního nebo druhého analogového
joysticku (<strong>X1</strong>, <strong>Y1</strong>, <strong>X2</strong> a
<strong>Y2</strong>), pozdìji se v¹ak tyto piny zaèaly vyu¾ívat i k&nbsp;jiným
úèelùm, proto¾e vìt¹ina zaøízení pøipojených k&nbsp;poèítaèi pro svoji èinnost
vy¾aduje napájení právì pìti volty (jedná se napøíklad o rùzné mikroøadièe,
aktivní A/D a D/A pøevodníky, záchytné registry atd.). Toto napìtí v¹ak není
dostupné ani na sériovém portu ani na portu paralelním (nutno øíci, ¾e nìkdy je
+5V vyvedeno na výstup <i>nSelect-Printer</i> (pull-up) paralelního portu,
av¹ak ne v¾dy se na to dá spolehnout).</p>

<p>Z&nbsp;tohoto dùvodu bývají zaøízení pøipojená na sériový èi paralelní port
vybavena buï vlastním napájecím zdrojem nebo nábojovou pumpou (napøíklad se
jedná o nìkteré mobilní programátory pamìtí). U zaøízení vyrábìných pro vlastní
potøebu je také mo¾né vyu¾ít malého triku &ndash; napìtí 5 V lze získat
z&nbsp;dnes popisovaného joystickového portu nebo z&nbsp;konektoru universální
sériové sbìrnice. Zatí¾itelnost sice není pøíli¹ velká (vìt¹inou se jedná o
øádovì desítky mA u gameportù dodávaných napøíklad spolu se zvukovými kartami,
ale v&nbsp;originálním zapojení bylo mo¾né odebírat maximální proud dodávaný
ISA sbìrnicí), ale napøíklad po potøeby napájení mikroøadièe, který
s&nbsp;poèítaèem mù¾e komunikovat napøíklad po paralelním portu, je
dostaèující. Na dal¹ích pinech oznaèených symbolem <strong>GND</strong> se
nachází signálová zem. Tlaèítka joystickù bývají pøipojena právì
k&nbsp;signálové zemi, proto¾e stlaèení tlaèítka znamená uzemnìní jednoho
z&nbsp;pinù <strong>B1</strong> a¾ <strong>B4</strong> (internì jsou tyto piny
pøes pull-up rezistor nastaveny na hodnotu logické jednièky &ndash; viz tøetí
kapitola).</p>

<image id="8254" />
<p-center><i>Obrázek 3: Konektor gameportu s&nbsp;oèíslováním jednotlivých
pinù. V&nbsp;pøípadì, ¾e je gameport zabudován na zvukových kartách nebo pøímo
základních deskách, jsou nìkteré piny urèené pùvodnì pro napájení, pou¾ity pro
rozhraní MIDI. Pùvodní verze gameportu vyrábìné firmou IBM rozhraní MIDI
neobsahovala.</i></p-center>

<p>V&nbsp;následující tabulce je popsán význam jednotlivých pinù konektoru
DB-15:</p>

<table>
<tr><th>Pin èíslo</th><th>Oznaèení</th><th>Alt. oznaèení</th><th>Význam</th></tr>
<tr><td> 1</td><td>+5V</td><td>+5V</td><td>Napájení +5V (pùvodnì pro analogové vstupy X1 a Y1)</td></tr>
<tr><td> 2</td><td>B1 </td><td>D4</td><td>Vstup tlaèítka èíslo 1</td></tr>
<tr><td> 3</td><td>X1 </td><td>A0</td><td>X-ová osa pro první joystick (standardnì 0 a¾ 100 k&Omega;)</td></tr>
<tr><td> 4</td><td>GND</td><td>GND</td><td>Zem pro tlaèítko èíslo 1</td></tr>
<tr><td> 5</td><td>GND</td><td>GND</td><td>Zem pro tlaèítko èíslo 2</td></tr>
<tr><td> 6</td><td>Y1 </td><td>A1</td><td>Y-ová osa pro první joystick (standardnì 0 a¾ 100 k&Omega;)</td></tr>
<tr><td> 7</td><td>B2 </td><td>D5</td><td>Vstup tlaèítka èíslo 2</td></tr>
<tr><td> 8</td><td>+5V</td><td>+5V</td><td>Napájení +5V</td></tr>
<tr><td> 9</td><td>+5V</td><td>+5V</td><td>Napájení +5V (pro analogové vstupy X2 a Y2)</td></tr>
<tr><td>10</td><td>B4 </td><td>D6</td><td>Vstup tlaèítka èíslo 4</td></tr>
<tr><td>11</td><td>X2 </td><td>A2</td><td>X-ová osa pro druhý joystick (standardnì 0 a¾ 100 k&Omega;)</td></tr>
<tr><td>12</td><td>GND</td><td>GND</td><td>Zem pro tlaèítka èíslo 3 a 4, takté¾ pou¾ito pro pøipojení MIDI zaøízení</td></tr>
<tr><td>13</td><td>Y2 </td><td>A3</td><td>Y-ová osa pro druhý joystick (standardnì 0 a¾ 100 k&Omega;)</td></tr>
<tr><td>14</td><td>B3 </td><td>D7</td><td>Vstup tlaèítka èíslo 3</td></tr>
<tr><td>15</td><td>+5V</td><td>+5V</td><td>Napájení +5V, takté¾ pou¾ito pro pøipojení MIDI zaøízení, nìkdy není tento pin vùbec zapojen</td></tr>
</table>



<p><a name="k03"></a></p>
<h1>3. Digitální vstupy</h1>

<p>Z&nbsp;tabulky vypsané v&nbsp;pøedchozí kapitole je zøejmé, ¾e na gameport
je mo¾né pøímo pøipojit a¾ ètyøi tlaèítka pøedstavující digitální (dvoustavové,
binární) vstupy. V&nbsp;pøípadì, ¾e jsou ke gameportu pøipojeny standardní
analogové joysticky, obsahuje ka¾dý joystick dvojici tlaèítek, pøièem¾ stav
ka¾dého tlaèítka je mo¾né kdykoli pøeèíst, nezávisle na stavu ostatních tøí
tlaèítek &ndash; pøíznak stlaèení ka¾dého tlaèítka je ulo¾en v&nbsp;záchytném
klopném obvodu typu D, odkud lze informaci pøeèíst bez nutnosti pou¾ití pomìrnì
slo¾itého pøenosového protokolu známého napøíklad z&nbsp;klávesnic osobních
poèítaèù (vzhledem ke konstrukci vìt¹iny klávesnic není mo¾né korektnì pou¾ít
v¹echny kombinace kláves, zatímco u gameportu to mo¾né je). Tlaèítka se
zapojují mezi piny oznaèené <strong>B1</strong> a¾ <strong>B3</strong>
(alternativnì se mù¾eme setkat s&nbsp;oznaèením <strong>D4</strong> a¾
<strong>D7</strong>) a nìkterý z&nbsp;pinù pøedstavující signálovou zem
(<strong>GND</strong>). Pùvodní gameport neobsahoval ¾ádný obvod pro eliminaci
zákmitù tlaèítka, dnes je samozøejmì tato problematika u dra¾¹ích joystickù
øe¹ena, typicky pøímo v&nbsp;èipsetu základní desky.</p>

<image id="8255" original="no" />
<p-center><i>Obrázek 4: Standardní zapojení dvojice analogových joystickù ke
gameportu. V&nbsp;praxi se mnohdy tento zpùsob zapojení zcela pøesnì
nedodr¾uje, pou¾ívají se napøíklad odli¹né napájecí vodièe èi pouze jedna
signálová zem.</i></p-center>

<p>Nìkteré typy joystickù obsahují vìt¹í mno¾ství tlaèítek. V&nbsp;tomto
pøípadì se buï stavy tlaèítek OR-ují (tj.&nbsp;napøíklad stlaèení dvou tlaèítek
souèasnì má stejný význam, jako stlaèení tøetího tlaèítka), nebo se stavy
tlaèítek pøená¹í do poèítaèe sériovým protokolem, co¾ ov¹em vy¾aduje
specializovaný ovladaè (tímto zpùsobem lze poèet tlaèítek zvý¹it prakticky na
libovolnou hodnotu, v&nbsp;praxi mívají nìkteré joysticky a¾ ¹estnáct tlaèítek,
mnohdy s&nbsp;programovatelným významem). Existují i ovladaèe, u kterých je
analogový joystick nahrazen ètveøicí tlaèítek nebo pùvodním
&bdquo;digitálním&ldquo; joystickem (ten doká¾e rozeznat pouze osm smìrù
náklonu, proto¾e místo potenciometrù obsahuje pouze ètyøi spínaèe). Zapojení
takovýchto ovladaèù musí simulovat analogový joystick, proto se stav
jednotlivých tlaèítek pøevádí na odpor o hodnotách typicky 0 k&Omega;, 50
k&Omega; a 100 k&Omega;, co¾ odpovídá náklonu páky analogového joysticku zcela
doleva (nahoru), vycentrování páky a náklonu zcela doprava (dolù) &ndash; viz
první odkaz uvedený v&nbsp;osmé kapitole, kde se nachází nìkolik velmi
jednoduchých schémat.</p>

<image id="8256" original="no" />
<p-center><i>Obrázek 5: Jedna z&nbsp;mo¾ných redukcí umo¾òujících pøipojit
pùvodní &bdquo;digitální&ldquo; joystick na gameport.</i></p-center>



<p><a name="k04"></a></p>
<h1>4. Analogové vstupy</h1>

<p>V&nbsp;pøedchozí kapitole popsané digitální vstupy nejsou
z&nbsp;implementaèního hlediska nièím výjimeèné. Zajímavìj¹í jsou analogové
vstupy, které obsahují velmi jednoduchou formu analogovì-digitálního
pøevodníku. Z&nbsp;mnoha rùzných typù tìchto pøevodníkù byl vybrán A/D
pøevodník pracující na principu mìøení doby nabíjení kondenzátoru zapojeného do
integraèního RC èlánku. Princip práce tohoto typu A/D pøevodníku je zobrazen na
¹estém obrázku. Nejprve je pomocí èasovaèe 555 (pracujícího v&nbsp;re¾imu
monostabilního klopného obvodu) provedeno vybití kondenzátoru, tj.&nbsp;na obou
elektrodách je nulové napìtí. Posléze se pøes externì pøipojený potenciometr
(paddle, joystick atd.) a interní rezistor o hodnotì cca 2,2 k&Omega;
kondenzátor zaèíná nabíjet s&nbsp;èasovou konstantou &tau;=RC. Ve chvíli, kdy
napìtí na kondenzátoru dosáhne prahové hodnoty (zhruba 3,3V), monostabilní
klopný obvod se pøeklopí, tj.&nbsp;zmìní svùj stav, který je mo¾né programovì
pøeèíst. Doba mezi prvotním vybitím kondenzátoru a zmìnou stavu monostabilního
klopného obvodu je úmìrná aktuálnímu odporu potenciometru. Bì¾né analogové
joysticky pou¾ívají potenciometr o maximálním odporu 100 k&Omega;, av¹ak
napøíklad pøi pøipojení vlastního èidla lze pou¾ít i jiný rozsah. Pøíli¹ velká
hodnota odporu v¹ak má za následek del¹í dobu mìøení a také mù¾e (u velmi
dlouhých èasù nabíjení) docházet k&nbsp;samovolnému vybíjení kondenzátoru, co¾
mìøení ovlivòuje. Naopak pøi malé hodnotì pøipojeného odporu se zvìt¹uje chyba
mìøení; výpoèet je závislý na intervalu zji¹»ování stavu monostabilního
klopného obvodu.</p>

<image id="8257" original="no" />
<p-center><i>Obrázek 6: Principiální schema zapojení jednoho analogového vstupu
gameportu. Èasovaè 555 pracuje v&nbsp;re¾imu monostabilního klopného obvodu.
Dnes se samozøejmì (pokud je gameport v&nbsp;poèítaèi vùbec pou¾it) místo
ètveøice klopných obvodù pou¾ívá integrovaný obvod sdru¾ující i dal¹í funkce
(sériové a paralelní porty, zvukový èip atd.).</i></p-center>

<p>Podobným zpùsobem byl analogovì/digitální pøevodník realizován i na
osmibitových domácích poèítaèích <i>Atari</i> a nìkterých herních automatech,
kde tuto funkci obstarával èip nazvaný <i>POKEY</i>, který mj.&nbsp;obsahoval i
nìkolik èasovaèù, ovládací obvody klávesnice i magnetofonu a v&nbsp;neposlední
øadì i zvukový generátor se ètyømi zvukovými kanály &ndash; na ètyøicetipinový
èip s&nbsp;pomìrnì malou integrací je to úctyhodné mno¾ství funkcí. Nejvìt¹í
rozdíl mezi gameportem pou¾itým na osobních poèítaèích a èipem <i>POKEY</i>
spoèívá v&nbsp;tom, ¾e <i>POKEY</i> automaticky provádìl mìøení èasu nabití
kondenzátoru, tak¾e nebylo nutné programovat mìøicí smyèky ani pou¾ívat
èasovaèe. Interní èítaè v&nbsp;obvodu <i>POKEY</i> byl osmibitový a jeho
hodnota se mìnila (o jednièku) s&nbsp;ka¾dým obrazovým øádkem. Pøesto, ¾e se
pou¾íval interní osmibitový èítaè, mohla namìøená hodnota le¾et v&nbsp;rozsahu
0-228, kde 0 znaèí nulový odpor (zkrat) a 228 nekoneèný odpor (rozpojené
vývody). <i>POKEY</i> celkovì obsahoval osm analogových vstupù, tj.&nbsp;bylo
mo¾né pøipojit a¾ osm potenciometrù (jedná se o základ ji¾ zmínìného ovladaèe
<i>paddle</i>). Souèasné pøeètení v¹ech osmi vstupù bylo mo¾né provést bìhem
zobrazení jednoho obrazového snímku, tj.&nbsp;50&times; za sekundu, popø. i
nìkolikrát bìhem jednoho snímku, ale s&nbsp;ni¾¹í pøesností.</p>

<image id="8258" original="no" />
<p-center><i>Obrázek 7: Pùvodní ovladaèe typu paddle nepou¾ívaly patnáctipinový
konektor popsaný ve druhé kapitole, ale konektor typu DE-9 obsahující devìt
pinù. Na ka¾dý konektor se pøes rozboèovaè zapojila dvojice ovladaèù, jak je
patrné z&nbsp;této fotografie.</i></p-center>



<p><a name="k05"></a></p>
<h1>5. Ovládání gameportu</h1>

<p>Standardní gameport byl mapován na jedinou vstupnì/výstupní adresu 201H,
av¹ak u nìkterých karet obsahujících gameport bylo mo¾né pøes jumpery èi
utilitou ISAPNP (ISA Plug and Play) tuto adresu zmìnit, typicky v&nbsp;rozsahu
200H a¾ 208H. Pokud je na zvolenou vstupnì/výstupní adresu zapsána libovolná
hodnota, dojde k&nbsp;vybití kondenzátorù u v¹ech ètyø analogových vstupù. Ve
skuteènosti se zapisovaná hodnota nikam neulo¾í, pøídavná karta
s&nbsp;gameportem pouze reaguje na adresu 201H poslanou na adresovou sbìrnici a
signál zápisu je pøiveden na vstup Reset monostabilních klopných obvodù.
Pøeètením bajtu z&nbsp;této adresy se získá aktuální stav v¹ech ètyø tlaèítek
(sepnuto èi rozepnuto) a také stav klopných obvodù pro jednotlivé analogové
vstupy. Vzhledem k&nbsp;tomu, ¾e standardní gameport nedoká¾e vygenerovat
pøeru¹ení pøi zmìnì stavu nìkterého z&nbsp;klopných obvodù, musí se provádìt
aktivní ètení (polling) z&nbsp;adresy 201H (pro operaèní systém DOS nebyl tento
zpùsob øízení problematický, ponìkud hor¹í je to u moderních multitaskových
systémù, ve kterých se vìt¹inou musí pou¾ít ovladaèe a nikoli pøímé ètení stavu
gameportu z&nbsp;programu bì¾ícího v&nbsp;userlandu). Ovladaèe vìt¹inou
vyu¾ívají nìkterý z&nbsp;èasovaèù poèítaèe a v&nbsp;pomìrnì krátkých
intervalech testují stav klopných obvodù. Z&nbsp;èasu mezi jejich resetem
(=zápisem na adresu 201H) a zmìnou stavu se odvozuje proud nabíjející
kondenzátor a tím pádem i aktuální nastavení jednotlivých potenciometrù.</p>

<table>
<tr><th>Bit</th><th>Význam</th></tr>
<tr><td>0</td><td>stav klopného obvodu pro vstup X1, 0=kondenzátor nabitý/pøepnuto, 1=provádí se nabíjení</td></tr>
<tr><td>1</td><td>stav klopného obvodu pro vstup Y1, 0=kondenzátor nabitý/pøepnuto, 1=provádí se nabíjení</td></tr>
<tr><td>2</td><td>stav klopného obvodu pro vstup X2, 0=kondenzátor nabitý/pøepnuto, 1=provádí se nabíjení</td></tr>
<tr><td>3</td><td>stav klopného obvodu pro vstup Y2, 0=kondenzátor nabitý/pøepnuto, 1=provádí se nabíjení</td></tr>
<tr><td>4</td><td>stav tlaèítka B1, 0=sepnuto, 1=rozepnuto</td></tr>
<tr><td>5</td><td>stav tlaèítka B2, 0=sepnuto, 1=rozepnuto</td></tr>
<tr><td>6</td><td>stav tlaèítka B3, 0=sepnuto, 1=rozepnuto</td></tr>
<tr><td>7</td><td>stav tlaèítka B4, 0=sepnuto, 1=rozepnuto</td></tr>
</table>



<p><a name="k06"></a></p>
<h1>6. Zpùsoby vyu¾ití gameportu</h1>

<p>Kromì pøipojení komerènì vyrábìných ovladaèù typu analogový joystick, volant
atd. (které se dnes ji¾ stejnì vyrábí s&nbsp;rozhraním USB) je mo¾né gameport
pou¾ít pro ètení stavu mnoha typù èidel, pøedev¹ím tìch, které pøevádí mìøenou
velièinu na elektrický odpor. Jedná se napøíklad o fotoodpor nebo termistor,
který lze vìt¹inou pøímo pøipojit ke gameportu (pro jistotu je dobré spoèítat,
zda nebude fotoodpor nadmìrnì zatì¾ován procházejícím proudem a v&nbsp;pøípadì
potøeby do série pøipojit bì¾ný odpor &ndash; viz vý¹e uvedené interní schéma
jednoho analogového vstupu s&nbsp;RC èlánkem) a provádìt mìøení. Rozsah
mìøitelného odporu se pohybuje od zkratu a¾ po desítky M&Omega;, pøesnost
mìøení v¹ak není pøíli¹ velká &ndash; po kalibraci dosahuje cca 1-5%, vìt¹inou
v&nbsp;závislosti na zmìnì okolní teploty (a také pøesnosti ètení stavù
gameportu). Se zvy¹ujícím se odporem pøipojené souèástky také roste èas nutný
pro nabití kondenzátoru, èím¾ se doba mìøení jednoho vzorku prodlu¾uje a¾ na
desítky èi dokonce stovky milisekund. Také je mo¾né na analogový vstup
gameportu pøipojit Hallovu sondu èi dal¹í podobné souèástky. V&nbsp;pøípadì, ¾e
pou¾ité èidlo pøevádí mìøenou velièinu na napìtí, je ji¾ nutné pou¾ít <a
href="http://www.epanorama.net/documents/joystick/FIG5.GIF">slo¾itìj¹í
obvod.</a>. Aby bylo mìøení co nejpøesnìj¹í, je vhodné provádìt kalibraci.
Vìt¹inou postaèuje pøed provádìním mìøení místo èidla zapojit pøesnìj¹í odpory
(napøíklad z&nbsp;øady E24 &ndash; <a
href="http://www.bucek.name/stranky/ruzne/odporove_rady/odporove_rady.htm">http://www.bucek.name/stranky/ruzne/odporove_rady/odporove_rady.htm</a>)
o hodnotì napøíklad 1 k&Omega;, 47 k&Omega; a 100 k&Omega; a na namìøené
hodnoty nakalibrovat pøevodní tabulky v&nbsp;aplikaci, která mìøení
provádí.</p>

<image id="8259" original="no" />
<p-center><i>Obrázek 8: Takzvaný Y-kabel, který se pou¾ívá pøi pøipojení dvou
analogových joystickù ke gameportu.</i></p-center>



<p><a name="k07"></a></p>
<h1>7. Literatura a odkazy na Internetu</h1>

<ol>

<li>PC joystick interface circuits,<br />
<a href="http://www.epanorama.net/documents/joystick/pc_circuits.html">http://www.epanorama.net/documents/joystick/pc_circuits.html</a></li>

<li>Vojtìch Pavlík: The Linux Joystick Driver,
<a href="http://atrey.karlin.mff.cuni.cz/~vojtech/joystick/">http://atrey.karlin.mff.cuni.cz/~vojtech/joystick/</a></li>

<li>Vojtìch Pavlík: Odli¹nosti nìkterých joystickù a jejich rozhraní od standardního gameportu,<br />
<a href="http://atrey.karlin.mff.cuni.cz/~vojtech/joystick/specs.txt">http://atrey.karlin.mff.cuni.cz/~vojtech/joystick/specs.txt</a></li>

<li>Atari Inc.: POKEY CHIP,<br />
(originální datasheet i s&nbsp;vnitøním schématem zapojení, dnes lze získat ve formì naskenovaného dokumentu)
</li>

<li>Paddle (game controller),<br />
<a href="http://en.wikipedia.org/wiki/Paddle_(game_controller)">http://en.wikipedia.org/wiki/Paddle_(game_controller)</a>
</li>

<li>Joystick,<br />
<a href="http://en.wikipedia.org/wiki/Joystick">http://en.wikipedia.org/wiki/Joystick</a>
</li>

<li>Analog stick,<br />
<a href="http://en.wikipedia.org/wiki/Analog_stick">http://en.wikipedia.org/wiki/Analog_stick</a>
</li>

<li>Game port,<br />
<a href="http://en.wikipedia.org/wiki/Game_port">http://en.wikipedia.org/wiki/Game_port</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2008</small></p>
</body>
</html>

