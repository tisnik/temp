<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Zásobníkové procesory jako alternativa k architekturám CISC a RISC? (dokonèení)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Zásobníkové procesory jako alternativa k architekturám CISC a RISC (dokonèení)?</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù dokonèíme popis zásobníkových procesorù. Popí¹eme si rozdíly mezi instrukèní pipeline pou¾itou u architektury RISC a u zásobníkových procesorù. Takté¾ si øekneme, proè je problematické na zásobníkových procesorech efektivnì pou¾ívat céèkové programy a èlánek zakonèíme popisem snad nejzajímavìj¹ího zásobníkového procesoru. Je jím èip F21 Chucka Moorea.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Technologické rozdíly mezi architekturami RISC/CISC a zásobníkovými procesory</a></p>
<p><a href="#k02">2. Instrukèní pipeline u zásobníkových procesorù</a></p>
<p><a href="#k03">3. Problémy pøi pou¾ití konvenèních programovacích jazykù na zásobníkových procesorech</a></p>
<p><a href="#k04">4. Neortodoxní zásobníkové mikroprocesory: MuP21 a F21</a></p>
<p><a href="#k05">5. Mikroprocesory MuP21 a F21 versus procesory CISC a RISC</a></p>
<p><a href="#k06">6. Datový zásobník (zásobník operandù), zásobník návratových adres a adresní registr A</a></p>
<p><a href="#k07">7. Instrukèní soubor procesoru F21</a></p>
<p><a href="#k08">8. Procesory a procesorová jádra navazující na dvojici MuP21 a F21</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Technologické rozdíly mezi architekturami RISC/CISC a zásobníkovými procesory</h2>

<p>V&nbsp;pøedcházející èásti seriálu o architekturách poèítaèù jsme se
seznámili se zásobníkovými mikroprocesory a takté¾ jsme si øekli, jaké
vlastnosti mají tyto procesory spoleèné èi naopak rozdílné pøi porovnání
s&nbsp;procesorovými architekturami <i>RISC</i> a <i>CISC</i>. Z&nbsp;pohledu
programátora pracujícího v&nbsp;assembleru spoèívá nejpodstatnìj¹í rozdíl
v&nbsp;tom, ¾e u zásobníkových procesorù jsou v¹echny operandy umístìny buï
v&nbsp;zásobníku operandù (datovém zásobníku), popø.&nbsp;na zásobníku
návratových adres, tj.&nbsp;nikoli v&nbsp;pracovních registrech, jak je tomu u
architektury <i>RISC</i> èi v&nbsp;kombinaci pracovních registrù a operaèní
pamìti, jak tomu je u architektury <i>CISC</i>. Ov¹em z&nbsp;hlediska
slo¾itosti mikroprocesoru (poètu tranzistorù) a takté¾ jeho výpoèetního výkonu
je dùle¾ité takté¾ interní uspoøádání funkèních blokù, z&nbsp;nich¾ se procesor
skládá, samozøejmì vèetnì instrukèní pipeline. Jak ji¾ víme z&nbsp;pøedchozích
èástí tohoto seriálu, je instrukèní pipeline nedílnou souèástí mikroprocesorù
s&nbsp;architekturou <i>RISC</i>, proto¾e právì díky této technologii je
zaruèen jejich vysoký výpoèetní výkon.</p>

<img src="http://i.iinfo.cz/images/51/pc140-1.jpg" width="400" height="403" alt=" " />
<p><i>Obrázek 1: 32bitový mikroprocesor AMD 386DX je typickým zástupcem
mikroprocesorù s&nbsp;komplexní instrukèní sadou &ndash; CISC.</i></p>

<p>Pøevá¾ná èást snahy konstruktérù mikroprocesorù <i>RISC</i> je zamìøena na
to, aby byla instrukèní pipeline co nejlépe vyu¾ita. Proto se také objevily
prediktory skokù, branch delay sloty, pøekladaèe provádìjící rozbalování smyèek
èi tvorbu inline funkcí a i vyrovnávací pamìti (<i>cache</i>) v&nbsp;podstatì
slou¾í k&nbsp;tomu, aby se nejlépe v&nbsp;ka¾dém taktu zaèala zpracovávat nová
instrukce. Pøipomeòme si, ¾e v&nbsp;instrukèní pipeline jsou strojové instrukce
rozlo¾eny do jednodu¹¹ích operací, z&nbsp;nich¾ ka¾dá je vykonána za jeden
strojový takt. Tyto jednodu¹¹í operace jsou provádìny v&nbsp;samostatnì
pracujících funkèních modulech, co¾ znamená, ¾e v&nbsp;jeden okam¾ik mù¾e být
v&nbsp;ideálním pøípadì rozpracováno tolik instrukcí, kolik &bdquo;øezù&ldquo;
má instrukèní pipeline. Mikroprocesory postavené na architektuøe <i>MIPS</i>
vyu¾ívaly dnes ji¾ klasickou &bdquo;RISCovou&ldquo; pipeline s&nbsp;pìti
fázemi:</p>

<table>
<tr><th>Zkratka</th><th>Celý název</th><th>Význam</th></tr>
<tr><td><strong>IF</strong></td><td><i>Instruction Fetch</i></td><td>naètení instrukèního kódu z&nbsp;operaèní pamìti a souèasné zvý¹ení hodnoty èítaèe instrukcí</td></tr>
<tr><td><strong>ID</strong></td><td><i>Instruction Decode</i></td><td>dekódování instrukce a výbìr registrù pro provedení operace</td></tr>
<tr><td><strong>EX</strong></td><td><i>Execute</i></td><td>vlastní operace provedená vìt¹inou v&nbsp;ALU, popø.&nbsp;vyhodnocení podmínky skoku</td></tr>
<tr><td><strong>MA</strong></td><td><i>Memory Access</i></td><td>naètení èi ulo¾ení hodnot do operaèní pamìti</td></tr>
<tr><td><strong>WB</strong></td><td><i>Write Back</i></td><td>ulo¾ení vypoètené hodnoty nebo hodnoty naètené z&nbsp;operaèní pamìti zpìt do vybraného pracovního registru</td></tr>
</table>

<img src="http://i.iinfo.cz/images/394/pc146-2.png" width="450" height="457" alt=" " />
<p><i>Obrázek 2: Mikroprocesor PA RISC firmy Hewlett-Packard, který je zde
zobrazen spolu s&nbsp;dal¹ími podpùrnými obvody a pamì»mi cache.</i></p>

<p>Èistì teoreticky je tedy mo¾né, aby se v&nbsp;mikroprocesoru souèasnì
zpracovávalo pìt instrukcí (ka¾dá v&nbsp;jiné fázi &ndash; operaci), jak je to
naznaèeno na následujícím schématu:</p>

<pre>
CLK Instrukce: 1. 2. 3. 4. 5.
=============================
01             IF -- -- -- --
02             ID IF -- -- --
03             EX ID IF -- --
04             MA EX ID IF --
05             WB MA EX ID IF
06             -- WB MA EX ID
07             -- -- WB MA EX
08             -- -- -- WB MA
09             -- -- -- -- WB
</pre>

<p>U architektury <i>SPARC</i> je struktura instrukèní pipeline ponìkud
odli¹ná, proto¾e samotná pipeline je sestavena pouze ze ètveøice øezù,
v&nbsp;nich¾ se provádí operace <i>Instruction Fetch (IF)</i>, <i>Execute
(EX)</i>, <i>Memory Access (MA)</i> a <i>Write Back (WB)</i>. Díky tomu, ¾e je
vynechána operace <i>Instruction Decode</i>, je mo¾né, aby druhá instrukce
v&nbsp;pipeline vyu¾ila výsledky vypoètené v&nbsp;pøedchozí instrukci (bypass),
tak¾e v&nbsp;tomto pøípadì nedojde k&nbsp;vlo¾ení zpo¾ïovacích
&bdquo;prázdných&ldquo; slotù (<i>delay slotù</i>). Na následujícím schématu je
naznaèeno, v&nbsp;jakém stavu se nachází ètveøice instrukcí v&nbsp;instrukèní
pipeline za pøedpokladu, ¾e procesor nepou¾il ¾ádný delay slot:</p>

<pre>
CLK Instrukce: 1. 2. 3. 4.
==========================
01             IF -- -- --
02             EX IF -- --
03             MA EX IF --
04             WB MA EX IF
05             -- WB MA EX
06             -- -- WB MA
07             -- -- -- WB
</pre>

<img src="http://i.iinfo.cz/images/193/pc152-10.jpg" width="450" height="407" alt=" " />
<p><i>Obrázek 3: Struktura moderní varianty multiprocesoru postaveného na
èipech PA-RISC.</i></p>



<p><a name="k02"></a></p>
<h2>2. Instrukèní pipeline u zásobníkových procesorù</h2>

<p><i>"While Unix/C programmers on RISC processors are unhappy with less than
8M to 16M bytes of memory, and want 128K bytes of cache, Forth programmers are
still engaged in heated debate as to whether more than 64K bytes of program
space is really needed on stack machines"</i></p>

<p>U zásobníkových procesorù je v¹ak pou¾itá technologie ponìkud odli¹ná od
RISCových procesorù, proto¾e zásobníkové procesory mají vìt¹inou pouze
dvoufázovou instrukèní pipeline, tj.&nbsp;souèasnì se provádí pouze dvì
instrukce. V&nbsp;první fázi dochází k&nbsp;naètení instrukèního slova a
souèasnì se provádí vybraná ALU operace u instrukce pøede¹lé. Fáze dekódování
instrukce je pøeskoèena, proto¾e se u vìt¹iny zásobníkových procesorù pou¾ívá
horizontální formát instrukcí a navíc se operandy v¾dy nachází na prvních dvou
polo¾kách zásobníku operandù (popø.&nbsp;se nejedná o ALU operaci, ale
napøíklad o instrukci pøenosu èi naètení dat z&nbsp;operaèní pamìti). Na vstupu
ALU se vìt¹inou nachází dvojice interních registrù, které nahrazují nejvy¹¹í
dvì polo¾ky zásobníku, tj.&nbsp;ALU má v&nbsp;ka¾dém okam¾iku k&nbsp;dispozici
data pro provedení operace. Navíc se výsledek ALU operace (z&nbsp;pøedchozí
instrukce) ihned zpìtnovazební smyèkou zapisuje do jednoho z&nbsp;tìchto
registrù, co¾ je dal¹í rozdíl oproti procesorùm RISC a CISC. Ve výsledku tedy
pro ALU operace vypadá pøekrývání instrukcí u zásobníkových procesorù
následovnì:</p>

<pre>
CLK Instrukce: 1. 2. 3. 4.
==========================
01             IF -- -- --
02             EX IF -- --
03             -- EX IF --
04             -- -- EX IF
05             -- -- -- EX
</pre>

<img src="http://i.iinfo.cz/images/344/pc154-04.png" width="420" height="653" alt=" " />
<p><i>Obrázek 4: Struktura zásobníkového mikroprocesoru se zvýraznìnou
aritmeticko-logickou jednotkou (modrá barva), shifterem (zelená barva) a
dvojicí interních registrù suplujících funkci dvou nejvy¹¹ích prvkù zásobníku
operandù (èervená barva).</i></p>

<p>Na rozdíl od procesorù s&nbsp;architekturou <i>RISC</i> èi <i>CISC</i>
nedochází u zásobníkových procesorù k&nbsp;hazardùm, které se u jiných
architektur musí øe¹it napøíklad zmìnou poøadí instrukcí, vkládáním instrukcí
typu <strong>NOP</strong>, popø.&nbsp;(pro nìkteré pøípady) vytvoøením
&bdquo;zkratky&ldquo; mezi jednotlivými fázemi instrukèní pipeline. Zatímco u
<i>RISC</i> a <i>CISC</i> s&nbsp;pipeline mající vìt¹í poèet øezù se pøekladaèe
sna¾í o to, aby se v&nbsp;po sobì následujících instrukcích nepou¾ily stejné
registry, je u zásobníkových procesorù problém pøesnì opaèný &ndash;
v&nbsp;ideálním pøípadì se v¹echny instrukce provádí s&nbsp;operandy umístìnými
na vrcholu zásobníku, tj.&nbsp;ve skuteènosti ve dvojici interních registrù
pøipojených na vstup aritmeticko-logické jednotky. Problém pøi vykonávání
jednotlivých operací samozøejmì nastává u instrukcí typu &bdquo;Load and
Store&ldquo;, øe¹en je vìt¹inou podobným zpùsobem, jako je tomu u procesorù
s&nbsp;architekturou <i>RISC</i>, tj.&nbsp;pozdr¾ením fáze <strong>IF</strong>
následující instrukce (ov¹em nìkteré zásobníkové procesory pou¾ívají oddìlenou
datovou pamì» od pamìti programu, tudí¾ k&nbsp;uvedeným problémùm
nedochází).</p>

<img src="http://i.iinfo.cz/images/102/pc144-7.png" width="445" height="664" alt=" " />
<p><i>Obrázek 5: Blokové schéma zásobníkového procesoru WISC CPU/16.<br />
Zdroj: P. Koopman &ndash; Architecture of the WISC CPU/16</i></p>



<p><a name="k03"></a></p>
<h2>3. Problémy pøi pou¾ití konvenèních programovacích jazykù na zásobníkových procesorech</h2>

<p>V&nbsp;minulosti se na pøíkladu pomìrnì velkého mno¾ství rùzných
procesorových architektur ukázalo, ¾e jednou z&nbsp;podmínek nutných pro úspìch
daného procesoru je existence optimalizujících pøekladaèù programovacích jazykù
<i>C</i>, <i>C++</i> a v&nbsp;nìkterých pøípadech (napøíklad v&nbsp;segmentu
procesorù urèených pro superpoèítaèe) takté¾ pøekladaèe jazyka <i>Fortran</i>.
Pøíkladem &bdquo;problematických&ldquo; procesorù jsou napøíklad èipy <i>Intel
860</i>, pro nì¾ kvalitní pøekladaèe tìchto jazykù vznikaly pomìrnì pomalu,
tak¾e v&nbsp;praxi byl výkon tìchto procesorù degradován, proto¾e hor¹í
pøekladaèe nedokázaly vyu¾ít v¹ech jejich vlastností. Ov¹em právì v&nbsp;této
oblasti mají zásobníkové procesory dosti ztí¾enou pozici, proto¾e pro efektivní
pøeklad aplikací naprogramovaných v&nbsp;jazycích C a C++ je nutné, aby
technologie procesorù splòovala nìkolik po¾adavkù. Problém ale nespoèívá
v&nbsp;pøekladu zdrojového kódu do mezikódu &ndash; to je operace, která je
prakticky nezávislá na architektuøe procesorù. Komplikace nenajdeme ani
v&nbsp;pøekladu aritmetických a logických výrazù do &bdquo;zásobníkového&ldquo;
kódu; spí¹e naopak, proto¾e jakkoli slo¾itý aritmetický výraz lze pøevést na
RPN (pøevrácenou polskou notaci), jen¾ vlastnì pøímo odpovídá vygenerované
sekvenci instrukcí (co¾ je jednodu¹¹í, ne¾ plánování obsazení pracovních
registrù).</p>

<img src="http://i.iinfo.cz/images/660/pc93-5.jpg" alt="pc93" height="450" width="450" />
<p><i>Obrázek 6: Mikroprocesor Intel i860.</i></p>

<p>Nejzáva¾nìj¹í komplikace v¹ak spoèívá v&nbsp;tom, ¾e se pøi volání funkcí
vyu¾ívají v&nbsp;programovacích jazycích C a C++ takzvané <i>zásobníkové
rámce</i> (stack frames), které i pøes pou¾ití slova &bdquo;zásobník&ldquo; ve
skuteènosti nemají s&nbsp;hardwarovými zásobníky implementovanými u
zásobníkových procesorù pøíli¹ mnoho spoleèného. Zásobníkové rámce jsou toti¾
alokovány pøímo v&nbsp;operaèní pamìti, co¾ napøíklad znamená, ¾e je mo¾né
vytvoøit ukazatel na lokální promìnnou (vytvoøenou v&nbsp;zásobníkovém rámci) a
posléze tento ukazatel pøedat do jiné volané funkce. Navíc se k&nbsp;datùm
ulo¾eným na zásobníkovém rámci mù¾e pøistupovat náhodnì, co¾ je ostatnì
logické, proto¾e jsou zde ulo¾eny jak parametry volané funkce, tak i lokální
promìnné. Ov¹em u èistého zásobníku lze pøistupovat pouze k&nbsp;prvkùm
umístìným na jeho vrcholu, tak¾e ve skuteènosti se pøi pøekladu programù
z&nbsp;C èi C++ musí zásobníkový rámec skuteènì vytváøet v&nbsp;operaèní
pamìti, co¾ v¹ak znamená nutnost pou¾ít vìt¹í mno¾ství instrukcí typu
&bdquo;Load a Store&ldquo;. To v&nbsp;dùsledku vede ke zvìt¹ení a zpomalení
výsledného programového kódu. V&nbsp;tomto ohledu tedy pomìrnì jasnì vyhrávají
mikroprocesory s&nbsp;architekturou <i>RISC</i>, zejména ty èipy, které jsou
vybaveny technologií posuvných <i>registrových oken</i> (register window)
&ndash; není ostatnì divu, ¾e se RISCové procesory s&nbsp;oblibou pou¾ívají na
poèítaèích s&nbsp;Unixem, který je na céèku zalo¾en (nejenom samotné jádro, ale
i mnohé aplikace).</p>

<img src="http://i.iinfo.cz/images/102/pc144-9.png" width="445" height="664" alt=" " />
<p><i>Obrázek 7: Subsystém zásobníku operandù (zvýraznìno modrou barvou) a
zásobníku návratových adres (zvýraznìno barvou èervenou) zásobníkového
mikroprocesoru WISC CPU/16.<br />
Zdroj: P. Koopman &ndash; Architecture of the WISC CPU/16</i></p>



<p><a name="k04"></a></p>
<h2>4. Neortodoxní zásobníkové mikroprocesory: MuP21 a F21</h2>

<p><em>San Mateo, CA (November, 1994) - Offete Enterprises announces successful
production of the high performance, multiprocessor chip MuP21. MuP21 has a
21-bit CPU core, a memory coprocessor, and a video coprocessor, implemented
with 1.2 micron CMOS process. It is targeted for applications in video
displays, CAD design, communication, video games, and embedded
systems.</em></p>

<p>V&nbsp;pøedchozí èásti tohoto seriálu jsme se seznámili se základními
vlastnostmi zásobníkového procesoru <i>RTX 2000</i> vyrábìného v&nbsp;minulosti
spoleèností <i>Harris</i>. Tento procesor vyu¾íval instrukèní sadu, která byla
odvozena od star¹ích procesorù <i>Novix NC4016</i> a <i>MISC M17</i>. Jednalo
se o instrukce pevné délky ¹estnáct bitù, které ve svém instrukèním slovu mohly
obsahovat kódy vìt¹ího mno¾ství operací, napøíklad aritmetické èi logické
operace následované bitovým posunem a navíc se pomocí jednoho bitu mohlo
specifikovat, zda má procesor v&nbsp;prùbìhu ALU operace paralelnì provést
návrat z&nbsp;podprogramu/subrutiny (z&nbsp;pohledu programátora se tedy návrat
z&nbsp;podprogramu provedl za nula strojových cyklù). Instrukèní slova v¹ech
tøí zmínìných procesorù &ndash; <i>Harris RTX 2000</i>, <i>Novix NC4016</i> i
<i>MISC M17</i> &ndash; pou¾ívala formát velmi podobný formátu, který mù¾eme
nalézt i u mikroprocesorù s&nbsp;architekturou <i>RISC</i>: ka¾dé instrukèní
slovo bylo rozdìleno na nìkolik bitových polí, pøièem¾ na základì formátu
instrukce (urèeného obsahem jednoho bitového pole) procesor rozli¹oval
napøíklad mezi instrukcemi pro provedení ALU operací, instrukcí skoku,
instrukcí pro naètení konstanty atd.</p>

<img src="http://i.iinfo.cz/images/102/pc144-11.png" width="410" height="630" alt=" " />
<p><i>Obrázek 8: Formát mikroinstrukèního slova procesoru WISC CPU/16, na nìm¾
je patrné rozdìlení mikroinstrukce na nìkolik samostatných blokù. Adresa dal¹í
mikroinstrukce je získána na základì obsahu bitù 23, 24 a 25 (to, ¾e je procesor
WISC CPU/16 zalo¾en na mikroprogramovém øadièi, vychází z&nbsp;toho, ¾e se jedná
o èip sestavený pro studijní úèely).<br />
Zdroj: P. Koopman &ndash; Architecture of the WISC CPU/16</i></p>

<p>Po relativnì dlouhou dobu cca pìti let se zdálo, ¾e tento formát instrukcí
je pro RISCové procesory i zásobníkové procesory ideální, proto¾e zaruèuje
velkou variabilitu instrukèní sady souèasnì se zachováním pevné délky
instrukcí, co¾ zjednodu¹uje implementaci instrukèní pipeline i samotného
obvodového èi mikroprogramového øadièe. Ov¹em v&nbsp;první polovinì
devadesátých let minulého století se objevila pomìrnì revoluèní koncepce nového
typu zásobníkového mikroprocesoru, se kterou nepøi¹el nikdo jiný, ne¾ <i>Chuck
Moore</i>, vynálezce programovacího jazyka <i>Forth</i>, programátor systému
pro poloautomatický návrh VLSI obvodù nazvaný <i>OKAD</i> a souèasnì i známý a
hlasitý propagátor principu minimalismu pøi návrhu hardware i tvorbì software.
Nový Moorùv mikroprocesor nesl oznaèení <i>MuP21</i>. Na tento mikroprocesor
navázal èip <i>M21</i> a posléze i velmi zajímavý procesor <i>F21</i>.
V&nbsp;následujících ètyøech kapitolách si o tìchto zajímavých (i kdy¾ komerènì
relativnì neúspì¹ných) mikroprocesorech øekneme podrobnìj¹í informace.</p>

<img src="http://i.iinfo.cz/images/102/pc144-13.png" width="315" height="135" alt=" " />
<p><i>Obrázek 9: Formát instrukce procesoru WISC CPU/16 v&nbsp;pøípadì, ¾e se
jedná o instrukci aritmetickou, logickou èi o instrukci pøesunu dat.<br />
Zdroj: P. Koopman &ndash; Architecture of the WISC CPU/16</i></p>



<p><a name="k05"></a></p>
<h2>5. Mikroprocesory MuP21 a F21 versus procesory CISC a RISC</h2>

<p>Odborná veøejnost se zaèala o mikroprocesory <i>MuP21</i> a <i>F21</i>
zajímat, i kdy¾ tyto èipy nebyly podporovány ¾ádným významným výrobcem
mikroprocesorù. Dùvodem tohoto zájmu byla pøedev¹ím schopnost <i>MuP21/F21</i>
reagovat na pøeru¹ení se zpo¾dìním pouze jednoho strojového cyklu, zcela nová
instrukèní sada a takté¾ kvùli tomu, ¾e se skuteènì jednalo o minimalisticky
navr¾ené mikroprocesory (ostatnì pøi návrhu èipu <i>MuP21</i> pou¾it Chuck
Moore svùj systém <i>OKAD</i>). Konkrétnì to znamenalo, ¾e èip <i>MuP21</i>
obsahoval pouze 7000 tranzistorù a jeho následovník <i>F21</i> mìl spolu se
v¹emi koprocesory (paralelním portem, sériovým portem, analogovým pøevodníkem a
dokonce i video výstupem) jen 15000 tranzistorù, ov¹em jeho výpoèetní rychlost
dosahovala a¾ 500 MIPS (ve skuteènosti byla kvùli pomalým pamìtem výpoèetní
rychlost omezena na 333 MIPS èi 200 MIPS, v&nbsp;závislosti na pou¾ité pamì»ové
technologii). Poèty tranzistorù odpovídají spí¹e osmibitovým mikroprocesorùm
s&nbsp;architekturou CISC, ov¹em ve skuteènosti mají èipy <i>MuP21</i> i
<i>F21</i> aritmeticko-logickou jednotku se ¹íøkou operandù 20 bitù, co¾ je pro
mnohé aplikace dobrý pomìr mezi ¹íøkou a pamì»ovými èi výpoèetními nároky (16
bitù bývá pro mnohé aplikace málo, celých 32 bitù se mnohdy nevyu¾ívá
v&nbsp;plném rozsahu).</p>

<img src="http://i.iinfo.cz/images/102/pc144-14.png" width="322" height="133" alt=" " />
<p><i>Obrázek 10: Formát instrukce procesoru WISC CPU/16 v&nbsp;pøípadì, ¾e se
jedná o instrukci skoku do podprogramu (call).<br />
Zdroj: P. Koopman &ndash; Architecture of the WISC CPU/16</i></p>

<p>Pro úplnost je mo¾ná vhodné doplnit základní informace o
&bdquo;konkurenèních&ldquo; mikroprocesorech s&nbsp;architekturami <i>RISC</i>
a <i>CISC</i> (zvlá¹tì zajímavé je porovnání procesorù <i>MuP21</i> a
<i>F21</i> s&nbsp;<i>Itaniem 2</i> a <i>PA-RISC PCX-L2</i>):</p>

<table>
<tr><th>Mikroprocesor</th><th>Architektura</th><th>Bitová ¹íøka</th><th>Rok prodeje</th><th>Poèet tranzistorù</th></tr>
<tr><td>Intel 4004</td><td>CISC</td><td>4</td><td>1971</td><td>2&nbsp;250</td></tr>
<tr><td>Intel 8008</td><td>CISC</td><td>8</td><td>1972</td><td>3&nbsp;500</td></tr>
<tr><td>MOS Technology 6502</td><td>CISC</td><td>8</td><td>1975</td><td>3&nbsp;510</td></tr>
<tr><td>Motorola 6800</td><td>CISC</td><td>8</td><td>1974</td><td>4&nbsp;100</td></tr>
<tr><td>Intel 8080</td><td>CISC</td><td>8</td><td>1974</td><td>4&nbsp;500</td></tr>
<tr><td>Intel 8086</td><td>CISC</td><td>16</td><td>1978</td><td>29&nbsp;000</td></tr>
<tr><td>Intel 8088</td><td>CISC</td><td>8/16</td><td>1979</td><td>29&nbsp;000</td></tr>
<tr><td>Intel 80186</td><td>CISC</td><td>16</td><td>1982</td><td>55&nbsp;000</td></tr>
<tr><td>Motorola 68000</td><td>CISC</td><td>32</td><td>1979</td><td>68&nbsp;000</td></tr>
<tr><td>Intel 80286</td><td>CISC</td><td>16</td><td>1982</td><td>134&nbsp;000</td></tr>
<tr><td>Intel 80386</td><td>CISC</td><td>32</td><td>1985</td><td>275&nbsp;000</td></tr>
<tr><td>Intel 80486</td><td>CISC</td><td>32</td><td>1989</td><td>1&nbsp;180&nbsp;000</td></tr>
<tr><td>Pentium</td><td>CISC</td><td>32</td><td>1993</td><td>3&nbsp;100&nbsp;000</td></tr>
<tr><td>Pentium II</td><td>CISC</td><td>32</td><td>1997</td><td>7&nbsp;500&nbsp;000</td></tr>
<tr><td>Pentium II</td><td>CISC</td><td>32</td><td>1998</td><td>7&nbsp;500&nbsp;000</td></tr>
<tr><td>Pentium III</td><td>CISC</td><td>32</td><td>1999</td><td>9&nbsp;500&nbsp;000</td></tr>
<tr><td>Pentium III</td><td>CISC</td><td>32</td><td>2000</td><td>28&nbsp;000&nbsp;000</td></tr>
<tr><td>Pentium 4</td><td>CISC</td><td>32</td><td>2000</td><td>42&nbsp;000&nbsp;000</td></tr>
<tr><td>Pentium 4</td><td>CISC</td><td>32</td><td>2002</td><td>55&nbsp;000&nbsp;000</td></tr>
<tr><td>Pentium 4</td><td>CISC</td><td>32</td><td>2004</td><td>125&nbsp;000&nbsp;000</td></tr>
<tr><td>Pentium 4</td><td>CISC</td><td>32</td><td>2006</td><td>188&nbsp;000&nbsp;000</td></tr>
<tr><td>Itanium</td><td>CISC</td><td>64</td><td>2001</td><td>25&nbsp;000&nbsp;000</td></tr>
<tr><td>Itanium 2</td><td>CISC</td><td>64</td><td>2003</td><td>220&nbsp;000&nbsp;000</td></tr>
<tr><td>Itanium 2</td><td>CISC</td><td>64</td><td>2004</td><td>592&nbsp;000&nbsp;000</td></tr>
<tr><td>Itanium 2</td><td>CISC</td><td>64</td><td>2006</td><td>1&nbsp;720&nbsp;000&nbsp;000</td></tr>
<tr><td>Core 2</td><td>CISC</td><td>64</td><td>2006</td><td>291&nbsp;000&nbsp;000</td></tr>
<tr><td>Core 2</td><td>CISC</td><td>64</td><td>2008</td><td>800&nbsp;000&nbsp;000</td></tr>
<tr><td>RISC I</td><td>RISC</td><td>32</td><td>1980</td><td>44&nbsp;000</td></tr>
<tr><td>RISC II</td><td>RISC</td><td>32</td><td>1981</td><td>39&nbsp;000</td></tr>
<tr><td>PA-RISC TS-1</td><td>RISC</td><td>32</td><td>1986</td><td>115&nbsp;000</td></tr>
<tr><td>PA-RISC CS-1</td><td>RISC</td><td>32</td><td>1987</td><td>164&nbsp;000</td></tr>
<tr><td>PA-RISC NS-1</td><td>RISC</td><td>32</td><td>1987</td><td>144&nbsp;000</td></tr>
<tr><td>PA-RISC NS-2</td><td>RISC</td><td>32</td><td>1989</td><td>183&nbsp;000</td></tr>
<tr><td>PA-RISC PCX</td><td>RISC</td><td>32</td><td>1990</td><td>196&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-S</td><td>RISC</td><td>32</td><td>1991</td><td>580&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-T</td><td>RISC</td><td>32</td><td>1992</td><td>850&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-T</td><td>RISC</td><td>32</td><td>1994</td><td>850&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-T'</td><td>RISC</td><td>32</td><td>1994</td><td>1&nbsp;260&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-L</td><td>RISC</td><td>32</td><td>1994</td><td>900&nbsp;000</td></tr>
<tr><td>PA-RISC PCX-L2</td><td>RISC</td><td>32</td><td>1996</td><td>9&nbsp;200&nbsp;000</td></tr>
<tr><td>MuP21</td><td>Stack</td><td>20/21</td><td>1994</td><td>7&nbsp;000</td></tr>
<tr><td>F21</td><td>Stack</td><td>20/21</td><td>1996</td><td>15&nbsp;000</td></tr>
</table>

<img src="http://i.iinfo.cz/images/394/pc146-6.png" width="220" height="198" alt=" " />
<p><i>Obrázek 11: Jedna z&nbsp;mnoha 64bitových variant mikroprocesoru
vyu¾ívajícího instrukèní sadu MIPS.</i></p>



<p><a name="k06"></a></p>
<h2>6. Datový zásobník (zásobník operandù), zásobník návratových adres a adresní registr A</h2>

<p>Vzhledem k&nbsp;tomu, ¾e procesor <i>MuP21</i> i jeho následovník <i>F21</i>
byly navr¾eny takovým zpùsobem, aby umo¾òovaly efektivní bìh aplikací napsaných
v&nbsp;programovacím jazyku <i>Forth</i> (co jiného lze ostatnì od Chucka Moora
èekat?), jsou oba procesory vybaveny dvojicí zásobníkù. První zásobník je urèen
pro pøenos dat a provádìní aritmetických výpoètù. Tento zásobník má kapacitu
osmnácti polo¾ek, z&nbsp;nich¾ ka¾dá má ¹íøku 21 bitù. Celý zásobník je
implementován pøímo na mikroprocesoru (v&nbsp;jednom èipu), èím¾ vlastnì
nahrazuje sadu pracovních registrù, které se pou¾ívají u mikroprocesorù
s&nbsp;architekturami CISC a RISC. Druhý zásobník je urèen pøedev¹ím na úschovu
návratových adres pøi volání podprogramù/subrutin èi pøi obsluze pøeru¹ení.
Kromì toho je mo¾né na tento zásobník ukládat i data, ov¹em vìt¹inou pouze
v&nbsp;rámci tìla jedné funkce. V&nbsp;tomto zásobníku se takté¾ ukládají
poèitadla smyèek. Tento zásobník má kapacitu sedmnácti polo¾ek a je &ndash;
podobnì jako zásobník první &ndash; umístìn pøímo na mikroprocesoru.</p>

<img src="http://i.iinfo.cz/images/431/pc154-12.png" width="462" height="557" alt=" " />
<p><i>Obrázek 12: Bloky, z&nbsp;nich¾ se skládá procesor F21.</i></p>

<p>Proè v¹ak mají oba zásobníky tak divné kapacity? Osmnáct resp.&nbsp;sedmnáct
polo¾ek (prvkù) jsou ve výpoèetní technice pomìrnì netypické hodnoty. Ve
skuteènosti v¹ak má datový zásobník kapacitu &bdquo;pouze&ldquo; ¹estnácti
polo¾ek (to u¾ je pro programátory zajímavìj¹í èíslo) a zbývající dvì polo¾ky
jsou umístìny pøímo na vstupu do aritmeticko-logické jednotky, proto¾e u
zásobníkového procesoru je ji¾ dopøedu zøejmé, ¾e se data pro provedení ALU
operací budou v¾dy brát z&nbsp;první polo¾ky èi prvních dvou polo¾ek datového
zásobníku (nìkdy se té¾ nazývá zásobník operandù). Tyto dvì polo¾ky se oznaèují
písmeny <strong>T</strong> (<em>Top of Stack</em>) a <strong>S</strong>
(<em>Second Item on Stack</em>). U zásobníku návratových adres je situace
podobná &ndash; nejvrchnìj¹í polo¾ka je umístìna ve speciálním registru
nazývaném <strong>R</strong> (<em>Return</em>) a zbývající kapacita zásobníku
je rovna opìt ¹estnácti polo¾kám. V&nbsp;instrukèní sadì se nenachází ¾ádné
instrukce, které by umo¾òovaly pøístup k&nbsp;ni¾¹ím polo¾kám zásobníkù, co¾
mj.&nbsp;znamená, ¾e se zjednodu¹uje pøíprava operandù pro v¹echny mo¾né
operace &ndash; je jisté, ¾e tyto operandy budou buï naèteny z&nbsp;operaèní
pamìti, nebo budou pøítomny v&nbsp;registrech <strong>T</strong>,
<strong>S</strong>, <strong>R</strong> èi ve speciálním adresovém registru
<strong>A</strong>.</p>

<a href="http://i.iinfo.cz/images/125/pc154-13.png"><img src="http://i.iinfo.cz/images/125/pc154-13-prev.png" width="367" height="270" alt=" " /></a>
<p><i>Obrázek 13: &bdquo;b16&ldquo; je název procesorového jádra inspirovaného
èipy MuP21 a F21 (èásteènì té¾ C18).<br />
Autor: Bernd Paysan</i></p>

<p>Na samém konci pøedchozího odstavce jsme se zmínili o speciálním adresovém
registru nazvaném jednodu¹e <strong>A</strong>. Jedná se o registr, který se
v&nbsp;&bdquo;ortodoxních&ldquo; zásobníkových procesorech sice nepou¾ívá,
ov¹em Chuck Moore zjistil, ¾e pro efektivní adresování dat ulo¾ených
v&nbsp;operaèní pamìti je vhodné podobný registr implementovat. Adresový
registr <strong>A</strong> má ¹íøku 21 bitù a v&nbsp;instrukèní sadì procesorù
<i>MuP21</i> i <i>F21</i> se nachází instrukce umo¾òující naètení èi ulo¾ení
dat (z&nbsp;vrcholu zásobníku operandù) do operaèní pamìti s&nbsp;mo¾nou
inkrementací obsahu tohoto registru. To znamená, ¾e napøíklad práce s&nbsp;daty
ulo¾enými v&nbsp;poli mù¾e být velmi jednoduchá a souèasnì i rychlá, proto¾e
inkrementace adresního registru <strong>A</strong> je samozøejmì provádìna
paralelnì s&nbsp;pøístupem k&nbsp;datùm umístìným v&nbsp;operaèní pamìti. Kromì
toho je v&nbsp;instrukèní sadì i nìkolik instrukcí pracujících s&nbsp;adresou
ulo¾enou na vrcholu zásobníku návratových adres, tj.&nbsp;ve skuteènosti
v&nbsp;interním registru <strong>R</strong>. V&nbsp;dùsledku tak lze napøíklad
kopírovat data mezi dvojicí polí bez toho, aby se neustále musel mìnit ukazatel
umístìný v&nbsp;adresním registru <strong>A</strong>.</p>

<a href="http://i.iinfo.cz/images/291/pc154-14.png"><img src="http://i.iinfo.cz/images/291/pc154-14-prev.png" width="362" height="270" alt=" " /></a>
<p><i>Obrázek 14: &bdquo;b16-small&ldquo; je procesorové jádro vzniklé dal¹ím
zjednodu¹ením jádra &bdquo;b16&ldquo;<br />
Autor: Bernd Paysan</i></p>



<p><a name="k07"></a></p>
<h2>7. Instrukèní soubor procesoru F21</h2>

<p>Chuck Moore se rozhodl, ¾e ¹íøka instrukèních slov bude u procesorù
<i>MuP21</i> i <i>F21</i> rovna ponìkud neobvyklé hodnotì 20 bitù, pøièem¾ do
jednoho dvacetibitového slova bude mo¾né ulo¾it a¾ ètyøi instrukce, proto¾e
poèet bitù na jednu instrukci je roven pouze pìti! Maximální poèet instrukcí
tak dosahuje na první pohled smì¹né hodnoty 2<sup>5</sup>=32, instrukcí je v¹ak
ve skuteènosti je¹tì o nìco ménì, proto¾e se zde opìt projevil Moorùv smysl pro
minimalismus (jiný konstruktér procesoru by zajisté v¹ech 32 nabízených kódù
vyplnil nìjakou instrukcí). V¾dy ètveøice pìtibitových instrukcí jsou spojeny
tak, ¾e vytváøí jedno dvacetibitové slovo. To ov¹em v&nbsp;dùsledku znamená, ¾e
vlastní procesor mù¾e pracovat na ètyønásobné frekvenci oproti pøístupové dobì
pou¾itých pamì»ových modulù, proto¾e v&nbsp;ka¾dém pamì»ovém taktu je umo¾nìn
pøístup ke v¹em dvaceti bitùm! Zde je vidìt velká výhoda malého instrukèního
souboru, který vede k&nbsp;výrazné redukci poètu bitù na jednu instrukci,
proto¾e procesor mù¾e pracovat i na pomìrnì velkých frekvencích bez pou¾ití
drahých cache pamìtí (pokud jsou napøíklad pou¾ity synchronní pamìti
s&nbsp;hodinovou frekvencí 100 MHz, mù¾e procesor pracovat s&nbsp;hodinovou
frekvencí 400 MHz =témìø 400 MIPS bez jakékoli vyrovnávací pamìti).</p>

<p>Instrukce lze rozdìlit do ètyø skupin: øízení bìhu programu, naèítání a
ukládání hodnot do operaèní pamìti, aritmetické a logické instrukce a koneènì
operace nad zásobníky.</p>



<h2>Instrukce pro øízení bìhu programu</h2>

<p>V&nbsp;této skupinì se nachází jak instrukce pro nepodmínìný skok, tak i dva
podmínìné skoky a instrukce pro volání podporgramu/subrutiny a návrat ze
subrutiny. U podmínìných skokù se testuje buï nulovost operandu ulo¾eného na
vrcholu datového zásobníku, popø.&nbsp;hodnota pøíznaku pøeteèení, která je do
datového zásobníku ukládána spoleènì s&nbsp;operandem (operand má ¹íøku 20
bitù, prvky na datovém zásobníku mají ¹íøku 21 bitù):</p>

<table>
<tr><th>Kód instrukce</th><th>Jméno v&nbsp;assembleru</th><th>Význam</th></tr>
<tr><td>00</td><td>else  </td><td>unconditional jump</td></tr>
<tr><td>01</td><td>T=0   </td><td>jump if T0-19 zero</td></tr>
<tr><td>02</td><td>call  </td><td>push P+1 to R, jump</td></tr>
<tr><td>03</td><td>C=0   </td><td>jump if T20 zero</td></tr>
<tr><td>04</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>05</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>06</td><td>ret   </td><td>pop P from R</td></tr>
<tr><td>07</td><td>&nbsp;</td><td>&nbsp;</td></tr>
</table>



<h2>Instrukce typu Load a Store</h2>

<p>U tìchto instrukcí je adresa buï ulo¾ena na vrcholu zásobníku návratových
adres (=interní registr <strong>R</strong>) nebo v&nbsp;adresním registru
<strong>A</strong>:</p>

<table>
<tr><th>Kód instrukce</th><th>Jméno v&nbsp;assembleru</th><th>Význam</th></tr>
<tr><td>08</td><td>@R+   </td><td>fetch, address in R, increment R</td></tr>
<tr><td>09</td><td>@A+   </td><td>fetch, address in A, increment A</td></tr>
<tr><td>0A</td><td>#     </td><td>fetch 20-bit in-line literal</td></tr>
<tr><td>0B</td><td>@A    </td><td>fetch, address in A</td></tr>
<tr><td>0C</td><td>!R+   </td><td>store, address in R, increment R</td></tr>
<tr><td>0D</td><td>!A+   </td><td>store, address in A, increment A</td></tr>
<tr><td>0E</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>0F</td><td>!A    </td><td>store, address in A</td></tr>
</table>



<h2>Aritmetické a logické instrukce</h2>

<p>Pøi provádìní aritmetických operací se výpoèty aplikují v&nbsp;ALU, která má
bitovou ¹íøku 21 bitù. Poslední bit slou¾í jako <em>CARRY</em>,
tj.&nbsp;obsahuje jednièku v pøípadì, ¾e do¹lo k pøeteèení kapacity registrù.
Toho lze vyu¾ít napøíklad pøi implementaci vícebitové aritmetiky. I adresy jsou
reprezentovány 21 bity, skokové instrukce v¹ak mohou mìnit pouze ni¾¹í bity
adresy. Zajímavá jsou pøedev¹ím instrukce + a +*. Procesor <i>F21</i> toti¾
obsahuje sèítaèku s&nbsp;postupným pøenosem, která mù¾e být sestavena z&nbsp;mnohem
men¹ího mno¾ství tranzistorù, ne¾ sèítaèka se zrychleným pøenosem. Na druhou
stranu ov¹em sèítání trvá del¹í poèet cyklù, co¾ v&nbsp;pøípadì procesoru <i>F21</i>
znamená, ¾e pokud je instrukce sèítání ulo¾ena v&nbsp;prvním slotu (5 bitech)
instrukèního slova, je souèet dokonèen spolu s&nbsp;instrukcí v&nbsp;posledním
slotu, proto¾e se provede pøibli¾nì souèet 6 bitù v&nbsp;jednom strojovém cyklu.
Programátor èi pøekladaè si tedy sám mù¾e urèit, jaký poèet bitù se má skuteènì
seèíst a podle toho umístit instrukci + a +* do správného slotu.</p>

<table>
<tr><th>Kód instrukce</th><th>Jméno v&nbsp;assembleru</th><th>Význam</th></tr>
<tr><td>10</td><td>com   </td><td>complement T</td></tr>
<tr><td>11</td><td>2*    </td><td>shift T, 0 to T0</td></tr>
<tr><td>12</td><td>2/    </td><td>shift T, T20 to T19</td></tr>
<tr><td>13</td><td>+*    </td><td>add S to T if T0 one</td></tr>
<tr><td>14</td><td>-or   </td><td>exclusive-or S to T</td></tr>
<tr><td>15</td><td>and   </td><td>and S to T</td></tr>
<tr><td>16</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>17</td><td>+     </td><td>add S to T</td></tr>
</table>

<img src="http://i.iinfo.cz/images/241/pc154-15.png" width="390" height="148" alt=" " />
<p><i>Obrázek 15: Operace násobení s&nbsp;rozbalenou smyèkou zapsaná ve
Forthu.</i></p>



<h2>Instrukce pro operace nad zásobníky</h2>

<p>Zde pravdìpodobnì není co dodávat, jedná se o instrukce bì¾ných
zásobníkových procesorù doplnìných o nìkolik instrukcí pracujících
s&nbsp;adresním registrem <strong>A</strong>:</p>

<table>
<tr><th>Kód instrukce</th><th>Jméno v&nbsp;assembleru</th><th>Význam</th></tr>
<tr><td>18</td><td>pop </td><td>pop R, push into T</td></tr>
<tr><td>19</td><td>A@  </td><td>push A into T</td></tr>
<tr><td>1A</td><td>dup </td><td>push T into T</td></tr>
<tr><td>1B</td><td>over</td><td>push S into T</td></tr>
<tr><td>1C</td><td>push</td><td>pop T, push into R</td></tr>
<tr><td>1D</td><td>A!  </td><td>pop T into A</td></tr>
<tr><td>1E</td><td>nop </td><td>nop</td></tr>
<tr><td>1F</td><td>drop</td><td>pop T</td></tr>
</table>

<img src="http://i.iinfo.cz/images/494/pc154-16.png" width="407" height="177" alt=" " />
<p><i>Obrázek 16: Operace dìlení s&nbsp;rozbalenou smyèkou zapsaná ve
Forthu.</i></p>



<p><a name="k08"></a></p>
<h2>8. Procesory a procesorová jádra navazující na dvojici MuP21 a F21</h2>

<p>Principy vyu¾ité pøi návrhu zásobníkových mikroprocesorù <i>MuP21</i> a
<i>F21</i> byly v&nbsp;následujících letech pou¾ity i u dal¹ích typù procesorù
a procesorových jader. Jedná se napøíklad o procesorové jádro nazvané
<i>C18</i> s&nbsp;18bitovými sbìrnicemi, jeho¾ autorem je opìt Chuck Moore.
Procesorové jádro <i>C18</i> je díky svým malým rozmìrùm (jak fyzickým, tak i
poètem tranzistorù) urèeno pro pou¾ití v&nbsp;multiprocesorech. Pøíkladem mù¾e
být èip <i>SEAforth 40C18</i>, který obsahuje celkem ètyøicet(!) jader
<i>C18</i>, pøièem¾ ka¾dé z&nbsp;tìchto jader má k&nbsp;dispozici vlastní pamì»
RAM i ROM, ka¾dou o kapacitì 64 slov. Multiprocesorový èip <i>SEAforth
40C18</i> lze vyu¾ít napøíklad jako velmi výkonný digitální signálový procesor
s&nbsp;relativnì malým pøíkonem, proto¾e ka¾dé procesorové jádro <i>C18</i> má
maximální pøíkon nepøesahující 9 mW a v&nbsp;automatickém re¾imu spánku dokonce
jen 5 &micro;W. Tento èip je urèen pro provádìní instrukcí tvoøících základní
slova (funkce) <i>VentureForthu</i>.</p>

<img src="http://i.iinfo.cz/images/312/pc154-17.png" width="175" height="175" alt=" " />
<p><i>Obrázek 17: Multiprocesorový èip SEAforth 40C18.</i></p>

<p>Druhou oblast, v&nbsp;nich¾ se uplatnily principy implementované
v&nbsp;mikroprocesorech <i>MuP21</i> a <i>F21</i>, tvoøí procesorová jádra
&bdquo;naprogramovaná&ldquo; ve VHDL nebo ve Verilogu, tj.&nbsp;jádra
vyu¾itelná na FPGA. Zde se opìt projevuje jedna z&nbsp;pøedností tìchto typù
zásobníkových procesorù &ndash; velmi malý poèet tranzistorù/logických
hradel/blokù nutných pro implementaci celého procesoru a tím i mo¾nost syntézy
tìchto jader i na malých FPGA. Pøíkladem mohou být procesorová jádra nazvaná
<i>b16</i> a <i>b16-small</i>, která byla navr¾ená ve VHDL Berndem Paysanem
(viz té¾ odkazy uvedené v&nbsp;deváté kapitole). Tato jádra, podobnì jako je
tomu u pøedchozích procesorù, takté¾ pou¾ívají pìtibitové instrukce sdru¾ené do
slov o vìt¹í bitové ¹íøce, na rozdíl od <i>MuP21</i> a <i>F21</i> se v¹ak v¾dy
trojice instrukcí spojuje do 16bitového slova, pøièem¾ ¹estnáctý bit lze vyu¾ít
pro zakódování &bdquo;dlouhého&ldquo; skoku s&nbsp;15bitovou adresou. Zajímavé
je, ¾e u¾ tak velmi jednoduché procesorové jádro <i>b16</i> bylo nahrazeno
je¹tì jednodu¹¹ím návrhem <i>b16-small</i>, kde napøíklad chybí adresový
registr <strong>A</strong> a druhá polo¾ka zásobníku operandù <strong>NOS
(N)</strong> je umístìna v&nbsp;pamìti, èím¾ se celkový poèet registrù (a tím
pádem i poèet klopných obvodù) sní¾il na hodnotu 3.</p>

<a href="http://i.iinfo.cz/images/190/pc154-18.png"><img src="http://i.iinfo.cz/images/190/pc154-18-prev.png" width="370" height="100" alt=" " /></a>
<p><i>Obrázek 18: Instrukèní soubor procesorového jádra b16.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>Great Microprocessors of the Past and Present<br />
<a href="http://www.cpushack.com/CPU/cpu1.html">http://www.cpushack.com/CPU/cpu1.html</a>
</li>

<li>Philip Koopman: Stack Computers: the new wave<br />
<a href="http://www.ece.cmu.edu/~koopman/stack_computers/contents.html">http://www.ece.cmu.edu/~koopman/stack_computers/contents.html</a>
</li>

<li>Hewlett Packard PA-8800 RISC (LOSTCIRCUITS)<br />
<a href="http://www.lostcircuits.com/mambo//index.php?option=com_content&amp;task=view&amp;id=42&amp;Itemid=42">http://www.lostcircuits.com/mambo//index.php?option=com_content&amp;task=view&amp;id=42&amp;Itemid=42</a>
</li>

<li>PA-RISC 1.1 Architecture and Instruction Set Reference Manual<br />
<a href="http://h21007.www2.hp.com/portal/download/files/unprot/parisc/pa1-1/acd.pdf">http://h21007.www2.hp.com/portal/download/files/unprot/parisc/pa1-1/acd.pdf</a>
</li>

<li>Fotografie mikroprocesorù HP PA (stránka 1)<br />
<a href="http://www.chipdb.org/cat-pa-risc-592.htm">http://www.chipdb.org/cat-pa-risc-592.htm</a>
</li>

<li>Fotografie mikroprocesorù HP PA (stránka 2)<br />
<a href="http://www.chipdb.org/cat-pa-risc-592.htm?page=2">http://www.chipdb.org/cat-pa-risc-592.htm?page=2</a>
</li>

<li>Fotografie mikroprocesorù HP PA (stránka 2)<br />
<a href="http://www.chipdb.org/cat-pa-risc-592.htm?page=3">http://www.chipdb.org/cat-pa-risc-592.htm?page=3</a>
</li>

<li>PA-RISC (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/PA-RISC">http://en.wikipedia.org/wiki/PA-RISC</a>
</li>

<li>The Great CPU List: Part VI: Hewlett-Packard PA-RISC, a conservative RISC (Oct 1986)<br />
<a href="http://jbayko.sasktelwebsite.net/cpu4.html">http://jbayko.sasktelwebsite.net/cpu4.html</a>
</li>

<li>HP 9000/500 FOCUS<br />
<a href="http://www.openpa.net/systems/hp-9000_520.html">http://www.openpa.net/systems/hp-9000_520.html</a>
</li>

<li>HP FOCUS Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/HP_FOCUS">http://en.wikipedia.org/wiki/HP_FOCUS</a>
</li>

<li>HP 3000 (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/HP_3000">http://en.wikipedia.org/wiki/HP_3000</a>
</li>

<li>The SPARC Architecture Manual Version 8 (manuál v&nbsp;PDF formátu)<br />
<a href="http://www.sparc.org/standards/V8.pdf">http://www.sparc.org/standards/V8.pdf</a>
</li>

<li>The SPARC Architecture Manual Version 9 (manuál v&nbsp;PDF formátu)<br />
<a href="http://developers.sun.com/solaris/articles/sparcv9.pdf">http://developers.sun.com/solaris/articles/sparcv9.pdf</a>
</li>

<li>SPARC Pipelining<br />
<a href="http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/pipelining.html">http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/pipelining.html</a>
</li>

<li>SPARC Instruction<br />
<a href="http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/inst_set.html">http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/inst_set.html</a>
</li>

<li>OpenSPARC<br />
<a href="http://www.opensparc.net/">http://www.opensparc.net/</a>
</li>

<li>History of SPARC systems 1987 to 2010<br />
<a href="http://www.sparcproductdirectory.com/history.html">http://www.sparcproductdirectory.com/history.html</a>
</li>

<li>Sun-1 (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Sun-1">http://en.wikipedia.org/wiki/Sun-1</a>
</li>

<li>Sun-2 (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Sun-2">http://en.wikipedia.org/wiki/Sun-2</a>
</li>

<li>Sun-3 (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Sun-3">http://en.wikipedia.org/wiki/Sun-3</a>
</li>

<li>Sun386i (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Sun386i">http://en.wikipedia.org/wiki/Sun386i</a>
</li>

<li>Sun 386i/250<br />
<a href="http://sites.inka.de/pcde/site/sun386i.html">http://sites.inka.de/pcde/site/sun386i.html</a>
</li>

<li>SPARC Instruction Set<br />
<a href="http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/inst_set.html">http://www.academic.marist.edu/~jzbv/architecture/Projects/S2002/SPARC/inst_set.html</a>
</li>

<li>MIPS Architecture Overview<br />
<a href="http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html">http://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/mips.html</a>
</li>

<li>MIPS Technologies R3000<br />
<a href="http://www.cpu-world.com/CPUs/R3000/">http://www.cpu-world.com/CPUs/R3000/</a>
</li>

<li>CPU-collection: IDT R3010 FPU<br />
<a href="http://www.cpu-collection.de/?tn=0&l0=co&l1=IDT&l2=R3010+FPU">http://www.cpu-collection.de/?tn=0&amp;l0=co&amp;l1=IDT&amp;l2=R3010+FPU</a>
</li>

<li>The MIPS R2000 Instruction Set<br />
<a href="http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf">http://suraj.lums.edu.pk/~cs423a05/Reference/MIPSCodeTable.pdf</a>
</li>

<li>Maska mikroprocesoru RISC 1<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC1.jpg</a>
</li>

<li>Maska mikroprocesoru RISC 2<br />
<a href="http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg">http://www.cs.berkeley.edu/~pattrsn/Arch/RISC2.jpg</a>
</li>

<li>The MIPS Register Usage Conventions<br />
<a href="http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html">http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html</a>
</li>

<li>C.E. Sequin and D.A.Patterson: Design and Implementation of RISC I<br />
<a href="http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf">http://www.eecs.berkeley.edu/Pubs/TechRpts/1982/CSD-82-106.pdf</a>
</li>

<li>Berkeley RISC<br />
<a href="http://en.wikipedia.org/wiki/Berkeley_RISC">http://en.wikipedia.org/wiki/Berkeley_RISC</a>
</li>

<li>Great moments in microprocessor history<br />
<a href="http://www.ibm.com/developerworks/library/pa-microhist.html">http://www.ibm.com/developerworks/library/pa-microhist.html</a>
</li>

<li>Microprogram-Based Processors<br />
<a href="http://research.microsoft.com/en-us/um/people/gbell/Computer_Structures_Principles_and_Examples/csp0167.htm">http://research.microsoft.com/en-us/um/people/gbell/Computer_Structures_Principles_and_Examples/csp0167.htm</a>
</li>

<li>A Brief History of Microprogramming<br />
<a href="http://www.cs.clemson.edu/~mark/uprog.html">http://www.cs.clemson.edu/~mark/uprog.html</a>
</li>

<li>Architecture of the WISC CPU/16<br />
<a href="http://www.ece.cmu.edu/~koopman/stack_computers/sec4_2.html">http://www.ece.cmu.edu/~koopman/stack_computers/sec4_2.html</a>
</li>

<li>Zásobníkový procesor WISC CPU/16 (Root.CZ)<br />
<a href="http://www.root.cz/clanky/programovaci-jazyk-forth-a-zasobnikove-procesory-16/#k03">http://www.root.cz/clanky/programovaci-jazyk-forth-a-zasobnikove-procesory-16/#k03</a>
</li>

<li>Writable instruction set, stack oriented computers: The WISC Concept<br />
<a href="http://www.ece.cmu.edu/~koopman/forth/rochester_87.pdf">http://www.ece.cmu.edu/~koopman/forth/rochester_87.pdf</a>
</li>

<li>The Great CPU List: Part X: Hitachi 6301 - Small and microcoded (1983)<br />
<a href="http://jbayko.sasktelwebsite.net/cpu2.html#Sec2Part10">http://jbayko.sasktelwebsite.net/cpu2.html#Sec2Part10</a>
</li>

<li>What is RISC?<br />
<a href="http://www-cs-faculty.stanford.edu/~eroberts/courses/soco/projects/2000-01/risc/whatis/">http://www-cs-faculty.stanford.edu/~eroberts/courses/soco/projects/2000-01/risc/whatis/</a>
</li>

<li>RISC vs. CISC<br />
<a href="http://www-cs-faculty.stanford.edu/~eroberts/courses/soco/projects/2000-01/risc/risccisc/">http://www-cs-faculty.stanford.edu/~eroberts/courses/soco/projects/2000-01/risc/risccisc/</a>
</li>

<li>RISC and CISC definitions:<br />
<a href="http://www.cpushack.com/CPU/cpuAppendA.html">http://www.cpushack.com/CPU/cpuAppendA.html</a>
</li>

<li>The Evolution of RISC<br />
<a href="http://www.ibm.com/developerworks/library/pa-microhist.html#sidebar1">http://www.ibm.com/developerworks/library/pa-microhist.html#sidebar1</a>
</li>

<li>SPARC Processor Family Photo<br />
<a href="http://thenetworkisthecomputer.com/site/?p=243">http://thenetworkisthecomputer.com/site/?p=243</a>
</li>

<li>SPARC: Decades of Continuous Technical Innovation<br />
<a href="http://blogs.oracle.com/ontherecord/entry/sparc_decades_of_continuous_technical">http://blogs.oracle.com/ontherecord/entry/sparc_decades_of_continuous_technical</a>
</li>

<li>The SPARC processors<br />
<a href="http://www.top500.org/2007_overview_recent_supercomputers/sparc_processors">http://www.top500.org/2007_overview_recent_supercomputers/sparc_processors</a>
</li>

<li>Maurice V. Wilkes Home Page<br />
<a href="http://www.cl.cam.ac.uk/archive/mvw1/">http://www.cl.cam.ac.uk/archive/mvw1/</a>
</li>

<li>Papers by M. V. Wilkes (dùle¾itá je pøedev¹ím jeho práce èíslo 35)<br />
<a href="http://www.cl.cam.ac.uk/archive/mvw1/list-of-papers.txt">http://www.cl.cam.ac.uk/archive/mvw1/list-of-papers.txt</a>
</li>

<li>Microprogram Memory<br />
<a href="http://free-books-online.org/computers/advanced-computer-architecture/microprogram-memory/">http://free-books-online.org/computers/advanced-computer-architecture/microprogram-memory/</a>
</li>

<li>First Draft of a report on the EDVAC<br />
<a href="http://qss.stanford.edu/~godfrey/vonNeumann/vnedvac.pdf">http://qss.stanford.edu/~godfrey/vonNeumann/vnedvac.pdf</a>
</li>

<li>Introduction to Microcontrollers<br />
<a href="http://www.pic24micro.com/cisc_vs_risc.html">http://www.pic24micro.com/cisc_vs_risc.html</a>
</li>

<li>Reduced instruction set computing (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Reduced_instruction_set_computer">http://en.wikipedia.org/wiki/Reduced_instruction_set_computer</a>
</li>

<li>MIPS architecture (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/MIPS_architecture">http://en.wikipedia.org/wiki/MIPS_architecture</a>
</li>

<li>Very long instruction word (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Very_long_instruction_word">http://en.wikipedia.org/wiki/Very_long_instruction_word</a>
</li>

<li>Classic RISC pipeline (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Classic_RISC_pipeline">http://en.wikipedia.org/wiki/Classic_RISC_pipeline</a>
</li>

<li>R2000 Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/R2000_(microprocessor)">http://en.wikipedia.org/wiki/R2000_(microprocessor)</a>
</li>

<li>R3000 Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/R3000">http://en.wikipedia.org/wiki/R3000</a>
</li>

<li>R4400 Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/R4400">http://en.wikipedia.org/wiki/R4400</a>
</li>

<li>R8000 Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/R8000">http://en.wikipedia.org/wiki/R8000</a>
</li>

<li>R10000 Microprocessor (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/R10000">http://en.wikipedia.org/wiki/R10000</a>
</li>

<li>SPARC (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Sparc">http://en.wikipedia.org/wiki/Sparc</a>
</li>

<li>SPARC Tagged Data &ndash; otázka<br />
<a href="http://compilers.iecc.com/comparch/article/91-04-079">http://compilers.iecc.com/comparch/article/91-04-079</a>
</li>

<li>SPARC Tagged Data &ndash; odpovìï #1<br />
<a href="http://compilers.iecc.com/comparch/article/91-04-082">http://compilers.iecc.com/comparch/article/91-04-082</a>
</li>

<li>SPARC Tagged Data &ndash; odpovìï #2<br />
<a href="http://compilers.iecc.com/comparch/article/91-04-088">http://compilers.iecc.com/comparch/article/91-04-088</a>
</li>

<li>CPU design (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/CPU_design">http://en.wikipedia.org/wiki/CPU_design</a>
</li>

<li>Control unit (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Control_unit">http://en.wikipedia.org/wiki/Control_unit</a>
</li>

<li>Microcode (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Microcode">http://en.wikipedia.org/wiki/Microcode</a>
</li>

<li>Microsequencer (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Microsequencer">http://en.wikipedia.org/wiki/Microsequencer</a>
</li>

<li>Maurice Wilkes (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Maurice_Wilkes">http://en.wikipedia.org/wiki/Maurice_Wilkes</a>
</li>

<li>Micro-operation (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Micro-operation">http://en.wikipedia.org/wiki/Micro-operation</a>
</li>

<li>b16 stack processor<br />
<a href="http://www.jwdt.com/~paysan/b16.html">http://www.jwdt.com/~paysan/b16.html</a>
</li>

<li>Color Forth (Chuck Moore home page)<br />
<a href="http://www.colorforth.com/">http://www.colorforth.com/</a>
</li>

<li>colorForth Instructions<br />
<a href="http://www.colorforth.com/inst.htm">http://www.colorforth.com/inst.htm</a>
</li>

<li>SEAforth 40C18<br />
<a href="http://www.intellasys.net/index.php?option=com_content&task=view&id=60&Itemid=75">http://www.intellasys.net/index.php?option=com_content&task=view&id=60&Itemid=75</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2011</small></p>
</body>
</html>

