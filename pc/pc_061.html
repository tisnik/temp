<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Hudební èipy Yamaha YM 3812 (OPL2) a YMF 262 (OPL3)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Hudební èipy Yamaha YM 3812 (OPL2) a YMF 262 (OPL3)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o architekturách poèítaèù si podrobnìji popí¹eme, jakým zpùsobem je mo¾né vytváøet hudbu s vyu¾itím èipù Yamaha YM 3812, známého té¾ pod oznaèením OPL2 a takté¾ Yamaha YMF 262, neboli OPL3. Tyto èipy byly pou¾ity v mnoha zvukových kartách, vèetnì AdLibu èi Sound Blasteru.</p>



<h1>Obsah</h1>
<p>
<a href="#k01">1. Frekvenèní modulace a její pou¾ití pøi zvukové syntéze</a><br />
<a href="#k02">2. FM syntéza a èipy Yamaha YM 3812 a YMF 262</a><br />
<a href="#k03">3. Zvuková syntéza na èipu Yamaha YM 3812 (OPL2)</a><br />
<a href="#k04">4. Základ OPL &ndash; operátory a jejich vzájemná vazba</a><br />
<a href="#k05">5. Obálka typu ADSR</a><br />
<a href="#k06">6. Zpìtná vazba a perkusní re¾im</a><br />
<a href="#k07">7. Hudební èip Yamaha YMF 262 (OPL3)</a><br />
<a href="#k08">8. Zpùsob zapojení operátorù v&nbsp;re¾imu OPL 3</a><br />
<a href="#k09">9. Literatura a odkazy na Internetu</a><br />
</p>



<p><a name="k01"></a></p>
<h1>1. Frekvenèní modulace a její pou¾ití pøi zvukové syntéze</h1>

<p>V&nbsp;pøedchozí èásti tohoto seriálu jsme si mj.&nbsp;øekli, ¾e ve zvukové
kartì <i>AdLib</i> byl zvuk vytváøen pomocí hudebního èipu <i>Yamaha YM
3812</i>, známého té¾ pod oznaèením <i>OPL2</i> neboli <i>(FM) Operator Type
L2</i>. Tento plnì digitální èip byl firmou Yamaha navr¾en pro pou¾ití
v&nbsp;multimediálních poèítaèích, tato firma se dokonce v&nbsp;osmdesátých
letech minulého století sna¾ila &ndash; ostatnì jako nìkolik dal¹ích výrobcù
z&nbsp;Japonska &ndash; navrhnout vlastní architekturu poèítaèe i
s&nbsp;operaèním systémem. Tato snaha sice nebyla korunována úspìchem, nicménì
právì pro zvukovou syntézu zalo¾enou na èíslicových èipech (konkrétnì
frekvenèní a fázové modulaci, pozdìji i na wavetable syntéze) se jméno
<i>Yamaha</i> stalo pojmem, a to nejenom v&nbsp;oblasti osobních poèítaèù, ale
i poloprofesionálních a profesionálních hudebních syntetizérù. Principem, na
nìm¾ je tvorba hudby pomocí èipù <i>OPL2</i> i <i>OPL3</i> postavena, je
vzájemná kombinace dvou periodických signálù s&nbsp;vyu¾itím zpìtnovazební
smyèky, obálky typu <i>ADSR</i> a frekvenèní modulace (<i>FM</i>) &ndash; jedná
se modulaci, pøi její¾ aplikaci je frekvence druhého oscilátoru (nosné) øízena
výstupem oscilátoru prvního (modulátoru).</p>

<image id="8928" original="no" />
<p-center><i>Obrázek 1: Frekvenèní modulace v&nbsp;pøípadì, ¾e má první signál
(modrý) zvaný modulátor velmi dlouhou periodu v&nbsp;porovnání se signálem
druhým, jen¾ je zvaný nosná (carrier).</i></p-center>

<p>Vyu¾itím FM syntézy pro napodobení zvuku hudebních nástrojù se zabýval John
Chowning, který ji¾ v&nbsp;roce 1967 uèinil dùle¾itý objev pøi pokusu o
vygenerování zvukového efektu známého pod pojmem <i>vibrato</i>. Chowningùv
pokus byl zalo¾en na pou¾ití elektronického obvodu sestaveného z&nbsp;dvojice
za sebe zapojených oscilátorù, tj.&nbsp;generátorù sinusových signálù, pøièem¾
první oscilátor (s&nbsp;frekvencí cca 20 Hz) ovlivòoval frekvenci druhého
oscilátoru, který generoval výsledný signál. Pomocí takto zapojené dvojice
oscilátorù se Chowningovi podaøilo vytvoøit harmonický tón s&nbsp;celým
spektrem vy¹¹ích frekvencí, pøièem¾ zmìnou frekvence a amplitudy prvního
oscilátoru se vý¹ka výsledného tónu nemìnila, ale jeho zabarvení ano (pøesnìji
øeèeno se vý¹ka samozøejmì mìnila, ale tak rychle, ¾e lidské ucho v&nbsp;celém
spektru frekvencí rozpozná právì frekvenci základní, její¾ výkon ve frekvenèním
spektru je nejvy¹¹í). Skuteèné <i>vibrato</i> lze nasimulovat s&nbsp;pou¾itím
ni¾¹í frekvence prvního oscilátoru (nazývaného také <i>modulator</i>), naopak
pro napodobení zvuku ¹iroké palety hudebních nástrojù je frekvence prvního
modulátoru ponìkud vy¹¹í. Frekvence druhého oscilátoru (jen¾ se nazývá
<i>carrier</i> &ndash; nosná) urèuje základní frekvenci (vý¹ku) vytváøeného
tónu, pøièem¾ podíl frekvencí obou oscilátorù lze v&nbsp;praxi vyjádøit
jednoduchým zlomkem.</p>

<image id="8929" original="no" />
<p-center><i>Obrázek 2: Pokud se perioda modulátoru zkracuje, je zmìna tvaru
výstupního signálu stále výraznìj¹í.</i></p-center>



<p><a name="k02"></a></p>
<h1>2. FM syntéza a èipy Yamaha YM 3812 a YMF 262</h1>

<p>John Chowning, který v&nbsp;dobì svého objevu pracoval na universitì ve
Stanfordu, se spojil s&nbsp;panem <i>Ishimurou</i> z&nbsp;firmy <i>Yamaha</i>,
jen¾ pøi osobní náv¹tìvì na Stanfordu po necelých deseti minutách princip FM,
zpùsob jejího vyu¾ití i dùsledky pro dal¹í vývoj v&nbsp;celém oboru hudebních
syntetizérù pochopil a doporuèil svým nadøízeným, aby se <i>Yamaha</i>
v&nbsp;této oblasti více anga¾ovala. Dùvod Ishimurova nad¹ení spoèíval
v&nbsp;tom, ¾e pro napodobení zvuku nástrojù pomocí FM syntézy je zapotøebí
pouze pomìrnì jednoduchý analogový èi èíslicový obvod (<i>Yamaha</i> se
v&nbsp;tomto ohledu témìø výhradnì zamìøila na èíslicové&ndash;digitální
zvukové obvody) a pøedev¹ím je pro ka¾dý nástroj a tón nutné nastavovat
relativnì malé mno¾ství parametrù, pro jejich¾ ulo¾ení dostaèuje pouze minimum
pamìti (doslova pár bajtù), tak¾e èipy s&nbsp;FM syntézou bylo mo¾né pou¾ít i
v&nbsp;levnìj¹ích syntetizérech, na rozdíl od pozdìj¹í wavetable syntézy, která
vy¾aduje pomìrnì velké mno¾ství pamìti a výkonnìj¹í procesory pro zpracování
vzorkù nástrojù (nehledì na to, ¾e samotná wavetable syntéza nijak neøe¹í
tvorbu nových zvukù, na rozdíl od FM syntézy doplnìné o mo¾nost ovlivnìní
obálky &ndash; <i>envelope</i> &ndash; editovaného tónu).</p>

<image id="8930" original="no" />
<p-center><i>Obrázek 3: Dal¹í sni¾ování frekvence modulátoru &ndash; výsledný
signál získává tvar charakteristický pro FM syntézu. Po analýze signálu ve
frekvenèní oblasti by bylo patrné, ¾e se zde vyskytuje nekoneèné mno¾ství
frekvencí, které jsou v¹ak pøi reálné reprodukci zvuku z&nbsp;obou stran
oøezány.</i></p-center>

<p>Firma <i>Yamaha</i> si následnì zpùsob tvorby hudby pomocí FM syntézy
nechala licencovat a posléze zahájila vývoj a výrobu vlastních èipù pro syntézu
hudby (pùvodnì mìla tyto èipy pro <i>Yamahu</i> vyrábìt firma <i>NEC</i>) a
v&nbsp;roce 1983 prodala více ne¾ 200 000 kusù legendárního syntetizéru
<i>Yamaha DX-7</i>, co¾ bylo na tehdej¹í dobu (men¹í trh ne¾ dnes) pova¾ováno
za velký úspìch následovaný po nìkolika letech krachem firem, jen¾ vyrábìly
nyní ji¾ zastaralé elektromechanické a analogové syntetizéry (samotné obchodní
znaèky tìchto výrobcù sice pøe¾ily, ale vìt¹inou patøí jiným vlastníkùm).
V&nbsp;roce 1994 dokonce pøesahoval obrat trhu se zvukovými kartami s&nbsp;FM
syntézou jednu miliardu dolarù &ndash; a naprostá vìt¹ina tìchto zvukových
karet pou¾ívala èip <i>OPL2</i> nebo pozdìji <i>OPL3</i>, kterými se dnes
zabýváme. Zajímavé pøitom je, ¾e star¹í èipy vyrábìné <i>Yamahou</i> ve
skuteènosti pou¾ívaly pøi zvukové syntéze fázovou modulaci (<i>PM</i>) a ne
modulaci frekvenèní (<i>FM</i>), pøesto¾e firma mìla patent pouze na FM
syntézu. I kdy¾ mezi fázovou modulací a modulací frekvenèní je pouze minimální
rozdíl (zále¾í jen na tom, kdy se aktuální hodnota modulátoru pou¾ije ve
výpoètu výsledného signálu), mohlo &ndash; i pøes existenci patentu &ndash; na
trhu vzniknout více konkurenèních øe¹ení.</p> 

<image id="8931" original="no" />
<p-center><i>Obrázek 4: Legendární klávesy Yamaha DX-7 s&nbsp;FM syntézou
&ndash; dodnes vyhledávaný a cenìný výrobek, který mìl velký dopad na celou
hudební scénu.</i></p-center>



<p><a name="k03"></a></p>
<h1>3. Zvuková syntéza na èipu Yamaha YM 3812 (OPL2)</h1>

<p>První takøka celosvìtovì roz¹íøenou zvukovou kartou na osobních poèítaèích
kompatibilních s&nbsp;IBM PC, která obsahovala hudební èip <i>Yamaha YM
3812</i>, byla karta <i>AdLib</i>, pozdìji byl tento obvod pou¾it i na <i>Sound
Blasterech</i> a dal¹ích typech zvukových karet (více èi ménì
s&nbsp;<i>AdLibem</i> kompatibilních). Jedná se o plnì digitální èip obsahující
pomìrnì jednoduchý procesor doplnìný o pamì» ROM s&nbsp;kapacitou 512 bytù,
která je rozdìlena na dvì stejnì velké èásti. V&nbsp;prvních 256 bajtech se
nachází vzorky jedné ètvrtiny periody sinusového signálu ulo¾ené
v&nbsp;logaritmické ¹kále (výpoèet sinusovky by byl zbyteènì komplikovaný,
navíc ze znalosti první ètvrtiny periody lze díky symetrii sinusovky odvodit
její prùbìh pro celou periodu), druhých 256 bajtù obsahuje pøevodní hodnoty
exponenciální funkce &ndash; ve¹keré výpoèty na èipu <i>YM 3812</i> jsou toti¾
provádìny s&nbsp;hodnotami v&nbsp;logaritmické ¹kále, proto¾e nejèastìj¹í
výpoèty (pøedev¹ím samotná fázová modulace, modifikace signálu obálkou pomocí
amplitudové modulace, zmìna hlasitosti a aplikace zpìtné vazby) jsou zalo¾eny
na násobení, je¾ se v&nbsp;logaritmické ¹kále pøevádí na sèítání, které je
implementaènì mnohem jednodu¹¹í ne¾ násobení.</p>

<image id="8932" original="no" />
<p-center><i>Obrázek 5: Zvuková karta AdLib obsahovala jen velmi málo
souèástek: zvukový èip YM 3812, D/A pøevodník YM3014B a obvody zaji¹»ující
komunikaci poèítaèe s&nbsp;kartou pøes sbìrnici.</i></p-center>

<p>Pøevod na lineární hodnoty je provádìn pøed posláním vypoèteného signálu na
externí digitálnì-analogový pøevodník (vìt¹inou se jednalo o èip
<i>YM3014B</i>, samplovací frekvence, tj.&nbsp;rychlost pøená¹ení vzorkù na D/A
pøevodník, je pomìrnì vysoká &ndash; 49720 Hz). To, ¾e je <i>YM 3812</i> plnì
digitálním èipem je výhodné pro jeho emulaci, proto¾e není nutné slo¾itì
modelovat chování analogových oscilátorù èi filtrù. Èip je vybaven piny pro
pøipojení k&nbsp;osmibitové sbìrnici øízené signály <strong>CS</strong>,
<strong>RD</strong> a <strong>WR</strong>. Pro výbìr adresy je vyveden pouze
jeden pin &ndash; to je v¹ak dostaèující, proto¾e se rozli¹ují pouhé dvì adresy
mapované do I/O prostoru 0x388 a 0x389 (tyto adresy byly z&nbsp;dùvodu zpìtné
kompatibility pou¾ity i u modernìj¹ích zvukových karet). Na adrese 0x388 je
umístìný indexový registr, do nìj¾ se zapisuje index vybraného interního
registru (0&ndash;255), a na adrese 0x389 je datový registr. Èip obsahuje 244
interních osmibitových registrù, pomocí nich¾ se øídí celý prùbìh zvukové
syntézy &ndash; poèet registrù je tedy mnohem vy¹¹í, ne¾ u døíve popisovaných
zvukových èipù (<i>POKEY:</i> 9 registrù, <i>SID:</i> 29 registrù,
<i>AYèko:</i> 14 registrù). Zápis do interního registru musí být proveden ve
dvou krocích &ndash; výbìr registru zápisem jeho èísla na I/O adresu 0x388 a po
malém zpo¾dìní zápisem nové hodnoty interního registru na adresu 0x389.</p>



<p><a name="k04"></a></p>
<h1>4. Základ OPL &ndash; operátory a jejich vzájemná vazba</h1>

<p>Èip <i>Yamaha YM 3812</i> generuje zvuk pomocí devíti samostatnì
nastavitelných hudebních kanálù, pøièem¾ ka¾dý kanál obsahuje dvojici
takzvaných <i>operátorù</i>, které mohou být navzájem propojeny buï tak, ¾e se
oba signály vytváøené v&nbsp;obou operátorech jednodu¹e sèítají nebo první
operátor (<i>modulator</i>) ovlivòuje pomocí fázové modulace tvar signálu
vytváøeného druhým operátorem (<i>carrier</i>) &ndash; viz následující
obrázek.</p>

<image id="8933" />
<p-center><i>Obrázek 6: Zpùsob zapojení dvojice operátorù v&nbsp;jednom
hudebním kanálu v&nbsp;èipu OPL2. Naznaèena je i zpìtnovazební smyèka,
která mù¾e dosti zásadním zpùsobem ovlivnit výsledný tón.</i></p-center>

<p>Ka¾dý operátor je slo¾en ze tøí blokù &ndash; oscilátoru (generátoru
periodického signálu o zadané frekvenci), generátoru obálky (<i>envelope</i>) a
obvodu pro øízení výstupní úrovnì. Ka¾dý oscilátor mù¾e generovat periodický
signál odvozený od klasické sinusovky, její¾ podoba je, jak ji¾ bylo øeèeno
v&nbsp;pøedchozím odstavci, ulo¾ena (v&nbsp;logaritmické ¹kále) v&nbsp;256
bajtech pamìti ROM pøímo na hudebním èipu. V¹echny ètyøi varianty signálu jsou
zobrazeny na následujícím obrázku. Jedná se samozøejmì ji¾ o signál pøevedený
na lineární ¹kálu, který lze zobrazit na osciloskopu pøipojeného na výstupu ze
zvukové karty v&nbsp;pøípadì, ¾e se povolí pouze jeden z&nbsp;devíti hudebních
kanálù, nastaví se sèítání výstupù obou operátorù a obálka bude obsahovat
nenulovou hodnotu <i>sustain</i> (viz navazující odstavec). Na tomto místì je
vhodné øíci, ¾e firma <i>Yamaha</i> vyrábìla i &bdquo;originální&ldquo; èip
<i>YM 3526 (OPL1)</i>, který se od <i>YM 3812</i> odli¹oval prakticky pouze
v&nbsp;tom, ¾e dokázal pracovat jen se sinusovkou a nikoli s&nbsp;dal¹ími
tøemi tvary signálù (<i>OPL3</i> naopak dal¹í ètyøi prùbìhy pøidává, mezi
jinými i oblíbený obdélníkový signál se ¹irokým, teoreticky nekoneèným
spektrem).</p>

<image id="8934" />
<p-center><i>Obrázek 7: Èip OPL2 umo¾òuje pro ka¾dý operátor pou¾ít jeden ze
ètyø tvarù vlny zalo¾ený na sinusovce o volitelné frekvenci.</i></p-center>



<p><a name="k05"></a></p>
<h1>5. Obálka typu ADSR</h1>

<p>Signál vytváøený v&nbsp;ka¾dém operátoru je ovlivnìn obálkou
(<i>envelope</i>), pomocí ní¾ lze mìnit jeho amplitudu. Jedná se o obálku typu
<i>ADSR</i> (<i>attack, decay, sustain, release</i>). Základní tvar obálky je
urèen ètveøicí parametrù &ndash; <i>attack rate</i> (doba èi strmost nábìhu
první hrany), <i>decay rate</i> (doba èi strmost druhé &ndash;
klesající/sestupné &ndash; hrany), <i>sustain level</i> (stabilní úroveò
signálu obálky po prvotním vzrùstu a poklesu, jen¾ je v&nbsp;programech
vìt¹inou vyjadøovaná v&nbsp;procentech amplitudy, ov¹em v&nbsp;øídicích
registrech ulo¾ená jako zlomek maximální úrovnì) a <i>release rate</i> (doba èi
strmost poslední &ndash; klesající &ndash; hrany).</p>

<image id="8935" />
<p-center><i>Obrázek 8: Tvar obálky generované pro ka¾dý operátor na èipu YM
3812. AR=attack rate, DR=decay rate, SL=sustain level a RR=release rate.
Zaèátek obálky i doba trvání úrovnì sustain je urèena stavem bitu
KEY-ON.</i></p-center>

<p>Pro ka¾dý z&nbsp;tìchto parametrù je v&nbsp;øídicích registrech zvukového
èipu <i>YM 3526</i> vyhrazena ètveøice bitù, co¾ prakticky znamená, ¾e hodnoty
<i>attack</i> a <i>decay</i> jsou spoleènì ulo¾eny v&nbsp;jednom osmibitovém
registru a hodnoty <i>sustain</i> a <i>release</i> v&nbsp;registru druhém. Tyto
registry jsou alokovány pro ka¾dý operátor zvlá¹». Pov¹imnìte si, ¾e ètyøi vý¹e
uvedené parametry nejsou pro úplné popsání tvaru obálky dostateèné. Pøedev¹ím
chybí urèení doby, po kterou si obálka dr¾í úroveò <i>sustain</i> a takté¾
amplituda, tj.&nbsp;maximální úroveò signálu obálky v&nbsp;bodì, kde se nábì¾ná
hrana <i>attack</i> láme a mìní se v&nbsp;sestupnou hranu <i>decay</i>. Tyto
dva parametry jsou nastavovány následovnì: maximální úroveò signálu obálky je
v¾dy nastavena na 100% a doba úrovnì <i>sustain</i> závisí na dobì, po kterou
je bit <i>KEY-ON</i> programovì dr¾ený v&nbsp;úrovni logické jednièky. Tento
bit je rezervovaný pro ka¾dý <strong>kanál</strong> (nikoli pro
<strong>operátor</strong>), jednotlivé kanály je tedy mo¾né ovládat zvlá¹», co¾
je pro skuteènou polyfonii (vícehlasou hudbu) nezbytné.</p>

<image id="8936" />
<p-center><i>Obrázek 9: Musicdisk nazvaný "Sanxion AdlibDisk" &ndash; program
pøehrávající hudbu urèenou pro zvukové karty obsazené èipem s&nbsp;OPL 2 nebo
OPL 3. V&nbsp;souèasnosti je ho mo¾né spou¹tìt napøíklad
v&nbsp;DOSBoxu.</i></p-center>



<p><a name="k06"></a></p>
<h1>6. Zpìtná vazba a perkusní re¾im</h1>

<p>Dal¹í zajímavou vlastností èipu <i>YM 3812</i> je mo¾nost zavedení zpìtné
vazby u prvního operátoru &ndash; modulátoru. Tato zpìtná vazba je naznaèena na
¹estém obrázku (viz pøedchozí kapitoly). Pomocí tøí bitù lze zvolit zpo¾dìní
signálu, který se pomocí zpìtné vazby vrací na vstup modulátoru, aby zde byl
seèten s&nbsp;pùvodním vstupním signálem. Doba zpo¾dìní není zadána absolutnì
(to by pøi zmìnì vý¹ky tónu znamenalo nutnost dobu zpo¾dìní pøepoèítat), ale
relativnì s&nbsp;ohledem na frekvenci (periodu signálu) nastavenou pro daný
operátor. Poslední dùle¾itou vlastností je mo¾nost pøepnutí èipu do takzvaného
<i>perkusního re¾imu</i> (persussion mode), který pøedstavuje alternativu
k&nbsp;vý¹e popsanému <i>melodickému re¾imu</i>. Zatímco v&nbsp;melodickém
re¾imu lze pou¾ít osmnáct operátorù rozdìlených po dvojicích do devíti
hudebních kanálù, je po pøepnutí èipu do re¾imu perkusního k&nbsp;dispozici
¹est melodických kanálù (ka¾dý obsahuje dva operátory, které se chovají tak,
jak byly popsány v&nbsp;pøedchozích kapitolách) a souèasnì pìti kanálù
pou¾itých pro bicí nástroje &ndash; Bass Drum, Snare Drum, Tom-Tom, Cymbal a
Hi-Hat. Pro vytváøení zvukù bicích nástrojù je pou¾itý generátor bílého ¹umu,
co¾ je v&nbsp;mnoha ohledech podobné funkcím èipù POKEY, SID èi AY-3-8190.</p>

<image id="8937" />
<p-center><i>Obrázek 10: Musicdisk "Sanxion AdlibDisk II".</i></p-center>



<p><a name="k07"></a></p>
<h1>7. Hudební èip Yamaha YMF 262 (OPL 3)</h1>

<p>Hudební èip <i>Yamaha YMF 262</i>, známý té¾ pod oznaèením <i>OPL 3</i>,
pøedstavuje dal¹í generaci zvukových obvodù zalo¾ených na frekvenèní (fázové)
modulaci. Oproti vý¹e popsanému èipu <i>YM 3812</i> do¹lo k&nbsp;nìkolika
podstatným úpravám. Pøedev¹ím se zvý¹il celkový poèet operátorù z&nbsp;osmnácti
na 36, do jednoho kanálu je mo¾né zapojit a¾ ètyøi operátory (viz dal¹í
kapitola), místo ètyø typù signálù na vstupech operátorù je k&nbsp;dispozici
osm typù (vèetnì obdélníkového signálu a logaritmicky zkresleného signálu
pilového) a na výstup èipu je mo¾né zapojit dvojici D/A pøevodníkù (viz
jedenáctý obrázek) a vytváøet tak stereo hudbu &ndash; ve skuteènosti v¹ak není
mo¾né plynule nastavovat pøechod mezi levým a pravým reproduktorem
(<i>panning</i>), lze pouze zvolit, zda je výstup z&nbsp;nìjakého hudebního
kanálu pøehráván na levém, pravém èi obou reproduktorech. Vzhledem ke zvý¹enému
poètu operátorù se zvý¹il i poèet interních registrù. Z&nbsp;tohoto dùvodu jsou
místo jedné registrové sady pou¾ity sady dvì, co¾ znamená, ¾e místo dvou adres
mapovaných do I/O prostoru (index a data) jsou pou¾ity adresy ètyøi.</p>

<image id="8938" original="no" />
<p-center><i>Obrázek 11: Pøipojení èipu OPL 3 na dvojici D/A pøevodníkù</i></p-center>

<p>Souèasnì byla do znaèné míry zachována zpìtná kompatibilita s&nbsp;<i>OPL
2</i>, co¾ je dùle¾ité, proto¾e zvukové karty zalo¾ené na <i>OPL 3</i> mohly
být stále kompatibilní s&nbsp;pùvodním <i>Adlibem</i>. Podrobný popis mo¾ností
<i>OPL 3</i> najdete v&nbsp;dokumentu <att-url id="750">Programmer's Guide to
Yamaha YMF 262/OPL3 FM Music Synthesizer</att-url>, který napsal spolu¾ák
z&nbsp;VUT <strong>Vladimír Arno¹t</strong>, kterého tímto zdravím :-)</p>

<image id="8939" original="no" />
<p-center><i>Obrázek 12: Tvary vln, které lze pou¾ít na èipu OPL 3. První ètyøi
prùbìhy jsou zpìtnì kompatibilní s&nbsp;OPL 2.</i></p-center>



<p><a name="k08"></a></p>
<h1>8. Zpùsob zapojení operátorù v&nbsp;re¾imu OPL 3</h1>

<p>Zatímco u èipu <i>YM 3812</i> bylo mo¾né operátory v&nbsp;jednom kanálu
zapojit pouze do dvou konfigurací naznaèených na ¹estém obrázku, lze u èipu
<i>YMF 262</i> pou¾ít mnohem vìt¹í poèet kombinací, které jsou zobrazené na
obrázku èíslo 13. Existují tøi mo¾nosti konfigurace: 18 kanálù, z&nbsp;nich¾
ka¾dý obsahuje dva operátory, 15 melodických kanálù se dvìma operátory spoleènì
s&nbsp;pìti kanály pracujícími v&nbsp;perkusním re¾imu a koneènì 6 kanálù se
ètyømi operátory (zbytek jsou buï dvouoperátorové kanály nebo kanály pracující
v&nbsp;perkusním re¾imu). V&nbsp;konfiguraci ètyøoperátorového kanálu v¾dy
jeden z&nbsp;operátorù (pùvodní modulátor) obsahuje zpìtnou vazbu, i kdy¾
v&nbsp;øídicích registrech je mo¾né nastavit úroveò zpìtné vazby pro v¹echny
operátory &ndash; u tøí ètvrtin operátorù nemá tedy obsah pøíslu¹ného øídicího
registru vliv na generovaný tón. Z&nbsp;pøedchozího textu je patrné, ¾e èip
<i>OPL 3</i> nabízí mnohem více mo¾ností pøi vytváøení zvukù, ov¹em mnoho
vývojáøù nedokázalo v¹echny mo¾nosti syntézy v&nbsp;tomto re¾imu vyu¾ít &ndash;
z&nbsp;tohoto dùvodu se velmi èasto setkáme s&nbsp;tím, ¾e je pou¾ita
&bdquo;dvouoperátorová&ldquo; syntéza a èip <i>YMF 262</i> je tak vlastnì
degradován na stereo verzi pùvodního èipu <i>YM 3812</i> s&nbsp;dvojnásobným
mno¾stvím hudebních kanálù (osmnáct kanálù namísto devíti).</p>

<image id="8940" original="no" />
<p-center><i>Obrázek 13: Zpùsob zapojení operátorù v&nbsp;re¾imu OPL 3.</i></p-center>



<p><a name="k09"></a></p>
<h1>9. Literatura a odkazy na Internetu</h1>

<ol>

<li>Vladimir Arnost:<br />
Programmer's Guide to Yamaha YMF 262/OPL3 FM Music Synthesizer
</li>

<li>Yamaha LSI corp:<br />
YMF262, FM Operator Type L3 (OPL3)
</li>

<li>Tero T"tt":<br />
The Ad Lib Music Synthesizer Card Programming Guide
</li>

<li>Keyboard Synthesizer<br />
<a href="http://www.solarnavigator.net/music/instruments/keyboards.htm">http://www.solarnavigator.net/music/instruments/keyboards.htm</a>
</li>

<li>FMS - Fully Modular Synthesizer<br />
<a href="http://fmsynth.sourceforge.net/">http://fmsynth.sourceforge.net/</a>
</li>

<li>Javasynth<br />
<a href="http://javasynth.sourceforge.net/">http://javasynth.sourceforge.net/</a>
</li>

<li>Software Sound Synthesis &amp; Music Composition Packages<br />
<a href="http://www.linux-sound.org/swss.html">http://www.linux-sound.org/swss.html</a>
</li>

<li>Mx44.1 Download Page (software synthesizer for linux)<br />
<a href="http://hem.passagen.se/ja_linux/">http://hem.passagen.se/ja_linux/</a>
</li>

<li>Software synthesizer<br />
<a href="http://en.wikipedia.org/wiki/Software_synthesizer">http://en.wikipedia.org/wiki/Software_synthesizer</a>
</li>

<li>Frequency modulation synthesis<br />
<a href="http://en.wikipedia.org/wiki/Frequency_modulation_synthesis">http://en.wikipedia.org/wiki/Frequency_modulation_synthesis</a>
</li>

<li>Yamaha DX7<br />
<a href="http://en.wikipedia.org/wiki/Yamaha_DX7">http://en.wikipedia.org/wiki/Yamaha_DX7</a>
</li>

<li>Wave of the Future<br />
<a href="http://www.wired.com/wired/archive/2.03/waveguides_pr.html">http://www.wired.com/wired/archive/2.03/waveguides_pr.html</a>
</li>

<li>Analog synthesizer<br />
<a href="http://en.wikipedia.org/wiki/Analog_synthesizer">http://en.wikipedia.org/wiki/Analog_synthesizer</a>
</li>

<li>Minimoog<br />
<a href="http://en.wikipedia.org/wiki/Minimoog">http://en.wikipedia.org/wiki/Minimoog</a>
</li>

<li>Moog synthesizer<br />
<a href="http://en.wikipedia.org/wiki/Moog_synthesizer">http://en.wikipedia.org/wiki/Moog_synthesizer</a>
</li>

<li>Tutorial for Frequency Modulation Synthesis<br />
<a href="http://www.sfu.ca/~truax/fmtut.html">http://www.sfu.ca/~truax/fmtut.html</a>
</li>

<li>An Introduction To FM<br />
<a href="http://ccrma.stanford.edu/software/snd/snd/fm.html">http://ccrma.stanford.edu/software/snd/snd/fm.html</a>
</li>

<li>John Chowning<br />
<a href="http://en.wikipedia.org/wiki/John_Chowning">http://en.wikipedia.org/wiki/John_Chowning</a>
</li>

</ol>

<image id="8941" original="no" />
<p-center><i>Obrázek 14: Musicdisk Quasar &ndash; dal¹í z&nbsp;hudebních
programù urèených pro OPL 2 a OPL 3.</i></p-center>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

