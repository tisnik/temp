<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Grafický subsystém poèítaèù IBM PC</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Grafický subsystém poèítaèù IBM PC</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Dal¹ími stroji, jejich¾ grafický systém si v seriálu o architekturách poèítaèù popí¹eme, jsou stroje kompatibilní s IBM PC. V dne¹ní èásti seriálu se budeme zabývat pøedev¹ím popisem grafického øadièe Motorola MC6845, který je pou¾itý napøíklad v grafických kartách MDA, CGA èi Hercules.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Grafický subsystém osobních poèítaèù IBM PC</a></p>
<p><a href="#k02">2. Grafický øadiè Motorola MC6845</a></p>
<p><a href="#k03">3. Generování obrazu s&nbsp;èipem MC6845</a></p>
<p><a href="#k04">4. Øídicí registry èipu MC6845</a></p>
<p><a href="#k05">5. Grafická karta MDA &ndash; Monochrome Display Adapter</a></p>
<p><a href="#k06">6. Textový re¾im karty MDA</a></p>
<p><a href="#k07">7. Grafická karta CGA &ndash; Color Graphics Adapter</a></p>
<p><a href="#k08">8. Grafické re¾imy karty CGA</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Grafický subsystém osobních poèítaèù IBM PC</h2>

<p>Firma IBM vytvoøila a posléze na veøejnosti prezentovala poèítaèe øady IBM
PC zejména jako kanceláøské poèítaèe, u nich¾ se v&nbsp;jejich poèátcích
nepoèítalo s tím, ¾e na nich budou ve vìt¹í míøe provozovány grafické aplikace
(hry byly doménou osmibitových poèítaèù a od roku 1984 i poèítaèù zalo¾ených na
mikroprocesorech <i>Motorola 68000</i>, nároèné CAD systémy se naopak
provozovaly na výkonných unixových stanicích). Pozdìj¹í vývoj aplikací i
operaèních systémù na PC v¹ak ke grafice neomylnì smìøoval a s&nbsp;tím se také
vyvíjely grafické karty, které firma IBM vytvoøila a podporovala. Pokud se
zamìøíme na grafické karty urèené pro PC základní øady (tj. pomineme
poloprofesionální a profesionální èipy <i>PGA</i> a <i>8514/A</i>), mù¾eme
vysledovat zajímavý tøíletý cyklus nástupu nových grafických karet této
firmy:</p>

<table>
<tr><td>CGA + MDA</td><td>1981</td></tr>
<tr><td>EGA</td><td>1984</td></tr>
<tr><td>VGA</td><td>1987</td></tr>
<tr><td>XGA</td><td>1990</td></tr>
</table>

<p>Grafickou kartou <i>XGA</i> konèí dlouhá série grafických karet navrhovaných
u IBM, v&nbsp;dal¹ích letech tuto èinnost pøebírají jiné firmy, co¾ je jenom
dobøe, IBM v&nbsp;tomto smìru napáchala více ¹kody ne¾ u¾itku ;-).
V&nbsp;dal¹ích èástech tohoto seriálu si jednotlivé grafické karty postupnì
popí¹eme (a nejen je), ale nejdøíve se musíme zmínit o jednom èipu, který mìl
pro dal¹í vývoj grafických karet na poèítaèích typu IBM PC pomìrnì zásadní
význam. Jedná se o grafický øadiè <i>Motorola MC6845</i>.</p>

<a href="http://i.iinfo.cz/images/559/pc83-1.png"><img src="http://i.iinfo.cz/images/559/pc83-1-prev.png" alt="pc83" height="180" width="370" /></a>
<p><i>Obrázek 1: Textový re¾im adaptéru MDA.</i></p>



<p><a name="k02"></a></p>
<h2>2. Grafický øadiè Motorola MC6845</h2>

<p>Grafický øadiè <i>Motorola MC6845</i> byl navr¾en pro øízení jednoduchých
poèítaèových monitorù èi pøímo jejich obrazovek (CRT), tj.&nbsp;jedná se o èip
obecnì nazývaný <i>CRTC &ndash; Cathode Ray Tube Controller</i>. Øízení
obrazovek spoèívá, zjednodu¹enì øeèeno, v&nbsp;postupném naèítání barev
jednotlivých pixelù èi kódù znakù (serializaci) z&nbsp;obrazové pamìti, dále o
pøevod naètených dat na výslednou grafickou informaci a následném poslání této
informace na výstup &ndash; buï pøímo na monitor nebo do VF modulátoru
v&nbsp;pøípadì pou¾ití televizoru namísto monitoru. K&nbsp;vlastní obrazové
informaci jsou pøidány i horizontální a vertikální synchronizaèní signály, o
jejich¾ generování se takté¾ stará grafický øadiè. Tento èip byl pou¾íván u¾
v&nbsp;sedmdesátých letech minulého století, zejména pro øízení obrazovek u
poèítaèových terminálù (samozøejmì textových). Pro tento typ úloh byl øadiè
<i>MC6845</i> vybaven mo¾ností zobrazovat data v&nbsp;textové podobì, ve
skuteènosti v¹ak bylo pøi vhodném nastavení øídicích registrù mo¾né pou¾ít i
rùzné grafické re¾imy, èeho¾ bylo vyu¾ito ji¾ u nìkterých domácích osmibitových
poèítaèù vybavených tímto èipem (nìkteré z&nbsp;tìchto poèítaèù si je¹tì
popí¹eme v&nbsp;navazujících dílech seriálu).</p>

<p>Kromì toho bylo mo¾né k&nbsp;èipu <i>MC6845</i> pøipojit svìtelné pero,
které mohlo s&nbsp;vyu¾itím pomìrnì pøesného mìøení hodin øídicích výstup
jednotlivých obrazových øádkù a pixelù, lokalizovat umístìní aktivního hrotu
svìtelného pera na obrazovce (samozøejmì za pøedpokladu, ¾e výrobce poèítaèe
vyvedl pøíslu¹né piny èipu <i>MC6845</i> pøes zesilovaè na konektor). Podpora
pro textový re¾im byla u tohoto grafického øadièe na pomìrnì vysoké úrovni,
zejména s&nbsp;ohledem na dobu vzniku èipu: znaky mohly mít promìnnou vý¹ku a
dokonce byl podporován takzvaný <i>hardwarový kurzor</i>, co¾ není nic jiného,
ne¾ ona známá blikající èárka èi obdélník (vìt¹inou o ¹íøce jednoho znaku) na
obrazovce. Podpora spoèívá ve zmínìném blikání, které nemuselo být øízeno
programovì, stejnì tak jako pøepis znaku, který se nachází pod kurzorem (to
mimo jiné znamenalo, ¾e i kdy¾ poèítaè &bdquo;zamrzl&ldquo;, textový kurzor si
dál vesele blikal, co¾ spoustu lidí dokonale zmátlo, proto¾e si mysleli, ¾e
poèítaè stále pracuje :-).</p>

<p>Celkem byly vyrábìny tøi základní verze tohoto èipu (MC6845 &ndash; 1 MHz,
MC68A45 &ndash; 1,5 MHz, MC68B45 &ndash; 2 MHz), ov¹em kromì pùvodního výrobce
(Motorola) se tento èip vyrábìl v&nbsp;modifikované podobì i v&nbsp;nìkolika
dal¹ích firmách. Mezi jednotlivými èipy existovaly vìt¹í i men¹í rozdíly, a to
jak v&nbsp;èasování signálù, tak i ve významu nìkterých bitù øídicích
registrù.</p>

<a href="http://i.iinfo.cz/images/559/pc83-2.png"><img src="http://i.iinfo.cz/images/559/pc83-2-prev.png" alt="pc83" height="135" width="370" /></a>
<p><i>Obrázek 2: Grafický øadiè Motorola MC6845.</i></p>



<p><a name="k03"></a></p>
<h2>3. Generování obrazu s&nbsp;èipem MC6845</h2>

<p>Rozli¹ení a barevná hloubka grafických re¾imù nebyly omezeny pøímo èipem
<i>MC6845</i>, ale dal¹ími obvody, které se k&nbsp;tomuto integrovanému obvodu
pøipojovaly. Pøi pou¾ití vy¹¹ích frekvencí hodinových impulsù bylo mo¾né
pou¾ívat stabilní grafické re¾imy o rozli¹ení 768&times;384 pixelù, teoretická
hranice se pohybovala u rozli¹ení 800&times;400 pixelù; pøi
&bdquo;pøetaktování&ldquo; èipu v¹ak bylo mo¾né pou¾ít i vy¹¹ích rozli¹ení,
samozøejmì pouze za pøedpokladu, ¾e se vyu¾ily dostateènì rychlé pamì»ové èipy
tvoøící obrazovou pamì». Kromì pøímého výstupu grafiky byl podporován i
takzvaný <i>interlace</i> re¾im, tj.&nbsp;støídavé vykreslování lichých a
sudých obrazových øádkù, pou¾ívaný zejména pøi zobrazování na televizorech. Èip
<i>MC6845</i> dokázal adresovat a¾ 2<sup>14</sup> textových øádkù, pøièem¾ ka¾dý
øádek mohl mít vý¹ku 2<sup>5</sup> obrazových øádkù. Celková adresovatelná
kapacita pamìti byla rovna 2<sup>(14+5)</sup>=512 kB, èeho¾ v¹ak ¾ádná grafická
karta nevyu¾ívala. Pokud se ¹íøka textového øádku sní¾ila na jeden obrazový øádek,
simuloval se grafický re¾im, ov¹em velikost obrazové pamìti byla pouhých
2<sup>14</sup>=16 kB (viz napøíklad dále popsaná karta <i>CGA</i>).</p>

<p>Z&nbsp;dùvodu podpory jak textových tak i grafických re¾imù si právì tento
øadiè displeje vybrala firma IBM pro návrh grafických karet urèených pro
vznikající IBM PC a jeho následovníky (PC XT, PC AT), co¾ je ponìkud paradoxní,
proto¾e se jedná o èip navr¾ený pøedev¹ím pro pou¾ití s&nbsp;mikroprocesorovou
øadou <i>Motorola M68xx</i> a firma IBM se pøi návrhu PC schválnì orientovala
pøedev¹ím na obvody kompatibilní se stavebnicemi 8080 a 8085 (dùvodù bylo více,
nìkteré si je¹tì øekneme).</p>



<p><a name="k04"></a></p>
<h2>4. Øídicí registry èipu MC6845</h2>

<p>Nastavení grafického øadièe <i>MC6845</i> se provádìlo pøes osmnáct
osmibitových øídicích registrù. Nìkteré z&nbsp;tìchto registrù byly urèeny pro
zápis (poèet znakù na øádek atd.), jiné zase pro ètení (pozice svìtelného
pera). Èíselné hodnoty, které mohly být vìt¹í ne¾ 2<sup>8</sup>, se musely
ukládat do dvou sousedních registrù (poloha kurzoru atd.). Registry byly
programátorùm pøístupné pøes dvojici adres &ndash; zápis do první adresy
vybíral pøíslu¹ný øídicí registr, ètení èi zápis do druhé adresy (o jednièku
vy¹¹í) ji¾ vedl ke ètení èi zápisu do pøíslu¹ného øídicího registru. O které
adresy se konkrétnì jedná zále¾elo na zapojení konkrétní grafické karty.
Napøíklad u dále popsané grafické karty <i>CGA</i> se jedná o I/O porty 0x3d4 a
0x3d5 a u grafické karty <i>Hercules</i> se naopak o I/O porty 0x3b4 a 0x3b5.
Význam jednotlivých øídicích registrù je uveden v&nbsp;následující tabulce
(pov¹imnìte si, ¾e jednotkami pøi udávání horizontálních velikostí jsou
znaky a nikoli pixely &ndash; pøesné èasování je odvozeno od externího
hodinového signálu øízeného krystalem):</p>

<table>
<tr><th>Èíslo registru</th><th>Význam</th></tr>
<tr><td>0 </td><td>celkový poèet znakù horizontálnì, vèetnì okrajù</td></tr>
<tr><td>1 </td><td>poèet horizontálnì zobrazených znakù (typicky 40 èi 80)</td></tr>
<tr><td>2 </td><td>horizontální pozice synchronizaèního signálu (lze posouvat obrazem na monitoru, ov¹em omezenì)</td></tr>
<tr><td>3 </td><td>¹íøka horizontálního a vertikálního synchronizaèního signálu</td></tr>
<tr><td>4 </td><td>celkový poèet textových øádkù (napøíklad 27)</td></tr>
<tr><td>5 </td><td>mikroposun textových øádkù po jednotlivých obrazových øádcích</td></tr>
<tr><td>6 </td><td>zobrazený poèet textových øádkù (napøíklad 25)</td></tr>
<tr><td>7 </td><td>vertikální pozice synchronizaèního signálu (lze posouvat obrazem, opìt omezenì)</td></tr>
<tr><td>8 </td><td>mód prokládání (interlace) a posunutí</td></tr>
<tr><td>9 </td><td>poèet obrazových øádkù pro jeden textový øádek &ndash; vý¹ka znaku (vìt¹inou 8 èi 14)</td></tr>
<tr><td>10</td><td>zaèátek hardwarového kurzoru (vìt¹inou vý¹ka_znaku-3)</td></tr>
<tr><td>11</td><td>konec hardwarového kurzoru (kurzor mù¾e mít napøíklad vý¹ku dvou obrazových øádkù)</td></tr>
<tr><td>12</td><td>poèáteèní adresa obrazové pamìti (vy¹¹í bajt)</td></tr>
<tr><td>13</td><td>poèáteèní adresa obrazové pamìti (ni¾¹í bajt)</td></tr>
<tr><td>14</td><td>adresa kurzoru &ndash; vy¹¹í bajt (klasický posun hardwarového kurzoru)</td></tr>
<tr><td>15</td><td>adresa kurzoru &ndash; ni¾¹í bajt</td></tr>
<tr><td>16</td><td>adresa svìtelného pera &ndash; vy¹¹í bajt</td></tr>
<tr><td>17</td><td>adresa svìtelného pera &ndash; ni¾¹í bajt</td></tr>
</table>



<p><a name="k05"></a></p>
<h2>5. Grafická karta MDA &ndash; Monochrome Display Adapter</h2>

<p>Jak jsme si ji¾ øekli v&nbsp;pøedchozích kapitolách, nabízela firma IBM do
svých prvních poèítaèù PC buï grafickou kartu <i>MDA</i> (<i>Monochrome Display
Adapter</i>), nebo grafickou kartu <i>CGA</i> (dokonce bylo mo¾né, aby byly
v&nbsp;jednom poèítaèi souèasnì nainstalovány obì zmínìné karty, proto¾e ani
adresy jejich øídicích registrù &ndash; portù, ani adresní rozsah video pamìti,
se nepøekrýval). Poèátek výroby obou typù karet se datuje do roku 1981.
Grafická karta <i>MDA</i> se od prakticky v¹ech dal¹ích grafických adaptérù
vyrábìných pro poèítaèe IBM PC odli¹ovala pøedev¹ím v&nbsp;tom, ¾e neumo¾òovala
vykreslování rastrové grafiky (oznaèení termínem &bdquo;grafická karta&ldquo;
je tedy ponìkud nepøesné), jeliko¾ podporovala pouze textový re¾im 80&times;25
znakù, který je pou¾íván napøíklad pøi startu poèítaèe èi v&nbsp;operaèním
systému MS-DOS; teoreticky by v¹ak mìlo být mo¾né pracovat
s&nbsp;graficko-textovou :-) kartou <i>MDA</i> i pod systémy Linux èi Open/Free
BSD, napøíklad pro øízení zobrazování na druhém monitoru u star¹ích systémù
vybavených sbìrnicí ISA (v&nbsp;moderních PC se pro zobrazení na více
monitorech vyu¾ívá ponìkud odli¹ná technologie). V&nbsp;minulosti se &ndash;
zejména právì v&nbsp;dobách DOSu &ndash; pro tuto èinnost nejèastìji pou¾ívaly
výprodejové karty typu <i>Hercules</i>, proto¾e i ty byly navr¾eny tak, aby
jejich øídicí porty ani adresy video pamìti nekolidovaly s&nbsp;primární
grafickou kartou.</p>

<a href="http://i.iinfo.cz/images/559/pc83-3.jpg"><img src="http://i.iinfo.cz/images/559/pc83-3-prev.jpg" alt="pc83" height="185" width="370" /></a>
<p><i>Obrázek 3: Grafická karta MDA s&nbsp;èipem MC6845.</i></p>

<p>Jednoznaènou pøedností této grafické karty je zpùsob namapování do adresního
prostoru procesoru. Karta toti¾ vyu¾ívala segment zaèínající adresou
<strong>b000:0000</strong> (pou¾ívám zde známé Intelovské ¹estnáctibitové
adresování typu segment:offset), který nebyl na dal¹ích grafických kartách
vyu¾it. Proto bylo mo¾né tuto kartu kombinovat s&nbsp;kartou jinou a vytvoøit
tak vícemonitorový systém, který vyu¾ívaly aplikace jako
<strong>AutoCAD</strong> (grafická plocha a terminál s&nbsp;pøíkazovým øádkem),
<strong>Turbo Pascal</strong> (vývojové prostøedí zobrazené spolu
s&nbsp;ladìnou aplikací), <strong>Turbo C++</strong>, <strong>Lotus
1-2-3</strong> apod. V&nbsp;praxi bylo mo¾né pou¾ít napøíklad kombinace
grafických karet <i>CGA+MDA</i>, <i>EGA+MDA</i> a pozdìji i <i>VGA+MDA</i>.
Vzhledem k&nbsp;tomu, ¾e firma IBM tuto kartu pøestala po nìkolika letech
vyrábìt, pøevzal úlohu sekundární grafické karty její konkurent <i>Hercules</i>
(viz dal¹í èást tohoto seriálu), který kromì zobrazení textového re¾imu
podporoval i re¾im grafický.</p>



<p><a name="k06"></a></p>
<h2>6. Textový re¾im karty MDA</h2>

<p>Pøi zobrazování znakù v&nbsp;textovém re¾imu <strong>80&times;25</strong>
znakù byl ka¾dý znak definovaný v&times;masce 9&times;14 pixelù, co¾ znamená,
¾e rozli¹ení obrazovky bylo rovno 720&times;350 pixelùm. Pomìrnì velké
horizontální rozli¹ení (a tím i velmi dobøe èitelný text) bylo dále pou¾ito a¾
u grafických karet <i>Hercules</i> a <i>VGA</i> o nìkolik let pozdìji (grafické
karty <i>CGA</i> a <i>EGA</i> byly v&nbsp;tomto ohledu zklamáním, zejména pro
u¾ivatele pracující pøevá¾nì v&nbsp;textovém re¾imu). Znaková sada byla na
grafické kartì ulo¾ena v&nbsp;pamìti ROM, co¾ znamená, ¾e se pøi po¾adavku na
zobrazení textù v&nbsp;jazycích s&nbsp;nabodeníèky (jedná se o  prakticky
v¹echny jazyky kromì angliètiny) musela tato pamì» vymìnit za EPROM (typ 2764
pøípadnì 27C64) s&nbsp;vypálenou národní znakovou sadou (pùvodní znaková sada
dodávaná firmou IBM odpovídá kódové stránce 437, tj.&nbsp;jedná se o
&bdquo;roz¹íøenou&ldquo; ASCII tabulku). Ka¾dý znak na obrazovce mìl
k&nbsp;dispozici i svùj atributový byte, ve kterém bylo specifikováno, zda se
má tento znak zobrazit normálnì, zvýraznìnì (vìt¹í intenzita),
s&nbsp;podtr¾ením, inverznì èi zda by mìl blikat; dokonce bylo mo¾né nastavit i
nìkteré kombinace tìchto atributù. Barevné atributy znakù byly pou¾ity (i kdy¾
s&nbsp;ponìkud jiným významem) i u dal¹ích grafických karet na PC.</p>

<p>Kapacita video pamìti na této kartì byla rovna ètyøem kilobajtùm, pøièem¾
2000 bytù bylo zapotøebí pro ulo¾ení v¹ech 80&times;25 znakù a dal¹ích 2000
bytù pro ulo¾ení jejich atributù (z&nbsp;pohledu PC se ukládala v¾dy dvojice
znak-atribut, tj.&nbsp;jednalo se o souvislou oblast pamìti), zbylých 96 bytù
bylo nevyu¾ito. Zajímavé jsou signálové pomìry, kterými se musely øídit
pøipojené monitory. Snímková frekvence byla rovna 50&nbsp;Hz, øádková frekvence
18,432&nbsp;kHz (tj.&nbsp;tato frekvence byla ponìkud vy¹¹í ne¾ u dále
popisované grafické karty <i>CGA</i>). Pøi prvním pohledu na údaj o snímkovém
kmitoètu to mù¾e vypadat tak, ¾e 50&nbsp;Hz je pro práci na poèítaèi naprosto
nedostateèné, musíme si v¹ak uvìdomit, ¾e se ponejvíce pou¾ívalo tmavé pozadí,
na kterém není poblikávání obrazu tak patrné, jako na pozadí svìtlém èi dokonce
bílém.</p>



<p><a name="k07"></a></p>
<h2>7. Grafická karta CGA &ndash; Color Graphics Adapter</h2>

<p>První dostupnou kartou s&nbsp;podporou zobrazování rastrové grafiky na
osobních poèítaèích typu IBM PC byla grafická karta <i>CGA</i>, co¾ je
oznaèení, které vzniklo z&nbsp;celého názvu <i>Color Graphics Adapter</i>. Tato
karta, je¾ byla jako oficiální standard uvedena (spolu s&nbsp;vý¹e popsanou
kartou <i>MDA</i>) v&nbsp;roce 1981, oficiálnì podporuje celkem dva grafické
re¾imy a dva re¾imy textové. Kromì toho je v¹ak pro televizní výstup pou¾it
tøetí grafický re¾im a vhodnou manipulací s&nbsp;øídicími registry lze vytvoøit
i dal¹í textové, grafické èi smí¹ené re¾imy. Vzhledem k&nbsp;omezení tohoto
grafického adaptéru, který byl zpùsobem velmi nízkou øádkovou frekvencí
(pouhých 15,75&nbsp;kHz), bylo mo¾né zobrazit pouze 200 obrazových øádkù, a to
i v&nbsp;textových re¾imech. Z&nbsp;tohoto dùvodu jsou jednotlivé masky znakù
definovány v&nbsp;rastru pouhých 8x8 pixelù, tedy stejnì jako u mnohých
osmibitových poèítaèù (<i>Atari</i>, <i>C64</i> atd.). První znakový re¾im
dokázal zobrazit 40 znakù na textovém øádku, poèet textových øádkù byl roven
25. Ve druhém textovém re¾imu bylo mo¾né zobrazit 80 znakù na øádku. Ka¾dý znak
mohl mít pøiøazenou jednu ze ¹estnácti pøeddefinovaných barev, pozadí znaku
bylo mo¾né zvolit také ze ¹estnácti barev, nebo pouze z&nbsp;osmi barev v
pøípadì, ¾e se jeden bit atributu rezervoval pro blikání. Jak barva popøedí,
tak i barva pozadí byly zapsány do takzvaného <i>atributu</i>, který mìl
velikost jeden byte.</p>

<img src="http://i.iinfo.cz/images/559/pc83-4.png" alt="pc83" height="200" width="320" />
<p><i>Obrázek 4: Grafický re¾im 320&times;200 se ètyømi barvami (King's Quest).
Jak je z&nbsp;tohoto obrázku patrné, je malý poèet barev kompenzován
ditheringem, který ov¹em pøi relativnì malém rozli¹ení situaci snad je¹tì více
zhor¹uje. Paradoxní je, ¾e vìt¹ina roz¹íøených osmibitových poèítaèù doká¾e
&ndash; a to dokonce s&nbsp;polovièní velikostí obrazové pamìti &ndash; tento
obrázek zobrazit mnohem lépe.</i></p>



<p><a name="k08"></a></p>
<h2>8. Grafické re¾imy karty CGA</h2>

<p>Mnohem zajímavìj¹í a flexibilnìj¹í ne¾ textové re¾imy jsou re¾imy grafické,
která grafická karta <i>CGA</i> také podporovala. Oficiálnì jsou podle
dokumentace IBM podporovány pouze dva grafické re¾imy. V&nbsp;prvním grafickém
re¾imu bylo mo¾né zobrazit obraz v&nbsp;rastru 320&times;200 pixelù ve ètyøech
barvách, druhý re¾im mìl rozli¹ení 640&times;200 pixelù dvoubarevnì.
V&nbsp;grafickém re¾imu o rozli¹ení 320&times;200 pixelù mohl ka¾dý pixel
nabývat jedné ze ètyø barev, které byly vybrány z&nbsp;barevné palety. Tato
paleta v¹ak nemohla být libovolná (z&nbsp;pøedchozího textu víme, ¾e
v&nbsp;textovém re¾imu je mo¾né pou¾ít ¹estnáct barev), proto¾e existovaly
pouze dvì fixní barevné palety, pøièem¾ pøi výbìru barev se IBM skuteènì
&bdquo;pøedvedla&ldquo;, proto¾e její nevkusná barevná schémata byla prakticky
nepou¾itelná :-) První paleta fixnì obsahovala barvy zelenou, èervenou a hnìdou
(<i>red</i>, <i>green</i>, <i>brown</i>), druhá paleta barvy azurovou, fialovou
a bílou (<i>cyan</i>, <i>magenta</i>, <i>white</i>). Je patrné, ¾e obì palety
se li¹í pouze pøidáním modré barvové slo¾ky.</p>

<img src="http://i.iinfo.cz/images/559/pc83-5.png" alt="pc83" height="200" width="320" />
<p><i>Obrázek 5: Pro porovnání &ndash; tentý¾ obrázek, ov¹em zobrazený
v&nbsp;grafickém re¾imu 320&times;200 s&nbsp;barvami ¹estnácti na modernìj¹í
grafické kartì.</i></p>

<p>Ètvrtá barva byla pøi práci s&nbsp;BIOSem (pøesnìji øeèeno pøi pou¾ívání
slu¾eb BIOSu, napøíklad pøechodu do grafického re¾imu) v¾dy nastavena na
èernou; ve skuteènosti se v¹ak pøes øídicí registry grafické karty dala tato
barva (jako jediná) nastavit na jednu ze ¹estnácti pøeddefinovaných barev. Tuto
pomìrnì zajímavou mo¾nost v¹ak, vzhledem k&nbsp;nedostupnosti technických
informací, mnoho aplikací nevyu¾ívalo. Kapacita obrazové pamìti byla rovna
320&times;200/8&times;2=16000 bytùm, co¾ znamenalo, ¾e adresovací schopnosti
èipu <i>Motorola MC6845</i> byly vyu¾ity jen èásteènì &ndash; ve skuteènosti se
v&nbsp;grafických re¾imech pou¾ívalo pouze ètrnáct bitù adresy textových øádkù
(viz pøedchozí kapitoly s&nbsp;popisem tohoto èipu), pøièem¾ vý¹ka textových
øádkù byla nastavena na jeden obrazový øádek. Ve druhém grafickém re¾imu o
rozli¹ení 640&times;200 pixelù mohl ka¾dý pixel nabývat pouze jedné ze dvou
barev, které jsou pøi inicializaci tohoto re¾imu pomocí BIOSu nastaveny na
èernou a bílou. S&nbsp;vyu¾itím slu¾eb BIOSu tyto barvy nastavit nelze, ale
pomocí zmìny konfiguraèních registrù je to mo¾né &ndash; lze tak generovat
napøíklad zeleno-èervený obraz èi libovolnou jinou kombinaci ¹estnácti
základních barev. Kapacita obrazové pamìti byla pøi pou¾ití tohoto re¾imu rovna
640&times;200/8=16000 bytùm, tj. stejnì, jako v&nbsp;pøedchozím grafickém
re¾imu.</p>

<img src="http://i.iinfo.cz/images/407/p83-1.gif" alt="p83_" height="200" width="320" />
<p><i>Obrázek 6: Známá hra Arcade Voleyball pro dva hráèe takté¾ vyu¾ívá
ètyøbarevný grafický re¾im karty CGA.</i></p>

<p>Kromì základních grafických re¾imù byly na kartì <i>CGA</i> podporovány i
roz¹iøující (ponìkud nestandardní) grafické re¾imy. Tìmi se v¹ak budeme zabývat
a¾ v&nbsp;následující èásti tohoto seriálu, stejnì jako popisem adresování
pixelù pøi pou¾ití vý¹e zmínìných standardních grafických re¾imù
320&times;200&times;4 a 640&times;200&times;2.</p>

<img src="http://i.iinfo.cz/images/407/p83-3.png" alt="p83_" height="200" width="320" />
<p><i>Obrázek 7: Dal¹í známá CGA hra &ndash; Paratroopers.</i></p>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>Support/peripheral/other chips - 6800 family<br />
<a href="http://www.cpu-world.com/Support/6800.html">http://www.cpu-world.com/Support/6800.html</a>
</li>

<li>Motorola 6845<br />
<a href="http://en.wikipedia.org/wiki/Motorola_6845">http://en.wikipedia.org/wiki/Motorola_6845</a>
</li>

<li>The 6845 Cathode Ray Tube Controller (CRTC)<br />
<a href="http://www.tinyvga.com/6845">http://www.tinyvga.com/6845</a>
</li>

<li>IBM Monochrome Display Adapter<br />
<a href="http://en.wikipedia.org/wiki/Monochrome_Display_Adapter">http://en.wikipedia.org/wiki/Monochrome_Display_Adapter</a>
</li>

<li>Color Graphics Adapter<br />
<a href="http://en.wikipedia.org/wiki/Color_Graphics_Adapter">http://en.wikipedia.org/wiki/Color_Graphics_Adapter</a>
</li>

<li>Wikipedia CZ: Sbìrnice:<br />
<a href="http://cs.wikipedia.org/wiki/Sb%C4%9Brnice">http://cs.wikipedia.org/wiki/Sb%C4%9Brnice</a></li>

<li>Wikipedia EN: Industry Standard Architecture:<br />
<a href="http://en.wikipedia.org/wiki/Industry_Standard_Architecture">http://en.wikipedia.org/wiki/Industry_Standard_Architecture</a></li>

</ol>

<a href="http://i.iinfo.cz/images/407/p83-2.gif"><img src="http://i.iinfo.cz/images/407/p83-2-prev.gif" alt="p83_" height="231" width="370" /></a>
<p><i>Obrázek 8: Kdo uhodne, o kterou aplikaci bì¾ící v&nbsp;grafickém re¾imu
karty CGA o rozli¹ení 640&times;200 pixelù (monochromaticky) se jedná?</i></p>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

