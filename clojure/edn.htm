<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Formát EDN: extensible data notation</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Formát EDN: extensible data notation</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. Formát EDN: extensible data notation</a></p>
<p><a href="#k02">*** 2. Základní datové typy podporované formátem EDN</a></p>
<p><a href="#k03">*** 3. Řetězce versus keywords</a></p>
<p><a href="#k04">*** 4. Kolekce, které lze v&nbsp;EDN použít</a></p>
<p><a href="#k05">*** 5. Pravidla pro porovnávání</a></p>
<p><a href="#k06">*** 6. Štítky jako prostředek pro rozšíření formátu EDN</a></p>
<p><a href="#k07">*** 7. Podpora formátu EDN v&nbsp;různých programovacích jazycích</a></p>
<p><a href="#k08">*** 8. Clojure</a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Formát EDN: extensible data notation</h2>

<p></p>

href="https://pypi.org/project/edn-format/">v&nbsp;Pythonu</a>. Formát <i>EDN</i> neboli <i>Extensible Data Notation</i> vychází ze syntaxe a sémantiky programovacího jazyka Clojure, je tedy založen na <a href="https://en.wikipedia.org/wiki/S-expression">S-výrazech</a> rozšířených o možnost zápisu map (slovníků) a vektorů. Formát <i>EDN</i> je rozšířen primárně v&nbsp;ekosystému jazyka Clojure. Popis tohoto formátu (a tím pádem i popis syntaxe Clojure) naleznete na stránce <a href="https://github.com/edn-format/edn">https://github.com/edn-format/edn</a>.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Základní datové typy podporované formátem EDN</h2>

<p></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Řetězce versus keywords</h2>

<p></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Kolekce, které lze v&nbsp;EDN použít</h2>

<p></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Pravidla pro porovnávání</h2>

<p></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Štítky jako prostředek pro rozšíření formátu EDN</h2>

<p></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Podpora formátu EDN v&nbsp;různých programovacích jazycích</h2>

<p></p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Clojure</h2>

<p></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Python</h2>

<p></p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Go</h2>

<p></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Praktická část</h2>

<p></p>



<p><a name="k12"></a></p>
<h2 id="k12">12. Převod mezi formátem JSON a EDN v&nbsp;Pythonu</h2>

<pre>
<i>#!/usr/bin/env python3</i>
&nbsp;
<i># Converts structured data from JSON format into EDN format.</i>
&nbsp;
import sys
import json
import edn_format
&nbsp;
<i># Check if command line argument is specified (it is mandatory).</i>
if len(sys.argv) &lt; 2:
    print("Usage:")
    print("  json2edn.py input_file.csv")
    print("Example:")
    print("  json2edn.py report.csv")
    sys.exit(1)
&nbsp;
<i># First command line argument should contain name of input JSON file.</i>
input_json = sys.argv[1]
&nbsp;
<i># Try to open the JSON file specified.</i>
with open(input_json) as json_input:
    <i># open the JSON file and parse it</i>
    payload = json.load(json_input)
    <i># dump the parsed data structure into EDN format</i>
    print(edn_format.dumps(payload))
</pre>



<p><a name="k13"></a></p>
<h2 id="k13">13. Převod mezi formátem EDN a JSON v&nbsp;Pythonu</h2>

<pre>
#!/usr/bin/env python3

# Converts structured data from EDN format into JSON format.

import sys
import json
import edn_format

# Check if command line argument is specified (it is mandatory).
if len(sys.argv) < 2:
    print("Usage:")
    print("  edn2json.py input_file.edn")
    print("Example:")
    print("  edn2json.py report.edn")
    sys.exit(1)

# First command line argument should contain name of input EDN file.
filename = sys.argv[1]


# Taken from https://github.com/swaroopch/edn_format/issues/76#issuecomment-749618312
def edn_to_map(x):
    if isinstance(x, edn_format.ImmutableDict):
        return {edn_to_map(k): edn_to_map(v) for k, v in x.items()}
    elif isinstance(x, edn_format.ImmutableList):
        return [edn_to_map(v) for v in x]
    elif isinstance(x, edn_format.Keyword):
        return x.name
    else:
        return x


# Try to open the EDN file specified.
with open(filename, "r") as edn_input:
    # open the EDN file and parse it
    payload = edn_format.loads(edn_input.read())
    print(json.dumps(edn_to_map(payload), indent=2))
</pre>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>

<p>Zdrojové kódy všech dnes popsaných demonstračních příkladů vyvinutých
v&nbsp;programovacím jazyku Clojure, Python i Go, byly uloženy do Git
repositáře, který je dostupný na adrese <a
href="https://github.com/tisnik/presentations">https://github.com/tisnik/presentations</a>:</p>

<table>
<tr><th>#</th><th>Zdrojový kód</th><th>Stručný popis souboru</th><th>Cesta</th></tr>
<tr><td>1</td><td>json2edn.py</td><td>konverze mezi formátem JSON a EDN naprogramovaná v&nbsp;Pythonu</td><td><a href="https://github.com/tisnik/presentations/blob/master/edn/">https://github.com/tisnik/presentations/blob/master/edn/</a></td></tr>
<tr><td>2</td><td>edn2json.py</td><td>konverze mezi formátem EDN a JSON naprogramovaná v&nbsp;Pythonu</td><td><a href="https://github.com/tisnik/presentations/blob/master/edn/">https://github.com/tisnik/presentations/blob/master/edn/</a></td></tr>
<tr><td>3</td><td>json2edn.clj</td><td>konverze mezi formátem JSON a EDN naprogramovaná v&nbsp;Clojure</td><td><a href="https://github.com/tisnik/presentations/blob/master/edn/">https://github.com/tisnik/presentations/blob/master/edn/</a></td></tr>
<tr><td>4</td><td>edn2json.clj</td><td>konverze mezi formátem EDN a JSON naprogramovaná v&nbsp;Clojure</td><td><a href="https://github.com/tisnik/presentations/blob/master/edn/">https://github.com/tisnik/presentations/blob/master/edn/</a></td></tr>
<tr><td>5</td><td></td><td></td><td><a href="https://github.com/tisnik/presentations/blob/master/edn/">https://github.com/tisnik/presentations/blob/master/edn/</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>edn &ndash; extensible data notation<br />
<a href="https://github.com/edn-format/edn">https://github.com/edn-format/edn</a>
</li>

<li>Programming with Data and EDN<br />
<a href="https://docs.datomic.com/cloud/whatis/edn.html">https://docs.datomic.com/cloud/whatis/edn.html</a>
</li>

<li>Video about EDN<br />
<a href="https://docs.datomic.com/cloud/livetutorial/edntutorial.html">https://docs.datomic.com/cloud/livetutorial/edntutorial.html</a>
</li>

<li>(Same) video about EDN on Youtube<br />
<a href="https://www.youtube.com/watch?v=5eKgRcvEJxU">https://www.youtube.com/watch?v=5eKgRcvEJxU</a>
</li>

<li>clojure.edn<br />
<a href="https://clojuredocs.org/clojure.edn">https://clojuredocs.org/clojure.edn</a>
</li>

<li>API for clojure.edn - Clojure v1.10.2 (stable)<br />
<a href="https://clojure.github.io/clojure/clojure.edn-api.html">https://clojure.github.io/clojure/clojure.edn-api.html</a>
</li>

<li>Clojure EDN Walkthrough<br />
<a href="https://www.compoundtheory.com/clojure-edn-walkthrough/">https://www.compoundtheory.com/clojure-edn-walkthrough/</a>
</li>

<li>Články týkající se Pythonu na Rootu<br />
<a href="https://www.root.cz/n/python/">https://www.root.cz/n/python/</a>
</li>

<li>Články týkající se programovacího jazyka Clojure na Rootu<br />
<a href="https://www.root.cz/n/clojure/">https://www.root.cz/n/clojure/</a>
</li>

<li>Seriál Programovací jazyk Go<br />
<a href="https://www.root.cz/serialy/programovaci-jazyk-go/">https://www.root.cz/serialy/programovaci-jazyk-go/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2021</small></p>
</body>
</html>

