<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Programovatelné IO na mikrořadičích RP2040 - praktické použití</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Programovatelné IO na mikrořadičích RP2040 - praktické použití</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. Programovatelné IO na mikrořadičích RP2040 &ndash; praktické použití</a></p>
<p><a href="#k02">*** 2. Získání MicroPythonu pro konkrétní verzi Rapberry Pi Pica</a></p>
<p><a href="#k03">*** 3. Instalace MicroPythonu</a></p>
<p><a href="#k04">*** 4. Spuštění interaktivní smyčky s&nbsp;MicroPythonem na Raspberry Pi Pico</a></p>
<p><a href="#k05">*** 5. Připojení k&nbsp;Raspberry Pi Pico bez administrátorských práv</a></p>
<p><a href="#k06">*** 6. </a></p>
<p><a href="#k07">*** 7. </a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Programovatelné IO na mikrořadičích RP2040 &ndash; praktické použití</h2>

<p><a href="https://www.root.cz/clanky/programovatelne-io-na-mikroradicich-rp2040-v-raspberry-pi-pico/"></a></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Získání MicroPythonu pro konkrétní verzi Rapberry Pi Pica</h2>

<p></p>

https://www.raspberrypi.com/documentation/microcontrollers/micropython.html
https://micropython.org/download/rp2-pico/rp2-pico-latest.uf2
https://micropython.org/download/rp2-pico-w/rp2-pico-w-latest.uf2
https://micropython.org/download/RPI_PICO2/RPI_PICO2-latest.uf2
https://downloads.raspberrypi.com/micropython/mp_firmware_unofficial_latest.uf2

<pre>
$ <strong>wget https://micropython.org/download/rp2-pico-w/rp2-pico-w-latest.uf2</strong>
&nbsp;
HTTP response 302  [https://micropython.org/download/rp2-pico-w/rp2-pico-w-latest.uf2]
Adding URL: https://micropython.org/download/RPI_PICO_W/RPI_PICO_W-latest.uf2
Saving 'rp2-pico-w-latest.uf2'
HTTP response 200  [https://micropython.org/download/RPI_PICO_W/RPI_PICO_W-latest.uf2]
rp2-pico-w-latest.uf 100% [=====================================================================================>]    1.64M    --.-KB/s
                          [Files: 1  Bytes: 1.64M [2.74MB/s] Redirects: 1  Todo: 0  Errors: 0                    ]
</pre>

<p></p>

<pre>
$ <strong>sha256sum rp2-pico-w-latest.uf2</strong>
&nbsp;
bf869821b59a13de3f7fa0c3cc1592f9af4bd41ce571d919c2577d47b6ce540e  rp2-pico-w-latest.uf2
</pre>

<pre>
$ <strong>sha256sum RPI_PICO_W-20241129-v1.24.1.uf2</strong>
&nbsp;
bf869821b59a13de3f7fa0c3cc1592f9af4bd41ce571d919c2577d47b6ce540e  RPI_PICO_W-20241129-v1.24.1.uf2
</pre>



<p><a name="k03"></a></p>
<h2 id="k03">3. </h2>



<p><a name="k04"></a></p>
<h2 id="k04">4. Spuštění interaktivní smyčky s&nbsp;MicroPythonem na Raspberry Pi Pico</h2>

<pre>
[1444104.506249] usb 3-7: new full-speed USB device number 63 using xhci_hcd
[1444104.633015] usb 3-7: New USB device found, idVendor=2e8a, idProduct=0005, bcdDevice= 1.00
[1444104.633032] usb 3-7: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[1444104.633038] usb 3-7: Product: Board in FS mode
[1444104.633042] usb 3-7: Manufacturer: MicroPython
[1444104.633045] usb 3-7: SerialNumber: e661640843610b2c
[1444104.638506] cdc_acm 3-7:1.0: ttyACM0: USB ACM device
</pre>

<pre>
</pre>

sudo minicom -D /dev/ttyACM0

<pre>
Welcome to minicom 2.8
&nbsp;
OPTIONS: I18n 
Compiled on Jan 25 2024, 00:00:00.
Port /dev/ttyACM0, 11:48:15
&nbsp;
Press CTRL-A Z for help on special keys
&nbsp;
MicroPython v1.24.1 on 2024-11-29; Raspberry Pi Pico W with RP2040
Type "help()" for more information.
&gt;&gt;&gt;
</pre>

<pre>
&gt;&gt;&gt; <strong>help()</strong>
</pre>

<p></p>

<pre>
Welcome to MicroPython!

For online docs please visit http://docs.micropython.org/

For access to the hardware use the 'machine' module.  RP2 specific commands
are in the 'rp2' module.

Quick overview of some objects:
  machine.Pin(pin) -- get a pin, eg machine.Pin(0)
  machine.Pin(pin, m, [p]) -- get a pin and configure it for IO mode m, pull mode p
    methods: init(..), value([v]), high(), low(), irq(handler)
  machine.ADC(pin) -- make an analog object from a pin
    methods: read_u16()
  machine.PWM(pin) -- make a PWM object from a pin
    methods: deinit(), freq([f]), duty_u16([d]), duty_ns([d])
  machine.I2C(id) -- create an I2C object (id=0,1)
    methods: readfrom(addr, buf, stop=True), writeto(addr, buf, stop=True)
             readfrom_mem(addr, memaddr, arg), writeto_mem(addr, memaddr, arg)
  machine.SPI(id, baudrate=1000000) -- create an SPI object (id=0,1)
    methods: read(nbytes, write=0x00), write(buf), write_readinto(wr_buf, rd_buf)
  machine.Timer(freq, callback) -- create a software timer object
    eg: machine.Timer(freq=1, callback=lambda t:print(t))

Pins are numbered 0-29, and 26-29 have ADC capabilities
Pin IO modes are: Pin.IN, Pin.OUT, Pin.ALT
Pin pull modes are: Pin.PULL_UP, Pin.PULL_DOWN

Useful control commands:
  CTRL-C -- interrupt a running program
  CTRL-D -- on a blank line, do a soft reset of the board
  CTRL-E -- on a blank line, enter paste mode

For further help on a specific object, type help(obj)
For a list of available modules, type help('modules')
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. Připojení k&nbsp;Raspberry Pi Pico bez administrátorských práv</h2>

<p></p>

<pre>
$ <strong>ls -la /dev/ttyACM0</strong>
&nbsp;
crw-rw----. 1 root dialout 166, 0 Feb  7 12:00 /dev/ttyACM0
</pre>

<pre>
kvm devel ptisnovs
</pre>

<pre>
$ <strong>newgrp dialout</strong>
</pre>

<pre>
$ <strong>groups</strong>
</pre>

<pre>
$ <strong>sudo usermod -a -G dialout $USER</strong>
</pre>

<pre>
dialout kvm devel ptisnovs
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. </h2>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>

<p>Zdrojové kódy všech prozatím popsaných demonstračních příkladů určených pro
MicroPython běžící na čipech RP2040 s&nbsp;architekturou Cortex-M0 byly uloženy
do repositáře dostupného na adrese <a
href="https://github.com/tisnik/most-popular-python-libs">https://github.com/tisnik/most-popular-python-libs</a>:</p>

<table>
<tr><th> #</th><th>Demonstrační příklad</th><th>Stručný popis příkladu</th><th>Cesta</th></tr>
<tr><td> 1</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pio/">https://github.com/tisnik/most-popular-python-libs/blob/master/pio/</a></td></tr>
<tr><td> 2</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pio/">https://github.com/tisnik/most-popular-python-libs/blob/master/pio/</a></td></tr>
<tr><td> 3</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pio/">https://github.com/tisnik/most-popular-python-libs/blob/master/pio/</a></td></tr>
<tr><td> 4</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pio/">https://github.com/tisnik/most-popular-python-libs/blob/master/pio/</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Zápis funkcí obsahujících instrukce Thumb a Thumb-2 v MicroPythonu<br />
<a href="https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu/">https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu/</a>
</li>

<li>Zápis funkcí obsahujících instrukce Thumb a Thumb-2 v MicroPythonu (2)<br />
<a href="https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu-2/">https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu-2/</a>
</li>

<li>Zápis funkcí obsahujících instrukce Thumb a Thumb-2 v MicroPythonu (dokončení)<br />
<a href="https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu-dokonceni/">https://www.root.cz/clanky/zapis-funkci-obsahujicich-instrukce-thumb-a-thumb-2-v-micropythonu-dokonceni/</a>
</li>

<li>Překlad funkcí přímo do nativního kódu MicroPythonem<br />
<a href="https://www.root.cz/clanky/preklad-funkci-primo-do-nativniho-kodu-micropythonem/">https://www.root.cz/clanky/preklad-funkci-primo-do-nativniho-kodu-micropythonem/</a>
</li>

<li>MicroPython ve webovém prohlížeči: lehkotonážní varianta k Pyodide<br />
<a href="https://www.root.cz/clanky/micropython-ve-webovem-prohlizeci-lehkotonazni-varianta-k-pyodide/">https://www.root.cz/clanky/micropython-ve-webovem-prohlizeci-lehkotonazni-varianta-k-pyodide/</a>
</li>

<li>Programmable IO<br />
<a href="https://docs.micropython.org/en/latest/rp2/tutorial/pio.html">https://docs.micropython.org/en/latest/rp2/tutorial/pio.html</a>
</li>

<li>Introduction to the PIO (Programmable Input Output) of the RP2040<br />
<a href="https://tutoduino.fr/en/pio-rp2040-en/">https://tutoduino.fr/en/pio-rp2040-en/</a>
</li>

<li>MicroPython examples: PIO<br />
<a href="https://github.com/raspberrypi/pico-micropython-examples/tree/master/pio">https://github.com/raspberrypi/pico-micropython-examples/tree/master/pio</a>
</li>

<li>PIO: Wikipedia CZ (pozor: jedná se o něco jiného!)<br />
<a href="https://cs.wikipedia.org/wiki/PIO">https://cs.wikipedia.org/wiki/PIO</a>
</li>

<li>RP2040 (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/RP2040">https://en.wikipedia.org/wiki/RP2040</a>
</li>

<li>Maximising MicroPython speed<br />
<a href="https://docs.micropython.org/en/latest/reference/speed_python.html">https://docs.micropython.org/en/latest/reference/speed_python.html</a>
</li>

<li>Online ARM converter<br />
<a href="https://armconverter.com/?disasm">https://armconverter.com/?disasm</a>
</li>

<li>The 3 different code emitters<br />
<a href="https://www.kickstarter.com/projects/214379695/micro-python-python-for-microcontrollers/posts/664832">https://www.kickstarter.com/projects/214379695/micro-python-python-for-microcontrollers/posts/664832</a>
</li>

<li>The 3 different code emitters, part 2<br />
<a href="https://www.kickstarter.com/projects/214379695/micro-python-python-for-microcontrollers/posts/665145">https://www.kickstarter.com/projects/214379695/micro-python-python-for-microcontrollers/posts/665145</a>
</li>

<li>Fast Filters for the Pyboard<br />
<a href="https://github.com/peterhinch/micropython-filters">https://github.com/peterhinch/micropython-filters</a>
</li>

<li>How to load 32 bit constant from assembler with @micropython.asm_thumb<br />
<a href="https://forum.micropython.org/viewtopic.php?f=21&t=12931&sid=25de8871fa9cfcf8cafb6318f9d8ba3a">https://forum.micropython.org/viewtopic.php?f=21&t=12931&sid=25de8871fa9cfcf8cafb6318f9d8ba3a</a>
</li>

<li>Pi pico, micropython.asm_thumb: ADR Rd, &lt;label&gt; and LDR Rd, &lt;label&gt; not implemented?<br />
<a href="https://github.com/orgs/micropython/discussions/12257">https://github.com/orgs/micropython/discussions/12257</a>
</li>

<li>MicroPython documentation<br />
<a href="https://docs.micropython.org/en/latest/index.html">https://docs.micropython.org/en/latest/index.html</a>
</li>

<li>Inline assembler for Thumb2 architectures<br />
<a href="https://docs.micropython.org/en/latest/reference/asm_thumb2_index.html">https://docs.micropython.org/en/latest/reference/asm_thumb2_index.html</a>
</li>

<li>Inline assembler in MicroPython<br />
<a href="https://docs.micropython.org/en/latest/pyboard/tutorial/assembler.html#pyboard-tutorial-assembler">https://docs.micropython.org/en/latest/pyboard/tutorial/assembler.html#pyboard-tutorial-assembler</a>
</li>

<li>MCU market turns to 32-bits and ARM<br />
<a href="http://www.eetimes.com/document.asp?doc_id=1280803">http://www.eetimes.com/document.asp?doc_id=1280803</a>
</li>

<li>Cortex-M0 Processor (ARM Holdings)<br />
<a href="http://www.arm.com/products/processors/cortex-m/cortex-m0.php">http://www.arm.com/products/processors/cortex-m/cortex-m0.php</a>
</li>

<li>Cortex-M0+ Processor (ARM Holdings)<br />
<a href="http://www.arm.com/products/processors/cortex-m/cortex-m0plus.php">http://www.arm.com/products/processors/cortex-m/cortex-m0plus.php</a>
</li>

<li>ARM Processors in a Mixed Signal World<br />
<a href="http://www.eeweb.com/blog/arm/arm-processors-in-a-mixed-signal-world">http://www.eeweb.com/blog/arm/arm-processors-in-a-mixed-signal-world</a>
</li>

<li>RISCové mikroprocesory s&nbsp;komprimovanými instrukčními sadami<br />
<a href="https://www.root.cz/clanky/riscove-mikroprocesory-s-komprimovanymi-instrukcnimi-sadami/">https://www.root.cz/clanky/riscove-mikroprocesory-s-komprimovanymi-instrukcnimi-sadami/</a>
</li>

<li>RISCové mikroprocesory s&nbsp;komprimovanými instrukčními sadami (2)<br />
<a href="https://www.root.cz/clanky/riscove-mikroprocesory-s-komprimovanymi-instrukcnimi-sadami-2/">https://www.root.cz/clanky/riscove-mikroprocesory-s-komprimovanymi-instrukcnimi-sadami-2/</a>
</li>

<li>ARM Architecture (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/ARM_architecture">https://en.wikipedia.org/wiki/ARM_architecture</a>
</li>

<li>Cortex-M0 (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/ARM_Cortex-M0">https://en.wikipedia.org/wiki/ARM_Cortex-M0</a>
</li>

<li>Cortex-M0+ (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/ARM_Cortex-M#Cortex-M0.2B">https://en.wikipedia.org/wiki/ARM_Cortex-M#Cortex-M0.2B</a>
</li>

<li>Improving ARM Code Density and Performance<br />
<a href="New Thumb Extensions to the ARM Architecture Richard Phelan">New Thumb Extensions to the ARM Architecture Richard Phelan</a>
</li>

<li>The ARM Processor Architecture<br />
<a href="http://www.arm.com/products/processors/technologies/instruction-set-architectures.php">http://www.arm.com/products/processors/technologies/instruction-set-architectures.php</a>
</li>

<li>Thumb-2 instruction set<br />
<a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0344c/Beiiegaf.html">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0344c/Beiiegaf.html</a>
</li>

<li>Introduction to ARM thumb<br />
<a href="http://www.eetimes.com/discussion/other/4024632/Introduction-to-ARM-thumb">http://www.eetimes.com/discussion/other/4024632/Introduction-to-ARM-thumb</a>
</li>

<li>ARM, Thumb, and ThumbEE instruction sets<br />
<a href="http://www.keil.com/support/man/docs/armasm/armasm_CEGBEIJB.htm">http://www.keil.com/support/man/docs/armasm/armasm_CEGBEIJB.htm</a>
</li>

<li>An Introduction to ARM Assembly Language<br />
<a href="http://dev.emcelettronica.com/introduction-to-arm-assembly-language">http://dev.emcelettronica.com/introduction-to-arm-assembly-language</a>
</li>

<li>Processors - ARM<br />
<a href="http://www.arm.com/products/processors/index.php">http://www.arm.com/products/processors/index.php</a>
</li>

<li>The ARM Instruction Set<br />
<a href="http://simplemachines.it/doc/arm_inst.pdf">http://simplemachines.it/doc/arm_inst.pdf</a>
</li>

<li>The Thumb instruction set<br />
<a href="http://apt.cs.manchester.ac.uk/ftp/pub/apt/peve/PEVE05/Slides/05_Thumb.pdf">http://apt.cs.manchester.ac.uk/ftp/pub/apt/peve/PEVE05/Slides/05_Thumb.pdf</a>
</li>

<li>Why Learn Assembly Language?<br />
<a href="http://www.codeproject.com/Articles/89460/Why-Learn-Assembly-Language">http://www.codeproject.com/Articles/89460/Why-Learn-Assembly-Language</a>
</li>

<li>Is Assembly still relevant?<br />
<a href="http://programmers.stackexchange.com/questions/95836/is-assembly-still-relevant">http://programmers.stackexchange.com/questions/95836/is-assembly-still-relevant</a>
</li>

<li>Why Learning Assembly Language Is Still a Good Idea<br />
<a href="http://www.onlamp.com/pub/a/onlamp/2004/05/06/writegreatcode.html">http://www.onlamp.com/pub/a/onlamp/2004/05/06/writegreatcode.html</a>
</li>

<li>Assembly language today<br />
<a href="http://beust.com/weblog/2004/06/23/assembly-language-today/">http://beust.com/weblog/2004/06/23/assembly-language-today/</a>
</li>

<li>Assembler: Význam assembleru dnes<br />
<a href="http://www.builder.cz/rubriky/assembler/vyznam-assembleru-dnes-155960cz">http://www.builder.cz/rubriky/assembler/vyznam-assembleru-dnes-155960cz</a>
</li>

<li>Assembler pod Linuxem<br />
<a href="http://phoenix.inf.upol.cz/linux/prog/asm.html">http://phoenix.inf.upol.cz/linux/prog/asm.html</a>
</li>

<li>AT&amp;T Syntax versus Intel Syntax<br />
<a href="https://www.sourceware.org/binutils/docs-2.12/as.info/i386-Syntax.html">https://www.sourceware.org/binutils/docs-2.12/as.info/i386-Syntax.html</a>
</li>

<li>Linux Assembly website<br />
<a href="http://asm.sourceforge.net/">http://asm.sourceforge.net/</a>
</li>

<li>Raspberry Pi Pico Variants &ndash; A Detailed Comparison<br />
<a href="https://circuitdigest.com/article/raspberry-pi-pico-variants-comparison">https://circuitdigest.com/article/raspberry-pi-pico-variants-comparison</a>
</li>

<li>Raspberry Pi Pico 2 vs Original Pico: What’s New?<br />
<a href="https://www.digikey.cz/en/maker/blogs/2024/raspberry-pi-pico-2-vs-original-pico-whats-new">https://www.digikey.cz/en/maker/blogs/2024/raspberry-pi-pico-2-vs-original-pico-whats-new</a>
</li>

<li>pio-uart<br />
<a href="https://github.com/Sympatron/pio-uart">https://github.com/Sympatron/pio-uart</a>
</li>

<li>Datasheet čipu RP2040<br />
<a href="https://datasheets.raspberrypi.com/rp2040/rp2040-datasheet.pdf">https://datasheets.raspberrypi.com/rp2040/rp2040-datasheet.pdf</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="https://github.com/tisnik/">Pavel Tišnovský</a> &nbsp; 2024</small></p>
</body>
</html>

