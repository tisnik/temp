<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>PDM: modernÃ­ sprÃ¡vce balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­ Pythonu</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>PDM: modernÃ­ sprÃ¡vce balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­ Pythonu</h1>

<h3>Pavel TiÅ¡novskÃ½</h3>

<p></p>

<h1>ÃšvodnÃ­k</h1>

<p>Dnes se seznÃ¡mÃ­me se sprÃ¡vcem balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­ Pythonu, jenÅ¾ se jmenuje PDM. ZajÃ­mavÃ© je, Å¾e PDM umoÅ¾Åˆuje jak prÃ¡ci s virtuÃ¡lnÃ­m prostÅ™edÃ­m, tak i s lokÃ¡lnÃ­ instalacÃ­ balÃ­ÄkÅ¯ dle PEP-582. NavÃ­c PDM pracuje s projektovÃ½mi soubory pyproject.toml definovanÃ½mi v PEP-621.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. PDM: modernÃ­ sprÃ¡vce balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­ Pythonu</a></p>
<p><a href="#k02">2. Instalace nÃ¡stroje PDM</a></p>
<p><a href="#k03">3. PrvnÃ­ spuÅ¡tÄ›nÃ­ nÃ¡stroje PDM</a></p>
<p><a href="#k04">4. VytvoÅ™enÃ­ kostry projektu bez dalÅ¡Ã­ch zÃ¡vislostÃ­</a></p>
<p><a href="#k05">5. Struktura novÄ› vytvoÅ™enÃ©ho projektu, soubor <strong>pyproject.toml</strong></a></p>
<p><a href="#k06">6. PÅ™idÃ¡nÃ­ dalÅ¡Ã­ho balÃ­Äku do projektu, zobrazenÃ­ grafu zÃ¡vislostÃ­</a></p>
<p><a href="#k07">7. Soubor <strong>pdm.lock</strong></a></p>
<p><a href="#k08">8. MalÃ¡ odboÄka: vliv zvolenÃ© minimÃ¡lnÃ­ verze Pythonu</a></p>
<p><a href="#k09">9. Projekt s&nbsp;vÃ­ce zÃ¡vislostmi</a></p>
<p><a href="#k10">10. NovÃ¡ podoba souboru <strong>pdm.lock</strong></a></p>
<p><a href="#k11">11. ExplicitnÃ­ specifikace verze balÃ­Äku</a></p>
<p><a href="#k12">12. Strategie vÃ½bÄ›ru verzÃ­ balÃ­Äku</a></p>
<p><a href="#k13">13. Instalace balÃ­ÄkÅ¯ pouÅ¾Ã­vanÃ½ch pÅ™i vÃ½voji, testovÃ¡nÃ­ a ladÄ›nÃ­</a></p>
<p><a href="#k14">14. SprÃ¡va virtuÃ¡lnÃ­ch prostÅ™edÃ­ z&nbsp;PDM</a></p>
<p><a href="#k15">15. VyuÅ¾itÃ­ adresÃ¡Å™ovÃ© struktury dle PEP-582 namÃ­sto virtuÃ¡lnÃ­ho prostÅ™edÃ­</a></p>
<p><a href="#k16">16. NovÃ¡ instalace vÅ¡ech balÃ­ÄkÅ¯ (PEP-582)</a></p>
<p><a href="#k17">17. Specifikace novÃ½ch pÅ™Ã­kazÅ¯ spouÅ¡tÄ›nÃ½ch pÅ™es <strong>pdm run</strong></a></p>
<p><a href="#k18">18. SpouÅ¡tÄ›nÃ­ jednotkovÃ½ch testÅ¯ pÅ™es <strong>pdm run</strong></a></p>
<p><a href="#k19">19. RepositÃ¡Å™ s&nbsp;demonstraÄnÃ­mi pÅ™Ã­klady</a></p>
<p><a href="#k20">20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. PDM: modernÃ­ sprÃ¡vce balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­ Pythonu</h2>

<p>V&nbsp;souÄasnosti pro ekosystÃ©m Pythonu existuje a je pouÅ¾Ã­vÃ¡no hned
nÄ›kolik sprÃ¡vcÅ¯ balÃ­ÄkÅ¯ a virtuÃ¡lnÃ­ch prostÅ™edÃ­. PravdÄ›podobnÄ› nejznÃ¡mÄ›jÅ¡Ã­ je
projekt <a href="https://pipenv.pypa.io/en/latest/index.html">Pipenv</a>, kterÃ½
kombinuje moÅ¾nosti <i>pip</i> a <i>venv</i>. OvÅ¡em existujÃ­ i dalÅ¡Ã­ nÃ¡stroje,
napÅ™Ã­klad <a href="https://python-poetry.org/">Poetry</a> (ten pouÅ¾Ã­vÃ¡
<strong>pyproject.toml</strong>, ovÅ¡em nenÃ­ zcela kompatibilnÃ­ s&nbsp;<a
href="https://peps.python.org/pep-0621/">PEP-621</a>) nebo <a
href="https://hatch.pypa.io/latest/">Hatch</a> (ten uÅ¾ je s&nbsp;PEP-621
kompatibilnÃ­). Dnes se ovÅ¡em seznÃ¡mÃ­me s&nbsp;jinÃ½m sprÃ¡vcem, kterÃ½ se jmenuje
<i>PDM</i>. ZajÃ­mavÃ© je, Å¾e <i>PDM</i> umoÅ¾Åˆuje jak prÃ¡ci s&nbsp;virtuÃ¡lnÃ­m
prostÅ™edÃ­m, tak i s&nbsp;lokÃ¡lnÃ­ instalacÃ­ balÃ­Äku podle <a
href="https://peps.python.org/pep-0582/">PEP-582</a> (coÅ¾ je dnes oficiÃ¡lnÄ›
&bdquo;zavrÅ¾enÃ¡&ldquo;, ovÅ¡em stÃ¡le uÅ¾iteÄnÃ¡ vlastnost). RepositÃ¡Å™ projektu
<i>PDM</i> naleznete na adrese <a
href="https://github.com/pdm-project/pdm">https://github.com/pdm-project/pdm</a>.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Instalace nÃ¡stroje PDM</h2>

<p>Existuje hned nÄ›kolik variant instalace nÃ¡stroje <i>PDM</i>. Jedna
z&nbsp;nabÃ­zenÃ½ch moÅ¾nostÃ­ spoÄÃ­vÃ¡ ve staÅ¾enÃ­ instalaÄnÃ­ho skriptu
(naprogramovanÃ©ho v&nbsp;Pythonu) z&nbsp;webovÃ© strÃ¡nky projektu <i>PDM</i> a
v&nbsp;jeho nÃ¡slednÃ©m spuÅ¡tÄ›nÃ­. Tuto operaci lze provÃ©st jedinÃ½m pÅ™Ã­kazem:</p>

<pre>
$ <strong>curl -sSL https://pdm.fming.dev/install-pdm.py | python3 -</strong>
</pre>

<p>LepÅ¡Ã­ je vÅ¡ak si nejprve ovÄ›Å™it kontrolnÃ­ souÄet stahovanÃ©ho instalaÄnÃ­ho
skriptu. Postup je snadnÃ½ a nalezneme ho na strÃ¡nkÃ¡ch samotnÃ©ho projektu
PDM:</p>

<pre>
$ <strong>curl -sSLO https://pdm.fming.dev/install-pdm.py</strong>
$ <strong>curl -sSL https://pdm.fming.dev/install-pdm.py.sha256 | shasum -a 256 -c -</strong>
$ <strong>python3 install-pdm.py [options]</strong>
</pre>

<p>JelikoÅ¾ je balÃ­Äek <i>PDM</i> dostupnÃ½ i na <a
href="https://pypi.org/project/pdm/">PyPi</a>, je jeho instalace moÅ¾nÃ¡ i pÅ™es
nÃ¡stroj <strong>pip</strong> resp.&nbsp;<strong>pip3</strong>. PodÃ­vejme se,
jak mÅ¯Å¾e tato forma instalace vypadat v&nbsp;praxi. Instalaci mÅ¯Å¾eme provÃ©st
buÄ pro celÃ½ systÃ©m (PDM bude dostupnÃ½ pro vÅ¡echny uÅ¾ivatele) nebo pouze pro
aktuÃ¡lnÄ› pÅ™ihlÃ¡Å¡enÃ©ho uÅ¾ivatele:</p>

<pre>
$ <strong>pip3 install --user pdm</strong>
</pre>

<p>Jak je z&nbsp;nÃ¡sledujÃ­cÃ­ho vÃ½pisu provÃ¡dÄ›nÃ½ch operacÃ­ patrnÃ©, zÃ¡visÃ­
<i>PDM</i> na pomÄ›rnÄ› velkÃ©m mnoÅ¾stvÃ­ dalÅ¡Ã­ch balÃ­ÄkÅ¯. OvÅ¡em celkovÃ¡ velikost
nainstalovanÃ½ch souborÅ¯ nepÅ™esÃ¡hne nÄ›kolik megabajtÅ¯:</p>

<pre>
Collecting pdm
  Downloading pdm-2.9.3-py3-none-any.whl (238 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 238 kB 2.1 MB/s 
Collecting resolvelib&gt;=1.0.1
  Downloading resolvelib-1.0.1-py2.py3-none-any.whl (17 kB)
Collecting pyproject-hooks
  Downloading pyproject_hooks-1.0.0-py3-none-any.whl (9.3 kB)
Collecting unearth&gt;=0.10.0
  Downloading unearth-0.11.1-py3-none-any.whl (41 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 41 kB 585 kB/s 
Collecting importlib-metadata&gt;=3.6; python_version &lt; "3.10"
  Downloading importlib_metadata-6.8.0-py3-none-any.whl (22 kB)
Collecting findpython&lt;1.0.0a0,&gt;=0.4.0
  Downloading findpython-0.4.0-py3-none-any.whl (20 kB)
Collecting rich&gt;=12.3.0
  Downloading rich-13.6.0-py3-none-any.whl (239 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 239 kB 11.2 MB/s 
Collecting requests-toolbelt
  Downloading requests_toolbelt-1.0.0-py2.py3-none-any.whl (54 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 54 kB 1.5 MB/s 
Collecting cachecontrol[filecache]&gt;=0.13.0
  Downloading cachecontrol-0.13.1-py3-none-any.whl (22 kB)
Collecting installer&lt;0.8,&gt;=0.7
  Downloading installer-0.7.0-py3-none-any.whl (453 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 453 kB 2.4 MB/s 
Collecting python-dotenv&gt;=0.15
  Downloading python_dotenv-1.0.0-py3-none-any.whl (19 kB)
Requirement already satisfied: blinker in /usr/lib/python3/dist-packages (from pdm) (1.4)
Requirement already satisfied: importlib-resources&gt;=5; python_version &lt; "3.9" in ./.local/lib/python3.8/site-packages (from pdm) (6.1.0)
Requirement already satisfied: tomli&gt;=1.1.0; python_version &lt; "3.11" in ./.local/lib/python3.8/site-packages (from pdm) (2.0.1)
Requirement already satisfied: certifi in /usr/lib/python3/dist-packages (from pdm) (2019.11.28)
Collecting shellingham&gt;=1.3.2
  Downloading shellingham-1.5.3-py2.py3-none-any.whl (9.7 kB)
Collecting tomlkit&lt;1,&gt;=0.11.1
  Downloading tomlkit-0.12.1-py3-none-any.whl (37 kB)
Collecting platformdirs
  Downloading platformdirs-3.11.0-py3-none-any.whl (17 kB)
Collecting virtualenv&gt;=20
  Downloading virtualenv-20.24.5-py3-none-any.whl (3.7 MB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3.7 MB 6.6 MB/s 
Collecting packaging!=22.0,&gt;=20.9
  Downloading packaging-23.2-py3-none-any.whl (53 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 53 kB 1.9 MB/s 
Collecting requests&gt;=2.25
  Downloading requests-2.31.0-py3-none-any.whl (62 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 62 kB 1.2 MB/s 
Requirement already satisfied: zipp&gt;=0.5 in ./.local/lib/python3.8/site-packages (from importlib-metadata&gt;=3.6; python_version &lt; "3.10"-&gt;pdm) (3.17.0)
Collecting markdown-it-py&gt;=2.2.0
  Downloading markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 87 kB 2.6 MB/s 
Requirement already satisfied: typing-extensions&lt;5.0,&gt;=4.0.0; python_version &lt; "3.9" in ./.local/lib/python3.8/site-packages (from rich&gt;=12.3.0-&gt;pdm) (4.7.1)
Collecting pygments&lt;3.0.0,&gt;=2.13.0
  Downloading Pygments-2.16.1-py3-none-any.whl (1.2 MB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.2 MB 8.9 MB/s 
Collecting msgpack&gt;=0.5.2
  Downloading msgpack-1.0.7-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (534 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 534 kB 6.7 MB/s 
Collecting filelock&gt;=3.8.0; extra == "filecache"
  Downloading filelock-3.12.4-py3-none-any.whl (11 kB)
Collecting distlib&lt;1,&gt;=0.3.7
  Downloading distlib-0.3.7-py2.py3-none-any.whl (468 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 468 kB 5.7 MB/s 
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/lib/python3/dist-packages (from requests&gt;=2.25-&gt;unearth&gt;=0.10.0-&gt;pdm) (1.25.8)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/lib/python3/dist-packages (from requests&gt;=2.25-&gt;unearth&gt;=0.10.0-&gt;pdm) (2.8)
Collecting charset-normalizer&lt;4,&gt;=2
  Downloading charset_normalizer-3.3.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (137 kB)
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 137 kB 14.2 MB/s 
Collecting mdurl~=0.1
  Downloading mdurl-0.1.2-py3-none-any.whl (10.0 kB)
Installing collected packages: resolvelib, pyproject-hooks, packaging, charset-normalizer, requests, unearth, importlib-metadata, findpython, mdurl, markdown-it-py, pygments, rich, requests-toolbelt, msgpack, filelock, cachecontrol, installer, python-dotenv, shellingham, tomlkit, platformdirs, distlib, virtualenv, pdm
Successfully installed cachecontrol-0.13.1 charset-normalizer-3.3.0 distlib-0.3.7 filelock-3.12.4 findpython-0.4.0 importlib-metadata-6.8.0 installer-0.7.0 markdown-it-py-3.0.0 mdurl-0.1.2 msgpack-1.0.7 packaging-23.2 pdm-2.9.3 platformdirs-3.11.0 pygments-2.16.1 pyproject-hooks-1.0.0 python-dotenv-1.0.0 requests-2.31.0 requests-toolbelt-1.0.0 resolvelib-1.0.1 rich-13.6.0 shellingham-1.5.3 tomlkit-0.12.1 unearth-0.11.1 virtualenv-20.24.5
</pre>



<p><a name="k03"></a></p>
<h2 id="k03">3. PrvnÃ­ spuÅ¡tÄ›nÃ­ nÃ¡stroje PDM</h2>

<p>Po doufejme Å¾e ÃºspÄ›Å¡nÃ© instalaci by mÄ›lo bÃ½t moÅ¾nÃ© spustit pÅ™Ã­kaz
<strong>pdm</strong>. NejnovÄ›jÅ¡Ã­ a v&nbsp;dobÄ› vydÃ¡nÃ­ ÄlÃ¡nku aktuÃ¡lnÃ­ verze PDM
je 2.9.3, coÅ¾ si mÅ¯Å¾eme velmi snadno ovÄ›Å™it (ostatnÄ› tato verze se vypisovala
jiÅ¾ pÅ™i instalaci balÃ­ÄkÅ¯ provedenÃ© v&nbsp;rÃ¡mci pÅ™edchozÃ­ kapitoly):</p>

<pre>
$ <strong>pdm --version</strong>
&nbsp;
PDM, version 2.9.3
&nbsp;
Usage: pdm [-h] [-V] [-c CONFIG] [-v] [-I] [--pep582 [SHELL]] ...
&nbsp;
    ____  ____  __  ___
   / __ \/ __ \/  |/  /
  / /_/ / / / / /|_/ /
 / ____/ /_/ / /  / /
/_/   /_____/_/  /_/
&nbsp;
Options:
  -h, --help            Show this help message and exit.
  -V, --version         Show the version and exit
  -c CONFIG, --config CONFIG
                        Specify another config file path [env var:
                        PDM_CONFIG_FILE]
  -v, --verbose         Use `-v` for detailed output and `-vv` for more
                        detailed
  -I, --ignore-python   Ignore the Python path saved in .pdm-python. [env var:
                        PDM_IGNORE_SAVED_PYTHON]
  --pep582 [SHELL]      Print the command line to be eval'd by the shell
&nbsp;
Commands:
  add                   Add package(s) to pyproject.toml and install them
  build                 Build artifacts for distribution
  cache                 Control the caches of PDM
  completion            Generate completion scripts for the given shell
  config                Display the current configuration
  export                Export the locked packages set to other formats
  fix                   Fix the project problems according to the latest
                        version of PDM
  import                Import project metadata from other formats
  info                  Show the project information
  init                  Initialize a pyproject.toml for PDM
  install               Install dependencies from lock file
  list                  List packages installed in the current working set
  lock                  Resolve and lock dependencies
  publish               Build and publish the project to PyPI
  remove                Remove packages from pyproject.toml
  run                   Run commands or scripts with local packages loaded
  search                Search for PyPI packages
  self (plugin)         Manage the PDM program itself (previously known as
                        plugin)
  show                  Show the package information
  sync                  Synchronize the current working set with lock file
  update                Update package(s) in pyproject.toml
  use                   Use the given python version or path as base
                        interpreter
  venv                  Virtualenv management
</pre>



<p><a name="k04"></a></p>
<h2 id="k04">4. VytvoÅ™enÃ­ kostry projektu bez dalÅ¡Ã­ch zÃ¡vislostÃ­</h2>

<p>PodÃ­vejme se nynÃ­, jakÃ½m zpÅ¯sobem mÅ¯Å¾eme s&nbsp;vyuÅ¾itÃ­m nÃ¡stroje PDM
vytvoÅ™it kostru jednoduchÃ©ho PythonovskÃ©ho projektu. PrvnÃ­ projekt nebude mÃ­t
Å¾Ã¡dnÃ© zÃ¡vislosti, ovÅ¡em jeho ostatnÃ­ nastavenÃ­ a metadata budou odpovÃ­dat
skuteÄnÃ©mu projektu.</p>

<p>Kostru projektu lze vytvoÅ™it interaktivnÄ›, tj.&nbsp;odpovÄ›dmi na nÄ›kolik
otÃ¡zek, kterÃ© PDM poloÅ¾Ã­. Pro tento ÃºÄel v&nbsp;novÃ©m (prÃ¡zdnÃ©m) adresÃ¡Å™i
zavolÃ¡me nÃ¡sledujÃ­cÃ­ pÅ™Ã­kaz:</p>

<pre>
$ <strong>pdm init</strong>
</pre>

<p>NÃ¡stroj PDM se v&nbsp;prvnÃ­m kroku pokusÃ­ nalÃ©zt vÅ¡echny nainstalovanÃ© verze
Pythonu a nÃ¡slednÄ› se zeptÃ¡, na kterÃ© verzi bude projekt postaven
(resp.&nbsp;na kterÃ© bude zÃ¡vislÃ½). Na mÃ©m novÄ› nainstalovanÃ©m systÃ©mu je
nalezen pouze Python 3.11 (jedinÃ¡ verze), kterou ovÅ¡em PDM kvÅ¯li pouÅ¾itÃ­
symlinkÅ¯ nabÃ­dne jako tÅ™i nezÃ¡vislÃ© verze:</p>

<pre>
Creating a pyproject.toml for PDM...
Please enter the Python interpreter to use
0. /usr/bin/python (3.11)
1. /usr/bin/python3.11 (3.11)
2. /usr/bin/python3 (3.11)
Please select (0): <strong>2</strong>
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: skuteÄnÄ› se jednÃ¡ o jedinou instalaci
Pythonu, o ÄemÅ¾ se ostatnÄ› mÅ¯Å¾eme snadno pÅ™esvÄ›dÄit pohledem na vÅ¡echny tÅ™i
soubory zmÃ­nÄ›nÃ© v&nbsp;prvnÃ­m dotazu (jednÃ¡ se o dvojici symlinkÅ¯ na stejnÃ½
skript):</div></p>

<pre>
<strong>$ ls -l /usr/bin/python*</strong>
&nbsp;
lrwxrwxrwx. 1 root root     9 Aug 28 02:00 /usr/bin/python -&gt; ./python3
lrwxrwxrwx. 1 root root    10 Aug 28 02:00 /usr/bin/python3 -&gt; python3.11
-rwxr-xr-x. 1 root root 16040 Aug 28 02:00 /usr/bin/python3.11
</pre>

<p>Mimochodem: na systÃ©mu s&nbsp;Pythonem 2.x i Pythonem 3.x mÅ¯Å¾e vÃ½bÄ›r vypadat
napÅ™Ã­klad nÃ¡sledovnÄ›:</p>

<pre>
0. /usr/bin/python (3.8)
1. /usr/bin/python3.8 (3.8)
2. /usr/bin/python2.7 (2.7)
</pre>

<p>DÃ¡le se PDM zeptÃ¡, zda se mÃ¡ vytvoÅ™it virtuÃ¡lnÃ­ prostÅ™edÃ­ Pythonu
(<i>virtualenv</i>). ProzatÃ­m odpovÃ­me, Å¾e ano, ovÅ¡em pozdÄ›ji se vrÃ¡tÃ­me
k&nbsp;alternativÄ›:</p>

<pre>
Would you like to create a virtualenv with /usr/bin/python3? [y/n] (y): <strong>y</strong>
Virtualenv is created successfully at /home/ptisnovs/project1/.venv
</pre>

<p>DalÅ¡Ã­ otÃ¡zka se tÃ½kÃ¡ struktury projektovÃ©ho souboru. OdpovÃ­me, Å¾e se
prozatÃ­m nebude jednat o (instalovatelnou) knihovnu:</p>

<pre>
Is the project a library that is installable?
If yes, we will need to ask a few more questions to include the project name and
build backend [y/n] (n): <strong>n</strong>
</pre>

<p>NÃ¡sledujÃ­ otÃ¡zky tÃ½kajÃ­cÃ­ se licence a autora aplikace Äi knihovny:</p>

<pre>
License(SPDX name) (MIT): <strong>MIT</strong>
Author name (): <strong>Pavel</strong>
Author email (): <strong>pavel@nowhere.com</strong>
</pre>

<p>A koneÄnÄ› musÃ­me odpovÄ›dÄ›t na otÃ¡zku, jakÃ¡ minimÃ¡lnÃ­ verze Pythonu bude
vyÅ¾adovÃ¡na. PotÃ© jiÅ¾ bude vytvoÅ™ena kostra projektu:</p>

<pre>
Python requires('*' to allow any) (&gt;=3.11): &gt;=<strong>3.7</strong>
Project is initialized successfully
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: v&nbsp;pÅ™Ã­padÄ›, Å¾e pouÅ¾Ã­vÃ¡te nÃ¡stroj
<strong>pyenv</strong> pro sprÃ¡vu verzÃ­ Pythonu, budou i tyto verze nÃ¡strojem
<i>PDM</i> detekovÃ¡ny a mÅ¯Å¾ete si z&nbsp;nich vybrat konkrÃ©tnÃ­ poÅ¾adovanou
verzi.</div></p>

*** image ***
<p><i>ObrÃ¡zek 1: VytvoÅ™enÃ­ kostry projektu.</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Struktura novÄ› vytvoÅ™enÃ©ho projektu, soubor <strong>pyproject.toml</strong></h2>

<p>AdresÃ¡Å™ s&nbsp;kostrou projektu, kterÃ½ byl vytvoÅ™en po upÅ™esÅˆujÃ­cÃ­ch
dotazech, o nichÅ¾ jsme se zmÃ­nili <a href="#k04">ve ÄtvrtÃ© kapitole</a>, by mÄ›l
vypadat nÃ¡sledovnÄ›:</p>

<pre>
.
â”œâ”€â”€ __pycache__
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ example_package
â”‚Â Â      â”œâ”€â”€ __init__.py
â”‚Â Â      â””â”€â”€ __pycache__
â””â”€â”€ tests
    â”œâ”€â”€ __init__.py
    â””â”€â”€ __pycache__
&nbsp;
7 directories, 4 files
</pre>

<p>Projekt obsahuje pÅ™edevÅ¡Ã­m soubor <strong>pyproject.toml</strong>,
v&nbsp;nÄ›mÅ¾ jsou zapsÃ¡na metadata o projektu, kterÃ¡ odpovÃ­dajÃ­ specifikaci <a
href="https://peps.python.org/pep-0621/">PEP 621 &ndash; Storing project
metadata in pyproject.toml</a>. Pokud jste na otÃ¡zky ve ÄtvrtÃ© kapitole
odpovÃ­dali stejnÄ› jako autor ÄlÃ¡nku, mÄ›l by projektovÃ½ soubor mÃ­t nÃ¡sledujÃ­cÃ­
obsah:</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
dependencies = []
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: formÃ¡t <i>TOML</i> (neboli <i>Tom's
Obvious, Minimal Language</i>) sice zdÃ¡nlivÄ› (alespoÅˆ na prvnÃ­ pohled) vychÃ¡zÃ­
ze souborÅ¯ typu INI, ovÅ¡em ve skuteÄnosti se jednÃ¡ o odliÅ¡nÃ½, v&nbsp;mnoha
ohledech vylepÅ¡enÃ½ a pÅ™edevÅ¡Ã­m promyÅ¡lenÃ½ formÃ¡t, v&nbsp;nÄ›mÅ¾ byly odstranÄ›ny
prakticky vÅ¡echny nevÃ½hody INI a pÅ™itom byla zachovÃ¡na Äitelnost a snadnost
Ãºprav. I proto se za poslednÃ­ch nÄ›kolik let stal velmi populÃ¡rnÃ­. Ve formÃ¡tu
TOML jsou kromÄ› Å™etÄ›zcÅ¯, celÃ½ch ÄÃ­sel a seznamÅ¯ podporovÃ¡ny i dalÅ¡Ã­ datovÃ© typy
&ndash; pravdivostnÃ­ typ, ÄÃ­sla s&nbsp;plovoucÃ­ Å™Ã¡dovou ÄÃ¡rkou a zejmÃ©na pak,
coÅ¾ je v&nbsp;praxi velmi uÅ¾iteÄnÃ©, typ &bdquo;datum+Äas&ldquo; neboli ÄasovÃ©
razÃ­tko.</div></p>

<p>DÃ¡le v&nbsp;projektu najdeme obligÃ¡tnÃ­ soubor <strong>.gitignore</strong> a
taktÃ©Å¾ soubor <strong>.pdm-python</strong> s&nbsp;odkazem na interpret Pythonu,
kterÃ½ se bude pouÅ¾Ã­vat:</p>

<pre>
/home/ptisnovs/pdb/project1/.venv/bin/python
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: tento soubor obsahuje cestu platnou
pouze na konkrÃ©tnÃ­m poÄÃ­taÄi a pro konkrÃ©tnÃ­ho uÅ¾ivatele, a tudÃ­Å¾ by nemÄ›l bÃ½t
souÄÃ¡stÃ­ repositÃ¡Å™e (tedy nemÄ›l by se uklÃ¡dat do Gitu atd.). I proto je ostatnÄ›
soubor <strong>.pdm-python</strong> zmÃ­nÄ›n v&nbsp;souboru
<strong>.gitignore</strong>.</div></p>

<p>DalÅ¡Ã­ informace o vytvoÅ™enÃ©m projektu lze zÃ­skat tÃ­mto pÅ™Ã­kazem:</p>

<pre>
$ <strong>pdm info</strong>
</pre>

<p>VÃ½sledek by mohl vypadat nÃ¡sledovnÄ› (cesty se pochopitelnÄ› budou liÅ¡it):</p>

<pre>
PDM version:
  2.9.3
Python Interpreter:
  /home/ptisnovs/project1/.venv/bin/python (3.11)
Project Root:
  /home/ptisnovs/project1
Local Packages:
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: prÃ¡vÄ› popsanÃ½ projekt naleznete
v&nbsp;GitHub repositÃ¡Å™i na adrese <a
href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project1/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project1/</a>.</div></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. PÅ™idÃ¡nÃ­ dalÅ¡Ã­ho balÃ­Äku do projektu, zobrazenÃ­ grafu zÃ¡vislostÃ­</h2>

<p>NynÃ­ se pokusme do projektu pÅ™idat nÄ›jakou zÃ¡vislost, tj.&nbsp;knihovnu,
kterou budeme v&nbsp;projektu pouÅ¾Ã­vat. Tato operace je snadnÃ¡, protoÅ¾e nÃ¡m
postaÄuje pouÅ¾Ã­t pÅ™Ã­kaz <strong>pdm add</strong>, kterÃ©mu pÅ™edÃ¡me nÃ¡zev
knihovny a popÅ™.&nbsp;i poÅ¾adovanou verzi. Pokud verzi neuvedeme, bude pouÅ¾ita
poslednÃ­ dostupnÃ¡ validnÃ­ verze (ovÅ¡em viz dalÅ¡Ã­ text &ndash; jeÅ¡tÄ› je totiÅ¾
moÅ¾nÃ© specifikovat takzvanou strategii):</p>

<pre>
$ <strong>pdm add sympy</strong>
</pre>

<pre>
Adding packages to default dependencies: sympy
ğŸ”’ Lock successful
Changes are written to pyproject.toml.
All packages are synced to date, nothing to do.
&nbsp;
ğŸ‰ All complete!
</pre>

<p>Po provedenÃ­ tÃ©to operace se podÃ­vejme do projektovÃ©ho souboru
<strong>pyproject.toml</strong>. Objevila se v&nbsp;nÄ›m novÃ¡ sekce nazvanÃ¡
pÅ™Ã­znaÄnÄ› <strong>dependencies</strong>:</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
dependencies = [
    "sympy&gt;=1.10.1",
]
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
</pre>

<p>Seznam zÃ¡vislostÃ­ ovÅ¡em mÅ¯Å¾eme zÃ­skat i z&nbsp;pÅ™Ã­kazovÃ©ho Å™Ã¡dku bez
nutnosti znÃ¡t strukturu projektovÃ©ho souboru:</p>

<pre>
$ <strong>pdm list</strong>
</pre>

<p>VÃ½sledek bude obsahovat i tranzitivnÃ­ zÃ¡vislost &ndash; knihovnu
<strong>mpmath</strong>, kterou <strong>sympy</strong> pro svoji Äinnost
vyÅ¾aduje:</p>

<pre>
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ name   â”‚ version â”‚ location â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ mpmath â”‚ 1.3.0   â”‚          â”‚
â”‚ sympy  â”‚ 1.10.1  â”‚          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
</pre>

<p>PÅ™Ã­mÃ© i tranzitivnÃ­ zÃ¡vislosti si mÅ¯Å¾eme nechat zobrazit i formou stromovÃ©
struktury, coÅ¾ je ukÃ¡zÃ¡no na dalÅ¡Ã­m pÅ™Ã­kladu:</p>

<pre>
$ <strong>pdm list --graph</strong>
</pre>

<p>S&nbsp;vÃ½sledkem:</p>

<pre>
sympy 1.10.1 [ required: &gt;=1.10.1 ]
â””â”€â”€ mpmath 1.3.0 [ required: &gt;=0.19 ]
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: prÃ¡vÄ› popsanÃ½ projekt naleznete
v&nbsp;GitHub repositÃ¡Å™i na adrese <a
href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project2/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project2/</a>.</div></p>

*** image ***
<p><i>ObrÃ¡zek 2: VÃ½sledek pÅ™Ã­kazu <strong>pdm list</strong> na terminÃ¡lu, kterÃ½
dokÃ¡Å¾e zobrazovat obarvenÃ½ text.</i></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Soubor <strong>pdm.lock</strong></h2>

<p>V&nbsp;prÅ¯bÄ›hu pÅ™idÃ¡nÃ­ (Äi aktualizace nebo odebrÃ¡nÃ­) nÄ›jakÃ©ho balÃ­Äku, na
kterÃ©m projekt zÃ¡visÃ­, se vytvoÅ™Ã­ i soubor pojmenovanÃ½
<strong>pdm.lock</strong>. V&nbsp;tomto souboru jsou uloÅ¾eny pÅ™esnÃ© informace o
konkrÃ©tnÃ­ch verzÃ­ch pÅ™Ã­mÃ½ch i tranzitivnÃ­ch zÃ¡vislostÃ­, vÄetnÄ› otiskÅ¯ souborÅ¯
s&nbsp;archivy tÄ›chto balÃ­ÄkÅ¯. JednÃ¡ se o velmi dÅ¯leÅ¾itÃ© informace, kterÃ© mohou
pomoci k&nbsp;tomu, aby se na jinÃ©m poÄÃ­taÄi (tÅ™eba na stage Äi produkÄnÃ­m
serveru) nainstalovaly ty samÃ© balÃ­Äky, jako na poÄÃ­taÄi vÃ½vojÃ¡Å™e a/nebo
testera. A v&nbsp;neposlednÃ­ Å™adÄ› to vede k&nbsp;vÄ›tÅ¡Ã­ bezpeÄnosti pÅ™i
sestavovÃ¡nÃ­ projektÅ¯ (omezÃ­ se Ãºtoky typu <i>typosquatting</i> atd.).</p>

<p>ZajÃ­mavÃ© bude zjistit, jak tento soubor vypadÃ¡:</p>

<pre>
# This file is @generated by PDM.
# It is not intended for manual editing.
&nbsp;
[metadata]
groups = ["default"]
cross_platform = true
static_urls = false
lock_version = "4.3"
content_hash = "sha256:c19bb0a4a0a179b5e92d875ea3704d5564d319483f9497918302f97aa96a7d83"
&nbsp;
[[package]]
name = "mpmath"
version = "1.3.0"
summary = "Python library for arbitrary-precision floating-point arithmetic"
files = [
    {file = "mpmath-1.3.0-py3-none-any.whl", hash = "sha256:a0b2b9fe80bbcd81a6647ff13108738cfb482d481d826cc0e02f5b35e5c88d2c"},
    {file = "mpmath-1.3.0.tar.gz", hash = "sha256:7a28eb2a9774d00c7bc92411c19a89209d5da7c4c9a9e227be8330a23a25b91f"},
]
&nbsp;
[[package]]
name = "sympy"
version = "1.10.1"
requires_python = "&gt;=3.7"
summary = "Computer algebra system (CAS) in Python"
dependencies = [
    "mpmath&gt;=0.19",
]
files = [
    {file = "sympy-1.10.1-py3-none-any.whl", hash = "sha256:df75d738930f6fe9ebe7034e59d56698f29e85f443f743e51e47df0caccc2130"},
    {file = "sympy-1.10.1.tar.gz", hash = "sha256:5939eeffdf9e152172601463626c022a2c27e75cf6278de8d401d50c9d58787b"},
]
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. MalÃ¡ odboÄka: vliv zvolenÃ© minimÃ¡lnÃ­ verze Pythonu</h2>

<p>PÅ™ipomeÅˆme si, Å¾e seznam pÅ™Ã­mÃ½ch i tranzitivnÃ­ch zÃ¡vislostÃ­ vypadÃ¡ u naÅ¡eho
projektu nÃ¡sledovnÄ›:</p>

<pre>
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ name   â”‚ version â”‚ location â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ mpmath â”‚ 1.3.0   â”‚          â”‚
â”‚ sympy  â”‚ 1.10.1  â”‚          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
</pre>

<p>To je zajÃ­mavÃ©, protoÅ¾e pÅ™i pohledu na vydÃ¡nÃ­ knihovny <i>sympy</i> (viz <a
href="https://github.com/sympy/sympy/releases">https://github.com/sympy/sympy/releases</a>)
snadno zjistÃ­me, Å¾e poslednÃ­ stabilnÃ­ verze je 1.12 a nikoli 1.10.1. Pokusme se
tedy o explicitnÃ­ instalaci novÄ›jÅ¡Ã­ verze:</p>

<pre>
$ <strong>pdm add sympy==1.12</strong>
</pre>

<p>V&nbsp;tomto pÅ™Ã­padÄ› se instalace (resp.&nbsp;ugrade) nepodaÅ™Ã­, protoÅ¾e
novÄ›jÅ¡Ã­ verze knihovny Sympy vyÅ¾adujÃ­ i novÄ›jÅ¡Ã­ verzi samotnÃ©ho Pythonu:</p>

<pre>
Adding packages to default dependencies: sympy==1.12
ğŸ”’ Lock failed
Unable to find a resolution because the following dependencies don't work on all Python versions in the range of the project's `requires-python`: &gt;=3.7.
  python&gt;=3.8 (from &lt;Candidate sympy@1.12 from https://pypi.org/simple/sympy/&gt;)
A possible solution is to change the value of `requires-python` in pyproject.toml to &gt;=3.8.
See /tmp/pdm-lock-ssanlsgo.log for detailed debug log.
</pre>

<p>To znamenÃ¡, Å¾e i kdyÅ¾ pouÅ¾Ã­vÃ¡me Python 3.11, projekt je stÃ¡le nastaven tak,
Å¾e minimÃ¡lnÃ­ kompatibilnÃ­ verze Pythonu je 3.7:</p>

<pre>
requires-python = "&gt;=3.7"
</pre>

<p>ZmÄ›na souboru <strong>pyproject</strong> je snadnÃ¡ &ndash; postaÄuje totiÅ¾
vÃ½Å¡e uvedenÃ½ Å™Ã¡dek zmÄ›nit na:</p>

<pre>
requires-python = "&gt;=3.8"
</pre>

<p>NynÃ­ jiÅ¾ mÅ¯Å¾eme spustit pÅ™Ã­kaz pro instalaci konkrÃ©tnÃ­ verze knihovny
<strong>sympy</strong>:</p>

<pre>
$ <strong>pdm add sympy==1.12</strong>
</pre>

<p>Ve skuteÄnosti u novÃ©ho projektu mÅ¯Å¾eme pouÅ¾Ã­t i:</p>

<pre>
$ <strong>pdm add sympy</strong>
</pre>

<p>Instalace by mÄ›la probÄ›hnout bez problÃ©mÅ¯, a to s&nbsp;verzÃ­ Sympy 1.12:</p>

<pre>
Adding packages to default dependencies: sympy
ğŸ”’ Lock successful
Changes are written to pyproject.toml.
Synchronizing working set with resolved packages: 2 to add, 0 to update, 0 to 
remove
&nbsp;
  âœ” Install mpmath 1.3.0 successful
  âœ” Install sympy 1.12 successful
&nbsp;
ğŸ‰ All complete!
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. Projekt s&nbsp;vÃ­ce zÃ¡vislostmi</h2>

<p>SamozÅ™ejmÄ› nÃ¡m nic nebrÃ¡nÃ­ v&nbsp;tom, abychom si do projektu pÅ™idali dalÅ¡Ã­
balÃ­Äek, na kterÃ©m bude projekt zÃ¡viset. Zvolit mÅ¯Å¾eme napÅ™Ã­klad znÃ¡mÃ½ balÃ­Äek
<strong>requests</strong>. PÅ™i jeho instalaci prozatÃ­m nebudeme specifikovat
verzi:</p>

<pre>
$ <strong>pdm add requests</strong>
</pre>

<p>PrÅ¯bÄ›h konfigurace projektu s&nbsp;pÅ™idÃ¡nÃ­m novÃ©ho balÃ­Äku:</p>

<pre>
Adding packages to default dependencies: requests
ğŸ”’ Lock successful
Changes are written to pyproject.toml.
Synchronizing working set with resolved packages: 5 to add, 0 to update, 0 to
remove
&nbsp;
  âœ” Install idna 3.4 successful
  âœ” Install requests 2.31.0 successful
  âœ” Install certifi 2023.7.22 successful
  âœ” Install urllib3 2.0.6 successful
  âœ” Install charset-normalizer 3.3.0 successful
&nbsp;
ğŸ‰ All complete!
</pre>

<p>V&nbsp;projektovÃ©m souboru <strong>pyproject.toml</strong> se objevÃ­ pouze
dvÄ› pÅ™Ã­mÃ© zÃ¡vislosti (podle oÄekÃ¡vÃ¡nÃ­):</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
dependencies = [
    "sympy&gt;=1.10.1",
    "requests&gt;=2.31.0",
]
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
</pre>

<p>Ve skuteÄnosti vÅ¡ak naroste poÄet tranzitivnÃ­ch zÃ¡vislostÃ­, coÅ¾ si opÄ›t
mÅ¯Å¾eme ovÄ›Å™it jejich vÃ½pisem ve formÄ› tabulky nebo zobrazenÃ­m stromovÃ©
struktury:</p>

<pre>
$ <strong>pdm list</strong>
&nbsp;
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ name               â”‚ version   â”‚ location â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ charset-normalizer â”‚ 3.3.0     â”‚          â”‚
â”‚ mpmath             â”‚ 1.3.0     â”‚          â”‚
â”‚ sympy              â”‚ 1.10.1    â”‚          â”‚
â”‚ idna               â”‚ 3.4       â”‚          â”‚
â”‚ requests           â”‚ 2.31.0    â”‚          â”‚
â”‚ certifi            â”‚ 2023.7.22 â”‚          â”‚
â”‚ urllib3            â”‚ 2.0.6     â”‚          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
</pre>

<p>ZobrazenÃ­ pÅ™Ã­mÃ½ch i tranzitivnÃ­ch zÃ¡vislostÃ­ formou stromovÃ© struktury:</p>

<pre>
$ <strong>pdm list --graph</strong>
&nbsp;
requests 2.31.0 [ required: &gt;=2.31.0 ]
â”œâ”€â”€ certifi 2023.7.22 [ required: &gt;=2017.4.17 ]
â”œâ”€â”€ charset-normalizer 3.3.0 [ required: &lt;4,&gt;=2 ]
â”œâ”€â”€ idna 3.4 [ required: &lt;4,&gt;=2.5 ]
â””â”€â”€ urllib3 2.0.6 [ required: &lt;3,&gt;=1.21.1 ]
sympy 1.10.1 [ required: &gt;=1.10.1 ]
â””â”€â”€ mpmath 1.3.0 [ required: &gt;=0.19 ]
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: prÃ¡vÄ› popsanÃ½ projekt naleznete
v&nbsp;GitHub repositÃ¡Å™i na adrese <a
href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project3/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project3/</a>.</div></p>



<p><a name="k10"></a></p>
<h2 id="k10">10. NovÃ¡ podoba souboru <strong>pdm.lock</strong></h2>

<p>Soubor <strong>pdm.lock</strong> se po pÅ™idÃ¡nÃ­ novÃ©ho balÃ­Äku kvÅ¯li
tranzitivnÃ­m zÃ¡vislostem zvÄ›tÅ¡il aÅ¾ na 17kB. Z&nbsp;tohoto dÅ¯vodu si uvedeme
pouze jeho zaÄÃ¡tek a konec (s&nbsp;nÄ›kolika balÃ­Äky). Struktura souboru vÅ¡ak
zÅ¯stÃ¡vÃ¡ stÃ¡le stejnÃ¡:</p>

<pre>
[metadata]
groups = ["default"]
cross_platform = true
static_urls = false
lock_version = "4.3"
content_hash = "sha256:286f1c206e4a496e9dc40642617bcc789fa52bcac8f2dc52b9090d276c4162e4"
&nbsp;
[[package]]
name = "certifi"
version = "2023.7.22"
requires_python = "&gt;=3.6"
summary = "Python package for providing Mozilla's CA Bundle."
files = [
    {file = "certifi-2023.7.22-py3-none-any.whl", hash = "sha256:92d6037539857d8206b8f6ae472e8b77db8058fec5937a1ef3f54304089edbb9"},
    {file = "certifi-2023.7.22.tar.gz", hash = "sha256:539cc1d13202e33ca466e88b2807e29f4c13049d6d87031a3c110744495cb082"},
]
&nbsp;
[[package]]
name = "charset-normalizer"
version = "3.3.0"
requires_python = "&gt;=3.7.0"
summary = "The Real First Universal Charset Detector. Open, modern and actively maintained alternative to Chardet."
files = [
    {file = "charset-normalizer-3.3.0.tar.gz", hash = "sha256:63563193aec44bce707e0c5ca64ff69fa72ed7cf34ce6e11d5127555756fd2f6"},
    {file = "charset_normalizer-3.3.0-cp310-cp310-macosx_10_9_universal2.whl", hash = "sha256:effe5406c9bd748a871dbcaf3ac69167c38d72db8c9baf3ff954c344f31c4cbe"},
    {file = "charset_normalizer-3.3.0-cp310-cp310-macosx_10_9_x86_64.whl", hash = "sha256:4162918ef3098851fcd8a628bf9b6a98d10c380725df9e04caf5ca6dd48c847a"},
    ...
    ...
    ...
[[package]]
name = "urllib3"
version = "2.0.6"
requires_python = "&gt;=3.7"
summary = "HTTP library with thread-safe connection pooling, file post, and more."
files = [
    {file = "urllib3-2.0.6-py3-none-any.whl", hash = "sha256:7a7c7003b000adf9e7ca2a377c9688bbc54ed41b985789ed576570342a375cd2"},
    {file = "urllib3-2.0.6.tar.gz", hash = "sha256:b19e1a85d206b56d7df1d5e683df4a7725252a964e3993648dd0fb5a1c157564"},
]
</pre>



<p><a name="k11"></a></p>
<h2 id="k11">11. ExplicitnÃ­ specifikace verze balÃ­Äku</h2>

<p>PÅ™i pÅ™idÃ¡vÃ¡nÃ­ balÃ­Äku do projektu mÅ¯Å¾eme explicitnÄ› specifikovat poÅ¾adovanou
verzi tohoto balÃ­Äku. FormÃ¡t zÃ¡pisu verze je v&nbsp;ekosystÃ©mu Pythonu jiÅ¾
standardizovÃ¡n &ndash; konkrÃ©tnÃ­ verze se zapisuje za znaky rovnosti:</p>

<pre>
$ <strong>pdm add requests==2.0.0</strong>
</pre>

<p><div class="rs-tip-major">POZOR: jednÃ¡ se pouze o pÅ™Ã­klad, kterÃ½
v&nbsp;praxi radÄ›ji nepouÅ¾Ã­vejte. Ve skuteÄnosti mÃ¡ balÃ­Äek
<strong>requests</strong> ve verzi 2.0.0 minimÃ¡lnÄ› tÅ™i znÃ¡mÃ© bezpeÄnostnÃ­
chyby.</div></p>

<p>ProjektovÃ½ soubor <strong>pyproject.toml</strong> bude nynÃ­ vypadat
nÃ¡sledovnÄ›:</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
dependencies = [
    "sympy&gt;=1.10.1",
    "requests==2.0.0",
]
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
</pre>

<p>Vzhledem k&nbsp;tomu, Å¾e <strong>requests</strong> nemÃ¡ Å¾Ã¡dnÃ© tranzitivnÃ­
zÃ¡vislosti (na rozdÃ­l od novÄ›jÅ¡Ã­ch verzÃ­ tohoto balÃ­Äku), bude soubor
<strong>pdm.lock</strong> stÃ¡le velmi jednoduchÃ½:</p>

<pre>
# This file is @generated by PDM.
# It is not intended for manual editing.
&nbsp;
[metadata]
groups = ["default"]
cross_platform = true
static_urls = false
lock_version = "4.3"
content_hash = "sha256:b5aed5d117e640360335e67f9b9a815150e717d992ecfdf1663587226da6b6b7"
&nbsp;
[[package]]
name = "mpmath"
version = "1.3.0"
summary = "Python library for arbitrary-precision floating-point arithmetic"
files = [
    {file = "mpmath-1.3.0-py3-none-any.whl", hash = "sha256:a0b2b9fe80bbcd81a6647ff13108738cfb482d481d826cc0e02f5b35e5c88d2c"},
    {file = "mpmath-1.3.0.tar.gz", hash = "sha256:7a28eb2a9774d00c7bc92411c19a89209d5da7c4c9a9e227be8330a23a25b91f"},
]
&nbsp;
[[package]]
name = "requests"
version = "2.0.0"
summary = "Python HTTP for Humans."
files = [
    {file = "requests-2.0.0-py2.py3-none-any.whl", hash = "sha256:2ef65639cb9600443f85451df487818c31f993ab288f313d29cc9db4f3cbe6ed"},
    {file = "requests-2.0.0.tar.gz", hash = "sha256:78536038f54cff6ade3be6863403146665b5a3923dd61108c98d8b64141f9d70"},
]
&nbsp;
[[package]]
name = "sympy"
version = "1.10.1"
requires_python = "&gt;=3.7"
summary = "Computer algebra system (CAS) in Python"
dependencies = [
    "mpmath&gt;=0.19",
]
files = [
    {file = "sympy-1.10.1-py3-none-any.whl", hash = "sha256:df75d738930f6fe9ebe7034e59d56698f29e85f443f743e51e47df0caccc2130"},
    {file = "sympy-1.10.1.tar.gz", hash = "sha256:5939eeffdf9e152172601463626c022a2c27e75cf6278de8d401d50c9d58787b"},
]
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: prÃ¡vÄ› popsanÃ½ projekt naleznete
v&nbsp;GitHub repositÃ¡Å™i na adrese <a
href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project4/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project4/</a>.</div></p>

<p>PoÅ¾adovanou verzi balÃ­Äku lze ovÅ¡em specifikovat i dalÅ¡Ã­mi zpÅ¯soby:</p>

<pre>
minimÃ¡lnÃ­: &gt;2.21.0
kompatibilnÃ­: &gt;2.21.0,&lt;3.0.0
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. Strategie vÃ½bÄ›ru verzÃ­ balÃ­Äku</h2>

<p>VÃ½bÄ›r verze balÃ­Äku, kterÃ½ se do projektu pÅ™idÃ¡vÃ¡, zÃ¡visÃ­ na zvolenÃ©
strategii. Ta se specifikuje nÃ¡sledujÃ­cÃ­mi ÄtyÅ™mi volbami (pÅ™epÃ­naÄi):</p>

<pre>
--save-minimum
--save-compatible
--save-exact
--save-wildcard
</pre>

<p>Strategie &bdquo;minimum&ldquo; ve k&nbsp;tomu, Å¾e se do projektovÃ©ho
souboru uloÅ¾Ã­ informace o tom, Å¾e bude vyÅ¾adovÃ¡na konkrÃ©tnÃ­ stabilnÃ­ verze Äi
verze vyÅ¡Å¡Ã­:</p>

<pre>
$ <strong>pdm add --save-minimum requests</strong>
</pre>

<p>VÃ½sledek vypadÃ¡ nÃ¡sledovnÄ›:</p>

<pre>
dependencies = [
    "requests&gt;=2.31.0",
]
</pre>

<p>Strategie &bdquo;compatible&ldquo; umoÅ¾Åˆuje specifikovat konkrÃ©tnÃ­ verzi
popÅ™.&nbsp;verze s&nbsp;nÃ­ kompatibilnÃ­:</p>

<pre>
$ <strong>pdm add --save-compatible requests</strong>
</pre>

<p>VÃ½sledek:</p>

<pre>
dependencies = [
    "requests~=2.31",
]

</pre>

<p>NejjednoduÅ¡Å¡Ã­ je strategie &bdquo;exact&ldquo;, kterÃ¡ v&nbsp;dÅ¯sledku vede
k&nbsp;tomu, Å¾e bude specifikovÃ¡na jedinÃ¡ konkrÃ©tnÃ­ verze balÃ­Äku:</p>

<pre>
$ <strong>pdm add --save-exact requests</strong>
</pre>

<p>VÃ½sledek:</p>

<pre>
dependencies = [
    "requests==2.31.0",
]
</pre>

<p>A koneÄnÄ› v&nbsp;poslednÃ­ variantÄ› &bdquo;wildcard&ldquo; nemusÃ­ bÃ½t ve
vÃ½sledku verze balÃ­Äku vÅ¯bec uvedenÃ¡:</p>

<pre>
$ <strong>pdm add --save-wildcard requests</strong>
</pre>

<p>VÃ½sledek:</p>

<pre>
dependencies = [
    "requests",
]
</pre>



<p><a name="k13"></a></p>
<h2 id="k13">13. Instalace balÃ­ÄkÅ¯ pouÅ¾Ã­vanÃ½ch pÅ™i vÃ½voji, testovÃ¡nÃ­ a ladÄ›nÃ­</h2>

<p>Mnoho balÃ­ÄkÅ¯, s&nbsp;nimiÅ¾ se v&nbsp;projektu nÄ›jakÃ½m zpÅ¯sobem pracuje, je
ve skuteÄnosti pouÅ¾ito &bdquo;pouze&ldquo; pÅ™i vÃ½voji, testovÃ¡nÃ­ a ladÄ›nÃ­
aplikace. TakovÃ© balÃ­Äky tedy nenÃ­ nutnÃ© (a ani to nenÃ­ vhodnÃ©) instalovat pÅ™i
nasazovÃ¡nÃ­ aplikace na stage Äi produkÄnÃ­ prostÅ™edÃ­. Na druhou stranu by vÅ¡ak
projekt mÄ›l obsahovat informace o tÄ›chto balÃ­ÄcÃ­ch. V&nbsp;pÅ™Ã­padÄ›, Å¾e se
pouÅ¾Ã­vÃ¡ nÃ¡stroj <i>PDM</i>, je moÅ¾nÃ© &bdquo;vÃ½vojÃ¡Å™skÃ©&ldquo; balÃ­Äky
nainstalovat s&nbsp;pouÅ¾itÃ­m pÅ™epÃ­naÄe <strong>-d</strong>, kterÃ½m se tyto
balÃ­Äky odliÅ¡Ã­ od produkÄnÃ­ch balÃ­ÄkÅ¯ nutnÃ½ch pro bÄ›h aplikace.</p>

<p>PomÄ›rnÄ› dobrÃ½m pÅ™Ã­kladem mÅ¯Å¾e bÃ½t balÃ­Äek <strong>pytest</strong> vyuÅ¾Ã­vanÃ½
pro spouÅ¡tÄ›nÃ­ a analÃ½zu jednotkovÃ½ch testÅ¯. TakovÃ½ balÃ­Äek nainstalujeme
nÃ¡sledujÃ­cÃ­m zpÅ¯sobem:</p>

<pre>
$ <strong>pdm add -d pytest</strong>
</pre>

<p>VÃ½sledkem bude, Å¾e se v&nbsp;projektovÃ©m souboru
<strong>pyproject.toml</strong> objevÃ­ novÃ¡ sekce nazvanÃ¡
<strong>tool.pdm.dev-dependencies</strong> (viz zvÃ½raznÄ›nou ÄÃ¡st):</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel Tisnovsky", email = "tisnik@nowhere.com"},
]
dependencies = [
    "sympy&gt;=1.12",
]
requires-python = "&gt;=3.11"
readme = "README.md"
license = {text = "MIT"}
&nbsp;
<strong>[tool.pdm.dev-dependencies]</strong>
<strong>dev = [</strong>
    <strong>"pytest&gt;=7.4.2",</strong>
<strong>]</strong>
</pre>

<p>Naproti tomu soubor <strong>pdm.lock</strong> informaci o tomto balÃ­Äku
obsahovat nebude:</p>

<pre>
<i># This file is @generated by PDM.</i>
<i># It is not intended for manual editing.</i>
&nbsp;
[metadata]
groups = ["default"]
cross_platform = true
static_urls = false
lock_version = "4.3"
content_hash = "sha256:5cd901a11186547468a967f40df61dd8cb8cf0b5bb3499bbf66125887548c0f7"
&nbsp;
[[package]]
name = "mpmath"
version = "1.3.0"
summary = "Python library for arbitrary-precision floating-point arithmetic"
files = [
    {file = "mpmath-1.3.0-py3-none-any.whl", hash = "sha256:a0b2b9fe80bbcd81a6647ff13108738cfb482d481d826cc0e02f5b35e5c88d2c"},
    {file = "mpmath-1.3.0.tar.gz", hash = "sha256:7a28eb2a9774d00c7bc92411c19a89209d5da7c4c9a9e227be8330a23a25b91f"},
]
&nbsp;
[[package]]
name = "sympy"
version = "1.12"
requires_python = "&gt;=3.8"
summary = "Computer algebra system (CAS) in Python"
dependencies = [
    "mpmath&gt;=0.19",
]
files = [
    {file = "sympy-1.12-py3-none-any.whl", hash = "sha256:c3588cd4295d0c0f603d0f2ae780587e64e2efeedb3521e46b9bb1d08d184fa5"},
    {file = "sympy-1.12.tar.gz", hash = "sha256:ebf595c8dac3e0fdc4152c51878b498396ec7f30e7a914d6071e674d49420fb8"},
]
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: prÃ¡vÄ› popsanÃ½ projekt naleznete
v&nbsp;GitHub repositÃ¡Å™i na adrese <a
href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project8/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project8/</a>.</div></p>



<p><a name="k14"></a></p>
<h2 id="k14">14. SprÃ¡va virtuÃ¡lnÃ­ch prostÅ™edÃ­ z&nbsp;PDM</h2>

<p>JeÅ¡tÄ› jednou se vraÅ¥me k&nbsp;pÅ™Ã­kazu pro zobrazenÃ­ informacÃ­ o projektu,
zejmÃ©na o jeho prostÅ™edÃ­. JednÃ¡ se o pÅ™Ã­kaz:</p>

<pre>
$ <strong>pdm info</strong>
</pre>

<p>VÃ½sledek by mohl vypadat nÃ¡sledovnÄ› (cesty se pochopitelnÄ› budou liÅ¡it):</p>

<pre>
PDM version:
  2.9.3
Python Interpreter:
  <strong>/home/ptisnovs/project1/.venv/bin/python (3.11)</strong>
Project Root:
  /home/ptisnovs/project1
Local Packages:
</pre>

<p>V&nbsp;tuto chvÃ­li je pro nÃ¡s dÅ¯leÅ¾itÃ½ Å™Ã¡dek s&nbsp;cestou
k&nbsp;interpretru Pythonu. Ten nÃ¡m totiÅ¾ mj.&nbsp;Å™Ã­kÃ¡, Å¾e pÅ™i spouÅ¡tÄ›nÃ­
projektu (nebo jeho ÄÃ¡stÃ­, popÅ™.&nbsp;testÅ¯ atd.) bude vyuÅ¾ito virtuÃ¡lnÃ­
prostÅ™edÃ­ Pythonu. To je v&nbsp;naÅ¡em pÅ™Ã­padÄ› umÃ­stÄ›no v&nbsp;podadresÃ¡Å™i
<strong>.vent</strong>. PDM nÃ¡m umoÅ¾Åˆuje nechat si vypsat virtuÃ¡lnÃ­ prostÅ™edÃ­,
kterÃ¡ jsou v&nbsp;danÃ½ okamÅ¾ik dostupnÃ¡, a to konkrÃ©tnÄ› pÅ™Ã­kazem:</p>

<pre>
$ <strong>pdm venv list</strong>
Virtualenvs created with this project:
&nbsp;
*  in-project: /home/ptisnovs/x/project1/.venv
</pre>

<p>VirtuÃ¡lnÃ­ prostÅ™edÃ­ je do stromovÃ© struktury s&nbsp;projektem zakomponovÃ¡no
nÃ¡sledovnÄ›:</p>

<pre>
â”œâ”€â”€ __pycache__
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ example_package
â”‚Â Â      â””â”€â”€ __pycache__
â”œâ”€â”€ tests
â”‚Â Â  â””â”€â”€ __pycache__
â””â”€â”€ <strong>.venv</strong>
    â”œâ”€â”€ bin
    â”œâ”€â”€ lib
    â”‚Â Â  â””â”€â”€ python3.11
    â”‚Â Â      â””â”€â”€ site-packages
    â”‚Â Â          â”œâ”€â”€ mpmath
    â”‚Â Â          â”œâ”€â”€ mpmath-1.3.0.dist-info
    â”‚Â Â          â”œâ”€â”€ __pycache__
    â”‚Â Â          â”œâ”€â”€ sympy
    â”‚Â Â          â””â”€â”€ sympy-1.10.1.dist-info
    â”œâ”€â”€ lib64
    â”‚Â Â  â””â”€â”€ python3.11
    â”‚Â Â      â””â”€â”€ site-packages
    â””â”€â”€ share
        â””â”€â”€ man
            â””â”€â”€ man1
</pre>

<p>MoÅ¾nÃ© je nechat si vytvoÅ™it i dalÅ¡Ã­ virtuÃ¡lnÃ­ prostÅ™edÃ­. Pokud vÅ¡ak jiÅ¾
adresÃ¡Å™ <strong>.venv</strong> existuje, bude dalÅ¡Ã­ virtuÃ¡lnÃ­ prostÅ™edÃ­
vytvoÅ™eno v&nbsp;adresÃ¡Å™i specifikovanÃ©m konfiguraÄnÃ­ volbou
<strong>venv.location</strong> (tu jsme nemÄ›nili). JmÃ©no novÄ› vytvoÅ™enÃ©ho
podadresÃ¡Å™e s&nbsp;virtuÃ¡lnÃ­m prostÅ™edÃ­m pÅ™itom bude mÃ­t tento formÃ¡t:
<strong>jmÃ©no_projektu-hash-verze_pythonu</strong>. OstatnÄ› mÅ¯Å¾eme se pokusit o
vytvoÅ™enÃ­ jeÅ¡tÄ› jednoho virtuÃ¡lnÃ­ho prostÅ™edÃ­ pro nÃ¡Å¡ projekt a pro zvolenou
verzi Pythonu:</p>

<pre>
$ <strong>pdm venv create --name testing 3.11</strong>
&nbsp;
Virtualenv /home/ptisnovs/.local/share/pdm/venvs/project1-MLVA-_ZK-testing is 
created successfully
</pre>

<p>Struktura tohoto novÃ©ho virtuÃ¡lnÃ­ prostÅ™edÃ­ bude shodnÃ¡ se strukturou
&bdquo;lokÃ¡lnÃ­ho&ldquo; virtuÃ¡lnÃ­ho prostÅ™edÃ­:</p>

<pre>
/home/ptisnovs/.local/share/pdm/venvs
â””â”€â”€ project1-MLVA-_ZK-testing
    â”œâ”€â”€ bin
    â”œâ”€â”€ lib
    â”‚Â Â  â””â”€â”€ python3.11
    â”‚Â Â      â””â”€â”€ site-packages
    â””â”€â”€ lib64
        â””â”€â”€ python3.11
            â””â”€â”€ site-packages
</pre>

<p>VirtuÃ¡lnÃ­ prostÅ™edÃ­ je moÅ¾nÃ© i smazat:</p>

<pre>
$ <strong>pdm venv remove in-project</strong>
&nbsp;
Virtualenvs created with this project:
Will remove: /home/ptisnovs/x/project1/.venv, continue? [y/n] (y): y
Removed successfully!
</pre>



<p><a name="k15"></a></p>
<h2 id="k15">15. VyuÅ¾itÃ­ adresÃ¡Å™ovÃ© struktury dle PEP-582 namÃ­sto virtuÃ¡lnÃ­ho prostÅ™edÃ­</h2>

<p>SprÃ¡vce <i>PDM</i> umoÅ¾Åˆuje namÃ­sto virtuÃ¡lnÃ­ho prostÅ™edÃ­ (tedy vlastnÄ›
typicky podadresÃ¡Å™e <strong>.venv</strong>) pracovat s&nbsp;adresÃ¡Å™ovou
strukturou definovanou v&nbsp;PEP-582. Toto PEP sice bylo oficiÃ¡lnÄ› zamÃ­tnuto,
coÅ¾ ale neznamenÃ¡, Å¾e jÃ­m definovanou adresÃ¡Å™ovou strukturu nelze pouÅ¾Ã­t
(ostatnÄ› PDM byl vytvoÅ™en prÃ¡vÄ› proto, aby existovala implementace
PEP-582).</p>

<p>PÅ™i vytvÃ¡Å™enÃ­ novÃ©ho projektu postaÄuje na otÃ¡zku:</p>

<pre>
Would you like to create a virtualenv with /usr/bin/python? [y/n] (y): n
</pre>

<p>odpovÄ›dÄ›t zÃ¡pornÄ›:</p>

<pre>
You are using the PEP 582 mode, no virtualenv is created.
For more info, please visit https://peps.python.org/pep-0582/
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: vÃ½sledkem bude prakticky stejnÃ½ projekt,
jako v&nbsp;pÅ™edchozÃ­ch pÅ™Ã­padech, ovÅ¡em obsah souboru
<strong>.pdm-python</strong> bude odliÅ¡nÃ½.</div></p>

<p>NÃ¡slednÄ› do projektu pÅ™idÃ¡me nÄ›jakou zÃ¡vislost:</p>

<pre>
$ <strong>pdm add sympy</strong>
&nbsp;
Adding packages to default dependencies: sympy
ğŸ”’ Lock successful
Changes are written to pyproject.toml.
Synchronizing working set with resolved packages: 2 to add, 0 to update, 0 to 
remove
&nbsp;
  âœ” Install mpmath 1.3.0 successful
  âœ” Install sympy 1.12 successful
&nbsp;
ğŸ‰ All complete!
</pre>

<p>VÃ½sledkem by mÄ›la bÃ½t nÃ¡sledujÃ­cÃ­ adresÃ¡Å™ovÃ¡ struktura, v&nbsp;nÃ­Å¾ se
namÃ­sto <strong>.venv</strong> objevuje podadresÃ¡Å™
<strong>__pypackages__</strong>:</p>

<pre>
.
â”œâ”€â”€ __pycache__
â”œâ”€â”€ <strong>__pypackages__</strong>
â”‚Â Â  â””â”€â”€ 3.11
â”‚Â Â      â”œâ”€â”€ bin
â”‚Â Â      â”œâ”€â”€ include
â”‚Â Â      â”œâ”€â”€ lib
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ mpmath
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ mpmath-1.3.0.dist-info
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ sympy
â”‚Â Â      â”‚Â Â  â””â”€â”€ sympy-1.12.dist-info
â”‚Â Â      â””â”€â”€ share
â”‚Â Â          â””â”€â”€ man
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ example_package
â”‚Â Â      â””â”€â”€ __pycache__
â””â”€â”€ tests
    â””â”€â”€ __pycache__
</pre>



<p><a name="k16"></a></p>
<h2 id="k16">16. NovÃ¡ instalace vÅ¡ech balÃ­ÄkÅ¯ (PEP-582)</h2>

<p>V&nbsp;pÅ™Ã­padÄ› potÅ™eby, napÅ™Ã­klad pokud dojde k&nbsp;problÃ©mÅ¯m s&nbsp;updaty
balÃ­ÄkÅ¯ (coÅ¾ se nastÃ¡vÃ¡ pÅ™Ã­liÅ¡ Äasto) je moÅ¾nÃ© jednoduÅ¡e celÃ½ adresÃ¡Å™
<strong>__pypackages__</strong> smazat:</p>

<pre>
$ <strong>rm -rf __pypackages__</strong>
</pre>

<p>Struktura projektu se nÃ¡m zjednoduÅ¡Ã­ na:</p>

<pre>
.
â”œâ”€â”€ __pycache__
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ example_package
â”‚Â Â      â””â”€â”€ __pycache__
â””â”€â”€ tests
    â””â”€â”€ __pycache__
</pre>

<p>NovÃ¡ instalace vÅ¡ech balÃ­ÄkÅ¯ v&nbsp;poÅ¾adovanÃ½ch verzÃ­ch se provede
pÅ™Ã­kazem:</p>

<pre>
$ <strong>pdm install -v</strong>
&nbsp;
STATUS: Resolving packages from lockfile...
STATUS: Fetching hashes for resolved packages...
Synchronizing working set with resolved packages: 2 to add, 0 to update, 0 to remove
&nbsp;
unearth.preparer: Using cached &lt;Link https://files.pythonhosted.org/packages/43/e3/7d92a15f894aa0c9c4b49b8ee9ac9850d6e63b03c9c32c0367a13ae62209/mpmath-1.3.0-py3-none-any.whl (from https://pypi.org/simple/mpmath/)&gt;
unearth.preparer: Using cached &lt;Link https://files.pythonhosted.org/packages/d2/05/e6600db80270777c4a64238a98d442f0fd07cc8915be2a1c16da7f2b9e74/sympy-1.12-py3-none-any.whl (from https://pypi.org/simple/sympy/)&gt;
  âœ” Install mpmath 1.3.0 successful
  âœ” Install sympy 1.12 successful
</pre>

<p>CoÅ¾ povede k&nbsp;obnovenÃ­ pÅ¯vodnÃ­ struktury projektu:</p>

<pre>
.
â”œâ”€â”€ __pycache__
â”œâ”€â”€ __pypackages__
â”‚Â Â  â””â”€â”€ 3.11
â”‚Â Â      â”œâ”€â”€ bin
â”‚Â Â      â”œâ”€â”€ include
â”‚Â Â      â”œâ”€â”€ lib
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ mpmath
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ mpmath-1.3.0.dist-info
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ sympy
â”‚Â Â      â”‚Â Â  â””â”€â”€ sympy-1.12.dist-info
â”‚Â Â      â””â”€â”€ share
â”‚Â Â          â””â”€â”€ man
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ example_package
â”‚Â Â      â””â”€â”€ __pycache__
â””â”€â”€ tests
    â””â”€â”€ __pycache__
</pre>



<p><a name="k17"></a></p>
<h2 id="k17">17. Specifikace novÃ½ch pÅ™Ã­kazÅ¯ spouÅ¡tÄ›nÃ½ch pÅ™es <strong>pdm run</strong></h2>

<p>Do projektovÃ©ho souboru <strong>pyproject.toml</strong> mÅ¯Å¾eme pÅ™idat i
specifikaci novÃ½ch (prakticky libovolnÃ½ch) pÅ™Ã­kazÅ¯, kterÃ© se spouÅ¡tÃ­ pÅ™es
<strong>pdm run</strong>. PÅ™Ã­kladem mÅ¯Å¾e bÃ½t pÅ™Ã­kaz <strong>start</strong> pro
spuÅ¡tÄ›nÃ­ aplikace (samozÅ™ejmÄ› s&nbsp;nastavenÃ½m prostÅ™edÃ­m atd.):</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
dependencies = []
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
&nbsp;
<strong>[tool.pdm.scripts]</strong>
<strong>start = "src/example_package/main.py"</strong>
</pre>

<p>NovÃ½ pÅ™Ã­kaz <strong>start</strong> nynÃ­ mÅ¯Å¾eme zavolat takto:</p>

<pre>
$ <strong>pdm run start</strong>
</pre>



<p><a name="k18"></a></p>
<h2 id="k18">18. SpouÅ¡tÄ›nÃ­ jednotkovÃ½ch testÅ¯ pÅ™es <strong>pdm run</strong></h2>

<p>Do projektovÃ©ho souboru <strong>pyproject.toml</strong> samozÅ™ejmÄ› mÅ¯Å¾eme
pÅ™idat i dalÅ¡Ã­ vlastnÃ­ pÅ™Ã­kazy, napÅ™Ã­klad pÅ™Ã­kaz <strong>test</strong> urÄenÃ½
pro spuÅ¡tÄ›nÃ­ jednotkovÃ½ch testÅ¯. Ãšprava bude triviÃ¡lnÃ­:</p>

<pre>
[project]
name = ""
version = ""
description = ""
authors = [
    {name = "Pavel", email = "pavel@nowhere.com"},
]
<strong>[tool.pdm.dev-dependencies]</strong>
<strong>dev = [</strong>
    <strong>"pytest&gt;=7.4.2",</strong>
<strong>]</strong>
requires-python = "&gt;=3.7"
readme = "README.md"
license = {text = "MIT"}
&nbsp;
<strong>[tool.pdm.scripts]</strong>
start = "src/example_package/main.py"
<strong>test = "pytest"</strong>
</pre>

<p>A takto bude vypadat spuÅ¡tÄ›nÃ­ testÅ¯:</p>

<pre>
============================= test session starts ==============================
platform linux -- Python 3.11.5, pytest-7.4.2, pluggy-1.2.0
rootdir: /home/ptisnovs/x/project7
collected 0 items                                                              
&nbsp;
============================ no tests ran in 0.00s =============================
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: Å¾Ã¡dnÃ© testy sice nemÃ¡me v&nbsp;projektu
definovÃ¡ny, ovÅ¡em uÅ¾ jen fakt, Å¾e se <strong>pytest</strong> spustil na
poÄÃ­taÄi, na nÄ›mÅ¾ nenÃ­ tento nÃ¡stroj nainstalovÃ¡n (existuje jen ve virtuÃ¡lnÃ­m
prostÅ™edÃ­ projektu) ukazuje, Å¾e vÅ¡e funguje.</div></p>



<p><a name="k19"></a></p>
<h2 id="k19">19. RepositÃ¡Å™ s&nbsp;demonstraÄnÃ­mi pÅ™Ã­klady</h2>

<p>VÅ¡echny PythonovskÃ© projekty, kterÃ© jsme si vytvoÅ™ili, naleznete na adrese
<a
href="https://github.com/tisnik/most-popular-python-libs">https://github.com/tisnik/most-popular-python-libs</a>.
NÃ¡sledujÃ­ odkazy na jednotlivÃ© pÅ™Ã­klady (pro jejich spuÅ¡tÄ›nÃ­ je nutnÃ© mÃ­t
nainstalovÃ¡nu nÄ›kterou z&nbsp;podporovanÃ½ch verzÃ­ Pythonu 3 a pochopitelnÄ›
taktÃ©Å¾ PDM:</p>

<table>
<tr><th>#</th><th>Projekt</th><th>StruÄnÃ½ popis</th><th>Adresa</th></tr>
<tr><td>1</td><td>project1/</td><td>novÄ› vytvoÅ™enÃ½ projekt bez zÃ¡vislostÃ­</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project1/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project1/</a></td></tr>
<tr><td>2</td><td>project2/</td><td>projekt s&nbsp;jednou explicitnÄ› zapsanou zÃ¡vislostÃ­</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project2/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project2/</a></td></tr>
<tr><td>3</td><td>project3/</td><td>projekt s&nbsp;dvojicÃ­ explicitnÄ› zapsanÃ½ch zÃ¡vislostÃ­</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project3/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project3/</a></td></tr>
<tr><td>4</td><td>project4/</td><td>projekt se zÃ¡vislostÃ­ na knihovnÄ› <strong>requests</strong> ve verzi 2.0.0</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project4/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project4/</a></td></tr>
<tr><td>5</td><td>project5/</td><td>projekt se zÃ¡vislostÃ­ na knihovnÄ› <strong>requests</strong> v&nbsp;nejnovÄ›jÅ¡Ã­ dostupnÃ© verzi</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project5/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project5/</a></td></tr>
<tr><td>6</td><td>project6/</td><td>kostra PythonovskÃ© knihovny (balÃ­Äku)</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project6/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project6/</a></td></tr>
<tr><td>7</td><td>project7/</td><td>specifikace pÅ™Ã­kazu spuÅ¡tÄ›nÃ©ho po zadÃ¡nÃ­ <strong>pdm start</strong></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project7/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project7/</a></td></tr>
<tr><td>8</td><td>project8/</td><td>projekt se zÃ¡vislostmi pro vÃ½vojÃ¡Å™e (nikoli pro vÃ½slednou aplikaci Äi knihovnu)</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project8/">https://github.com/tisnik/most-popular-python-libs/blob/master/pdm/project8/</a></td></tr>
<table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>StrÃ¡nka projektu PDM<br />
<a href="https://pdm.fming.dev/latest/">https://pdm.fming.dev/latest/</a>
</li>

<li>PDF na GitHubu<br />
<a href="https://github.com/pdm-project/pdm">https://github.com/pdm-project/pdm</a>
</li>

<li>PEP 582 &ndash; Python local packages directory<br />
<a href="https://peps.python.org/pep-0582/">https://peps.python.org/pep-0582/</a>
</li>

<li>PDM na PyPi<br />
<a href="https://pypi.org/project/pdm/">https://pypi.org/project/pdm/</a>
</li>

<li>Which Python package manager should you use?<br />
<a href="https://towardsdatascience.com/which-python-package-manager-should-you-use-d0fd0789a250">https://towardsdatascience.com/which-python-package-manager-should-you-use-d0fd0789a250</a>
</li>

<li>How to Use PDM to Manage Python Dependencies without a Virtual Environment<br />
<a href="https://www.youtube.com/watch?v=qOIWNSTYfcc">https://www.youtube.com/watch?v=qOIWNSTYfcc</a>
</li>

<li>What are the best Python package managers?<br />
<a href="https://www.slant.co/topics/2666/~best-python-package-managers">https://www.slant.co/topics/2666/~best-python-package-managers</a>
</li>

<li>PEP 621 &ndash; Storing project metadata in pyproject.toml<br />
<a href="https://peps.python.org/pep-0621/">https://peps.python.org/pep-0621/</a>
</li>

<li>Pick a Python Lockfile and Improve Security<br />
<a href="https://blog.phylum.io/pick-a-python-lockfile-and-improve-security/">https://blog.phylum.io/pick-a-python-lockfile-and-improve-security/</a>
</li>

<li>PyPA specifications<br />
<a href="https://packaging.python.org/en/latest/specifications/">https://packaging.python.org/en/latest/specifications/</a>
</li>

<li>Creation of virtual environments<br />
<a href="https://docs.python.org/3/library/venv.html">https://docs.python.org/3/library/venv.html</a>
</a>

<li>How to Use virtualenv in Python<br />
<a href="https://learnpython.com/blog/how-to-use-virtualenv-python/">https://learnpython.com/blog/how-to-use-virtualenv-python/</a>
</a>

<li>Python Virtual Environments: A Primer<br />
<a href="https://realpython.com/python-virtual-environments-a-primer/">https://realpython.com/python-virtual-environments-a-primer/</a>
</a>

<li>virtualenv Cheatsheet<br />
<a href="https://aaronlelevier.github.io/virtualenv-cheatsheet/">https://aaronlelevier.github.io/virtualenv-cheatsheet/</a>
</a>

<li>Installing Python Modules<br />
<a href="https://docs.python.org/3/installing/index.html">https://docs.python.org/3/installing/index.html</a>
</a>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel TiÅ¡novskÃ½</a> &nbsp; 2023</small></p>
</body>
</html>

