<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>pgvector, embedding a sémantické vyhledávání (2. část: sofistikovanější indexy a různé typy vektorů)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>pgvector, embedding a sémantické vyhledávání (2. část: sofistikovanější indexy a různé typy vektorů)</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. pgvector, embedding a sémantické vyhledávání (2. část: sofistikovanější indexy a různé typy vektorů)</a></p>
<p><a href="#k02">*** 2. </a></p>
<p><a href="#k03">*** 3. Indexy založené na použití sofistikovanějších datových struktur</a></p>
<p><a href="#k04">*** 4. Rozdělení celého prostoru Voroného dekompozicí</a></p>
<p><a href="#k05">*** 5. Konstrukce indexu <strong>IVFFlat</strong> v&nbsp;Postgresu</a></p>
<p><a href="#k06">*** 6. Index <i>HNSW</i> (Hierarchical Navigable Small World)</a></p>
<p><a href="#k07">*** 7. Základ pro benchmarky, které budeme provádět</a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. pgvector, embedding a sémantické vyhledávání (2. část: sofistikovanější indexy a různé typy vektorů)</h2>

<p></p>

<a href="https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/">pgvector: vektorová databáze postavená na Postgresu</a>

<a href="https://www.root.cz/clanky/rozsireni-postgresql-jmenem-pgvector-embedding-a-semanticke-vyhledavani-1-cast/">Rozšíření PostgreSQL jménem pgvector, embedding a sémantické vyhledávání (1. část)</a>



<p><a name="k02"></a></p>
<h2 id="k02">2. Typy prvků vektorů</h2>

<p></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Indexy založené na použití sofistikovanějších datových struktur</h2>

<p>V&nbsp;jazykových modelech, ale i v&nbsp;některých dalších oblastech, se můžeme setkat s&nbsp;datovými sadami, které obsahují desítky či dokonce stovky milionů vektorů. To znamená, že (pochopitelně) existuje snaha o snížení času vyhledávání &ndash; ideálně změnou časové složitosti (z&nbsp;lineární složitosti k&nbsp;například logaritmické složitosti nebo složitosti s&nbsp;odmocninou), nebo alespoň sice se zachováním lineární složitosti, ovšem s&nbsp;jejím menším sklonem (což je ona někdy podceňovaná konstanta <i>k</i> ve vztahu <i>k O(n)</i>). I v&nbsp;těchto oblastech nám databáze PostgreSQL s&nbsp;rozšířením <i>pgvector</i> nabízí různá řešení. V&nbsp;rámci dalších kapitol se seznámíme se dvěma různými technikami, které jsou založeny na použití sofistikovanějších datových struktur, než jsou pouhé sekvence (tabulky) vektorů.</p>

<p><div class="rs-tip-major">Poznámka: na tomto místě je vhodné poznamenat, že výkonnost <i>pgvectoru</i> může být horší v&nbsp;porovnání s&nbsp;některými specializovanými vektorovými databázemi.</div></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Rozdělení celého prostoru Voroného dekompozicí</h2>

<p>Jeden z&nbsp;dostupných a relativně často používaných algoritmů určených pro urychlení vyhledávání podobných vektorů spočívá v&nbsp;tom, že se n-dimenzionální prostor, ve kterém vektory vstupní datové sady leží, rozdělí do zadaného počtu oblastí. Pro rozdělení se přitom typicky používá Voroného dekompozice, i když by teoreticky bylo možné použít i další metody (možná zobecněný oktalový strom?). Algoritmus vyhledávání je v&nbsp;tom nejjednodušším případě upraven následujícím způsobem:</p>

<ol>
<li>Vstupem je vektor (dotaz) k&nbsp;němuž v&nbsp;datové sadě hledáme nejbližší vektory</li>
<li>Pro tento vstupní vektor je zjištěna oblast (Voroného dekompozice), ve které bude prováděno vyhledávání</li>
<li>Následně jsou nejbližší vektory vyhledávány pouze v&nbsp;této oblasti</li>
</ol>

<p>Problém spočívá v&nbsp;tom, že právě popsaný algoritmus nemusí vyhledat skutečně nejbližší vektory. To nastane v&nbsp;případě, že se vstupní vektor nachází blízko hranice oblasti a nejbližší vektor(y) by se tedy nacházel <i>za</i> touto hranicí. Proto může být algoritmus vyhledávání upraven do nepatrně odlišné podoby:</p>

<ol>
<li>Vstupem je vektor (dotaz) k&nbsp;němuž v&nbsp;datové sadě hledáme nejbližší vektory</li>
<li>Pro tento vstupní vektor je zjištěna oblast (Voroného dekompozice), ve které bude prováděno vyhledávání</li>
<li>Dále jsou zjištěno <i>m</i> sousedních oblastí k&nbsp;nalezené oblasti (<i>m</i> je konfigurovatelné)</li>
<li>Následně jsou nejbližší vektory vyhledávány v&nbsp;nalezené oblasti (bod 2) i oblastech sousedních (bod 3)</li>
</ol>

<p>Čím větší je hodnota <i>m</i>, tím pomalejší, ale přesnější je vyhledání nejbližších vektorů.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Konstrukce indexu <strong>IVFFlat</strong> v&nbsp;Postgresu</h2>

<p>Rozdělení n-dimenzionálního prostoru podle Voroného dekompozice je pochopitelně nutné nějakým způsobem realizovat. Podporu pro toto rozdělení programátorům sice nabízí samotné rozšíření <i>pgvector</i>, ovšem samotná konstrukce indexu se nepatrně zkomplikuje. Připomeňme si, že původně byla tabulka obsahující vektory naprogramována následujícím způsobem:</p>

<pre>
</pre>

<p>Při aplikaci Voroného dekompozice je nutné index explicitně vytvořit:</p>

<pre>
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. Index <i>HNSW</i> (Hierarchical Navigable Small World)</h2>

<p>Dalším potenciálně užitečným typem indexu, které jsou nabízeny (nejenom) rozšířením <i>pgvector</i> (ale například i ve Faissu), je index označovaný zkratkou <i>HNSW</i> neboli <i>Hierarchical Navigable Small World</i>. Jak již název tohoto indexu naznačuje, je metoda HNSW založena na rozdělení celého prostoru do hierarchicky organizovaných menších částí (ty jsou nazývány &bdquo;malé světy&ldquo;). Samotné rozdělování prostoru je časově velmi náročné, ovšem na druhou stranu se urychlí vyhledávání podobných vektorů, a to o jeden až dva řády (do značné míry ovšem záleží na dalších parametrech). Samozřejmě se i s&nbsp;tímto indexem pojí určité další nevýhody.</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Základ pro benchmarky, které budeme provádět</h2>

<pre>
<i># Rozšíření pgvector pro databázi PostgreSQL</i>
<i>#</i>
<i># - příprava pro benchmark rozšíření pgvector</i>
<i># - vytvoření tabulky používané benchmarkem</i>
<i># - je použit výchozí index</i>
<i># - zápis vektorů do nově vytvořené tabulky</i>

from time import time

import psycopg2
from pgvector.psycopg2 import register_vector

import numpy as np

<i># parametry benchmarku</i>
DIMENSIONS = 16
VECTOR_COUNT = 10


def create_vector_table(connection, dimensions, print_tables=True):
    """Vytvoření tabulky obsahující sloupec s vektory."""
    DROP_TABLE_STATEMENT = """
        DROP TABLE IF EXISTS v3
    """

    CREATE_TABLE_STATEMENT = """
        CREATE TABLE IF NOT EXISTS v3 (
            id bigserial PRIMARY KEY,
            embedding vector(%s) NOT NULL
        );
    """

    LIST_TABLES_QUERY = """
        SELECT table_schema,table_name
          FROM information_schema.tables
         WHERE table_schema='public'
         ORDER BY table_schema,table_name;
    """

    with connection.cursor() as cursor:
        cursor.execute(DROP_TABLE_STATEMENT)
        connection.commit()

        cursor.execute(CREATE_TABLE_STATEMENT, (dimensions,))
        connection.commit()

        cursor.execute(LIST_TABLES_QUERY)
        tables = cursor.fetchall()

        if print_tables:
            print("Tables in database:")
            for table in tables:
                print(f"    {table[0]}: {table[1]}")
            print()


def fill_in_vector_table(connection, dimensions, vector_count):
    """Naplnění tabulky náhodnými vektory."""
    t1 = time()
    with connection.cursor() as cursor:
        <i># prozatím budeme tabulku naplňovat po jednotlivých záznamech</i>
        for i in range(vector_count):
            # náhodný vektor
            vector = np.random.rand(dimensions).astype("float32")
            cursor.execute("INSERT INTO v3 (embedding) VALUES (%s)", (vector,))
        connection.commit()
    t2 = time()
    return t2 - t1


def print_vector_count(connection):
    """Tisk počtu vektorů uložených v tabulce."""
    with connection.cursor() as cursor:
        cursor.execute("SELECT count(*) FROM v3")
        count = cursor.fetchone()
        print(f"Vectors stored in table v3: {count[0]}")


def main():
    """Vstupní bod do benchmarku."""
    <i># připojení k databázi</i>
    connection = psycopg2.connect(
        host="", port=5432, user="tester", password="123qwe", dbname="test"
    )

    try:
        <i># budeme používat rozšíření pgvector</i>
        register_vector(connection)

        <i># vytvoření tabulky s vektory</i>
        create_vector_table(connection, DIMENSIONS)

        <i># naplnění tabulky s vektory</i>
        t = fill_in_vector_table(connection, DIMENSIONS, VECTOR_COUNT)
        print(f"Time to fill-in database: {t:3} seconds")

        <i># zjištění počtu skutečně uložených vektorů</i>
        print_vector_count(connection)
    finally:
        connection.close()


<i># spuštění benchmarku</i>
main()
</pre>

<pre>
$ uv run index-benchmark-1.py 
Tables in database:
    public: v3

Time to fill-in database: 0.02258753776550293 seconds
Vectors stored in table v3: 10
</pre>

<pre>
test=> \dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | v3                | table | tester
(1 row)
</pre>

<pre>
test=> \d v3
                               Table "public.v3"
  Column   |    Type    | Collation | Nullable |            Default             
-----------+------------+-----------+----------+--------------------------------
 id        | bigint     |           | not null | nextval('v3_id_seq'::regclass)
 embedding | vector(16) |           | not null | 
Indexes:
    "v3_pkey" PRIMARY KEY, btree (id)
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>

<pre>
<i># Rozšíření pgvector pro databázi PostgreSQL</i>
<i>#</i>
<i># - příprava pro benchmark rozšíření pgvector</i>
<i># - vytvoření tabulky používané benchmarkem</i>
<i># - je použit výchozí index</i>
<i># - zápis vektorů do nově vytvořené tabulky</i>
<i># - měří se časy zápisu vektorů</i>

from time import time

import psycopg2
from pgvector.psycopg2 import register_vector

import numpy as np

<i># parametry benchmarku</i>
DIMENSIONS = 16
MAX_VECTOR_COUNT = 100000
STEPS = 10


def create_vector_table(connection, dimensions, print_tables=True):
    """Vytvoření tabulky obsahující sloupec s vektory."""
    DROP_TABLE_STATEMENT = """
        DROP TABLE IF EXISTS v3
    """

    CREATE_TABLE_STATEMENT = """
        CREATE TABLE IF NOT EXISTS v3 (
            id bigserial PRIMARY KEY,
            embedding vector(%s) NOT NULL
        );
    """

    LIST_TABLES_QUERY = """
        SELECT table_schema,table_name
          FROM information_schema.tables
         WHERE table_schema='public'
         ORDER BY table_schema,table_name;
    """

    with connection.cursor() as cursor:
        cursor.execute(DROP_TABLE_STATEMENT)
        connection.commit()

        cursor.execute(CREATE_TABLE_STATEMENT, (dimensions,))
        connection.commit()

        cursor.execute(LIST_TABLES_QUERY)
        tables = cursor.fetchall()

        if print_tables:
            print("Tables in database:")
            for table in tables:
                print(f"    {table[0]}: {table[1]}")
            print()


def fill_in_vector_table(connection, dimensions, vector_count):
    """Naplnění tabulky náhodnými vektory."""
    t1 = time()
    with connection.cursor() as cursor:
        <i># prozatím budeme tabulku naplňovat po jednotlivých záznamech</i>
        for i in range(vector_count):
            # náhodný vektor
            vector = np.random.rand(dimensions).astype("float32")
            cursor.execute("INSERT INTO v3 (embedding) VALUES (%s)", (vector,))
        connection.commit()
    t2 = time()
    return t2 - t1


def print_vector_count(connection):
    """Tisk počtu vektorů uložených v tabulce."""
    with connection.cursor() as cursor:
        cursor.execute("SELECT count(*) FROM v3")
        count = cursor.fetchone()
        print(f"Vectors stored in table v3: {count[0]}")


def main():
    """Vstupní bod do benchmarku."""
    <i># připojení k databázi</i>
    connection = psycopg2.connect(
        host="", port=5432, user="tester", password="123qwe", dbname="test"
    )

    try:
        <i># budeme používat rozšíření pgvector</i>
        register_vector(connection)

        <i># benchmark - naplnění tabulky s vektory</i>
        print("Vector count", "Time")
        for vector_count in range(0, MAX_VECTOR_COUNT+1, MAX_VECTOR_COUNT//STEPS):
            # vytvoření tabulky s vektory
            create_vector_table(connection, DIMENSIONS, print_tables=False)
            t = fill_in_vector_table(connection, DIMENSIONS, vector_count)
            print(vector_count, t)

        <i># zjištění počtu skutečně uložených vektorů</i>
        print_vector_count(connection)
    finally:
        connection.close()


<i># spuštění benchmarku</i>
main()
</pre>


<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>

<p>Zdrojové kódy všech prozatím popsaných demonstračních příkladů určených pro
programovací jazyk Python s&nbsp;nainstalovanými balíčky
<strong>psycopg2</strong> a <strong>pgvector</strong> byly uloženy do
repositáře dostupného na adrese <a
href="https://github.com/tisnik/most-popular-python-libs">https://github.com/tisnik/most-popular-python-libs</a>.
V&nbsp;tabulce zobrazené níže jsou odkazy na jednotlivé příklady:</p>

<table>
<tr><th> #</th><th>Demonstrační příklad</th><th>Stručný popis příkladu</th><th>Cesta</th></tr>
<tr><td> 1</td><td>create_extension.py</td><td>registrace rozšíření <i>vector</i> pro uživatele připojeného k&nbsp;databázi</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_extension.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_extension.py</a></td></tr>
<tr><td> 2</td><td>insert_into_v2.py</td><td>zápis 2D vektorů do tabulky <i>v2</i></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/insert_into_v2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/insert_into_v2.py</a></td></tr>
<tr><td> 3</td><td>insert_normalized.py</td><td>zápis normalizovaných 2D vektorů do tabulky <i>normalized</i></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/insert_normalized.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/insert_normalized.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 4</td><td>read_vectors_1.py</td><td>přečtení vektorů bez jejich konverze na skutečné vektory</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_1.py</a></td></tr>
<tr><td> 5</td><td>read_vectors_2.py</td><td>důkaz, že přečtené vektory jsou vráceny jako řetězce</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_2.py</a></td></tr>
<tr><td> 6</td><td>read_vectors_3.py</td><td>přečtení vektorů z&nbsp;databáze ve formě N-dimenzionálních polí</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_3.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/read_vectors_3.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 7</td><td>select_by_distance_1.py</td><td>výběr vektorů na základě jejich odlišnosti od zadaného vektoru</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_1.py</a></td></tr>
<tr><td> 8</td><td>select_by_distance_2.py</td><td>dtto, ale s&nbsp;lepším naformátováním SQL dotazu</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_2.py</a></td></tr>
<tr><td> 9</td><td>select_by_distance_3.py</td><td>výběr vektorů s&nbsp;nejmenší odlišností (vzdáleností)</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_3.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_3.py</a></td></tr>
<tr><td>10</td><td>select_by_distance_4.py</td><td>výběr vektorů se zadanou nejmenší odlišností (vzdáleností)</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_4.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/select_by_distance_4.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>11</td><td>various_distances.py</td><td>použití různých metrik na nenormalizované vektory</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/various_distances.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/various_distances.py</a></td></tr>
<tr><td>12</td><td>various_distances_normalized.py</td><td>použití různých metrik na normalizované vektory</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/various_distances_normalized.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/various_distances_normalized.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>13</td><td>create_table_v2.py</td><td>vytvoření tabulky se sloupcem, který bude obsahovat dvouprvkové vektory</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v2.py</a></td></tr>
<tr><td>14</td><td>create_table_v384.py</td><td>vytvoření tabulky se sloupcem, který bude obsahovat vektory s&nbsp;384 prvky</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v384.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v384.py</a></td></tr>
<tr><td>16</td><td>create_embeddings_one_sentence.py</td><td>vektorizace jediné věty na základě zvoleného modelu</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_embeddings_one_sentence.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_embeddings_one_sentence.py</a></td></tr>
<tr><td>17</td><td>create_embeddings.py</td><td>vektorizace většího počtu vět na základě zvoleného modelu</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_embeddings.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_embeddings.py</a></td></tr>
<tr><td>18</td><td>sentence_into_v384.py</td><td>vložení vektoru reprezentujícího jedinou větu do tabulky se sloupcem typu vektor</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_into_v384.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_into_v384.py</a></td></tr>
<tr><td>19</td><td>sentences_into_v384.py</td><td>vložení většího množství vět do tabulky se sloupcem typu vektor</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentences_into_v384.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentences_into_v384.py</a></td></tr>
<tr><td>20</td><td>sentence_similarity_1.py</td><td>sémantické vyhledávání přes rozšíření <strong>pgvector</strong></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_similarity_1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_similarity_1.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>21</td><td>create_table_v384B.py</td><td>vytvoření tabulky se sloupcem typu vektor a sloupcem s&nbsp;původním textem</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v384B.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/create_table_v384B.py</a></td></tr>
<tr><td>22</td><td>sentences_into_v384b.py</td><td>vložení vektorizovaného i původního textu do tabulky <strong>v384b</strong></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentences_into_v384b.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentences_into_v384b.py</a></td></tr>
<tr><td>23</td><td>sentence_similarity_2.py</td><td>sémantické vyhledávání přes rozšíření <strong>pgvector</strong></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_similarity_2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/sentence_similarity_2.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>24</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/</a></td></tr>
<tr><td>25</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/</a></td></tr>
<tr><td>26</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/</a></td></tr>
<tr><td>27</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/</a></td></tr>
<tr><td>28</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>??</td><td>pyproject.toml</td><td>soubor s&nbsp;definicí Pythonovského projektu</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/pyproject.toml">https://github.com/tisnik/most-popular-python-libs/blob/master/pgvector/pyproject.toml</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>pgvector: vektorová databáze postavená na Postgresu<br />
<a href="https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/">https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/</a>
</li>

<li>Rozšíření PostgreSQL jménem pgvector, embedding a sémantické vyhledávání (1. část)<br />
<a href="https://www.root.cz/clanky/rozsireni-postgresql-jmenem-pgvector-embedding-a-semanticke-vyhledavani-1-cast/">https://www.root.cz/clanky/rozsireni-postgresql-jmenem-pgvector-embedding-a-semanticke-vyhledavani-1-cast/</a>
</li>

<li>FAISS: knihovna pro rychlé a efektivní vyhledávání podobných vektorů<br />
<a href="https://www.root.cz/clanky/faiss-knihovna-pro-rychle-a-efektivni-vyhledavani-podobnych-vektoru/">https://www.root.cz/clanky/faiss-knihovna-pro-rychle-a-efektivni-vyhledavani-podobnych-vektoru/</a>
</li>

<li>FAISS: knihovna pro rychlé a efektivní vyhledávání podobných vektorů (2. část)<br />
<a href="https://www.root.cz/clanky/faiss-knihovna-pro-rychle-a-efektivni-vyhledavani-podobnych-vektoru-2-cast/">https://www.root.cz/clanky/faiss-knihovna-pro-rychle-a-efektivni-vyhledavani-podobnych-vektoru-2-cast/</a>
</li>

<li>Knihovna FAISS a embedding: základ jazykových modelů<br />
<a href="https://www.root.cz/clanky/knihovna-faiss-a-embedding-zaklad-jazykovych-modelu/">https://www.root.cz/clanky/knihovna-faiss-a-embedding-zaklad-jazykovych-modelu/</a>
</li>

<li>Knihovna FAISS a embedding: základ jazykových modelů (2. část)<br />
<a href="https://www.root.cz/clanky/knihovna-faiss-a-embedding-zaklad-jazykovych-modelu-2-cast/">https://www.root.cz/clanky/knihovna-faiss-a-embedding-zaklad-jazykovych-modelu-2-cast/</a>
</li>

<li>FAISS (Facebook AI Similarity Search)<br />
<a href="https://en.wikipedia.org/wiki/FAISS">https://en.wikipedia.org/wiki/FAISS</a>
</li>

<li>FAISS documentation<br />
<a href="https://faiss.ai/">https://faiss.ai/</a>
</li>

<li>Introduction to Facebook AI Similarity Search (Faiss)<br />
<a href="https://www.pinecone.io/learn/series/faiss/faiss-tutorial/">https://www.pinecone.io/learn/series/faiss/faiss-tutorial/</a>
</li>

<li>Faiss: Efficient Similarity Search and Clustering of Dense Vectors<br />
<a href="https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235">https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235</a>
</li>

<li>Cosine Distance vs Dot Product vs Euclidean in vector similarity search<br />
<a href="https://medium.com/data-science-collective/cosine-distance-vs-dot-product-vs-euclidean-in-vector-similarity-search-227a6db32edb">https://medium.com/data-science-collective/cosine-distance-vs-dot-product-vs-euclidean-in-vector-similarity-search-227a6db32edb</a>
</li>

<li>F16C<br />
<a href="https://en.wikipedia.org/wiki/F16C">https://en.wikipedia.org/wiki/F16C</a>
</li>

<li>FP16 (AVX-512)<br />
<a href="https://en.wikipedia.org/wiki/AVX-512#FP16">https://en.wikipedia.org/wiki/AVX-512#FP16</a>
</li>

<li>Top 8 Vector Databases in 2025: Features, Use Cases, and Comparisons<br />
<a href="https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/">https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/</a>
</li>

<li>Is FAISS a Vector Database? Complete Guide<br />
<a href="https://mljourney.com/is-faiss-a-vector-database-complete-guide/">https://mljourney.com/is-faiss-a-vector-database-complete-guide/</a>
</li>

<li>Vector database<br />
<a href="https://en.wikipedia.org/wiki/Vector_database">https://en.wikipedia.org/wiki/Vector_database</a>
</li>

<li>Similarity search<br />
<a href="https://en.wikipedia.org/wiki/Similarity_search">https://en.wikipedia.org/wiki/Similarity_search</a>
</li>

<li>Nearest neighbor search<br />
<a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods">https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods</a>
</li>

<li>Decoding Similarity Search with FAISS: A Practical Approach<br />
<a href="https://www.luminis.eu/blog/decoding-similarity-search-with-faiss-a-practical-approach/">https://www.luminis.eu/blog/decoding-similarity-search-with-faiss-a-practical-approach/</a>
</li>

<li>MetricType and distances<br />
<a href="https://github.com/facebookresearch/faiss/wiki/MetricType-and-distances">https://github.com/facebookresearch/faiss/wiki/MetricType-and-distances</a>
</li>

<li>RAG - Retrieval-augmented generation<br />
<a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation">https://en.wikipedia.org/wiki/Retrieval-augmented_generation</a>
</li>

<li>pgvector na GitHubu<br />
<a href="https://github.com/pgvector/pgvector">https://github.com/pgvector/pgvector</a>
</li>

<li>Why we replaced Pinecone with PGVector<br />
<a href="https://www.confident-ai.com/blog/why-we-replaced-pinecone-with-pgvector">https://www.confident-ai.com/blog/why-we-replaced-pinecone-with-pgvector</a>
</li>

<li>PostgreSQL as VectorDB - Beginner Tutorial<br />
<a href="https://www.youtube.com/watch?v=Ff3tJ4pJEa4">https://www.youtube.com/watch?v=Ff3tJ4pJEa4</a>
</li>

<li>What is a Vector Database? (neobsahuje odpověď na otázku v titulku :-)<br />
<a href="https://www.youtube.com/watch?v=t9IDoenf-lo">https://www.youtube.com/watch?v=t9IDoenf-lo</a>
</li>

<li>PGVector: Turn PostgreSQL Into A Vector Database<br />
<a href="https://www.youtube.com/watch?v=j1QcPSLj7u0">https://www.youtube.com/watch?v=j1QcPSLj7u0</a>
</li>

<li>Milvus<br />
<a href="https://milvus.io/">https://milvus.io/</a>
</li>

<li>Vector Databases simply explained! (Embeddings &amp; Indexes)<br />
<a href="https://www.youtube.com/watch?v=dN0lsF2cvm4">https://www.youtube.com/watch?v=dN0lsF2cvm4</a>
</li>

<li>Vector databases are so hot right now. WTF are they?<br />
<a href="https://www.youtube.com/watch?v=klTvEwg3oJ4">https://www.youtube.com/watch?v=klTvEwg3oJ4</a>
</li>

<li>Step-by-Step Guide to Installing “pgvector” and Loading Data in PostgreSQL<br />
<a href="https://medium.com/@besttechreads/step-by-step-guide-to-installing-pgvector-and-loading-data-in-postgresql-f2cffb5dec43">https://medium.com/@besttechreads/step-by-step-guide-to-installing-pgvector-and-loading-data-in-postgresql-f2cffb5dec43</a>
</li>

<li>Best 17 Vector Databases for 2025<br />
<a href="https://lakefs.io/blog/12-vector-databases-2023/">https://lakefs.io/blog/12-vector-databases-2023/</a>
</li>

<li>Top 15 Vector Databases that You Must Try in 2025<br />
<a href="https://www.geeksforgeeks.org/top-vector-databases/">https://www.geeksforgeeks.org/top-vector-databases/</a>
</li>

<li>Picking a vector database: a comparison and guide for 2023<br />
<a href="https://benchmark.vectorview.ai/vectordbs.html">https://benchmark.vectorview.ai/vectordbs.html</a>
</li>

<li>Top 9 Vector Databases as of Feburary 2025<br />
<a href="https://www.shakudo.io/blog/top-9-vector-databases">https://www.shakudo.io/blog/top-9-vector-databases</a>
</li>

<li>What is a vector database?<br />
<a href="https://www.ibm.com/think/topics/vector-database">https://www.ibm.com/think/topics/vector-database</a>
</li>

<li>SQL injection<br />
<a href="https://en.wikipedia.org/wiki/SQL_injection">https://en.wikipedia.org/wiki/SQL_injection</a>
</li>

<li>Cosine similarity<br />
<a href="https://en.wikipedia.org/wiki/Cosine_similarity">https://en.wikipedia.org/wiki/Cosine_similarity</a>
</li>

<li>Euclidean distance<br />
<a href="https://en.wikipedia.org/wiki/Euclidean_distance">https://en.wikipedia.org/wiki/Euclidean_distance</a>
</li>

<li>Dot product<br />
<a href="https://en.wikipedia.org/wiki/Dot_product">https://en.wikipedia.org/wiki/Dot_product</a>
</li>

<li>Hammingova vzdálenost<br />
<a href="https://cs.wikipedia.org/wiki/Hammingova_vzd%C3%A1lenost">https://cs.wikipedia.org/wiki/Hammingova_vzd%C3%A1lenost</a>
</li>

<li>Jaccard index<br />
<a href="https://en.wikipedia.org/wiki/Jaccard_index">https://en.wikipedia.org/wiki/Jaccard_index</a>
</li>

<li>Manhattanská metrika<br />
<a href="https://cs.wikipedia.org/wiki/Manhattansk%C3%A1_metrika">https://cs.wikipedia.org/wiki/Manhattansk%C3%A1_metrika</a>
</li>

<li>FAISS (Facebook AI Similarity Search)<br />
<a href="https://en.wikipedia.org/wiki/FAISS">https://en.wikipedia.org/wiki/FAISS</a>
</li>

<li>FAISS documentation<br />
<a href="https://faiss.ai/">https://faiss.ai/</a>
</li>

<li>Introduction to Facebook AI Similarity Search (Faiss)<br />
<a href="https://www.pinecone.io/learn/series/faiss/faiss-tutorial/">https://www.pinecone.io/learn/series/faiss/faiss-tutorial/</a>
</li>

<li>Faiss: Efficient Similarity Search and Clustering of Dense Vectors<br />
<a href="https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235">https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235</a>
</li>

<li>Cosine Distance vs Dot Product vs Euclidean in vector similarity search<br />
<a href="https://medium.com/data-science-collective/cosine-distance-vs-dot-product-vs-euclidean-in-vector-similarity-search-227a6db32edb">https://medium.com/data-science-collective/cosine-distance-vs-dot-product-vs-euclidean-in-vector-similarity-search-227a6db32edb</a>
</li>

<li>F16C<br />
<a href="https://en.wikipedia.org/wiki/F16C">https://en.wikipedia.org/wiki/F16C</a>
</li>

<li>FP16 (AVX-512)<br />
<a href="https://en.wikipedia.org/wiki/AVX-512#FP16">https://en.wikipedia.org/wiki/AVX-512#FP16</a>
</li>

<li>Top 8 Vector Databases in 2025: Features, Use Cases, and Comparisons<br />
<a href="https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/">https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/</a>
</li>

<li>Is FAISS a Vector Database? Complete Guide<br />
<a href="https://mljourney.com/is-faiss-a-vector-database-complete-guide/">https://mljourney.com/is-faiss-a-vector-database-complete-guide/</a>
</li>

<li>FAISS and sentence-transformers in 5 Minutes<br />
<a href="https://www.stephendiehl.com/posts/faiss/">https://www.stephendiehl.com/posts/faiss/</a>
</li>

<li>Sentence Transformer: Quickstart<br />
<a href="https://sbert.net/docs/quickstart.html#sentence-transformer">https://sbert.net/docs/quickstart.html#sentence-transformer</a>
</li>

<li>Sentence Transformers: Embeddings, Retrieval, and Reranking<br />
<a href="https://pypi.org/project/sentence-transformers/">https://pypi.org/project/sentence-transformers/</a>
</li>

<li>uv<br />
<a href="https://docs.astral.sh/uv/">https://docs.astral.sh/uv/</a>
</li>

<li>A Gentle Introduction to Retrieval Augmented Generation (RAG)<br />
<a href="https://wandb.ai/cosmo3769/RAG/reports/A-Gentle-Introduction-to-Retrieval-Augmented-Generation-RAG---Vmlldzo1MjM4Mjk1">https://wandb.ai/cosmo3769/RAG/reports/A-Gentle-Introduction-to-Retrieval-Augmented-Generation-RAG---Vmlldzo1MjM4Mjk1</a>
</li>

<li>The Beginner’s Guide to Text Embeddings<br />
<a href="https://www.deepset.ai/blog/the-beginners-guide-to-text-embeddings">https://www.deepset.ai/blog/the-beginners-guide-to-text-embeddings</a>
</li>

<li>What are Word Embeddings?<br />
<a href="https://www.youtube.com/watch?v=wgfSDrqYMJ4">https://www.youtube.com/watch?v=wgfSDrqYMJ4</a>
</li>

<li>How to choose an embedding model<br />
<a href="https://www.youtube.com/watch?v=djp4205tHGU">https://www.youtube.com/watch?v=djp4205tHGU</a>
</li>

<li>What is a Vector Database? Powering Semantic Search &amp; AI Applications<br />
<a href="https://www.youtube.com/watch?v=gl1r1XV0SLw">https://www.youtube.com/watch?v=gl1r1XV0SLw</a>
</li>

<li>How do Sentence Transformers differ from traditional word embedding models like Word2Vec or GloVe?<br />
<a href="https://zilliz.com/ai-faq/how-do-sentence-transformers-differ-from-traditional-word-embedding-models-like-word2vec-or-glove">https://zilliz.com/ai-faq/how-do-sentence-transformers-differ-from-traditional-word-embedding-models-like-word2vec-or-glove</a>
</li>

<li>BERT (language model)<br />
<a href="https://en.wikipedia.org/wiki/BERT_(language_model)">https://en.wikipedia.org/wiki/BERT_(language_model)</a>
</li>

<li>Levenštejnova vzdálenost<br />
<a href="https://cs.wikipedia.org/wiki/Leven%C5%A1tejnova_vzd%C3%A1lenost">https://cs.wikipedia.org/wiki/Leven%C5%A1tejnova_vzd%C3%A1lenost</a>
</li>

<li>pgvector Tutorial: Integrate Vector Search into PostgreSQL<br />
<a href="https://www.datacamp.com/tutorial/pgvector-tutorial">https://www.datacamp.com/tutorial/pgvector-tutorial</a>
</li>

<li>pgvectorbench<br />
<a href="https://github.com/pgvectorBench/pgvectorBench">https://github.com/pgvectorBench/pgvectorBench</a>
</li>

<li>pgvector 0.4.0 performance<br />
<a href="https://supabase.com/blog/pgvector-performance">https://supabase.com/blog/pgvector-performance</a>
</li>

<li>IVFFlat (Inverted File Flat) Index<br />
<a href="https://skyzh.github.io/write-you-a-vector-db/cpp-05-ivfflat.html">https://skyzh.github.io/write-you-a-vector-db/cpp-05-ivfflat.html</a>
</li>

<li>HNSW (Hierarchical Navigable Small Worlds) Index<br />
<a href="https://skyzh.github.io/write-you-a-vector-db/cpp-06-02-hnsw.html">https://skyzh.github.io/write-you-a-vector-db/cpp-06-02-hnsw.html</a>
</li>

<li>Vector Indexing: Your Guide to Understanding and Implementation<br />
<a href="https://www.teradata.com/insights/ai-and-machine-learning/what-is-vector-index">https://www.teradata.com/insights/ai-and-machine-learning/what-is-vector-index</a>
</li>

<li>Vector Indexing Explained: Everything You Need to Know<br />
<a href="https://www.datastax.com/guides/what-is-a-vector-index">https://www.datastax.com/guides/what-is-a-vector-index</a>
</li>

<li>Voroného diagram<br />
<a href="https://cs.wikipedia.org/wiki/Voron%C3%A9ho_diagram">https://cs.wikipedia.org/wiki/Voron%C3%A9ho_diagram</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="https://github.com/tisnik/">Pavel Tišnovský</a> &nbsp; 2025</small></p>
</body>
</html>

