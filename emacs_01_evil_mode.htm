<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Evil: kombinace editačních příkazů Vimu a síly Emacsu</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. Evil: kombinace editačních příkazů Vimu a síly Emacsu</a></p>
<p><a href="#k02">*** 2. Proč by měl být Emacs zajímavý i pro Vimaře?</a></p>
<p><a href="#k03">*** 3. Instalace balíčku Evil do Emacsu</a></p>
<p><a href="#k04">*** 4. Povolení režimu Evil, přepínání režimů Emacs/Vim</a></p>
<p><a href="#k05">*** 5. Základní editační příkazy</a></p>
<p><a href="#k06">*** 6. Práce s&nbsp;registry (<i>registers</i>)</a></p>
<p><a href="#k07">*** 7. Použití značek (<i>marks</i>)</a></p>
<p><a href="#k08">*** 8. Další přizpůsobení Emacsu pro skalní Vimaře</a></p>
<p><a href="#k09">*** 9. Modifikace funkce klávesy <strong>Y</strong></a></p>
<p><a href="#k10">*** 10. Ostatní užitečná nastavení</a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. Balíček <strong>evil-numbers</strong></a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Obsah navazujícího článku &ndash; projekt <strong>spacemacs</strong></i></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Evil: kombinace editačních příkazů Vimu a síly Emacsu</h2>

<p> S&nbsp;Emacsem jsme se na Rootu setkali, a to dokonce několikrát. Především vyšly dva seriály [<a href="https://www.root.cz/serialy/emacs-viac-nez-len-editor/">1</a>] [<a href="https://www.root.cz/serialy/emacs-pro-mirne-pokrocile/">2</a>] věnované použití Emacsu, poměrně podrobně jsme si popsali i <a href="https://www.root.cz/clanky/historie-vyvoje-textovych-editoru-eine-zwei-emacs/">historii vzniku tohoto editoru</a> a taktéž jsme si ukázali schopnosti Emacsu při <a href="https://www.root.cz/clanky/graficka-nadstavba-nad-gnu-debuggerem-gdbgui-a-jeji-alternativy/#k07">ladění nativních aplikací</a> (samotné ladění je prováděno GNU Debuggerem, Emacs zde slouží jako inteligentní front end). Prozatím <a href="https://www.root.cz/clanky/pouziti-emacsu-pro-porovnavani-a-slucovani-souboru/">poslední článek</a> se věnoval režimu interaktivního porovnávání souborů.</p>

*** image ***
<p><i>Obrázek 1: Spuštění textového editoru Emacs se zobrazením hypertextového
souboru s&nbsp;nápovědou.</i></p>

<p>I přesto, že v&nbsp;současnosti existuje poměrně velké množství programátorských textových editorů postavených na moderních technologiích (<a href="https://www.root.cz/clanky/atom-moderni-textovy-editor/">Atom</a>, <a href="https://www.root.cz/clanky/sublime-text-2-pokrocily-editor-vychazejici-z-vimu/">Sublime Text 2</a>, <a href="https://www.root.cz/clanky/light-table-interaktivni-vyvojove-prostredi/">Light Table</a>, Kakoune), stále mnoho uživatelů &ndash; ať již se jedná o programátory, administrátory, testery atd. &ndash; používá dnes již klasické editory <a href="https://www.root.cz/n/vim/">Vim</a> a <a href="https://www.root.cz/n/emacs/">Emacs</a>. Ostatně není se čemu divit, protože jak ve Vimu, tak i v&nbsp;Emacsu lze s&nbsp;texty pracovat velmi efektivně a navíc je možné si mnohé úlohy plně zautomatizovat.</p>

*** image ***
<p><i>Obrázek 2: GNU Emacs přepnutý do takzvaného ediff režimu.</i></p>

<p>Důležité upozornění: v&nbsp;současnosti se používá několik typů textových editorů, v&nbsp;jejichž názvu objevíme slovo Emacs. Jedná se například o <a href="https://en.wikipedia.org/wiki/MicroEMACS">MicroEMACS</a> a jeho varianty, z&nbsp;nichž jedna je používána a <a href="https://git.kernel.org/pub/scm/editors/uemacs/uemacs.git">udržována</a> Linusem Torvaldsem. Dnes se ovšem zaměříme na popis možností GNU Emacsu, i když popisovaný režim by měly být funkční i v XEmacsu (pokud ho ještě někdo používá namísto GNU Emacsu). Všechny popisované funkce je samozřejmě možné použít jak tehdy, když je GNU Emacs spuštěn s&nbsp;plnohodnotným grafickým uživatelským rozhraním, tak i v&nbsp;případě, že používáte GNU Emacs spuštěný v&nbsp;terminálu, například s&nbsp;využitím balíčku <strong>emacs-nox</strong> (nox = no X).</p>

*** image ***
<p><i>Obrázek 3: Pokud vám grafické uživatelské rozhraní u textových editorů nevyhovuje a dáváte přednost použití terminálu, je možné Emacs startovat s&nbsp;volbou <strong>-nw</strong> nebo <strong>--no-window-system</strong>.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Proč by měl být Emacs zajímavý i pro Vimaře?</h2>

<p>Vim je rozšiřitelný díky existenci <i>Vim Scriptu</i>. Díky tomu, že je tento programátorský editor relativně snadno rozšiřitelný s&nbsp;využitím skriptů a modulů naprogramovaných v&nbsp;jazyce Lisp, přesněji řečeno v&nbsp;jeho dialektu nazvaném <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/index.html">Emacs Lisp</a> (též <i>Elisp</i>), existuje v&nbsp;současnosti poměrně velké množství propracovaných modulů, které z&nbsp;<i>Emacsu</i> vytváří sofistikované integrované vývojové prostředí (IDE), jež se navíc v&nbsp;případě potřeby dokáže přizpůsobit mnoha programovacím jazykům (překladačům i interpretrům).</p>

*** image ***
<p><i>Obrázek 4: Porovnání tří variant zdrojového kódu v&nbsp;ediff režimu.</i></p>

<p><div class="rs-tip-major">Poznámka: mimochodem, výše zmíněný editor Kakoune je modální, takže Vi a jeho deriváty nejsou jedinými v&nbsp;současnosti používanými modálními editory.</div></p>

<p>Textový editor <i>Emacs</i> je možné v&nbsp;závislosti na tom, jaký typ souboru je právě otevřený, přepínat mezi různými režimy, přičemž v&nbsp;každém režimu mohou být použity jiné klávesové zkratky, zobrazena odlišná okna (nejenom klasická okna s&nbsp;editovaným textem) apod. Příkladem může být režim ladění programů s&nbsp;využitím GNU Debuggeru. O propojení debuggeru s&nbsp;Emacsem se stará knihovna <i>GUD</i> neboli <i>Grand Unified Debugger</i>, s&nbsp;níž se můžete seznámit v&nbsp;článku <a href="https://mojefedora.cz/debuggery-a-jejich-nadstavby-v-linuxu-5-ladeni-aplikaci-v-editorech-emacs-a-vim/">Debuggery a jejich nadstavby v Linuxu (5): ladění aplikací v editorech Emacs a Vim</a>. Zapomenout nesmíme ani na slavný <i>Org-mode</i> nabízející možnosti plánovače úloh, tvorbu strukturovaných dokumentů, přípravu programů schůzek, práci s&nbsp;tabulkami (v&nbsp;čistě textových dokumentech). Ostatně znám několik lidí, kteří přešli na Emacs právě kvůli existenci <i>Org-mode</i>.</p>

*** image ***
<p><i>Obrázek 5: Podpora ladění přímo z&nbsp;prostředí Emacsu &ndash; inicializace knihovny GUD a připojení Emacsu ke GNU Debuggeru.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Instalace balíčku Evil do Emacsu</h2>

<pre>
Alt+X list-packages
</pre>

*** image ***
<p><i>Obrázek 7: V&nbsp;případě, že repositář MELPA není povolen, budou
dostupné pouze balíčky z&nbsp;výchozího repositáře ELPA (Emacs Lisp Package
Archive).</i></p>

*** image ***
<p><i>Obrázek 8: V&nbsp;případě, že je repositář MELPA povolen, měl by se
v&nbsp;seznamu balíčků objevit i plugin <strong>evil</strong>.</i></p>

*** image ***
<p><i>Obrázek 9: Výběr pluginu <strong>evil</strong> pro instalaci.</i></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Povolení režimu Evil, přepínání režimů Emacs/Vim</h2>



<p><a name="k05"></a></p>
<h2 id="k05">5. Základní editační příkazy</h2>



<p><a name="k06"></a></p>
<h2 id="k06">6. Práce s&nbsp;registry (<i>registers</i>)</h2>



<p><a name="k07"></a></p>
<h2 id="k07">7. Použití značek (<i>marks</i>)</h2>



<p><a name="k08"></a></p>
<h2 id="k08">8. Další přizpůsobení Emacsu pro skalní Vimaře</h2>

Výchozí konfigurace používaná balíčkem Evil samozřejmě nemusí všem vyhovovat. V&nbsp;této kapitole se zmíním o některých nastaveních, která osobně považuji za užitečná, i když se chování Evil-u bude odlišovat od standardního chování Vimu (přesněji řečeno Vimu s&nbsp;nastavením <strong>nocompatible</strong>). Podobná nastavení mám ovšem provedena i v&nbsp;klasickém Vimu, takže se oba editory budou z&nbsp;tohoto pohledu chovat velmi podobně.


<p><a name="k09"></a></p>
<h2 id="k09">9. Modifikace funkce klávesy <strong>Y</strong></h2>

První nastavení se týká operátoru <strong>Y</strong>. Standardní chování tohoto příkazu znamená: vlož celý řádek (popř.&nbsp;více řádků při zadání čísla) do registru. To ovšem logicky koliduje s&nbsp;dalšími operátory, zejména Change a Delete. Tyto operátory totiž existují v&nbsp;kombinacích:

<table>
<tr><th></th><th></th></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
</table>

(setq evil-want-Y-yank-to-eol t)

(setq evil-move-beyond-eol nil)

(setq evil-backspace-join-lines t)

(setq evil-cross-line t)

(setq evil-symbol-word-search t)

ctrl+space
ctrl+e
copy Alt+w

ctrl-u ctrl-space

(push-mark)
(set-mark-command)
(move-end-of-line)
(kill-ring-save)
(set-mark-command number?)

‘exchange-point-and-mark

