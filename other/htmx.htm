<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>HTMX: knihovna pro tvorbu dynamických stránek založená na vylepšeném hypertextu</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>HTMX: knihovna pro tvorbu dynamických stránek založená na hypertextu s rozšířenými možnostmi</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. HTMX: knihovna pro tvorbu dynamických stránek založená na vylepšeném</a></p>
<p><a href="#k02">*** 2. Hypermedia as the Engine of Application State (HATEOAS)</a></p>
<p><a href="#k03">3. Omezení současného HTML</a></p>
<p><a href="#k04">4. Řešení nabízená projektem HTMX</a></p>
<p><a href="#k05">5. Příklad použití HTMX</a></p>
<p><a href="#k06">*** 6. Praktický příklad</a></p>
<p><a href="#k07">*** 7. </a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. Webová aplikace založená na backendu naprogramovaného v&nbsp;jazyku Go</a></p>
<p><a href="#k11">*** 11. Jednoduchý HTTP server naprogramovaný v&nbsp;jazyku Go</a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. HTMX: knihovna pro tvorbu dynamických stránek založená na vylepšeném hypertextu</h2>

<p></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Hypermedia as the Engine of Application State (HATEOAS)</h2>

<p></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Omezení současného HTML</h2>

<p>Autoři dále popsané knihovny <i>HTMX</i> identifikovali čtyři omezení jazyka HTML (včetně poslední verze HTML5), které vývojáře de facto nutí k&nbsp;tomu, aby tato omezení obcházeli přímým použitím JavaScriptu, a to i v&nbsp;těch situacích, kdy je JavaScriptový kód použit k&nbsp;operacím, které by mohly být nabízeny přímo HTML prohlížečem.</p>

<p>Jedná se o následující omezení (která, jak je patrné, spolu do určité míry souvisí):</p>

<ol>

<li>HTTP požadavky (posílané na server na základě akcí provedených uživatelem) lze vyvolat pouze dvěma ovládacími prvky vytvořenými s&nbsp;využitím značek <strong>&lt;a&gt;</strong> a <strong>&lt;form&gt;</strong>, tedy pomocí hypertextového odkazu a formuláře.</li>

<li>Samotný požadavek je přitom vyvolán jen dvěma akcemi &ndash; <i>click</i> a <i>submit</i>, tedy kliknutím na hypertextový odkaz a odesláním formuláře.  Žádné další uživatelské akce k&nbsp;poslání požadavku nevedou (pochopitelně pokud nepoužijeme JavaScript).</li>

<li>Podporovány jsou pouze dvě HTTP metody, a to konkrétně metoda <strong>GET</strong> (hypertextový odkaz, formulář) a <strong>POST</strong> (formulář).</li>

<li>Po odeslání požadavku dojde (společně s&nbsp;příchodem odpovědi) ke změně obsahu celé HTML stránky &ndash; celá stránka se tedy nahrazuje stránkou novou.</li>

</ol>

<p><div class="rs-tip-major">Poznámka: poslední omezení bylo do určité míry obcházeno použitím rámců (<i>frame</i>) a vložených rámců (<i>iframe</i>), což je dnes značně nepopulární technologie.</div></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Řešení nabízená projektem HTMX</h2>

<p>Všechna výše uvedená omezení jazyka HTML jsou v&nbsp;knihovně HTMX řešena, a to takovým způsobem, že jsou zavedeny nové atributy dostupné u prakticky všech HTML značek. Tyto atributy určují, na jaké události má daný prvek reagovat (a nemusí se jednat jen o <i>click</i> či <i>submit</i>), jaký požadavek se má poslat na server, jaká HTTP metoda se použije a v&nbsp;neposlední řadě se taktéž specifikuje jaká <i>oblast</i> HTML stránky se má překreslit, tedy nahradit za data získaná ze serveru.</p>

<p>Mezi nové atributy patří zejména:</p>

<table>
<tr><th>Atribut</th><th>Stručný popis</th></tr>
<tr><td>hx-trigger</td><td>specifikace události, která vyvolá dotaz (požadavek) poslaný na server</td></tr>
<tr><td>hx-request</td><td>konfigurace toho, jak má vypadat dotaz (požadavek) poslaný na server</td></tr>
<tr><td>hx-target</td><td>specifikace oblasti stránky, která se překreslí po přijetí odpovědi</td></tr>
<tr><td>hx-swap hx-swap-oob</td><td>specifikace, jak se má překreslit daná oblast stránky</td></tr>
<tr><td>hx-get hx-post hx-put hx-delete hx-patch</td><td>specifikace různých HTTP metod</td></tr>
<tr><td>hx-vals hx-vars</td><td>hodnoty posílané v&nbsp;požadavku (typicky v&nbsp;JSONu)</td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: jak uvidíme dále, předpokládá se, že odpovědí na požadavek bude HTML kód popř.&nbsp;čistý text, kterým se nahradí určitá značka na HTML stránce.</div></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Příklad použití HTMX</h2>

<p>Podívejme se nyní na velmi jednoduchý příklad, který je uveden i na stránce <a href="https://htmx.org/docs/">https://htmx.org/docs/</a>. Jedná se o standardní ovládací prvek typu &bdquo;tlačítko&ldquo; zapsané na HTML stránce, ovšem s&nbsp;přidanými novými atributy podporovanými knihovnou HTMX:</p>

<pre>
&lt;button hx-post="/clicked"
    <strong>hx-trigger="click"</strong>
    <strong>hx-target="#parent-div"</strong>
    <strong>hx-swap="outerHTML"</strong>
&gt;
    Click Me!
&lt;/button&gt;
</pre>

<p>Díky těmto novým atributům bylo možné specifikovat následující chování HTML
stránky:</p>

<ol>
<li>Po stisku tlačítka je na server poslán dotaz</li>
<li>Přečtenou odpovědí (což bude část HTML stránky) bude nahrazen prvek s&nbsp;identifikátorem <i>#parent-div</i></li>
<li>Nahrazen přitom bude celý prvek, včetně svého &bdquo;kořenového&ldquo; elementu</li>
</ol>

<p><div class="rs-tip-major">Poznámka: povšimněte si, že jsme definovali nejenom to, <i>jaké informace</i> se mají na HTML stránce zobrazit, ale můžeme zvolit i <i>styl zobrazení</i> (pomocí CSS) a dokonce i &bdquo;dynamické&ldquo; <i>chování</i> stránky; tj.&nbsp;bude se jednat o plnohodnotnou hypermediální stránku reagující na akce prováděné uživatelem. Všechny tři součásti HTML stránky jsou přitom zapsány čistě deklarativním stylem, nikoli s&nbsp;využitím imperativního kódu.</div></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Praktický příklad</h2>

<p></p>

<pre>
.
├── basic_example1.htm
├── basic_example2.htm
├── cgi-bin
│   ├── answer
│   ├── answer2
│   └── answer3
├── get_htmx
├── htmx.min.js
├── outer_div1.htm
└── outer_div2.htm
&nbsp;
1 directory, 9 files
</pre>

<p><div class="rs-tip-major">Poznámka: v&nbsp;adresáři s&nbsp;projektem je
uložen i skript nazvaný <strong>get_htmx</strong>, který po svém spuštění
stáhne poslední minifikovanou verzi knihovny HTMX. Tento skript je tedy nutné
spustit ještě před spuštěním webového serveru.</div></p>

<pre>
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;HTMX - elementary example&lt;/title&gt;
        &lt;script type="text/javascript" src="htmx.min.js"&gt;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button hx-post="/cgi-bin/answer"
                hx-trigger="click"
                hx-target="#answer-div"&gt;
            Retrieve answer!
        &lt;/button&gt;
&nbsp;
        &lt;div id="answer-div"&gt;
            Answer...?
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>

<pre>
#!/usr/bin/env python3
&nbsp;
import sys
print('200 OK\r\n\r\n42')
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>

<p></p>

<pre>
$ <strong>python3 -m http.server --cgi 9000</strong>
&nbsp;
Serving HTTP on 0.0.0.0 port 9000 (http://0.0.0.0:9000/) ...
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>

<p></p>

<pre>
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;HTMX - elementary example&lt;/title&gt;
        &lt;script type="text/javascript" src="htmx.min.js"&gt;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button hx-post="/cgi-bin/answer"
                hx-trigger="click"
                hx-target="#answer-div"
                hx-swap="outerHTML"&gt;
            Retrieve answer!
        &lt;/button&gt;
&nbsp;
        &lt;div id="answer-div"&gt;
            Answer...?
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>

<p></p>

<pre>
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;HTMX - elementary example&lt;/title&gt;
        &lt;script type="text/javascript" src="htmx.min.js"&gt;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button hx-post="/cgi-bin/answer2"
                hx-trigger="click"
                hx-target="#answer-div"
                hx-swap="outerHTML"&gt;
            Retrieve answer!
        &lt;/button&gt;

        &lt;div id="answer-div"&gt;
            Answer...?
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>

<pre>
#!/usr/bin/env python3

import sys
print('200 OK\r\n\r\n<div style="color:red">42</div>')
</pre>

<pre>
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;HTMX - elementary example&lt;/title&gt;
        &lt;script type="text/javascript" src="htmx.min.js"&gt;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button hx-post="/cgi-bin/answer3"
                hx-trigger="click"
                hx-target="#answer-div"
                hx-swap="outerHTML"&gt;
            Retrieve answer!
        &lt;/button&gt;

        &lt;div id="answer-div"&gt;
            Answer...?
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>

<pre>
#!/usr/bin/env python3

import sys
print('200 OK\r\n\r\n<h1>42</h1>')
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. Webová aplikace založená na backendu naprogramovaného v&nbsp;jazyku Go</h2>

<p></p>

<pre>
.
├── basic_example1.htm
├── get_htmx
├── htmx.min.js
└── httpServer.go
&nbsp;
0 directories, 4 files
</pre>

<p></p>

<pre>
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;HTMX - elementary example&lt;/title&gt;
        &lt;script type="text/javascript" src="htmx.min.js"&gt;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button hx-post="/answer"
                hx-trigger="click"
                hx-target="#answer-div"&gt;
            Retrieve answer!
        &lt;/button&gt;

        &lt;div id="answer-div"&gt;
            Answer...?
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>

<p><div class="rs-tip-major">Poznámka: v&nbsp;adresáři s&nbsp;projektem je opět
uložen i skript nazvaný <strong>get_htmx</strong>, který po svém spuštění
stáhne poslední minifikovanou verzi knihovny HTMX. Tento skript je tedy nutné
spustit ještě před překladem a spuštěním webového serveru.</div></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Jednoduchý HTTP server naprogramovaný v&nbsp;jazyku Go</h2>

<p></p>

<pre>
package <strong>main</strong>
&nbsp;
import (
        "fmt"
        "log"
        "net/http"
)
&nbsp;
func <strong>indexPageHandler</strong>(writer http.ResponseWriter, request *http.Request) {
        http.ServeFile(writer, request, "basic_example1.htm")
}
&nbsp;
func <strong>htmxHandler</strong>(writer http.ResponseWriter, request *http.Request) {
        http.ServeFile(writer, request, "htmx.min.js")
}
&nbsp;
func <strong>answerHandler</strong>(writer http.ResponseWriter, request *http.Request) {
        writer.Header().Set("Content-Type", "application/html")
        writer.WriteHeader(http.StatusOK)
        fmt.Fprint(writer, `&lt;h1&gt;42&lt;/h1&gt;`)
}
&nbsp;
func <strong>startHttpServer</strong>(address string) {
        log.Printf("Starting server on address %s", address)
&nbsp;
        http.HandleFunc("/", indexPageHandler)
        http.HandleFunc("/htmx.min.js", htmxHandler)
        http.HandleFunc("/answer", answerHandler)
        http.ListenAndServe(address, nil)
}
&nbsp;
func <strong>main</strong>() {
        startHttpServer(":8080")
}
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>

<p></p>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>

<p></p>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>

<p></p>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>

<p></p>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>

<p></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>

<p></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>

<p></p>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>

<p>Demonstrační příklady napsané v&nbsp;HTML, Pythonu a Go, byly uloženy do Git
repositáře, který je dostupný na adrese <a
href="https://github.com/tisnik/presentations">https://github.com/tisnik/presentations</a>.
Jednotlivé demonstrační příklady si můžete v&nbsp;případě potřeby stáhnout i
jednotlivě bez nutnosti klonovat celý (dnes již velmi rozsáhlý) repositář:</p>

<table>
<tr><th> #</th><th>Příklad</th><th>Stručný popis</th><th>Adresa</th></tr>
<tr><td> 1</td><td>cgi-based/basic_example1.htm</td><td>tlačítko s&nbsp;akcí definovanou přes HTMX</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/basic_example1.htm">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/basic_example1.htm</a></td></tr>
<tr><td> 2</td><td>cgi-based/basic_example2.htm</td><td>využití atributu hx-swap="outerHTML"</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/basic_example2.htm">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/basic_example2.htm</a></td></tr>
<tr><td> 3</td><td>cgi-based/outer_div1.htm</td><td>využití atributu hx-swap="outerHTML", volání odlišného cgi-bin skriptu</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/outer_div1.htm">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/outer_div1.htm</a></td></tr>
<tr><td> 4</td><td>cgi-based/outer_div2.htm</td><td>využití atributu hx-swap="outerHTML", volání odlišného cgi-bin skriptu</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/outer_div2.htm">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/outer_div2.htm</a></td></tr>
<tr><td> 5</td><td>cgi-based/get_htmx</td><td>skript pro získání knihovny htmx.js</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/get_htmx">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/get_htmx</a></td></tr>
<tr><td> 6</td><td>cgi-based/cgi-bin/answer</td><td>cgi-bin skript naprogramovaný v&nbsp;Pythonu</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer</a></td></tr>
<tr><td> 7</td><td>cgi-based/cgi-bin/answer2</td><td>cgi-bin skript naprogramovaný v&nbsp;Pythonu vracející celý odstavec</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer2">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer2</a></td></tr>
<tr><td> 8</td><td>cgi-based/cgi-bin/answer3</td><td>cgi-bin skript naprogramovaný v&nbsp;Pythonu vracející nadpis</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer3">https://github.com/tisnik/presentations/blob/master/htmx/cgi-based/cgi-bin/answer3</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 9</td><td>go-server/get_htmx</td><td>skript pro získání knihovny htmx.js</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/go-server/get_htmx">https://github.com/tisnik/presentations/blob/master/htmx/go-server/get_htmx</a></td></tr>
<tr><td>10</td><td>go-server/basic_example1.htm</td><td>tlačítko s&nbsp;akcí definovanou přes HTMX</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/go-server/basic_example1.htm">https://github.com/tisnik/presentations/blob/master/htmx/go-server/basic_example1.htm</a></td></tr>
<tr><td>11</td><td>go-server/httpServer.go</td><td>HTTP server naprogramovaný v&nbsp;jazyku Go</td><td><a href="https://github.com/tisnik/presentations/blob/master/htmx/go-server/httpServer.go">https://github.com/tisnik/presentations/blob/master/htmx/go-server/httpServer.go</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Dynamic Web Pages Without JavaScript? - Intro to HTMX<br />
<a href="https://www.youtube.com/watch?v=CWSmP3LSILo">https://www.youtube.com/watch?v=CWSmP3LSILo</a>
</li>

<li>htmx: Writing JavaScript to Avoid Writing JavaScript, by Carson Gross<br />
<a href="https://www.youtube.com/watch?v=u2rjnLJ1M98">https://www.youtube.com/watch?v=u2rjnLJ1M98</a>
</li>

<li>Carson Gross - REST, HATEOAS &amp; Django - It's OK to not use JSON... or Javascript<br />
<a href="https://www.youtube.com/watch?v=L_UWY-zHlOA">https://www.youtube.com/watch?v=L_UWY-zHlOA</a>
</li>

<li>htmx.org/dist<br />
<a href="https://unpkg.com/browse/htmx.org@1.7.0/dist/">https://unpkg.com/browse/htmx.org@1.7.0/dist/</a>
</li>

<li>intercooler.js<br />
<a href="https://intercoolerjs.org/">https://intercoolerjs.org/</a>
</li>

<li>htmx - GitHub repositář<br />
<a href="https://github.com/bigskysoftware/htmx">https://github.com/bigskysoftware/htmx</a>
</li>

<li>why should I use htmx ?<br />
<a href="https://www.reddit.com/r/django/comments/v4yqxi/why_should_i_use_htmx/">https://www.reddit.com/r/django/comments/v4yqxi/why_should_i_use_htmx/</a>
</li>

<li>_hyperscript<br />
<a href="https://hyperscript.org/">https://hyperscript.org/</a>
</li>

<li>alpine.js<br />
<a href="https://alpinejs.dev/">https://alpinejs.dev/</a>
</li>

<li>HATEOAS<br />
<a href="https://en.wikipedia.org/wiki/HATEOAS">https://en.wikipedia.org/wiki/HATEOAS</a>
</li>

<li>Django, HTMX and Alpine.JS: A Match Made In Heaven<br />
<a href="https://dev.to/nicholas_moen/what-i-learned-while-using-django-with-htmx-and-alpine-js-24jg">https://dev.to/nicholas_moen/what-i-learned-while-using-django-with-htmx-and-alpine-js-24jg</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2022</small></p>
</body>
</html>

