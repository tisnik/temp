<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">1. 1984 a 1985: přelomové roky v&nbsp;oblasti vývoje osobních počítačů</a></p>
<p><a href="#k02">2. Grafická karta Enhanced Graphics Adapter (EGA)</a></p>
<p><a href="#k03">3. Základní technické parametry grafické karty EGA</a></p>
<p><a href="#k04">4. Bloková struktura grafické karty EGA a její řídicí porty</a></p>
<p><a href="#k05">5. Textové režimy grafické karty EGA</a></p>
<p><a href="#k06">*** 6. První demonstrační příklad: použití textového režimu 80&times;25 znaků</a></p>
<p><a href="#k07">*** 7. Přepnutí do textového režimu 80&times;43 znaků</a></p>
<p><a href="#k08">*** 8. Druhý demonstrační příklad: použití textového režimu 80&times;43 znaků</a></p>
<p><a href="#k09">*** 9. Grafické režimy karty EGA</a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. Třetí demonstrační příklad: grafický režim 320&times;200 se šestnácti barvami</a></p>
<p><a href="#k12">*** 12. Čtvrtý demonstrační příklad: grafický režim 640&times;200 se šestnácti barvami</a></p>
<p><a href="#k13">*** 13. Pátý demonstrační příklad: grafický režim 640&times;350 pixelů (4 či 16 barev)</a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. 1984 a 1985: přelomové roky v&nbsp;oblasti vývoje osobních počítačů</h2>

<p>V&nbsp;předchozích částech letního seriálu o tvorbě grafických dem a her pro
počítače IBM PC jsme si popsali první generaci grafických karet <i>MDA</i> a
<i>CGA</i> navržených firmou IBM, které začaly být spolu s&nbsp;IBM PC
prodávány již od roku 1981. Tyto karty byly určené k&nbsp;instalaci do
originálních počítačů IBM PC, ovšem s&nbsp;příchodem PC XT se začaly používat i
v&nbsp;legálně či ilegálně vyráběných klonech těchto strojů. Kromě toho jsme se
zabývali i &bdquo;alternativními&ldquo; grafickými kartami <i>Hercules</i>, ve
kterých jsou umně spojeny přednosti karty <i>MDA</i> (práce v&nbsp;textovém
režimu s&nbsp;čitelnými znaky v&nbsp;relativně vysokém rozlišení)
s&nbsp;možností práce v&nbsp;monochromatickém grafickém režimu
s&nbsp;rozlišením 720&times;348 pixelů.</p>

<a href="https://i.iinfo.cz/images/347/pc85-1.png"><img src="https://i.iinfo.cz/images/347/pc85-1-prev.png" alt="pc85" width="370" height="231" /></a>
<p><i>Obrázek 1: Verze hry Pacman pro počítače vybavené grafickou kartou CGA.
Kvůli podpoře pouze dvou fixních barvových palet (maximálně 4 barvy) a
neexistenci spritů je tato verze Pacmana paradoxně horší než její konverze
určené pro výkonově slabší a mnohem levnější osmibitové domácí
počítače.</i></p>

<p>V&nbsp;perexu dnešního článku je napsáno, že jedním z&nbsp;mezníků
v&nbsp;historii vývoje osobních počítačů jsou roky 1984 a 1985. V&nbsp;průběhu
těchto dvou let se totiž na trhu objevily nové typy osobních počítačů; shodou
okolností se ve všech případech jedná o počítače postavené na mikroprocesoru
<i>Motorola M68000</i>. Tyto počítače měly velký vliv mj.&nbsp;i na další vývoj
počítačové grafiky a grafických uživatelských rozhraní. A o jakých strojích to
vlastně mluvíme? Jedná se v&nbsp;první řadě o originální <i>Macintosh 128K</i>
(1984) a dále o <i>Atari ST</i> a <i>Amigu</i> (shodně 1985). Zejména Atari ST
a ještě více Amiga pak redefinovaly to, co si pod pojmem &bdquo;počítačová
grafika&ldquo; představovala laická veřejnost. A v&nbsp;tomto srovnání
vycházelo IBM PC (tedy zejména PC XT a první verze PC AT) jako chudý
příbuzný.</p>

<a href="https://i.iinfo.cz/images/347/pc85-2.png"><img src="https://i.iinfo.cz/images/347/pc85-2-prev.png" alt="pc85" width="370" height="231" /></a>
<p><i>Obrázek 2: Textový režim grafické karty CGA se znaky uloženými
v&nbsp;rastru 8×8 pixelů sice nabízel možnost definovat pro každý znak šestnáct
barev popředí a osm barev pozadí, ale čitelnost textu byla v&nbsp;porovnání
s&nbsp;MDA či Herculesem horší (a samozřejmě horší i v&nbsp;porovnání
s&nbsp;Macintoshem, Atari ST či Amigou).</i></p>

<p>Ovšem ani firma IBM nezahálela, protože její inženýři navrhli nový typ
grafické karty určený pro počítače IBM PC. Tato karta byla na trh uvedena
(taktéž) v&nbsp;roce 1984. Jedná se o poněkud kontroverzní grafickou kartu
<i>EGA</i> neboli <i>Enhanced Graphics Adapter</i>, jejíž technické parametry i
způsob použití budou popsány v&nbsp;navazujících kapitolách. A samozřejmě si
ukážeme i jednoduché prográmky, kterými tuto grafickou kartu prověříme &ndash;
tedy alespoň její základní vlastnosti, protože EGA nabízí větší množství
čtecích a zápisových režimů, možnost rotace barev atd.</p>

<img src="https://i.iinfo.cz/images/404/kq1-13.png" class="image-242292" alt="&#160;" height="200" width="320" />
<p><i>Obrázek 3: Screenshot ze hry King's Quest I (šestnáctibarevná verze
s&nbsp;rozlišením 320&times;200 pixelů).</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Grafická karta Enhanced Graphics Adapter (EGA)</h2>

<p>Na grafickou kartu <i>EGA</i> se můžeme dívat z&nbsp;několika hledisek.
Z&nbsp;pohledu společnosti IBM se nepochybně jednalo o výrobek, který přesně
zapadal do její vývojové koncepce &ndash; tato karta totiž zaručovala zpětnou
kompatibilitu jak s&nbsp;kartou <i>MDA</i>, tak i <i>CGA</i> (a to včetně velmi
dobré podpory původních monitorů, na rozdíl od příště popsaného grafického
adaptéru <i>VGA</i>, u kterého došlo ke změně rozhraní) a její nové vlastnosti
i programové rozhraní představované EGA BIOSem odpovídalo spíše potřebám
kancelářských aplikací a nikoli hrám (IBM PC a posléze i PC XT bylo koncipováno
především jako kancelářský počítač; právě až do přelomu 1984/1985).</p>

<img src="https://i.iinfo.cz/images/347/pc85-3.png" alt="pc85" width="320" height="200" />
<p><i>Obrázek 3: Po uvedení grafické karty EGA začaly vznikat nové hry, které
využívaly její nové grafické režimy. Zde je zobrazen snímek ze hry „Ski or
Die“, která pracovala v&nbsp;grafickém režimu s&nbsp;rozlišením 320&times;200
pixelů s&nbsp;využitím standardní šestnáctibarevné palety.</i></p>

<p>Z&nbsp;hlediska mnohých uživatelů se však jednalo spíše o zklamání, protože
grafická karta <i>EGA</i> neměla některé jimi očekávané vlastnosti, například
rozsáhlejší barvovou paletu, existenci <i>spritů</i> (použitelných jak ve
hrách, tak i pro zobrazení kurzoru myši v&nbsp;graficky orientovaných
aplikacích) či podporu pro větší rozlišení v&nbsp;textových i grafických
režimech, nehledě na určité rozčarování při porovnání karty <i>EGA</i>
s&nbsp;grafickými vlastnostmi již výše zmíněných osobních počítačů Atari ST a
především Amig (jinými slovy &ndash; uživatelé i programátoři celkem právem
očekávali po třech letech vývoje poněkud více).</p>

<img src="https://i.iinfo.cz/images/347/pc85-4.png" alt="pc85" width="320" height="200" />
<p><i>Obrázek 4: Další snímek ze hry „Ski or Die“.</i></p>

<p>Ovšem z&nbsp;historického hlediska nelze grafické kartě <i>EGA</i> upřít to,
že poměrně významným způsobem přispěla ke změně chápání funkce PCček.
Z&nbsp;poněkud &bdquo;lepších psacích strojů&ldquo; a tabulkových kalkulátorů
(nejdříve se jednalo o <i>VisiCalc</i>, později o slavný <i>Lotus 1-2-3</i>
&ndash; oba mimochodem pracující v&nbsp;textovém režimu, samozřejmě až na
vykreslení grafů) se i díky této grafické kartě z&nbsp;IBM PC staly univerzální
počítače, pro něž začaly vznikat i hry s&nbsp;mnohem lepší grafickou kvalitou
než v&nbsp;dobách kralování <i>CGA</i>.</p>

<a href="http://www.root.cz/obrazek/231951/"><img src="http://i.iinfo.cz/images/117/crawford-16-prev.png" class="image-231951" width="351" height="270" alt="&#160;" /></a>
<p><i>Obrázek 5: Některé hry, zde konkrétně slavná Balance of Power, pracovaly
v&nbsp;monochromatických Windows 1.0.</i></p>

<p>Také aplikace s&nbsp;grafickým uživatelským rozhraním začaly být teprve na
této kartě skutečně použitelné. Z&nbsp;těch přelomových se jedná například o
první CADy pro počítače PC, aplikace pro sazbu textu (<i>Ventura Publisher</i>)
ale i grafická nadstavba nad MS-DOSem &ndash; systém Microsoft Windows. První
verze MS Windows sice dokázala pracovat i s&nbsp;grafickou kartou <i>CGA</i>,
ovšem rozlišení a barevná hloubka nabízená touto grafickou kartou byla
nedostačující; například i počítač Apple Macintosh zobrazoval na monitoru větší
množství pixelů než karta <i>CGA</i> ve svém &bdquo;hi-res&ldquo; režimu.</p>

<a href="http://i.iinfo.cz/images/192/gui10-10.png"><img src="http://i.iinfo.cz/images/192/gui10-10-prev.png" width="370" height="231" alt=" " /></a>
<p><i>Obrázek 6: Tabulkový procesor VisiCalc.</i></p>

<a href="http://i.iinfo.cz/images/192/gui10-11.png"><img src="http://i.iinfo.cz/images/192/gui10-11-prev.png" width="360" height="270" alt=" " /></a>
<p><i>Obrázek 7: Slavný tabulkový kalkulátor Lotus 1-2-3
s&nbsp;charakteristickým řádkovým menu.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Základní technické parametry grafické karty EGA</h2>

<p>Grafická karta <i>EGA</i> byla ve firmě IBM navržena takovým způsobem, aby
byla v&nbsp;co největší míře kompatibilní se svými předchůdkyněmi,
tj.&nbsp;kartami <i>MDA</i> i <i>CGA</i>, a to jak na programové úrovni (volání
služeb BIOSu, emulace grafického řadiče <i>Motorola MC6845</i>, včetně
prakticky všech jeho řídicích registrů), tak i z&nbsp;hlediska použitelných
monitorů, protože ke kartě <i>EGA</i> bylo možné po správném nastavení
přepínačů na zadní straně karty připojit monochromatický monitor určený pro
<i>MDA/Hercules</i>, kompozitní <i>CGA</i> monitor nebo nový typ monitoru
navržený právě pro potřeby karty <i>EGA</i> (ten měl sice stejný konektor, jako
monitor MDA, ovšem význam pinů se v&nbsp;nových grafických režimech lišil, více
v&nbsp;dalším textu).</p>

<a href="https://i.iinfo.cz/images/347/pc85-5.png"><img src="https://i.iinfo.cz/images/347/pc85-5-prev.png" alt="pc85" width="370" height="202" /></a>
<p><i>Obrázek 8: Jedna z&nbsp;nejznámějších her určených pro grafickou kartu
EGA je hra Sim City. Využívá se zde režim nejvyššího možného rozlišení.</i></p>

<p>V&nbsp;případě použití monochromatického (TTL) či kompozitního monitoru však
došlo (logicky) k&nbsp;degradaci možností této grafické karty, neboť její nové
režimy byly využitelné pouze na novém typu monitoru. Starší monitory postrádaly
buď možnost barevného zobrazení, nebo schopnost synchronizace obrazu
s&nbsp;více než 200 obrazovými řádky a z&nbsp;toho vyplývající vyšší řádkovou
frekvencí. A navíc i zapojení pinů původního &bdquo;digitálního&ldquo; monitoru
CGA umožňovalo pouze zobrazení osmi základních barev, které mohly mít buď
nízkou či vyšší intenzitu (celkově se tedy jednalo o neměnnou 16barevnou
paletu). Ani v&nbsp;režimu kompatibilním s&nbsp;tímto monitorem tedy nebylo
možné použít 64 barev karty EGA. Programová kompatibilita
s&nbsp;<i>Herculesem</i> nebyla (podle očekávání!) zajištěna, protože firma IBM
tuto konkurenční kartu ve své podstatě ignorovala.</p>

<a href="https://i.iinfo.cz/images/347/pc85-6.png"><img src="https://i.iinfo.cz/images/347/pc85-6-prev.png" alt="pc85" width="370" height="202" /></a>
<p><i>Obrázek 9: Grafický režim s&nbsp;rozlišením 640&times;350 pixelů
v&nbsp;šestnácti barvách použitý ve hře Sim City.</i></p>

<p>Kromě textových a grafických režimů převzatých z&nbsp;předchozích karet se
na <i>EGA</i> objevují i již zmíněné nové grafické režimy; plně osazená karta
umožňovala poměrně slušné rozlišení 640&times;350 pixelů v&nbsp;šestnácti
barvách vybíraných z&nbsp;palety 64 barev (u IBM objevili plnohodnotnou
barvovou paletu v&nbsp;době, kdy Amiga nabízela 4096 barev). Kapacita obrazové
paměti umístěné na této grafické kartě se pohybovala v&nbsp;rozmezí 64&nbsp;kB
až 256&nbsp;kB (konkrétně bylo možné použít kapacity 64, 128, 192 a 256 kB),
přičemž pozdější verze byly osazeny téměř vždy plnou kapacitou 256&nbsp;kB,
ovšem starší programy se mohly spolehnout pouze na zmíněnou základní kapacitu
64&nbsp;kB, z&nbsp;čehož také vycházely při nastavování grafických režimů.</p>

<img src="https://i.iinfo.cz/images/457/kq2-1.png" class="image-242805" alt="&#160;" height="200" width="320" />
</p><p><i>Obrázek 10: Úvodní obrazovka hry King's Quest II: Romancing the Throne.</i></p>

<p>Vzhledem k&nbsp;tomu, že musely být podporovány režimy s&nbsp;různým počtem
skenovacích (obrazových) řádků, byla řádková frekvence rovna 15,75 kHz (původní
monitory pro <i>CGA</i>), 18,432 (monitory pro <i>MDA/Hercules</i>) nebo 21,8
kHz (nové &bdquo;enhanced&ldquo; monitory) &ndash; na <i>EGA</i> tak můžeme
nalézt několik krystalů. Snímková frekvence se u nových grafických režimů
nastavovala na 60Hz (to sice není mnoho, ale VGA v&nbsp;tomto případě na tom
nebyla lépe).</p>

<img src="https://i.iinfo.cz/images/457/kq2-16.png" class="image-242820" alt="&#160;" height="200" width="320" />
<p><i>Obrázek 11: I s&#160;pouhými šestnácti barvami se dají dělat různá
grafická kouzla.</i></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Bloková struktura grafické karty EGA a její řídicí porty</h2>

<p>Na grafické kartě <i>EGA</i> jsou integrovány obvody řadiče obrazovky
(<i>CRTC</i> neboli <i>Cathode Ray Tube Controller</i>), dále obvod ovládající
přístup do video paměti při generování obrazu (<i>sekvencér</i>, anglicky
<i>sequencer</i>), řadič přístupu mikroprocesoru k&nbsp;jednotlivým bitovým
rovinám (<i>GDC</i>, neboli <i>Graphics Controller</i>), řadiče barvových
atributů (<i>ATC</i> neboli <i>Attribute Controller</i>) a konečně obvod pro
přemapování barev (<i>LUT</i> což je známá zkratka vycházející
z&nbsp;<i>Look-Up Table</i>).Z&nbsp;hlediska programátorů je důležité, že tyto
obvody jsou plně konfigurovatelné, protože jsou jejich řídicí registry mapovány
do oblasti I/O portů mikroprocesoru počítače.</p>

<table>
<tr><th>I/O port</th><th>Blok</th></tr>
<tr><td>3B2h, 3BAh, 3C2h, 3D2h, 3DAh</td><td>různé</td></tr>
<tr><td>3B4h, 3B5h, 3D4h, 3D5h</td><td>CRT Controller (CRTC)</td></tr>
<tr><td>3C0h</td><td>Attribute Controller</td></tr>
<tr><td>3C4h, 3C5h</td><td>Sequencer</td></tr>
<tr><td>3CCh, 3CAh, 3CEh, 3CFh</td><td>Graphics Controllers</td></tr>
</table>

<img src="https://i.iinfo.cz/images/347/pc85-7.png" alt="pc85" width="320" height="200" />
<p><i>Obrázek 12: Tento screenshot jsme si již ukázali v&nbsp;předchozích
částech tohto seriálu: jedná se o hru Golden Axe spuštěnou v&nbsp;režimu
kompatibility s&nbsp;grafickou kartou EGA. Vzhledem k&nbsp;omezenému počtu
barev (maximálně 16) i barvového prostoru, ze kterého se barvy vybírají (celkem
64 odstínů) je při vykreslování použit dithering, který je dobře patrný při
zvětšení obrázku.</i></p>

<p>Vzhledem k&nbsp;tomu, že musela být dodržena zpětná kompatibilita
s&nbsp;grafickými kartami <i>MDA</i> i <i>CGA</i>, je grafická karta <i>EGA</i>
velmi komplikovaná a její programování není v&nbsp;žádném případě jednoduché
(především když si uvědomíme, že tento grafický adaptér ve skutečnosti
programátorům nenabízí žádné speciální grafické prostředky jako je podpora pro
sprity, blokové přenosy dat atd.). Například pouze přístup k&nbsp;bitovým
rovinám je možné řešit čtyřmi různými způsoby (většina knihoven používá první
režim). V&nbsp;dalších kapitolách si popíšeme podporované textové a grafické
režimy, které je možné s&nbsp;kartou <i>EGA</i> používat.</p>

<img src="https://i.iinfo.cz/images/457/kq2-20.png" class="image-242824" alt="&#160;" height="200" width="320" />
<p><i>Obrázek 13: I s&#160;pouhými šestnácti barvami se dají dělat různá
grafická kouzla.</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Textové režimy grafické karty EGA</h2>

<p>Grafická karta <i>EGA</i> podporuje tři textové režimy, ve kterých mohou
jednotlivé znaky i jejich pozadí nabývat jedné ze šestnácti <i>volitelných</i>
barev (u karty CGA se naproti tomu jednalo o šestnáct <i>pevně nastavených</i>
barev, více nebylo možné zobrazit už kvůli omezení rozhraní k&nbsp;monitoru).
První textový režim zobrazuje 40 znaků na 25 textových řádcích, jedná se tedy o
částečnou emulaci textového režimu karty <i>CGA</i>, ovšem s&nbsp;tím rozdílem,
že každý znak je vytvořen v&nbsp;rastru 8&times;14 pixelů, což je mnohem více
čitelnější, než původních 8&times;8 pixelů:</p>

*** image ***
<p><i>Obrázek 14: Textový režim 40&times;25 karty EGA.</i></p>

<p>Ve druhém textovém režimu je možné zobrazit 80 znaků na 25 textových
řádcích; maska znaků má v&nbsp;tomto případě opět velikost 8&times;14 pixelů.
Třetí textový režim je zcela nový a je v&nbsp;něm možné zobrazit 80 znaků na 43
textových řádcích. Každý znak je v&nbsp;tomto případě vytvořen v&nbsp;rastru
pouhých 8&times;8 pixelů. Na první pohled poněkud &bdquo;podivný&ldquo; počet
textových řádků byl zvolen z&nbsp;toho důvodu, že 43&times;8=344, což zhruba
odpovídá počtu maximálně zobrazitelných skenovacích (obrazových) řádků, který
je roven 350 (v&nbsp;prvních dvou režimech se používá právě 25&times;×14=350
obrazových řádků).</p>

<p><div class="rs-tip-major">Poznámka: obrazové řádky se nazývají
<i>scanlines</i>, aby se dobře odlišily od <i>text lines</i>.</div></p>

*** image ***
<p><i>Obrázek 15: Textový režim 80&times;25 karty EGA.</i></p>

<p>Grafická karta <i>EGA</i> zavedla v&nbsp;textových režimech důležitou a
užitečnou novinku. Znaková sada totiž není uložena v&nbsp;paměti EPROM, ale
přímo v&nbsp;obrazové paměti, takže implementace národních znaků (Husova
nabodeníčka a jejich nesčetné varianty) je velmi jednoduchá (přesněji řečeno,
karta samozřejmě obsahuje základní znakovou sadu v&nbsp;paměti ROM, dokonce
v&nbsp;několika variantách, tato sada se však při nastavení textového režimu
zkopíruje do obrazové paměti). S&nbsp;tím souvisí i možnost programové změny
počtu obrazových řádků použitých pro vykreslení jednoho řádku textového.
V&nbsp;předchozím odstavci jsme si popsali režimy používající 8 a 14 obrazových
řádků na jeden textový řádek, ovšem tuto hodnotu lze snadno změnit
v&nbsp;rozmezí 1–32. Čím vyšší jsou znaky (a tím i textové řádky), tím méně
textových řádků je možné (logicky) na obrazovce zobrazit.</p>

*** image ***
<p><i>Obrázek 16: Textový režim 80&times;43 karty EGA.</i></p>

<p>Při nastavení textových režimů je obrazová paměť většinou mapována od adresy
<strong>b800:0000</strong> do adresy <strong>b800:7fff</strong> (opět zde
používám adresování typu segment:offset, protože v&nbsp;době největšího
rozmachu grafické karty <i>EGA</i> většina aplikací pracovala v&nbsp;reálném
režimu procesoru). Pokud je pomocí DIPů (malých přepínačů umístěných vedle
konektorů) karta přepnuta takovým způsobem, aby emulovala <i>MDA</i> (a vlastně
i <i>Hercules</i>), je obrazová paměť mapována od adresy
<strong>b000:0000</strong> do adresy <strong>b000:7fff</strong>. V&nbsp;obou
případech je obrazová mapa rozdělena do čtyř (bitových) rovin. V&nbsp;první
rovině se nachází vlastní text, ve druhé rovině atributy znaků, třetí rovina je
rezervována pro znakovou sadu a čtvrtá rovina neobsahuje žádné relevantní
informace.</p>

<a href="https://i.iinfo.cz/images/347/pc85-8.png"><img src="https://i.iinfo.cz/images/347/pc85-8-prev.png" alt="pc85" width="370" height="202" /></a>
<p><i>Obrázek 17: Úvodní obrazovka známé síťové hry Netwars, která využívá
šestnáctibarevný grafický režim karty EGA s&nbsp;rozlišením 640×350
pixelů.</i></p>

<p>Při nastavení textového režimu pomocí služeb BIOSu je adaptér nakonfigurován
tak, že první dvě roviny jsou zřetězeny a aplikacím se tak jeví, jakoby byl
každý znak uložen na dvou sousedních bytech ve formátu ASCII kód+barvový
atribut. Samozřejmě je možné provést přeprogramování tak, aby bylo možné měnit
znakovou sadu (třetí bitovou rovinu) či pouze text. Adresu prvního
vykreslovaného znaku (i atributu) lze změnit a provádět tak vertikální
scrolling &ndash; programátorům je k&nbsp;dispozici celkem 65536/80=819
textových řádků, tj.&nbsp;cca 32 obrazovek textu při použití režimu 80&times;25
znaků (ovšem při zřetězení dvou bitových rovin pouze 16 obrazovek).</p>

<a href="https://i.iinfo.cz/images/347/pc85-9.png"><img src="https://i.iinfo.cz/images/347/pc85-9-prev.png" alt="pc85" width="370" height="202" /></a>
<p><i>Obrázek 18: Hra Netwars zobrazovala objekty buď jako drátové (wireframe)
modely nebo s&nbsp;využitím vyplněných trojúhelníků. Volba závisela především
na výkonnosti počítače, protože vykreslování 3D scény bylo samozřejmě prováděno
programově.</i></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. První demonstrační příklad: použití textového režimu 80&times;25 znaků</h2>

<pre>
<i>; Textovy rezim karty EGA s rozlisenim 80x25 znaku.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_text_mode_80x25.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_text_mode_80x25.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 256)</i>

start:
        mov ax, 0xb800  <i>; video RAM v textovem rezimu</i>
        mov es, ax
        mov di, 0       <i>; nyni ES:DI obsahuje adresu prvniho znaku ve video RAM</i>

        mov cx, 80*25   <i>; pocet zapisovanych znaku</i>
        mov al, 0       <i>; kod zapisovaneho znaku</i>
opak:
        stosb           <i>; zapis znaku + atributu</i>
        stosb
        inc al          <i>; dalsi znak/atribut</i>
        loop opak       <i>; opakujeme CX-krat</i>

        wait_key        <i>; cekani na klavesu</i>
        exit            <i>; navrat do DOSu</i>
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Přepnutí do textového režimu 80&times;43 znaků</h2>



<p><a name="k08"></a></p>
<h2 id="k08">8. Druhý demonstrační příklad: použití textového režimu 80&times;43 znaků</h2>

<pre>
<i>; Textovy rezim karty EGA s rozlisenim 80x43 znaku.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_text_mode_80x43.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_text_mode_80x43.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>; nastaveni fontu 8x8 pixelu</i>
%macro set_font_8x8 0
        mov ax, 0x1112
        xor bl, bl
        int 0x10
%endmacro

<i>; nastaveni fontu 8x14 pixelu</i>
%macro set_font_8x14 0
        mov ax, 0x1111
        xor bl, bl
        int 0x10
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 436)</i>

start:
        mov ax, 0xb800  <i>; video RAM v textovem rezimu</i>
        mov es, ax
        mov di, 0       <i>; nyni ES:DI obsahuje adresu prvniho znaku ve video RAM</i>

        mov cx, 80*43   <i>; pocet zapisovanych znaku</i>
        mov al, 0       <i>; kod zapisovaneho znaku</i>
opak:
        stosb           <i>; zapis znaku + atributu</i>
        stosb
        inc al          <i>; dalsi znak/atribut</i>
        loop opak       <i>; opakujeme CX-krat</i>

        wait_key        <i>; cekani na klavesu</i>

        set_font_8x8    <i>; nastaveni fontu 8x8 pixelu</i>
        wait_key        <i>; cekani na klavesu</i>

        set_font_8x14   <i>; nastaveni fontu 8x14 pixelu</i>
        wait_key        <i>; cekani na klavesu</i>


        exit            <i>; navrat do DOSu</i>
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. Grafické režimy karty EGA</h2>

<p>Grafická karta <i>EGA</i> podporuje poměrně velké množství nových grafických
režimů i režimů určených pro zachování kompatibility se staršími programy,
které využívaly možnosti karty <i>CGA</i>. Pokus se (prozatím) budeme držet
standardních (resp.&nbsp;standardizovaných) režimů, dostaneme tento seznam:</p>

<ol>

<li>Režim s&nbsp;rozlišením 320&times;200 pixelů ve čtyřech barvách. Jedná se o
emulaci vícebarevného režimu grafické karty <i>CGA</i>, v&nbsp;němž je dokonce
emulováno i omezení barvové palety (pouze dvě resp.&nbsp;tři dostupné palety
atd.). Pouze pro účely zpětné kompatibility, žádný software vytvořený přímo pro
EGA tento režim <i>primárně</i> nepoužíval (logicky).</li>

<li>Režim s&nbsp;rozlišením 640&times;200 pixelů ve dvou barvách. Opět se jedná
o emulaci, tentokrát však &bdquo;hi-res&ldquo; režimu grafické karty<i>CGA</i>
(prokládání obrazových řádků atd.).</li>

<li>Režim s&nbsp;rozlišením 320&times;200 pixelů v&nbsp;šestnácti barvách.
V&nbsp;tomto případě se již jedná o nový režim, který byl s&nbsp;úspěchem
použit zejména u her (připomeňme Gobliins, Lemmings, Dungeon Master,
Civilizace, Golden Axe apod.). Je použitelný jak na starých CGA monitorech
(ovšem s&nbsp;omezením barev na základní 16barevnou paletu), tak i na EGA
monitorech (zde již bez omezení barev).</li>

<li>Režim s&nbsp;rozlišením 640&times;200 pixelů v&nbsp;šestnácti barvách. Pro
tento režim je zapotřebí alokovat pouze cca 64kB paměti, je tedy podporován na
všech kartách <i>EGA</i>. Platí pro něj prakticky totéž, jako o předchozím
režimu &ndash; na starých CGA monitorech je ho možné použít, ale omezují se
barvy, které mohou být použity.</li>

<li>Režim s&nbsp;rozlišením 640&times;350 pixelů ve čtyřech barvách. Pro tento
režim je zapotřebí alokovat pouze cca 56kB paměti, běží tedy na všech
kartách<i>EGA</i>, ale vyžaduje EGA monitor.</li>

<li>Režim s&nbsp;rozlišením 640&times;350 pixelů v&nbsp;šestnácti barvách. Pro
tento režim je zapotřebí alokovat cca 112kB paměti, což ovšem znamená, že
vyžaduje plnohodnotnou kartu <i>EGA</i> (minimálně 128kB RAM). Na kartách
s&nbsp;menší kapacitou obrazové paměti není tento režim dostupný. Použití
&ndash; jak grafické uživatelské rozhraní mnohých aplikací (T602), tak i
některé hry, například Simcity apod. A pochopitelně tento režim vyžaduje EGA
monitor.</li>

</ol>

<a href="https://i.iinfo.cz/images/347/pc85-10.png"><img src="https://i.iinfo.cz/images/347/pc85-10-prev.png" alt="pc85" width="370" height="202" /></a>
<p><i>Obrázek 19: Netwars v&nbsp;režimu zobrazení vyplňovaných (solid)
objektů.</i></p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Podpora grafických režimů karty EGA BIOSem</h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. Třetí demonstrační příklad: grafický režim 320&times;200 se šestnácti barvami</h2>

<pre>
<i>; Graficky rezim karty EGA s rozlisenim 320x200 pixelu.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_gfx_mode_320x200.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_gfx_mode_320x200.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>; nastaveni grafickeho rezimu</i>
%macro gfx_mode 1
        mov     ah, 0
        mov     al, %1
        int     0x10
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 436)</i>

start:
        gfx_mode 0x0d       <i>; nastaveni rezimu 320x200 se sestnacti barvami</i>
        mov ax, 0xa000      <i>; video RAM v textovem rezimu</i>
        mov es, ax
        mov di, 0           <i>; nyni ES:DI obsahuje adresu prvniho pixelu ve video RAM</i>

        mov cx, 320*200/8   <i>; pocet zapisovanych pixelu (ovsem pocitano v bajtech)</i>
        mov al, 0           <i>; kod pixelu</i>
opak:
        stosb
        inc al              <i>; dalsi znak/atribut</i>
        loop opak           <i>; opakujeme CX-krat</i>

        wait_key            <i>; cekani na klavesu</i>
        exit                <i>; navrat do DOSu</i>
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. Čtvrtý demonstrační příklad: grafický režim 640&times;200 se šestnácti barvami</h2>

<pre>
<i>; Graficky rezim karty EGA s rozlisenim 640x200 pixelu.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_gfx_mode_640x200.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_gfx_mode_640x200.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>; nastaveni grafickeho rezimu</i>
%macro gfx_mode 1
        mov     ah, 0
        mov     al, %1
        int     0x10
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 436)</i>

start:
        gfx_mode 0x0e       <i>; nastaveni rezimu 640x200 se sestnacti barvami</i>
        mov ax, 0xa000      <i>; video RAM v textovem rezimu</i>
        mov es, ax
        mov di, 0           <i>; nyni ES:DI obsahuje adresu prvniho pixelu ve video RAM</i>

        mov cx, 640*200/8   <i>; pocet zapisovanych pixelu (ovsem pocitano v bajtech)</i>
        mov al, 0           <i>; kod pixelu</i>
opak:
        stosb
        inc al              <i>; dalsi znak/atribut</i>
        loop opak           <i>; opakujeme CX-krat</i>

        wait_key            <i>; cekani na klavesu</i>
        exit                <i>; navrat do DOSu</i>
</pre>



<p><a name="k13"></a></p>
<h2 id="k13">13. Pátý demonstrační příklad: grafický režim 640&times;350 pixelů (4 či 16 barev)</h2>

<pre>
<i>; Graficky rezim karty EGA s rozlisenim 640x350 pixelu.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_gfx_mode_640x350.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_gfx_mode_640x350.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>; nastaveni grafickeho rezimu</i>
%macro gfx_mode 1
        mov     ah, 0
        mov     al, %1
        int     0x10
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 436)</i>

start:
        gfx_mode 0x10       <i>; nastaveni rezimu 640x350 se ctyrmi nebo sestnacti barvami</i>
        mov ax, 0xa000      <i>; video RAM v textovem rezimu</i>
        mov es, ax
        mov di, 0           <i>; nyni ES:DI obsahuje adresu prvniho pixelu ve video RAM</i>

        mov cx, 640*350/8   <i>; pocet zapisovanych pixelu (ovsem pocitano v bajtech)</i>
        mov al, 0           <i>; kod pixelu</i>
opak:
        stosb
        inc al              <i>; dalsi znak/atribut</i>
        loop opak           <i>; opakujeme CX-krat</i>

        wait_key            <i>; cekani na klavesu</i>
        exit                <i>; navrat do DOSu</i>
</pre>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>

<pre>
<i>; Graficky rezim karty EGA s rozlisenim 320x200 pixelu.</i>
<i>; Zmena barvovych rovin, do kterych se zapisuje.</i>
<i>;</i>
<i>; preklad pomoci:</i>
<i>;     nasm -f bin -o ega.com ega_gfx_mode_bitplanes_1.asm</i>
<i>;</i>
<i>; nebo pouze:</i>
<i>;     nasm -o ega.com ega_gfx_mode_bitplanes_1.asm</i>


<i>;-----------------------------------------------------------------------------</i>

<i>; registry karty EGA/VGA</i>
ega_controller     equ 0x3c4
bitplane_selector equ 0x02


<i>; ukonceni procesu a navrat do DOSu</i>
%macro exit 0
        mov     ah, 0x4c
        int     0x21
%endmacro

<i>; vyprazdneni bufferu klavesnice a cekani na klavesu</i>
%macro wait_key 0
        xor     ax, ax
        int     0x16
%endmacro

<i>; nastaveni grafickeho rezimu</i>
%macro gfx_mode 1
        mov     ah, 0
        mov     al, %1
        int     0x10
%endmacro

<i>;-----------------------------------------------------------------------------</i>
org  0x100        <i>; zacatek kodu pro programy typu COM (vzdy se zacina na 436)</i>

start:
        gfx_mode 0x0d       <i>; nastaveni rezimu 320x200 se sestnacti barvami</i>
        mov ax, 0xa000      <i>; video RAM v textovem rezimu</i>
        mov es, ax
        xor di, di          <i>; nyni ES:DI obsahuje adresu prvniho pixelu ve video RAM</i>

        xor al, al          <i>; maska bitovych rovin</i>
        mov cl, 16          <i>; pocitadlo barevnych pruhu</i>
opak:
        call draw_block_into_bitplanes
        loop opak

        wait_key            <i>; cekani na klavesu</i>
        exit                <i>; navrat do DOSu</i>

select_bitplane:
        mov  dx, ega_controller
        push ax
        mov  al, bitplane_selector
        out  dx, al         <i>; vyber registru sekvenceru</i>
        pop  ax
        inc  dx
        out  dx, al         <i>; zapis masky bitovych rovin</i>
        ret                 <i>; hotovo</i>

draw_block_into_bitplanes:
        push ax
        push cx
        call select_bitplane; maska bitovych rovin
        call draw_block
        add  di, 320*3/8    <i>; posun o nekoli radku nize</i>
        pop  cx
        pop  ax
        inc  al             <i>; zmena masky</i>
        ret                 <i>; hotovo</i>

draw_block:
        mov cx, 320*9/8     <i>; pocet zapisovanych pixelu (ovsem pocitano v bajtech)</i>
        mov al, 0xff        <i>; kod pixelu</i>
        rep stosb
        ret
</pre>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>

<p>Demonstrační příklady napsané v&nbsp;assembleru, které jsou určené pro
překlad pomocí assembleru <strong>NASM</strong>, byly uložen do Git repositáře,
který je dostupný na adrese <a
href="https://github.com/tisnik/8bit-fame">https://github.com/tisnik/8bit-fame</a>.
Jednotlivé demonstrační příklady si můžete v&nbsp;případě potřeby stáhnout i
jednotlivě bez nutnosti klonovat celý (dnes již poměrně rozsáhlý)
repositář:</p>

<table>
<tr><th> #</th><th>Příklad</th><th>Stručný popis</th><th>Adresa</th></tr>
<tr><td> 1</td><td>hello.asm</td><td>program typu &bdquo;Hello world&ldquo; naprogramovaný v&nbsp;assembleru pro systém DOS</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello.asm</a></td></tr>
<tr><td> 2</td><td>hello_shorter.asm</td><td>kratší varianta výskoku z&nbsp;procesu zpět do DOSu</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_shorter.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_shorter.asm</a></td></tr>
<tr><td> 3</td><td>hello_wait.asm</td><td>čekání na stisk klávesy</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_wait.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_wait.asm</a></td></tr>
<tr><td> 4</td><td>hello_macros.asm</td><td>realizace jednotlivých částí programu makrem</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_macros.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hello_macros.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 5</td><td>gfx_4_putpixel.asm</td><td>vykreslení pixelu v&nbsp;grafickém režimu 4</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_putpixel.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_putpixel.asm</a></td></tr>
<tr><td> 6</td><td>gfx_6_putpixel.asm</td><td>vykreslení pixelu v&nbsp;grafickém režimu 6</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel.asm</a></td></tr>
<tr><td> 7</td><td>gfx_4_line.asm</td><td>vykreslení úsečky v&nbsp;grafickém režimu 4</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_line.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_line.asm</a></td></tr>
<tr><td> 8</td><td>gfx_6_line.asm</td><td>vykreslení úsečky v&nbsp;grafickém režimu 6</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_line.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_line.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 9</td><td>gfx_6_fill_1.asm</td><td>vyplnění obrazovky v&nbsp;grafickém režimu, základní varianta</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_1.asm</a></td></tr>
<tr><td>10</td><td>gfx_6_fill_2.asm</td><td>vyplnění obrazovky v&nbsp;grafickém režimu, varianta s&nbsp;instrukcí <strong>LOOP</strong></td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_2.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_2.asm</a></td></tr>
<tr><td>11</td><td>gfx_6_fill_3.asm</td><td>vyplnění obrazovky instrukcí <strong>REP STOSB</strong></td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_3.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_3.asm</a></td></tr>
<tr><td>12</td><td>gfx_6_fill_4.asm</td><td>vyplnění obrazovky, synchronizace vykreslování s&nbsp;paprskem</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_4.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_fill_4.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>13</td><td>gfx_4_image_1.asm</td><td>vykreslení rastrového obrázku získaného z&nbsp;binárních dat, základní varianta</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_1.asm</a></td></tr>
<tr><td>14</td><td>gfx_4_image_2.asm</td><td>varianta vykreslení rastrového obrázku s&nbsp;využitím instrukce <strong>REP MOVSB</strong></td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_2.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_2.asm</a></td></tr>
<tr><td>15</td><td>gfx_4_image_3.asm</td><td>varianta vykreslení rastrového obrázku s&nbsp;využitím instrukce <strong>REP MOVSW</strong></td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_3.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_3.asm</a></td></tr>
<tr><td>16</td><td>gfx_4_image_4.asm</td><td>korektní vykreslení všech sudých řádků bitmapy</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_4.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_4.asm</a></td></tr>
<tr><td>17</td><td>gfx_4_image_5.asm</td><td>korektní vykreslení všech sudých i lichých řádků bitmapy</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_5.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_5.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>18</td><td>gfx_4_image_6.asm</td><td>nastavení barvové palety před vykreslením obrázku</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_6.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_6.asm</a></td></tr>
<tr><td>19</td><td>gfx_4_image_7.asm</td><td>nastavení barvové palety před vykreslením obrázku, snížená intenzita barev</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_7.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_7.asm</a></td></tr>
<tr><td>20</td><td>gfx_4_image_8.asm</td><td>postupná změna barvy pozadí</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_8.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_4_image_8.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>21</td><td>gfx_6_putpixel_1.asm</td><td>vykreslení pixelu, základní varianta se 16bitovým násobením</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_1.asm</a></td></tr>
<tr><td>22</td><td>gfx_6_putpixel_2.asm</td><td>vykreslení pixelu, varianta s&nbsp;osmibitovým násobením</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_2.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_2.asm</a></td></tr>
<tr><td>23</td><td>gfx_6_putpixel_3.asm</td><td>vykreslení pixelu, varianta bez násobení</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_3.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_3.asm</a></td></tr>
<tr><td>24</td><td>gfx_6_putpixel_4.asm</td><td>vykreslení pixelu přes obrázek, nekorektní chování (přepis obrázku)</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_4.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_4.asm</a></td></tr>
<tr><td>25</td><td>gfx_6_putpixel_5.asm</td><td>vykreslení pixelu přes obrázek, korektní varianta pro bílé pixely</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_5.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/gfx_6_putpixel_5.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>26</td><td>cga_text_mode_1.asm</td><td>standardní textový režim s&nbsp;rozlišením 40&times;25 znaků</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_1.asm</a></td></tr>
<tr><td>27</td><td>cga_text_mode_3.asm</td><td>standardní textový režim s&nbsp;rozlišením 80&times;25 znaků</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_3.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_3.asm</a></td></tr>
<tr><td>28</td><td>cga_text_mode_intensity.asm</td><td>změna významu nejvyššího bitu atributového bajtu: vyšší intenzita namísto blikání</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_intensity.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_intensity.asm</a></td></tr>
<tr><td>29</td><td>cga_text_mode_cursor.asm</td><td>změna tvaru textového kurzoru</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_cursor.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_cursor.asm</a></td></tr>
<tr><td>30</td><td>cga_text_gfx_1.asm</td><td>zobrazení &bdquo;rastrové mřížky&ldquo;: pseudografický režim 160&times;25 pixelů (interně textový režim)</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_gfx_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_gfx_1.asm</a></td></tr>
<tr><td>31</td><td>cga_text_mode_char_height.asm</td><td>změna výšky znaků</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_char_height.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_mode_char_height.asm</a></td></tr>
<tr><td>32</td><td>cga_text_160x100.asm</td><td>grafický režim 160&times;100 se šestnácti barvami (interně upravený textový režim)</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_160x100.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/cga_text_160x100.asm</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>33</td><td>hercules_text_mode_1.asm</td><td>využití standardního textového režimu společně s&nbsp;kartou Hercules</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_text_mode_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_text_mode_1.asm</a></td></tr>
<tr><td>34</td><td>hercules_text_mode_2.asm</td><td>zákaz blikání v&nbsp;textových režimech</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_text_mode_2.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_text_mode_2.asm</a></td></tr>
<tr><td>35</td><td>hercules_turn_off.asm</td><td>vypnutí generování video signálu</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_turn_off.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_turn_off.asm</a></td></tr>
<tr><td>36</td><td>hercules_gfx_mode_1.asm</td><td>přepnutí karty Hercules do grafického režimu (základní varianta)</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_gfx_mode_1.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_gfx_mode_1.asm</a></td></tr>
<tr><td>37</td><td>hercules_gfx_mode_2.asm</td><td>přepnutí karty Hercules do grafického režimu (vylepšená varianta)</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_gfx_mode_2.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_gfx_mode_2.asm</a></td></tr>
<tr><td>38</td><td>hercules_putpixel.asm</td><td>subrutina pro vykreslení jediného pixelu na kartě Hercules</td><td><a href="https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_putpixel.asm">https://github.com/tisnik/8bit-fame/blob/master/pc-dos/hercules_putpixel.asm</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>The Intel 8088 Architecture and Instruction Set<br />
<a href="https://people.ece.ubc.ca/~edc/464/lectures/lec4.pdf">https://people.ece.ubc.ca/~edc/464/lectures/lec4.pdf</a>
</li>

<li>x86 Opcode Structure and Instruction Overview<br />
<a href="https://pnx.tf/files/x86_opcode_structure_and_instruction_overview.pdf">https://pnx.tf/files/x86_opcode_structure_and_instruction_overview.pdf</a>
</li>

<li>x86 instruction listings (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/X86_instruction_listings">https://en.wikipedia.org/wiki/X86_instruction_listings</a>
</li>

<li>x86 assembly language (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/X86_assembly_language">https://en.wikipedia.org/wiki/X86_assembly_language</a>
</li>

<li>Intel Assembler (Cheat sheet)<br />
<a href="http://www.jegerlehner.ch/intel/IntelCodeTable.pdf">http://www.jegerlehner.ch/intel/IntelCodeTable.pdf</a>
</li>

<li>25 Microchips That Shook the World<br />
<a href="https://spectrum.ieee.org/tech-history/silicon-revolution/25-microchips-that-shook-the-world">https://spectrum.ieee.org/tech-history/silicon-revolution/25-microchips-that-shook-the-world</a>
</li>

<li>Chip Hall of Fame: MOS Technology 6502 Microprocessor<br />
<a href="https://spectrum.ieee.org/tech-history/silicon-revolution/chip-hall-of-fame-mos-technology-6502-microprocessor">https://spectrum.ieee.org/tech-history/silicon-revolution/chip-hall-of-fame-mos-technology-6502-microprocessor</a>
</li>

<li>Chip Hall of Fame: Intel 8088 Microprocessor<br />
<a href="https://spectrum.ieee.org/tech-history/silicon-revolution/chip-hall-of-fame-intel-8088-microprocessor">https://spectrum.ieee.org/tech-history/silicon-revolution/chip-hall-of-fame-intel-8088-microprocessor</a>
</li>

<li>Jak se zrodil procesor?<br />
<a href="https://www.root.cz/clanky/jak-se-zrodil-procesor/">https://www.root.cz/clanky/jak-se-zrodil-procesor/</a>
</li>

<li>Apple II History Home<br />
<a href="http://apple2history.org/">http://apple2history.org/</a>
</li>

<li>The 8086/8088 Primer<br />
<a href="https://www.stevemorse.org/8086/index.html">https://www.stevemorse.org/8086/index.html</a>
</li>

<li>flat assembler: Assembly language resources<br />
<a href="https://flatassembler.net/">https://flatassembler.net/</a>
</li>

<li>FASM na Wikipedii<br />
<a href="https://en.wikipedia.org/wiki/FASM">https://en.wikipedia.org/wiki/FASM</a>
</li>

<li>Fresh IDE FASM inside<br />
<a href="https://fresh.flatassembler.net/">https://fresh.flatassembler.net/</a>
</li>

<li>MS-DOS Version 4.0 Programmer's Reference<br />
<a href="https://www.pcjs.org/documents/books/mspl13/msdos/dosref40/">https://www.pcjs.org/documents/books/mspl13/msdos/dosref40/</a>
</li>

<li>INT 21 - DOS Function Dispatcher (DOS)<br />
<a href="https://www.stanislavs.org/helppc/int_21.html">https://www.stanislavs.org/helppc/int_21.html</a>
</li>

<li>DOS API (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/DOS_API">https://en.wikipedia.org/wiki/DOS_API</a>
</li>

<li>Bit banging<br />
<a href="https://en.wikipedia.org/wiki/Bit_banging">https://en.wikipedia.org/wiki/Bit_banging</a>
</li>

<li>IBM Basic assembly language and successors (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/IBM_Basic_assembly_language_and_successors">https://en.wikipedia.org/wiki/IBM_Basic_assembly_language_and_successors</a>
</li>

<li>X86 Assembly/Bootloaders<br />
<a href="https://en.wikibooks.org/wiki/X86_Assembly/Bootloaders">https://en.wikibooks.org/wiki/X86_Assembly/Bootloaders</a>
</li>

<li>Počátky grafiky na PC: grafické karty CGA a Hercules<br />
<a href="https://www.root.cz/clanky/pocatky-grafiky-na-pc-graficke-karty-cga-a-hercules/">https://www.root.cz/clanky/pocatky-grafiky-na-pc-graficke-karty-cga-a-hercules/</a>
</li>

<li>Co mají společného Commodore PET/4000, BBC Micro, Amstrad CPC i grafické karty MDA, CGA a Hercules?<br />
<a href="https://www.root.cz/clanky/co-maji-spolecneho-commodore-pet-4000-bbc-micro-amstrad-cpc-i-graficke-karty-mda-cga-a-hercules/">https://www.root.cz/clanky/co-maji-spolecneho-commodore-pet-4000-bbc-micro-amstrad-cpc-i-graficke-karty-mda-cga-a-hercules/</a>
</li>

<li>Karta EGA: první použitelná barevná grafika na PC<br />
<a href="https://www.root.cz/clanky/karta-ega-prvni-pouzitelna-barevna-grafika-na-pc/">https://www.root.cz/clanky/karta-ega-prvni-pouzitelna-barevna-grafika-na-pc/</a>
</li>

<li>RGB Classic Games<br />
<a href="https://www.classicdosgames.com/">https://www.classicdosgames.com/</a>
</li>

<li>Turbo Assembler (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Turbo_Assembler">https://en.wikipedia.org/wiki/Turbo_Assembler</a>
</li>

<li>Microsoft Macro Assembler<br />
<a href="https://en.wikipedia.org/wiki/Microsoft_Macro_Assembler">https://en.wikipedia.org/wiki/Microsoft_Macro_Assembler</a>
</li>

<li>IBM Personal Computer (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/IBM_Personal_Computer">https://en.wikipedia.org/wiki/IBM_Personal_Computer</a>
</li>

<li>Intel 8251<br />
<a href="https://en.wikipedia.org/wiki/Intel_8251">https://en.wikipedia.org/wiki/Intel_8251</a>
</li>

<li>Intel 8253<br />
<a href="https://en.wikipedia.org/wiki/Intel_8253">https://en.wikipedia.org/wiki/Intel_8253</a>
</li>

<li>Intel 8255<br />
<a href="https://en.wikipedia.org/wiki/Intel_8255">https://en.wikipedia.org/wiki/Intel_8255</a>
</li>

<li>Intel 8257<br />
<a href="https://en.wikipedia.org/wiki/Intel_8257">https://en.wikipedia.org/wiki/Intel_8257</a>
</li>

<li>Intel 8259<br />
<a href="https://en.wikipedia.org/wiki/Intel_8259">https://en.wikipedia.org/wiki/Intel_8259</a>
</li>

<li>Support/peripheral/other chips - 6800 family<br />
<a href="http://www.cpu-world.com/Support/6800.html">http://www.cpu-world.com/Support/6800.html</a>
</li>

<li>Motorola 6845<br />
<a href="http://en.wikipedia.org/wiki/Motorola_6845">http://en.wikipedia.org/wiki/Motorola_6845</a>
</li>

<li>The 6845 Cathode Ray Tube Controller (CRTC)<br />
<a href="http://www.tinyvga.com/6845">http://www.tinyvga.com/6845</a>
</li>

<li>CRTC operation<br />
<a href="http://www.6502.org/users/andre/hwinfo/crtc/crtc.html">http://www.6502.org/users/andre/hwinfo/crtc/crtc.html</a>
</li>

<li>6845 - Motorola CRT Controller<br />
<a href="https://stanislavs.org/helppc/6845.html">https://stanislavs.org/helppc/6845.html</a>
</li>

<li>The 6845 Cathode Ray Tube Controller (CRTC)<br />
<a href="http://www.tinyvga.com/6845">http://www.tinyvga.com/6845</a>
</li>

<li>Motorola 6845 and bitwise graphics<br />
<a href="https://retrocomputing.stackexchange.com/questions/10996/motorola-6845-and-bitwise-graphics">https://retrocomputing.stackexchange.com/questions/10996/motorola-6845-and-bitwise-graphics</a>
</li>

<li>IBM Monochrome Display Adapter<br />
<a href="http://en.wikipedia.org/wiki/Monochrome_Display_Adapter">http://en.wikipedia.org/wiki/Monochrome_Display_Adapter</a>
</li>

<li>Color Graphics Adapter<br />
<a href="http://en.wikipedia.org/wiki/Color_Graphics_Adapter">http://en.wikipedia.org/wiki/Color_Graphics_Adapter</a>
</li>

<li>Color Graphics Adapter and the Brown color in IBM 5153 Color Display<br />
<a href="https://www.aceinnova.com/en/electronics/cga-and-the-brown-color-in-ibm-5153-color-display/">https://www.aceinnova.com/en/electronics/cga-and-the-brown-color-in-ibm-5153-color-display/</a>
</li>

<li>The Modern Retrocomputer: An Arduino Driven 6845 CRT Controller<br />
<a href="https://hackaday.com/2017/05/14/the-modern-retrocomputer-an-arduino-driven-6845-crt-controller/">https://hackaday.com/2017/05/14/the-modern-retrocomputer-an-arduino-driven-6845-crt-controller/</a>
</li>

<li>flat assembler: Assembly language resources<br />
<a href="https://flatassembler.net/">https://flatassembler.net/</a>
</li>

<li>FASM na Wikipedii<br />
<a href="https://en.wikipedia.org/wiki/FASM">https://en.wikipedia.org/wiki/FASM</a>
</li>

<li>Fresh IDE FASM inside<br />
<a href="https://fresh.flatassembler.net/">https://fresh.flatassembler.net/</a>
</li>

<li>MS-DOS Version 4.0 Programmer's Reference<br />
<a href="https://www.pcjs.org/documents/books/mspl13/msdos/dosref40/">https://www.pcjs.org/documents/books/mspl13/msdos/dosref40/</a>
</li>

<li>INT 21 - DOS Function Dispatcher (DOS)<br />
<a href="https://www.stanislavs.org/helppc/int_21.html">https://www.stanislavs.org/helppc/int_21.html</a>
</li>

<li>DOS API (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/DOS_API">https://en.wikipedia.org/wiki/DOS_API</a>
</li>

<li>IBM Basic assembly language and successors (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/IBM_Basic_assembly_language_and_successors">https://en.wikipedia.org/wiki/IBM_Basic_assembly_language_and_successors</a>
</li>

<li>X86 Assembly/Arithmetic<br />
<a href="https://en.wikibooks.org/wiki/X86_Assembly/Arithmetic">https://en.wikibooks.org/wiki/X86_Assembly/Arithmetic</a>
</li>

<li>Art of Assembly - Arithmetic Instructions<br />
<a href="http://oopweb.com/Assembly/Documents/ArtOfAssembly/Volume/Chapter_6/CH06-2.html">http://oopweb.com/Assembly/Documents/ArtOfAssembly/Volume/Chapter_6/CH06-2.html</a>
</li>

<li>ASM Flags<br />
<a href="http://www.cavestory.org/guides/csasm/guide/asm_flags.html">http://www.cavestory.org/guides/csasm/guide/asm_flags.html</a>
</li>

<li>Status Register<br />
<a href="https://en.wikipedia.org/wiki/Status_register">https://en.wikipedia.org/wiki/Status_register</a>
</li>

<li>Linux assemblers: A comparison of GAS and NASM<br />
<a href="http://www.ibm.com/developerworks/library/l-gas-nasm/index.html">http://www.ibm.com/developerworks/library/l-gas-nasm/index.html</a>
</li>

<li>Programovani v assembleru na OS Linux<br />
<a href="http://www.cs.vsb.cz/grygarek/asm/asmlinux.html">http://www.cs.vsb.cz/grygarek/asm/asmlinux.html</a>
</li>

<li>Is it worthwhile to learn x86 assembly language today?<br />
<a href="https://www.quora.com/Is-it-worthwhile-to-learn-x86-assembly-language-today?share=1">https://www.quora.com/Is-it-worthwhile-to-learn-x86-assembly-language-today?share=1</a>
</li>

<li>Why Learn Assembly Language?<br />
<a href="http://www.codeproject.com/Articles/89460/Why-Learn-Assembly-Language">http://www.codeproject.com/Articles/89460/Why-Learn-Assembly-Language</a>
</li>

<li>IBM PC Family  -  BIOS Video Modes<br />
<a href="https://www.minuszerodegrees.net/video/bios_video_modes.htm">https://www.minuszerodegrees.net/video/bios_video_modes.htm</a>
</li>

<li>EGA Functions<br />
<a href="https://cosmodoc.org/topics/ega-functions/#the-hierarchy-of-the-ega">https://cosmodoc.org/topics/ega-functions/#the-hierarchy-of-the-ega</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2024</small></p>
</body>
</html>

