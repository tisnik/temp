<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Nedávné oznámení, že se z projektu GCC odstraní některé starší mikroprocesorové architektury, vyšlo (zcela jistě náhodou) v době, kdy mikroprocesory založené na jádrech Motorola 68000 (m68k) slaví kulaté výročí &ndash; plných čtyřicet let od jejich uvedení na trh.</p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. Čtyřicet let existence mikroprocesorů řady Motorola 68000</a></p>
<p><a href="#k02">*** 2. Od osmibitových mikroprocesorů Motorola 6800 k&nbsp;16/32bitovým čipům řady 68000</a></p>
<p><a href="#k03">*** 3. Mikroprocesor Motorola MC6800 z&nbsp;pohledu programátora</a></p>
<p><a href="#k04">*** 4. Další vývoj osmibitové řady Motorola 6800</a></p>
<p><a href="#k05">*** 5. Kam dál? Vytvořit nejvýkonnější osmibitový čip či přejít do 32bitové oblasti?</a></p>
<p><a href="#k06">*** 6. Nejvýkonnější osmibitový mikroprocesor</a></p>
<p><a href="#k07">*** 7. Konec osmibitové éry a vznik legendární řady Motorola 68000</a></p>
<p><a href="#k08">*** 8. Programátorský model mikroprocesorů m68k</a></p>
<p><a href="#k09">*** 9. Instrukční sada čipů Motorola 68000</a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. Aplikace čipů řady m68k v&nbsp;osobních počítačích a pracovních stanicích</a></p>
<p><a href="#k12">*** 12. Atari řady ST</a></p>
<p>&nbsp;&nbsp;&nbsp;<a href="#k121">12.1 Atari 520 ST</a></p>
<p>&nbsp;&nbsp;&nbsp;<a href="#k122">12.2 Atari 260 ST a Atari 130 ST</a></p>
<p>&nbsp;&nbsp;&nbsp;<a href="#k123">12.3 Atari 1040 STF a Atari 1040 STFM</a></p>
<p>&nbsp;&nbsp;&nbsp;<a href="#k124">12.4 Atari Mega ST</a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. Pracovní stanice Sun-1</a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. </a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Čtyřicet let existence mikroprocesorů řady Motorola 68000</h2>

<p>Rok 2019 nám přinesl v&nbsp;oblasti informatiky hned několik kulatin nebo alespoň &bdquo;polokulatin&ldquo;. Již v&nbsp;předchozích článcích jsme si připomněli <a href="">35leté výročí vzniku Turbo Pascalu</a>, .... a ..... <a href="">Nedávné oznámení týmu</a>, který se stará o <a href="">projekt GCC</a> o tom, že dojde ke zrušení podpory některých starších mikroprocesorových architektur, nám nepřímo připomněl další výročí &ndash; letos totiž uběhlo takřka neuvěřitelných čtyřicet let od vzniku legendárních mikroprocesorů řady <a href="">Motorola 68000</a> (zkráceně se celá řada označuje <a href="">m68k</a>).</p>

<img src="http://i.iinfo.cz/images/394/pc146-1.png" width="450" height="439" alt=" " />
<p><i>Obrázek 1: 32bitový mikroprocesor Motorola M68000 patří mezi zástupce architektury CISC s&nbsp;téměř ortogonální instrukční sadou a poměrně velkou sadou pracovních registrů (rozdělených na registry datové a adresové). Jednalo se o jeden z&nbsp;nejúspěšnějších 32bitových mikroprocesorů vůbec.</i></p>

<p>První typy těchto mikroprocesorů skutečně vznikly již v&nbsp;roce 1979, ovšem architektura 68000 v&nbsp;některých ohledech předběhla svoji dobu a do značné míry určovala a ovlivňovala vývoj IT jak v&nbsp;osmdesátých letech minulého století, tak i v&nbsp;letech devadesátých (alespoň zpočátku). Většina přelomových osobních mikropočítačů &ndash; s&nbsp;výjimkou IBM PC &ndash; totiž byla na m68k postavena, což platí zejména pro mikropočítače řady Atari ST, Macintosh a Amiga (ovšem například i Apple Lisa či Sinclair QL). Nesmíme ovšem zapomenout ani na pracovní stanice, zejména na Sun-1 a IRIS 1000. Ovšem jádra postavená nad m68k byla používána i později, a to jak v&nbsp;oblasti výkonných mikrořadičů, tak i čipů určených pro PDA a mobilní telefony či pro programovatelné grafické kalkulačky společnosti Texas Instruments. Tyto čipy jsme mohli najít i v&nbsp;laserových tiskárnách a v&nbsp;herních konzolích. A v&nbsp;neposlední řadě se jednalo o mikroprocesory, které se velmi snadno programovaly v&nbsp;assembleru; snadnost programování vynikne zejména při porovnání s&nbsp;konkurenční platformou 80x86.</p>

<a href="http://i.iinfo.cz/images/419/pc7702.jpg"><img src="http://i.iinfo.cz/images/419/pc7702-prev.jpg" alt="pc7702" height="257" width="370" /></a>
<p><i>Obrázek 2: Mikroprocesor Motorola 68030 na základní desce desce osobního
počítače Macintosh Color Classic.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Od osmibitových mikroprocesorů Motorola 6800 k&nbsp;16/32bitovým čipům řady 68000</h2>

<p>Historie čipu Motorola 68000 začala vlastně již vznikem čistě osmibitového čipu <i>MC6800</i> pocházejícího z&nbsp;roku 1974 (<i>MOS 6502</i> přišel na trh až o rok později), který byl následovaný poněkud méně známými čipy <i>MC6801</i> a <i>MC6802</i>. Jednalo se o osmibitové mikroprocesory, jejichž programátorský model se v&nbsp;mnoha ohledech odlišoval například od konkurenčních čipů 8008, 8080 či Z80. Osmibitové čipy Motorola totiž měly jen velmi omezený počet pracovních registrů &ndash; pouze dva osmibitové akumulátory pojmenované <strong>A</strong> a <strong>B</strong> a plně šestnáctibitový index registr <strong>X</strong>, které byly doplněny o ukazatel na vrchol zásobníku <strong>SP</strong>, programový čítač <strong>PC</strong> a samozřejmě i stavový registr (jedním z&nbsp;mála mikroprocesorů bez stavového registru a příznakových bitů je MIPS).</p>

<p>Velmi omezený počet pracovních registrů je vlastně logický, když si uvědomíme, že v&nbsp;polovině sedmdesátých let minulého století byla cena každého tranzistoru vytvořeného na čipu o několik řádů vyšší, než je tomu dnes. Navíc byly mikroprocesory relativně pomalé při porovnání s&nbsp;dobou přístupu do operační paměti (dokonce tak pomalé, že se v&nbsp;některých domácích mikropočítačích mikroprocesor vcelku bez problémů dělil o datovou a adresovou sběrnici s&nbsp;grafickým řadičem). Z&nbsp;tohoto důvodu mělo význam, aby mikroprocesory měly malý počet registrů (nižší cena větší výtěžnost) a aby obsahovaly relativně složité instrukce realizované mikroprogramovým řadičem (ten je realizován maskou/pamětí typu ROM, kde je cena za bit mnohem nižší, než v&nbsp;případě statické paměti typu RAM).</p>

<p><div class="rs-tip-major">Poznámka: přesně opačnou cestou se později vydaly mikroprocesory s&nbsp;architekturou RISC, které naopak mají počet registrů mnohonásobně vyšší, ovšem instrukční sada je omezena většinou jen na ty instrukce, které se provedou v&nbsp;počtu cyklů odpovídajících počtu řezů instrukční pipeline. Čipy RISC ovšem vznikly na základě odlišných požadavků a odlišných technologických parametrů.</div></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Mikroprocesor Motorola MC6800 z&nbsp;pohledu programátora</h2>

<p>Podívejme se ještě jednou na seznam registrů dostupných na osmibitové platformě M6800:</p>

<table>
<tr><th>Označení</th><th>Šířka</th><th>Název registru </th><th>Význam registru</th></tr>
<tr><td>A  </td><td>8 b </td><td>accumulator A  </td><td>první universální pracovní registr</td></tr>
<tr><td>B  </td><td>8 b </td><td>accumulator B  </td><td>druhý universální pracovní registr</td></tr>
<tr><td>X  </td><td>16 b</td><td>index register </td><td>používán při adresování operandů</td></tr>
<tr><td>PC </td><td>16 b</td><td>program counter</td><td>používán při adresování instrukcí</td></tr>
<tr><td>SP </td><td>16 b</td><td>stact pointer  </td><td>použit při operacích se zásobníkem</td></tr>
<tr><td>CCR</td><td>6 b </td><td>condition code register</td><td>obsahuje příznakové bity</td></tr>
</table>

<p>Akumulátory <strong>A</strong> a <strong>B</strong> jsou použity u většiny aritmetických a logických operací, protože tvoří vždy první (nebo jediný) operand a současně se do nich ukládá i výsledek operace. Jedinou &bdquo;asymetrii&ldquo; mezi těmito registry můžeme najít u instrukcí <strong>ABA</strong> (A=A+B), <strong>CBA</strong> (A-B) a <strong>SBA</strong> (A=A-B), kde je registr <strong>A</strong> vždy prvním operandem a současně se do něj ukládá (kromě instrukce <strong>CBA</strong>) i výsledek operace; dále pak u instrukcí <strong>DAA</strong> (korekce při BCD sčítání) a <strong>TAP</strong> společně s&nbsp;<strong>TPA</strong> (přesun mezi akumulátorem a příznakovým registrem), které pracují pouze s&nbsp;akumulátorem <strong>A</strong>. Indexový registr je použit při adresování druhého operandu mnoha instrukcí, jeho hodnotu je taktéž možné inkrementovat, dekrementovat, uložit či načíst z&nbsp;paměti a porovnat s&nbsp;dvoubajtovou konstantou. Příznakový registr <strong>CCR</strong> obsahuje následující jednobitové příznaky:</p>

<table>
<tr><th>Příznak</th><th>Název</th><th>Význam</th></tr>
<tr><td>H</td><td>halfcarry</td><td>přetečení ze 3. do 4. bitu (použito při BCD aritmetice)</td></tr>
<tr><td>I</td><td>interrupt</td><td>příznak povolení či zákazu přerušení</td></tr>
<tr><td>N</td><td>negative </td><td>příznak operace se záporným výsledkem</td></tr>
<tr><td>Z</td><td>zero     </td><td>příznak operace s&nbsp;nulovým výsledkem</td></tr>
<tr><td>V</td><td>overflow </td><td>(přeplnění) přetečení ze 6. do 7. (znaménkového) bitu</td></tr>
<tr><td>C</td><td>carry    </td><td>přetečení ze 7. bitu (přenos do vyššího řádu)</td></tr>
</table>

<p>Příznakové bity a jejich kombinace jsou použity u 14 podmíněných relativních
skoků.</p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Další vývoj osmibitové řady Motorola 6800</h2>

<p>Po vzniku osmibitového mikroprocesoru <i>MC6800</i> vytvořila firma Motorola
dvě další varianty tohoto čipu, které se některými svými vlastnostmi blížily
skutečným mikrořadičům. Prvním z&nbsp;těchto čipů byl <i>MC6802</i> z&nbsp;roku
1977, který obsahoval kromě vlastního řadiče a CPU i 128 bajtů paměti RAM,
interní oscilátor (nemusel se připojovat externí zdroj hodinových signálů,
pouze 4 MHz krystal) a spolu s&nbsp;čipem <i>MC6846</i> (2kB paměti ROM,
osmibitový obousměrný port a časovač) bylo možné vytvořit jednoduchý dvoučipový
mikropočítač, což se již v&nbsp;mnoha ohledech blížilo ke klasickému
mikrořadiči. Následoval čip <i>MC6801</i> (číslování je pravda poněkud
neobvyklé), který měl taktéž 128 bajtů paměti RAM, navíc však na tomto čipu
byla přítomna i paměť ROM s&nbsp;kapacitou 2 kB, šestnáctibitový časovač,
sériový port a 31 programovatelných I/O linek. Jednalo se o jeden
z&nbsp;prvních mikroprocesorů (nebo vlastně už mikrořadičů), u nichž bylo možné
oba osmibitové akumulátory <strong>A</strong> a <strong>B</strong> spojit do
jednoho šestnáctibitového akumulátoru <strong>D</strong>.</p>

<a href="http://i.iinfo.cz/images/212/pc132-8.png"><img src="http://i.iinfo.cz/images/212/pc132-8-prev.png" width="251" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Interní struktura mikrořadičů M68HC05 popsaných v&nbsp;následujícím textu.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Ovšem tento čip (s&nbsp;cca 35000 tranzistory) byl poměrně drahý a proto se používal pouze v&nbsp;automobilovém průmyslu a nikoli ve spotřební elektronice.  Firma Motorola proto tento čip poměrně podstatným způsobem zjednodušila a začala ho nabízet pod novým označením <i>MC6805</i>. Od tohoto mikrořadiče je již malý krůček k&nbsp;<i>68HC05</i>, jímž se budeme zabývat v&nbsp;následujícím textu. Jak jsme si již řekli, jedná se o zjednodušenou variantu čipu <i>MC6801</i>, což mj.&nbsp;znamená, že se počet registrů zmenšil na pět (je použit jen jeden osmibitový akumulátor), indexový registr má šířku pouze osm bitů a taktéž čítač instrukcí má sníženou šířku na 13 bitů, protože paměť nainstalovaná na mikrořadiči má menší kapacitu než teoreticky dosažitelných 64 kB:</p>

<table>
<tr><th>Označení</th><th>Šířka</th><th>Název registru </th><th>Význam registru</th></tr>
<tr><td>A  </td><td>8 b </td><td>accumulator A  </td><td>jediný universální pracovní registr</td></tr>
<tr><td>X  </td><td>8 b </td><td>index register </td><td>používán při adresování operandů</td></tr>
<tr><td>PC </td><td>16 b (13 použito)</td><td>program counter</td><td>používán při adresování instrukcí</td></tr>
<tr><td>SP </td><td>16 b</td><td>stact pointer  </td><td>použit při operacích se zásobníkem</td></tr>
<tr><td>CCR</td><td>5 b </td><td>condition code register</td><td>obsahuje příznakové bity</td></tr>
</table>

<a href="http://i.iinfo.cz/images/212/pc132-9.png"><img src="http://i.iinfo.cz/images/212/pc132-9-prev.png" width="257" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Základní zapojení mikrořadiče M68HC05.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Instrukční soubor se taktéž v&nbsp;některých ohledech odlišoval od původní <i>MC6800</i>. Zejména byla přidána instrukce pro celočíselné násobení (X:A = A&times;X) trvající 11 cyklů a navíc se objevily instrukce (podobné instrukcím známým z&nbsp;<i>MCS-51</i>), které umožňovaly přímou manipulaci s&nbsp;jednotlivými bity uloženými v&nbsp;prvních 256 bajtech paměti: <strong>BSET</strong> (bit set), <strong>BCLR</strong> (bit clear), <strong>BRSET</strong> (branch if bit is set) a <strong>BRCLR</strong> (branch if bit is clear). Taktéž možnosti adresování byly poněkud odlišné: bylo možné provádět přímé adresování prvních 256 bajtů, rozšířené adresování (16 bitů adresy), adresování přes index registr a adresování přes index registr a osmibitový či šestnáctibitový posun (offset). Všechny mikrořadiče Motoroly jsou postaveny na von Neumannově architektuře, tj.&nbsp;mají pouze jeden adresový prostor, do nějž je mapována jak paměť RAM, tak i paměť ((E)P)ROM a popř.&nbsp;i elektricky mazatelná paměť EEPROM.</p>

<p>Základní model procesoru <i>68HC05</i> má na jediném čipu 176 bajtů RAM, 5936 bajtů ROM, 256 bajtů EEPROM, tři osmibitové I/O porty, šestnáctibitový čítač/časovač, sériové rozhraní SCI, jeden osmibitový A/D převodník a konečně modul pro PWM (pulsní šířkovou modulaci). Existovaly však i další varianty tohoto procesoru, z&nbsp;nichž některé měly až 32 kB ROM či EPROM, větší kapacitu paměti RAM, nainstalovanou rutinu ve firmware, která umožňovala komunikaci s&nbsp;PC přes sériový port (později se tato rutina vyvinula ve známé <i>BUFFALO</i>) atd. Bližší informace o tomto mikrořadiči i o dalších řadách <i>68HC08</i> a <i>68HC11</i> si řekneme v&nbsp;navazující části seriálu.</p>

<a href="http://i.iinfo.cz/images/212/pc132-10.png"><img src="http://i.iinfo.cz/images/212/pc132-10-prev.png" width="370" height="242" alt=" " /></a>
<p><i>Obrázek xxx: Instrukční sada mikrořadiče M68HC05.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Dalším osmibitovým mikrořadičem, který byl navržen firmou <i>Motorola</i>, je mikrořadič nesoucí označení <i>68HC08</i>. Jedná se o v&nbsp;mnoha směrech vylepšenou variantu původního mikrořadiče <i>68HC05</i>, který svým uživatelům nabízel jak větší množství vstupně-výstupních portů, více časovačů a osmikanálový analogově-digitální převodník, tak i rozšířenou kapacitu pamětí ROM a RAM. Došlo i ke změně v&nbsp;konfiguraci registrů a rozšíření instrukční sady tohoto mikrořadiče &ndash; zejména byly přidány nové adresní režimy, které umožňovaly lépe využít zvětšenou kapacitu pamětí ROM a RAM. V&nbsp;následující tabulce jsou vypsány všechny registry centrální procesorové jednotky, které mohly být využity při programování v&nbsp;assembleru. Povšimněte si především toho, že došlo k&nbsp;rozšíření původně osmibitového indexového registru <strong>X</strong> na šestnáctibitový registr <strong>H:X</strong>, jehož obě osmibitové části lze zpracovávat odděleně. Taktéž se rozšířila bitová šířka registrů <strong>PC</strong> a <strong>SP</strong> na plných šestnáct bitů, zatímco u mikrořadiče <i>68HC05</i> měl <strong>PC</strong> měnitelných pouze 13 spodních bitů a <strong>SP</strong> dokonce jen 6 spodních bitů:</p>

<table>
<tr><th>Označení</th><th>Šířka (b)</th><th>Využito bitů</th><th>Název registru </th><th>Význam registru</th></tr>
<tr><td>A  </td><td> 8</td><td> 8</td><td>accumulator A  </td><td>jediný universální pracovní registr</td></tr>
<tr><td>H:X</td><td>16</td><td>16</td><td>index register </td><td>používán při adresování operandů</td></tr>
<tr><td>PC </td><td>16</td><td>16</td><td>program counter</td><td>používán při adresování instrukcí</td></tr>
<tr><td>SP </td><td>16</td><td>16</td><td>stact pointer  </td><td>použit při operacích se zásobníkem</td></tr>
<tr><td>CCR</td><td> 8</td><td> 6</td><td>condition code register</td><td>obsahuje příznakové bity</td></tr>
</table>

<a href="http://i.iinfo.cz/images/57/pc133-6.png"><img src="http://i.iinfo.cz/images/57/pc133-6-prev.png" width="276" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Zapojení pinů osmibitového mikrořadiče 68HC08.<br />
(Zdroj: Technical Data &ndash; MC68HC08AB16A, Freescale Semiconductor)</i></p>

<a href="http://i.iinfo.cz/images/57/pc133-8.png"><img src="http://i.iinfo.cz/images/57/pc133-8-prev.png" width="364" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Instrukční sada mikrořadiče 68HC08.<br />
(Zdroj: Technical Data &ndash; MC68HC08AB16A, Freescale Semiconductor)</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Kam dál? Vytvořit nejvýkonnější osmibitový čip či přejít do 32bitové oblasti?</h2>

<p>Po vzniku a relativně úspěšných prodejích čipů <i>MC6800/6801/6802</i> se vedení společnosti <i>Motorola</i> rozhodlo rozdělit další vývoj svých programovatelných čipů na dvě části. První skupina vývojářů se soustředila na vývoj zcela nové generace mikroprocesorů &ndash; jednalo se o později slavnou řadu <i>68000 (68k)</i>, jejíž tvůrci vlastně zcela přeskočili generaci šestnáctibitových procesorů, protože čipy <i>Motorola 68000</i> byly v&nbsp;mnoha ohledech 32bitovými mikroprocesory. Druhá skupina vývojářů mezitím pracovala na novém typu osmibitového mikroprocesoru, který převzal mnoho svých vlastností jak z&nbsp;původního procesoru <i>MC6800</i>, tak i z&nbsp;konkurenčního čipu <i>MOS 6502</i> (zde se konstruktéři nechali &bdquo;inspirovat&ldquo; především nultou stránkou paměti a jejím efektivním adresováním).</p>

<p><div class="rs-tip-major">Poznámka: Motorola 68000 se někdy označuje jako 16/32bitový mikroprocesor. Je tomu tak z&nbsp;toho důvodu, že pracovní registry i celá instrukční sada byly plnohodnotně 32bitové, ovšem interní datové sběrnice i ALU měly šířku jen 16 bitů. I externí datová sběrnice měla šířku pouze 16 bitů, což však nehraje příliš velkou roli v&nbsp;posuzování bitové šířky procesoru (protože Intel 8088 byl externě taktéž osmibitový a Intel 386SX externě 16bitový, i když se interně jednalo o plně 16bitové resp.&nbsp;32bitové mikroprocesory). Ovšem z&nbsp;pohledu programátorů byla Motorola 68000 32bitovým mikroprocesorem; jediné omezení měla adresová sběrnice &ndash; 24 bitů (tedy 16MB, což ovšem v&nbsp;době vzniku tohoto čipu byla nepředstavitelně obrovská hodnota).</div></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Nejvýkonnější osmibitový mikroprocesor</h2>

<p>Výsledkem těchto snah byl s&nbsp;velkou pravděpodobností nejvýkonnější osmibitový mikroprocesor, který byl kdy vyroben. Jednalo se o procesor nazvaný <i>MC6809</i>, který programátorům nabízel několik v&nbsp;té době poměrně unikátních vlastností, například téměř zcela ortogonální instrukční sadu (samozřejmě se jednalo o procesor s&nbsp;architekturou <i>CISC</i>), dvojici šestnáctibitových index registrů či o dva ukazatele na vrchol zásobníku ideální například pro implementaci programovacího jazyka <i>Forth</i>. Tento mikroprocesor sice programátorům ve své instrukční sadě nabízel &bdquo;pouze&ldquo; 59 instrukcí, ovšem vzhledem k&nbsp;velkému množství adresovacích režimů a ortogonalitě instrukční sady dokázal provádět všechny instrukce původního čipu <i>MC6800</i> (78 instrukcí) a samozřejmě i vykonávat mnohé další operace.</p>

<p>Pro zajímavost jsou v&nbsp;následující tabulce vypsány některé základní vlastnosti &bdquo;programátorského modelu&ldquo; osmibitových mikroprocesorů a mikrořadičů přímo či nepřímo odvozených od původního čipu <i>MC6800</i> (D je označení pro double accumulator, 16bitový akumulátor vytvořený z&nbsp;dvojice osmibitových akumulátorů A a B):</p>

<table>
<tr><th>Čip</th><th>Typ</th><th>Akumulátor(y) </th><th>D=A+B (16b)</th><th>Index registr(y)</th><th>Čítač instrukcí</th><th>Zásobníkové registry</th><th>Spec. registry</th></tr>
<tr><td>Motorola MC6800</td><td>CPU</td><td>A (8b), B (8b)</td><td>ne</td><td>X (16b)</td><td>PC (16b)</td><td>SP (16b)</td><td>CCR (6b)</td></tr>
<tr><td>Motorola MC6809</td><td>CPU</td><td>A (8b), B (8b)</td><td>ano</td><td>X (16b), Y (16b)</td><td>PC (16b)</td><td>S (16b), U (16b)</td><td>CCR (8b), DP (8b)</td></tr>
<tr><td>Motorola 68HC05</td><td>MCU</td><td>A (8b)</td><td>ne </td><td>X (8b)</td><td>PC (13b)</td><td>SP (16b)</td><td>CCR (5b)</td></tr>
<tr><td>Motorola 68HC08</td><td>MCU</td><td>A (8b)</td><td>ne </td><td>H:X (16b)</td><td>PC (16b)</td><td>SP (16b)</td><td>CCR (6b)</td></tr>
<tr><td>Motorola 68HC11</td><td>MCU</td><td>A (8b), B (8b)</td><td>ano</td><td>X (16b), Y (16b)</td><td>PC (16b)</td><td>SP (16b)</td><td>CCR (8b)</td></tr>
<tr><td>MOS 6502</td><td>CPU</td><td>A (8b)</td><td>ne </td><td>X (8b), Y (8b)</td><td>PC (16b)</td><td>S (8b)</td><td>P (7b)</td></tr>
</table>

<p>Jak původní mikroprocesor <i>MC6800</i>, tak i konkurenční čip <i>MOS 6502</i> obsahoval speciální adresní režimy, s&nbsp;jejichž pomocí bylo možné přistupovat k&nbsp;prvním 256 bajtům operační paměti, a to rychlejším způsobem, než v&nbsp;případě použití plné 16bitové adresy (navíc byly instrukce i o jeden bajt kratší, což nebylo v&nbsp;dobách počítačů s&nbsp;maximálně 64 kB RAM nezanedbatelné). Konstruktéři mikroprocesoru <i>MC6809</i> tuto možnost zachovali a navíc speciální osmibitové adresní režimy rozšířili o registr nazvaný <strong>DP</strong> (zkratka <i>Direct Page</i>), kterým bylo možné vybrat jakoukoli stránku v&nbsp;rámci paměťového prostoru 64 kB, kterou bylo následně možné použít v&nbsp;součinnosti s&nbsp;osmibitovou adresou (důležité je, že se neprovádělo časově náročné sčítání dvou adres, nejedná se o obdobu neblahého adresování typu <i>segment:offset</i>, kterým nás oblažila firma Intel :-). Nově přidána byla taktéž instrukce umožňující provést vynásobení dvou osmibitových operandů. Hardwarová násobička přitom nebyla u osmibitových mikroprocesorů příliš častým příslušenstvím, protože její implementace zabírala příliš mnoho cenné plochy čipu (počet tranzistorů na čipu je přímo úměrný jeho ploše a nepřímo úměrný použité technologii litografie).</p>

<p>Zajímavé a i v&nbsp;dnešní době poněkud neobvyklé bylo též přidání druhého ukazatele na vrchol zásobníku <strong>U</strong>. To umožňovalo jak rychlé přepínání mezi různými procesy (operační systém &rarr; uživatelský program, uživatelský program &rarr; obslužná přerušovací rutina), tak i například snadnou implementaci interpretru programovacího jazyka <i>Forth</i>, který dvojici zásobníků používá. Vzhledem k&nbsp;tomu, že řadič i aritmeticko-logická jednotka mikroprocesoru <i>MC6809</i> byly ručně optimalizovány (šlo o možná poslední procesor typu <i>CISC</i>, jehož interní struktura byla &bdquo;zadrátována&ldquo; bez použití mikrokódu), jednalo se o velmi rychlý procesor, a to i v&nbsp;případě, že byl použit relativně pomalý zdroj hodinového signálu &ndash; původní <i>MC6809</i> měl maximální hodinovou frekvenci rovnu 1MHz, model <i>MC68A09</i> 1,5 MHz (právě tento model byl použit v&nbsp;herní konzoli <i>Vectrex</i>) a konečně model <i>MC68B09</i> mohl být taktován hodinovým signálem o frekvenci až 2 MHZ.</p>

<p>Z&nbsp;mnoha pohledů se tak jednalo o technologicky velmi dobře navržený mikroprocesor, který však přišel na trh již poměrně pozdě &ndash; v&nbsp;době nástupu šestnáctibitových a 32bitových čipů (ostatně to samé je možné říci i o herní konzoli <i>Vectrex</i>, které se &bdquo;podařilo&ldquo; přijít na trh téměř v&nbsp;době, kdy v&nbsp;USA začala velká krize na trhu s&nbsp;herními konzolemi i hrami určenými pro tyto konzole). Vzhledem k&nbsp;technologickým kvalitám <i>6809</i> je poměrně zajímavý a poněkud nepochopitelný fakt, že mikrořadiče firmy Motorola, zejména pak čipy rodiny <i>68HC11</i>, <strong>NE</strong>byly založeny na <i>6809</i> ale na starším a ne tak výkonném čipu <i>MC6800</i>, což je z&nbsp;dnešního pohledu možná poněkud škoda (například o instrukční sadě <i>68HC11</i> lze říci cokoli, jen ne to, že je ortogonální a snadno naučitelná).</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Konec osmibitové éry a vznik legendární řady Motorola 68000</h2>

<p>I přesto, že byl výše zmíněný čip <i>6809</i> pravděpodobně nejpropracovanějším a nejvýkonnějším osmibitovým mikroprocesorem (a jedním z&nbsp;posledních čipů optimalizovaných ručně), bylo již v&nbsp;době jeho uvední na trh jasné, že éra osmibitových počítačů (nikoli mikrořadičů) je již za svým zenitem a vývoj bude probíhat v&nbsp;oblasti šestnáctibitových a 32bitových čipů. A právě zde se inženýři ze společnosti Motorola rozhodli, že vývoj jejich nového čipu bude probíhat odlišným způsobem, než který zvolila konkurenční firma <i>Intel</i>. <i>Intel</i> se totiž snažil vyrábět do značné míry kontinuální řadu mikroprocesorů, počítaje osmibitovým procesorem <i>Intel 8008</i>, přes mnohem známější procesory <i>Intel 8080</i> a <i>Intel 8085</i> až po šestnáctibitový procesor <i>Intel 8086</i>, popř.&nbsp;jeho velmi úspěšnou variantu <i>Intel 8088</i> se zmenšenou šířkou externí sběrnice, který byl použit v&nbsp;prvních osobních počítačích IBM PC. Jak architektura, tak i instrukční sada mikroprocesorové řady <i>x86</i> je vlastně dodnes ovlivněna snahou o dosažení zpětné kompatibility se stařičkými osmibitovými mikroprocesory <i>Intel</i>.</p>

<p>Procesory <i>8086</i> a <i>8088</i>, které z&nbsp;větší části navrhoval Stephen Morse, navíc obsahují (i díky snahám o kontinualitu vývoje) šestnáctibitovou interní sběrnici a tudíž i šestnáctibitové adresové i datové registry, což poměrně zásadním způsobem ovlivnilo například způsob výpočtu efektivních adres &ndash; jedná se o (nechvalně) známý způsob adresování přes dvojici šestnáctibitových registrů segment:offset.</p>

<p>Návrh Motoroly 68000 se skutečně v&nbsp;mnoha ohledech lišil od osmibitových předchůdců. Výsledkem byl totiž (z&nbsp;pohledu programátora, nikoli nutně interně) plně 32bitový mikroprocesor s&nbsp;do značné míry ortogonální instrukční sadou, mnoha adresovacími režimy a s&nbsp;relativně velkým množstvím datových registrů <strong>D0</strong> až <strong>D7</strong> i adresových registrů <strong>A0</strong> až <strong>A7</strong>, z&nbsp;nichž každý měl šířku plných 32bitů. Což byl velmi podstatný rozdíl oproti omezeným možnostem použitým u mikroprocesorů <i>Intel</i> řady <i>x86</i>, kde se sada registrů i způsob adresování musel několikrát změnit (přesněji řečeno rozšiřovat, a to s&nbsp;použitím prefixů u instrukcí, režimů činnosti procesoru i dalších adresovacích režimů); nehledě na to, že instrukční sady procesorů <i>Intel</i> nebyly zpočátku ortogonální, což komplikovalo jak práci programátorů v&nbsp;assembleru, tak i (a to především) činnost překladačů.</p>

<p>Rozdělení sady všech šestnácti registrů na adresové a datové umožnilo konstruktérům dosáhnout paralelního zpracování jednotlivých kroků v&nbsp;instrukci, tj.&nbsp;současně bylo možné provádět nějaký výpočet či přenos dat a navíc se již mohl měnit obsah adresového registru (operace provádějící mj.&nbsp;i post-inkrementaci či pre-dekrementaci adresového registru jsou asi nejlepším příkladem). To, že každý adresový registr měl šířku 32 bitů taktéž znamenalo, že každý z&nbsp;těchto registrů mohl sloužit pro zápis či čtení obsahu libovolné paměťové buňky v&nbsp;rozsahu 4 GB, i když fyzicky bylo možné k&nbsp;původnímu mikroprocesoru <i>Motorola 68000</i> připojit &bdquo;pouze&ldquo; 16 MB RAM (jedná se o jeden z&nbsp;důsledků již zmíněné dopředné kompatibility &ndash; dobře napsané programy nebylo nutné při přechodu na modernější typ procesoru měnit). I přes některé nedostatky tohoto mikroprocesoru (pravděpodobně nejzávažnějším byla u původního typu absence jednotky pro ochranu paměti &ndash; chráněný režim) byl procesor <i>Motorola 68000</i> použit i u pracovní stanice <i>Sun-1</i>, kterou si popíšeme v&nbsp;navazujících kapitolách.</p>

<p>Původní <i>Motorola M68000</i> měla maximální hodinovou frekvenci 8 MHz (u některých počítačů záměrně snižovanou o několik stovek Hz) a interně se jednalo o třicetidvoubitový mikroprocesor, na rozdíl od konkurenčních procesorů <i>Intel 8086</i> a <i>Intel 80286</i> (procesor obsahoval dvě šestnáctibitové ALU pracující paralelně). Aby se však snížila celková cena čipu i počítačů, které ho používaly, byla externí datová sběrnice <i>M68000</i> pouze šestnáctibitová a adresová sběrnice 24bitová, což jeho tvůrcům umožnilo, aby mikroprocesor obsahoval pouze 64 pinů aniž by se musely adresy a data multiplexovat (přenášet po jedněch vodičích v&nbsp;časově oddělených okamžicích).</p>

<p>Mikroprocesor obsahoval šestnáct 32bitových pracovních registrů rozdělených na osm adresových a osm datových registrů, přičemž se jeden adresový registr používal jako ukazatel na vrchol zásobníku (ST &ndash; Stack Pointer). Právě poměrně velký počet pracovních registrů a do značné ortogonální instrukční sada zapříčinily velkou oblíbenost této procesorové řady, takže se <i>M680x0</i> používala jak v&nbsp;již popsaných počítačích <i>Apple Macintosh</i>, tak i v&nbsp;<i>Atari ST</i>, <i>Amigách</i>, pracovních stanicích firmy <i>Sun</i> atd. (s&nbsp;nadsázkou lze říci, že prakticky všude kromě IBM PC :-).</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Programátorský model mikroprocesorů m68k</h2>

<p>Z&nbsp;pohledu programátora (používajícího assembler) je programátorský model mikroprocesorů m68k velmi příjemný na práci. Programátoři měli k&nbsp;dispozici již výše zmíněné adresové a datové registry s&nbsp;plnou šířkou 32bitů.</p>

<table>
<tr><th>Registr</th><th>Šířka</th><th>Význam</th></tr>
<tr><td>D0</td><td>32b</td><td>datový registr D0</td></tr>
<tr><td>...</td><td>...</td><td>...</td></tr>
<tr><td>D7</td><td>32b</td><td>datový registr D7</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>A0</td><td>32b</td><td>adresový registr A0</td></tr>
<tr><td>...</td><td>...</td><td>...</td></tr>
<tr><td>A6</td><td>32b</td><td>adresový registr A6</td></tr>
<tr><td>A7/USP</td><td>32b</td><td>adresový registr A7 resp. User Stack Pointer</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>PC</td><td>32b</td><td>programový čítač</td></tr>
<tr><td>CCR</td><td>8b</td><td>příznakový registr</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td></td><td></td><td>nedostupné v&nbsp;uživatelském režimu</td></tr>
<tr><td></td><td></td><td>nedostupné v&nbsp;uživatelském režimu</td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: již při letmém pohledu na tabulku je patrné, že se architektura M68000 zcela odlišuje od předchozích architektur osmibitových mikroprocesorů M6800.</div></p>

<p>Datové registry D0 až D7 je možné používat v&nbsp;jejich původním významu, tj.&nbsp;pro zpracování 32bitových slov. Kromě toho je ovšem možné je využít jako bitová pole, osmibitové registry, šestnáctibitové registry nebo dva sousední registry využít pro 64bitovou operaci. Tyto registry se taktéž používají ve funkci <i>index registrů</i> při adresování dat uložených v&nbsp;operační paměti.</p>

<p>Mikroprocesor podporoval velké množství adresovacích režimů, které byly navrženy takovým způsobem, aby dobře odpovídaly běžným jazykovým kontrukcím, především práci s&nbsp;poli a s&nbsp;rozeskokovými tabulkami. Díky tomu, že většina režimů byla podporována všemi instrukcemi, dosahoval celkový počet dostupných operačních kódů instrukcí hodnoty větší než 1000 (a to byl přitom počet insturkcí nízký &ndash; 56 instrukcí v&nbsp;uživatelském režimu).</p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Instrukční sada čipů Motorola 68000</h2>

<p>Operační kódy instrukcí měly, podobně jako u dalších mikroprocesorů s&nbsp;architekturou CISC, proměnlivou šířku. Minimální šířka byla šestnáct bitů, ovšem u instrukcí, v&nbsp;nichž se vyskytovaly konstanty (posun při adresování atd.) mohla být šířka instrukce mnohem delší. Nejdelší instrukcí je jedna z&nbsp;variant instrukce <strong>MOVE</strong>, která je zakódována v&nbsp;jedenácti 16bitových slovech. Takto složité instrukce pochopitelně musel spouštět mikroprogramový řadič; Motorola 68000 tedy v&nbsp;žádném případě nepatřila do kategorie RISC.</p>

<p>U řady m68k se můžeme setkat s&nbsp;formátem nazvaným <i>Packed Decimal</i> (který ovšem nemůže být přímo zpracováván &ndash; je nutné použít k&nbsp;tomu určené subrutiny). Tento formát vychází z&nbsp;formátu, který jsme si popsali v&nbsp;předchozí kapitole, ovšem je zvětšen rozsah hodnot i jejich přesnost. Pro uložení numerické hodnoty se používají tři 32bitová slova, tedy dohromady dvanáct bajtů. Exponent je reprezentován třemi dekadickými ciframi (BCD), exponent pak sedmnácti dekadickými ciframi, přičemž jedna cifra je umístěna před desetinnou čárkou, dalších šestnáct cifer za touto čárkou:</p>

<table>
<tr><th>Slovo</th><th>Nibble 7</th><th>Nibble 6</th><th>Nibble 5</th><th>Nibble 4</th><th>Nibble 3</th><th>Nibble 2</th><th>Nibble 1</th><th>Nibble 0</th></tr>
<tr><td>1</td><td>příznaky</td><td>exponent</td><td>exponent</td><td>exponent</td><td>&times;</td><td>&times;</td><td>&times;</td><td>17.cifra</td></td></tr>
<tr><td>2</td><td>16.cifra</td><td>15.cifra</td><td>14.cifra</td><td>13.cifra</td><td>12.cifra</td><td>11.cifra</td><td>10.cifra</td><td>9.cifra</td></td></tr>
<tr><td>3</td><td>8.cifra</td><td>7.cifra</td><td>6.cifra</td><td>5.cifra</td><td>4.cifra</td><td>3.cifra</td><td>2.cifra</td><td>1.cifra</td></td></tr>
</table>

<p>V&nbsp;nejvyšším nibble prvního slova se nachází příznaky speciálních hodnot
(+&infin;, -&infin;, NAN, +0, -0), znaménko mantisy (SM) i znaménko exponentu
(SE),</p>


<p><a name="k10"></a></p>
<h2 id="k10">10. Další vývoj řady 68000</h2>

<p>Další vývoj této řady mikroprocesorů, jenž se také souhrnně označovaly jako řada <i>68k</i>, se ubíral dvěma směry &ndash; ke zjednodušení (a především zlevnění) a směrem k&nbsp;vyššímu výkonu a dalším funkcím potřebným pro nasazení čipů (matematický koprocesor, podpora pro virtuální paměť atd.). Cenově výhodnější varianta označená <i>M68008</i> měla datovou sběrnici zúženou na osm bitů a adresovou sběrnici na bitů dvacet, což umožnilo zmenšit velikost pouzdra a především počet pinů (větší množství pinů znamená i vyšší cenu celého počítače a zvýšenou poruchovost). Naopak mikroprocesor <i>M68020</i> a následně i <i>M68030</i> a <i>M68040</i> byly již plně třicetidvoubitové.</p>

<table>
<tr><th></th><th></th></tr>
<tr><td></td><td></td></tr>
</table>

<p></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Aplikace čipů řady m68k v&nbsp;osobních počítačích a pracovních stanicích</h2>

<p>Již v&nbsp;úvodní kapitole jsme se zmínili o tom, že mikroprocesory řady m68k byly použity v&nbsp;celé řadě osobních mikropočítačů a dokonce i pracovních stanic. Kromě toho nalezneme m68k i v&nbsp;některých herních konzolích, laserových tiskárnách, grafických kalkulačkách společnosti Texas Instruments atd. V&nbsp;navazujících kapitolách se seznámíme s&nbsp;nejdůležitějšími aplikacemi m68k pocházejícími z&nbsp;dob, kdy dnes tato skomírající architektura znamenala špičku ve svém oboru. Nejdříve se seznámíme s&nbsp;osobními mikropočítači postavenými nad m68k &ndash; řadou <i>Sinclair QL</i>, <i>Macintosh</i>, <i>Atari ST</i> a <i>Amiga</i> (pořadí odpovídá době uvedení na trh). Dále se zmíníme o grafické pracovní stanici <i>Sun-1</i> a nezapomeneme ani na herní konzole, v&nbsp;nichž se čipy pocházející z&nbsp;řady m68 používaly, ať již v&nbsp;roli primárního čipu, tak i čipu pomocného (ovšem paradoxně se i tento sekundární čip používal v&nbsp;hlavní roli &ndash; viz další text).</p>

<p><div class="rs-tip-major">Poznámka: ve skutečnosti existují i další oblasti, v&nbsp;nichž se m68k používaly. Příkladem mohou být jakési hybridy mezi primitivními laptopy a psacími stroji společnosti Alpha Smart.</div></p>



<p><a name="k121"></a></p>
<h3 id="k121">12.1 Atari 520 ST</h3>

<p>Osobní mikropočítač <i>Atari 520 ST</i> představoval svým výkonem a také cenou základní model z&nbsp;celé vývojové řady Atari ST (označení ST je odvozeno od sousloví Sixteen/Thirty Two, i když se traduje, že se jedná o iniciály Sama Tramiela, syna majoritního akcionáře firmy). Vyráběn byl od roku 1985 a jeho design byl podobný jako například u známé <i>Amigy 500</i>, tj.&nbsp;počítač i disketová mechanika (v&nbsp;některých modelech) byly zabudovány přímo v&nbsp;klávesnici. Při porovnání s&nbsp;minule popsanými <i>Macintoshi</i> můžeme vidět několik rozdílů &ndash; <i>Macintosh</i> měl zabudovaný monitor i disketovou jednotku (ta se u Atari používá v&nbsp;modelech s&nbsp;písmenem <i>F</i> v&nbsp;názvu) a jeho klávesnice byla ochuzena o mnoho funkčních kláves; v&nbsp;prvních modelech dokonce i kláves kurzorových (podle Steva Jobse se na pohyb v&nbsp;textu měla používat pouze myš). Naproti tomu <i>Atari ST</i> mají plnohodnotnou klávesnici, ale monitor musel být externí (barevný či monochromatický), popřípadě bylo možné u modelů označených písmenem <i>M</i> použít i běžnou televizi, protože obsahovaly VF modulátor, podobně jako <i>Amigy</i> či většina osmibitových počítačů.</p>

<a href="http://i.iinfo.cz/images/596/pc7703.jpg"><img src="http://i.iinfo.cz/images/596/pc7703-prev.jpg" alt="pc7703" height="244" width="370" /></a>
<p><i>Obrázek xxx: Osobní mikropočítač Atari 520 ST.</i></p>

<p>Počítače řady <i>ST</i> jsou na první pohled snadno rozeznatelné svými typickými zešikmenými funkčními klávesami, které se v&nbsp;minulosti objevily už u počítačů <i>Atari 800XE</i> a <i>Atari 130XE</i> &ndash; ostatně celý design tohoto počítače vychází ze svých (v&nbsp;tomto ohledu velmi kvalitních) osmibitových předků navržených designérem Irou Valenskim. Technické parametry počítače <i>Atari 520 ST</i> odpovídaly jeho určení &ndash; k&nbsp;dispozici byly různé modely rozlišované písmeny v&nbsp;názvu, ST je základní model, STF obsahuje disketovou jednotku (označení použito v&nbsp;souvislosti s&nbsp;1040 STF), STM modulátor pro připojení k&nbsp;televizoru a STFM jak disketovou jednotku, tak i VF modulátor. Částečné rozšíření přinesl model <i>Atari 520 ST+</i>, který byl nabízen s 1&nbsp;MB RAM, zatímco původní <i>Atari 520 ST</i> obsahovalo půl megabajtu operační paměti. Ve všech konfiguracích <i>Atari 520 ST</i> se objevoval výše popsaný mikroprocesor Motorola 68000 (tj.&nbsp;základní typ), jenž byl taktovaný na 8MHz. Jako operační systém byl použit TOS (The Operating System, též Tramiel's Operating System) s&nbsp;grafickou nadstavbou GEM.  Poněkud netypicky byl celý operační systém uložen v&nbsp;paměti ROM, jež měla kapacitu 192KB a později (u dalších modelů) i 256KB.</p>

<img src="http://i.iinfo.cz/images/238/pc7704.png" alt="pc7704" height="226" width="306" />
<p><i>Obrázek 4: Další pohled na počítač Atari 520 ST.</i></p>

<img src="http://i.iinfo.cz/images/15/pc7705.png" alt="pc7705" height="200" width="320" />
<p><i>Obrázek 5: Legendární Dungeon Master běžící na počítači Atari ST
v&nbsp;šestnáctibarevném režimu.</i></p>



<p><a name="k122"></a></p>
<h3 id="k122">12.2 Atari 260 ST a Atari 130 ST</h3>

<p>Počítač <i>Atari 260 ST</i> vznikl v&nbsp;roce 1986 jako levnější varianta k&nbsp;výše popsanému modelu <i>Atari 520 ST</i>. Jedná se o počítač určený především pro Evropský trh, který však svými vlastnostmi odpovídá původnímu modelu <i>Atari 520 ST</i> s&nbsp;512 kB operační paměti, tj.&nbsp;jedná se o model bez zabudované disketové jednotky i bez VF modulátoru. Původně se sice plánovalo, že počítač bude osazen pouze 256 kB operační paměti (což by odpovídalo jeho názvu), ale ukázalo se, že samotný operační systém by si pro svoje potřeby alokoval tak velké množství paměti, že by pro aplikace zůstalo pouze cca 64 kB (Atari tento model vydalo jen kvůli tomu, že se již vydaly inzeráty se jménem 260 ST). Model <i>Atari 130 ST</i> měl obsahovat pouze 128 kB operační paměti a mělo se tak jednat o nejlevnější model z&nbsp;celé řady.  Ve skutečnosti nebyl tento počítač nikdy prodáván, což znamená, že naprostá většina modelů řady ST obsahovala minimálně 512 kB operační paměti, s&nbsp;čímž také počítala většina aplikací.</p>

<a href="http://i.iinfo.cz/images/213/pc7707.jpg"><img src="http://i.iinfo.cz/images/213/pc7707-prev.jpg" alt="pc7707" height="244" width="370" /></a>
<p><i>Obrázek 7: Osobní mikropočítač Atari 260 ST.</i></p>

<img src="http://i.iinfo.cz/images/275/pc7708.jpg" alt="pc7708" height="230" width="400" />
<p><i>Obrázek 8: Odlišný (a mnohem zajímavější) design klávesnice osobního
mikropočítače Atari 260 ST.</i></p>



<p><a name="k123"></a></p>
<h2 id="k123">12.3 Atari 1040 STF a Atari 1040 STFM</h2>

<p>Počítač <i>Atari 1040 STF(M)</i> z&nbsp;roku 1986 představoval rozšíření předchozích modelů, a to jak po designové stránce, tak i v&nbsp;některých technických parametrech (například zdroj byl zabudovaný přímo do těla počítače a nikoli v&nbsp;samostatné krabičce, disketová jednotka byla vždy interní atd.). Tyto počítače byly původně dodávány s&nbsp;jedním megabajtem operační paměti, přičemž maximálně je bylo možné osadit až čtyřmi megabajty RAM.  Varianta s&nbsp;jedním megabajtem se prodávala za 995 dolarů &ndash; jednalo se o první počítač s&nbsp;1MB RAM, který byl prodáván za cenu pod tisíc dolarů, což firma <i>Atari</i> samozřejmě nezapomněla zdůrazňovat ve svých reklamách (zmiňovala se v&nbsp;nich rovnice 1 KB RAM = $1). Kapacita využitelné grafické paměti zůstala rovna 32KB, stejně jako podporované grafické režimy (popsané v&nbsp;předchozích kapitolách). Modely <i>STF</i> a <i>STFM</i> se od sebe lišily přítomností (resp.&nbsp;nepřítomností) VF modulátoru.</p>

<img src="http://i.iinfo.cz/images/422/pc7709.jpg" alt="pc7709" height="308" width="410" />
<p><i>Obrázek 9: Osobní mikropočítač Atari 1040 STFM.</i></p>



<p><a name="k124"></a></p>
<h2 id="k123">12.4 Atari Mega ST</h2>

<p>Počítač <i>Atari Mega ST</i> představuje další rozšíření vývojové řady ST.  Ve skutečnosti byly vyráběny tři typy &ndash; <i>Atari Mega ST 1</i>, <i>Atari Mega ST 2</i> a <i>Atari Mega ST 4</i>. Jediný rozdíl byl v&nbsp;kapacitě operační paměti, která byla rovna buď jednomu, dvěma nebo čtyřem megabajtům.  Procesor zůstával stále stejný, tj.&nbsp;obligátní Motorola M68000. Taktovací frekvence se také nezměnila, byla tedy rovna 8MHz, což je, zejména v porovnání s&nbsp;novějšími Amigami, nedostatečné (ovšem díky relativně nízké ceně se <i>Mega ST</i> staly velmi oblíbenými modely, zejména v&nbsp;Evropě).</p>

<p>Kapacita grafické paměti (<i>framebufferu</i>) také zůstala z&nbsp;předchozích modelů řady ST zachována &ndash; 32&nbsp;KB, stejně jako tři dostupné grafické režimy a počet maximálně zobrazitelných barev: 320&times;200 pixelů šestnáctibarevně, 640&times;200 pixelů čtyřbarevně a 640&times;400 pixelů monochromaticky. Přibyl však <i>Blitter</i>, což je čip používaný pro samostatné blokové přenosy dat (zejména grafických) bez účasti procesoru.  Teprve s&nbsp;použitím <i>Blitteru</i> bylo možné zobrazovat kvalitní a rychlé animace bez nežádoucího &bdquo;trhání&ldquo; obrazu. <i>Blitter</i> bylo možné také použít pro celoobrazovkový scrolling, emulaci spritů atd.</p>

<p>Poznámka: <i>Blitter</i> by se podle dobové literatury měl psát s&nbsp;některými písmeny velkými, tj.&nbsp;jako <i>BLiTTER</i>; podle mého názoru se však nejedná o akronym, proto zůstávám u malých písmen (slovo <i>blit</i> vzniklo ze zkratky operace <i>BitBlt</i>, což zase vzniklo ze sousloví <i>Bit Block Transfer</i>, jež bylo poprvé použito v&nbsp;systémech založených na programovacím jazyku Smalltalk).</p>

<img src="http://i.iinfo.cz/images/680/pc7710.jpg" alt="pc7710" height="196" width="220" />
<p><i>Obrázek 10: Osobní mikropočítač Atari Mega ST s&nbsp;firemním monitorem a
laserovou tiskárnou.</i></p>



<p><a name="k16"></a></p>
<h2 id="k16">16. Pracovní stanice Sun-1</h2>

<p>Jednou z&nbsp;prvních komerčně nabízených a prodávaných pracovních stanic podporujících plnohodnotný grafický výstup na monitoru, byl počítač nazvaný <i>Sun-1</i> z&nbsp;roku 1982. Jednalo se o počítač určený pro práci v&nbsp;UNIXu, který se v&nbsp;obvyklé (základní) konfiguraci skládal z&nbsp;takzvané procesorové desky (<i>Sun Processor Board</i>). Byla to karta propojená s&nbsp;ostatními částmi počítače přes sběrnici; tato karta obsahovala operační paměť s&nbsp;kapacitou 256 kB, mikroprocesor <i>Motorola 68000</i> nebo <i>Motorola 68010</i> taktovaný na 10 MHz a obvody zajišťujícími ochranu operační paměti. Kapacitu operační paměti bylo možné zvýšit přidáním dalších rozšiřujících karet na 512 kB nebo dokonce na celý jeden megabajt. Druhou částí počítače byl grafický subsystém implementovaný na zvláštní kartě a třetí částí síťové rozhraní Ethernet implementované taktéž na zvláštní kartě (síťové rozhraní a jeho plnohodnotná podpora operačním systémem ostatně představovalo jeden z&nbsp;velmi důležitých prvků, který odlišoval pracovní stanice od osobních počítačů).</p>

<a href="http://i.iinfo.cz/images/622/gui0307.jpg"><img src="http://i.iinfo.cz/images/622/gui0307-prev.jpg" width="370" height="164" alt=" " /></a>
<p><i>Obrázek 7: Pracovní stanice Sun-1.</i></p>

<p>Pro pracovní stanice <i>Sun-1</i> byla vyvinuta vlastní varianta Unixu. V&nbsp;roce 1982, tj.&nbsp;v&nbsp;době, kdy začal být tento počítač prodáván, se k&nbsp;němu dodával <i>Sun UNIX 0.7</i> odvozený od UniSoft UNIXu verze 7. Ovšem po poměrně krátkém čase se přešlo na <i>SunOS 1.0</i> založený na <i>BSD 4.1</i>. <i>SunOS</i> byl zpočátku nabízen právě pod tímto jménem, teprve později se přešlo, především z&nbsp;marketingových důvodů, k&nbsp;pojmenování <i>Solaris</i> (původní jméno však na některých místech systému zůstalo zachováno). Systém byl doplněn o grafické uživatelské rozhraní. Zpočátku se jednalo o systémy <i>SunTools (SunView)</i> a <i>NeWS</i>, který se však i přes některé své technické přednosti nakonec neujal.</p>

<a href="http://i.iinfo.cz/images/339/gui0308.png"><img src="http://i.iinfo.cz/images/339/gui0308-prev.png" width="370" height="187" alt=" " /></a>
<p><i>Obrázek 8: Moduly pracovní stanice Sun-1.<br />
Zdroj: The SUN Workstation Architecture, Technical Report No. 229</i></p>

<p>Již při popisu programátorského modelu m68k, že původní mikroprocesor <i>Motorola 68000</i> neobsahoval modul pro ochranu (řízení přístupu do) operační paměti ani pro podporu paměti virtuální, což je ovšem důležitá součást systémů, na nichž má být současně provozován větší počet úloh (k&nbsp;<i>Sun-1</i> bylo dokonce možné připojit terminály pomocí sériového portu, samotný operační systém umožňoval současnou práci několika uživatelů současně). Z&nbsp;tohoto důvodu firma <i>Sun Microsystems</i> vytvořila vlastní řídicí modul, který tuto činnost zajišťoval. Sice je pravda, že existoval podobný obvod nesoucí číselné označení <i>68451</i> z&nbsp;dílny Motoroly, ten však nebyl příliš oblíbený, protože v&nbsp;některých případech zpomaloval přístup do paměti. Modul firmy Sun zajišťoval jak stránkování paměti, tak i její ochranu před neoprávněným přepsáním. Všechny adresy, které generoval procesor, byly tímto modulem pomocí dvojice mapovacích tabulek nazvaných <i>Segment Map</i> a <i>Page Map</i> převáděny na adresy fyzické.</p>

<a href="http://i.iinfo.cz/images/568/gui0309.jpg"><img src="http://i.iinfo.cz/images/568/gui0309-prev.jpg" width="168" height="270" alt=" " /></a>
<p><i>Obrázek 9: Procesorová deska počítače Sun-1.</i></p>

<p>Celý rozsah operační paměti byl zmíněným řídicím modulem rozdělen na stránky o velikosti 2 kB a na vyšší úrovni na segmenty, z&nbsp;nichž každý měl velikost 32 kB. U každého segmentu se pomocí čtyř bitů nastavoval režim přístupu do paměti &ndash; povolení čtení, povolení zápisu, superuživatelský režim atd.  Maximální počet stránek byl roven 1024, což odpovídá dvěma adresovatelným megabajtům (1024&times;2048 bajtů), ale díky stránkování bylo možné adresovat až 8 MB (23 bitů adresy). Důležitým prvkem celého systému byl čtyřbitový <i>context registr</i>, který, poněkud zjednodušeně řečeno, obsahoval identifikátor aktuálně běžícího procesu. Tento registr bylo možné měnit jen jádrem operačního systému. Pokud se každému procesu přidělila stejná paměť (to je samozřejmě možné, jak na úrovni mapy segmentů, tak i mapy stránek), bylo možné zajistit komunikaci procesů pomocí sdílené paměti.</p>

<p>Nedílnou součástí pracovní stanice <i>Sun-1</i> byl grafický subsystém
umístěný na samostatné desce plošných spojů, jehož ústředním prvkem byl
<i>framebuffer</i> (grafická paměť) umožňující uložení bitmapy
s&nbsp;rozlišením 1024&times;1024 pixelů a taktéž modul nazvaný
<i>RasterOp</i>, který dokázal provádět některé základní operace nad rastrovým
obrazem, včetně blokového přenosu dat (podobnost s&nbsp;minule popsanou operací
<strong>BitBLT</strong> není náhodná). Vraťme se však k&nbsp;framebufferu. Ten
byl poněkud zvláštní kvůli dvěma vlastnostem. První vlastností bylo to, že
z&nbsp;uložené bitmapy o rozlišení 1024&times;1024 pixelů se na monitoru ve
skutečnosti zobrazovala pouze oblast o velikosti 1024&times;800 pixelů,
popř.&nbsp;800&times;1024 pixelů, podle aktuálně nastavené orientace monitoru
(již v&nbsp;předchozích dvou dílech tohoto seriálu jsme se dozvěděli, že
monitor postavený na výšku v&nbsp;žádném případě není žádný moderní
vynález, ale věc používaná takřka od vynálezu GUI).</p>

<a href="http://i.iinfo.cz/images/315/gui0311.jpg"><img src="http://i.iinfo.cz/images/315/gui0311-prev.jpg" width="166" height="270" alt=" " /></a>
<p><i>Obrázek 11: Deska obsahující grafický subsystém počítače Sun-1. Na pravé
straně jsou patrné konektory pro přivedení všech důležitých signálů do
monitoru.</i></p>

<p>Zbylý obdélník o velikosti 1024&times;224 popř.&nbsp;224&times;1024 pixelů
se využíval pro uložení bitových map znaků, kurzorů, ikon i dalších grafických
symbolů, ale i pro meziuložení obdélníkových částí oken při jejich posuvu na
obrazovce. Druhou zvláštností framebufferu je to, že byl implementován pomocí
dvoubránové (dvouportové) paměti, přičemž první brána byla použita pro přístup
mikroprocesoru k&nbsp;framebufferu (včetně obnovy obsahu DRAM) a brána druhá
pro výstup grafické informace. Použití dvoubránových pamětí je sice dražší
řešení (zejména v&nbsp;současnosti), ovšem technologicky mnohem jednodušší a
rychlejší než řešení, kdy se musí mikroprocesor, obvod obnovující obsah DRAM a
generátor video signálu dělit o jedinou adresovou a datovou sběrnici
framebufferu.</p>

<img src="http://i.iinfo.cz/images/585/gui0312.png" width="411" height="384" alt=" " />
<p><i>Obrázek 12: Rozdělení framebufferu na viditelnou a neviditelnou
oblast.<br />
Zdroj: The SUN Workstation Architecture, Technical Report No. 229</i></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. </h2>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Wikipedia: Motorola 68HC05<br />
<a href="http://en.wikipedia.org/wiki/Motorola_68HC05">http://en.wikipedia.org/wiki/Motorola_68HC05</a>
</li>

<li>Wikipedia: Freescale 68HC08<br />
<a href="http://en.wikipedia.org/wiki/68HC08">http://en.wikipedia.org/wiki/68HC08</a>
</li>

<li>Wikipedia: Freescale 68HC11<br />
<a href="http://en.wikipedia.org/wiki/68HC11">http://en.wikipedia.org/wiki/68HC11</a>
</li>

<li>Wikipedia: Freescale 68HC12<br />
<a href="http://en.wikipedia.org/wiki/Freescale_68HC12">http://en.wikipedia.org/wiki/Freescale_68HC12</a>
</li>

<li>HC05 Processor Families<br />
<a href="http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684498633">http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684498633</a>
</li>

<li>HC08 Processor Families<br />
<a href="http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684497663">http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684497663</a>
</li>

<li>Digital Core Design 68HC08 - HDL IP Core <br />
<a href="http://www.dcd.pl/acore.php?idcore=82">http://www.dcd.pl/acore.php?idcore=82</a>
</li>

<li>Freescale 68HC11<br />
<a href="http://www.freescale.com/webapp/sps/site/taxonomy.jsp?nodeId=01624684498635">http://www.freescale.com/webapp/sps/site/taxonomy.jsp?nodeId=01624684498635</a>
</li>

<li>Lifecycle of a CPU:<br />
<a href="http://www.cpushack.net/life-cycle-of-cpu.html">http://www.cpushack.net/life-cycle-of-cpu.html</a>
</li>

<li>Most wanted CPU of the world:<br />
<a href="http://www.cpu-galaxy.at/CPU/Intel%20CPU/3002-8008/4004%20Grey.jpg">http://www.cpu-galaxy.at/CPU/Intel%20CPU/3002-8008/4004%20Grey.jpg</a>
</li>

<li>Atari ST<br />
<a href="http://en.wikipedia.org/wiki/Atari_st">http://en.wikipedia.org/wiki/Atari_st</a>
</li>

<li>Atari Museum<br />
<a href="http://www.atarimuseum.com/">http://www.atarimuseum.com/</a>
</li>

<li>Atari ST and TT<br />
<a href="http://www.atarimuseum.com/computers/16BITS/a1632bit.html">http://www.atarimuseum.com/computers/16BITS/a1632bit.html</a>
</li>

<li>The ST Computer Line<br />
<a href="http://www.atarimuseum.com/computers/16bits/stmenu/atarist.htm">http://www.atarimuseum.com/computers/16bits/stmenu/atarist.htm</a>
</li>

<li>Atari MEGA STE <br />
<a href="http://en.wikipedia.org/wiki/Atari_MEGA_STE">http://en.wikipedia.org/wiki/Atari_MEGA_STE</a>
</li>

<li>Blitter<br />
<a href="http://en.wikipedia.org/wiki/Blitter">http://en.wikipedia.org/wiki/Blitter</a>
</li>

<li>Dobová dokumentace ke stanici Sun-1<br />
<a href="http://www.bitsavers.org/pdf/sun/sun1/">http://www.bitsavers.org/pdf/sun/sun1/</a>
</li>

<li>Obrázky Sun-1, manuálů a základních desek<br />
<a href="http://www.solivant.com/sun100/">http://www.solivant.com/sun100/</a>
</li>

<li>SUN display (computer museum)<br />
<a href="http://infolab.stanford.edu/pub/voy/museum/pictures/display/SUN.htm">http://infolab.stanford.edu/pub/voy/museum/pictures/display/SUN.htm</a>
</li>

<li>Sun-1<br />
<a href="http://en.wikipedia.org/wiki/Sun-1">http://en.wikipedia.org/wiki/Sun-1</a>
</li>

<li>Online Sun Information ArcHive - Sun-1<br />
<a href="http://www.sunstuff.org/hardware/systems/sun1/Sun-1/">http://www.sunstuff.org/hardware/systems/sun1/Sun-1/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2019</small></p>
</body>
</html>

