<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Nedávné oznámení, že se z projektu GCC odstraní některé starší mikroprocesorové architektury, vyšlo (zcela jistě náhodou) v době, kdy mikroprocesory založené na jádrech Motorola 68000 (m68k) slaví kulaté výročí &ndash; plných čtyřicet let od jejich uvedení na trh.</p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. Čtyřicet let existence mikroprocesorů řady Motorola 68000</a></p>
<p><a href="#k02">*** 2. Od osmibitových mikroprocesorů Motorola 6800 k&nbsp;32bitovým čipům řady 68000</a></p>
<p><a href="#k03">*** 3. Mikroprocesor Motorola MC6800 z&nbsp;pohledu programátora</a></p>
<p><a href="#k04">*** 4. Další vývoj osmibitové řady Motorola 6800</a></p>
<p><a href="#k05">*** 5. </a></p>
<p><a href="#k06">*** 6. </a></p>
<p><a href="#k07">*** 7. </a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. </a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Čtyřicet let existence mikroprocesorů řady Motorola 68000</h2>

<p>Rok 2019 nám přinesl v&nbsp;oblasti informatiky hned několik kulatin nebo alespoň &bdquo;polokulatin&ldquo;. Již v&nbsp;předchozích článcích jsme si připomněli <a href="">35leté výročí vzniku Turbo Pascalu</a>, .... a ..... <a href="">Nedávné oznámení týmu</a>, který se stará o <a href="">projekt GCC</a> o tom, že dojde ke zrušení podpory některých starších mikroprocesorových architektur, nám nepřímo připomněl další výročí &ndash; letos totiž uběhlo takřka neuvěřitelných čtyřicet let od vzniku legendárních mikroprocesorů řady <a href="">Motorola 68000</a> (zkráceně se celá řada označuje <a href="">m68k</a>).</p>

<img src="http://i.iinfo.cz/images/394/pc146-1.png" width="450" height="439" alt=" " />
<p><i>Obrázek 1: 32bitový mikroprocesor Motorola M68000 patří mezi zástupce architektury CISC s&nbsp;téměř ortogonální instrukční sadou a poměrně velkou sadou pracovních registrů (rozdělených na registry datové a adresové). Jednalo se o jeden z&nbsp;nejúspěšnějších 32bitových mikroprocesorů vůbec.</i></p>

<p>První typy těchto mikroprocesorů skutečně vznikly již v&nbsp;roce 1979, ovšem architektura 68000 v&nbsp;některých ohledech předběhla svoji dobu a do značné míry určovala a ovlivňovala vývoj IT jak v&nbsp;osmdesátých letech minulého století, tak i v&nbsp;letech devadesátých (alespoň zpočátku). Většina přelomových osobních mikropočítačů &ndash; s&nbsp;výjimkou IBM PC &ndash; totiž byla na m68k postavena, což platí zejména pro mikropočítače řady Atari ST, Macintosh a Amiga (ovšem například i Apple Lisa). Nesmíme ovšem zapomenout ani na pracovní stanice, zejména na Sun-1 a IRIS 1000. Ovšem jádra postavená nad m68k byla používána i později, a to jak v&nbsp;oblasti výkonných mikrořadičů, tak i čipů určených pro PDA a mobilní telefony či pro programovatelné grafické kalkulačky společnosti Texas Instruments. Tyto čipy jsme mohli najít i v&nbsp;laserových tiskárnách a v&nbsp;herních konzolích. A v&nbsp;neposlední řadě se jednalo o mikroprocesory, které se velmi snadno programovaly v&nbsp;assembleru; snadnost programování vynikne zejména při porovnání s&nbsp;konkurenční platformou 80x86.</p>

<a href="http://i.iinfo.cz/images/419/pc7702.jpg"><img src="http://i.iinfo.cz/images/419/pc7702-prev.jpg" alt="pc7702" height="257" width="370" /></a>
<p><i>Obrázek 2: Mikroprocesor Motorola 68030 na základní desce desce osobního
počítače Macintosh Color Classic.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Od osmibitových mikroprocesorů Motorola 6800 k&nbsp;32bitovým čipům řady 68000</h2>

<p>Historie čipu Motorola 68000 začala vlastně již vznikem čistě osmibitového čipu <i>MC6800</i> pocházejícího z&nbsp;roku 1974 (<i>MOS 6502</i> přišel na trh až o rok později), který byl následovaný poněkud méně známými čipy <i>MC6801</i> a <i>MC6802</i>. Jednalo se o osmibitové mikroprocesory, jejichž programátorský model se v&nbsp;mnoha ohledech odlišoval například od čipů 8008, 8080 či Z80. Osmibitové čipy Motorola totiž měly jen velmi omezený počet pracovních registrů &ndash; pouze dva osmibitové akumulátory <strong>A</strong> a <strong>B</strong> a plně šestnáctibitový index registr <strong>X</strong>, které byly doplněny o ukazatel na vrchol zásobníku <strong>SP</strong> a programový čítač <strong>PC</strong>.</p>

<p>Velmi omezený počet pracovních registrů je vlastně logický, když si uvědomíme, že v&nbsp;polovině sedmdesátých let minulého století byla cena každého tranzistoru vytvořeného na čipu o několik řádů vyšší, než je tomu dnes. Navíc byly mikroprocesory relativně pomalé při porovnání s&nbsp;dobou přístupu do operační paměti (dokonce tak pomalé, že se v&nbsp;některých domácích mikropočítačích mikroprocesor vcelku bez problémů dělil o datovou a adresovou sběrnici s&nbsp;grafickým řadičem). Z&nbsp;tohoto důvodu mělo význam, aby mikroprocesory měly malý počet registrů (nižší cena větší výtěžnost) a aby obsahovaly relativně složité instrukce realizované mikroprogramovým řadičem (ten je realizován maskou/pamětí typu ROM, kde je cena za bit mnohem nižší, než v&nbsp;případě statické paměti typu RAM).</p>

<p><div class="rs-tip-major">Poznámka: přesně opačnou cestou se později vydaly mikroprocesory s&nbsp;architekturou RISC, které naopak mají počet registrů mnohonásobně vyšší, ovšem instrukční sada je omezena většinou jen na ty instrukce, které se provedou v&nbsp;počtu cyklů odpovídajících počtu řezů instrukční pipeline. Čipy RISC ovšem vznikly na základě odlišných požadavků a odlišných technologických parametrů.</div></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Mikroprocesor Motorola MC6800 z&nbsp;pohledu programátora</h2>

<table>
<tr><th>Označení</th><th>Šířka</th><th>Název registru </th><th>Význam registru</th></tr>
<tr><td>A  </td><td>8 b </td><td>accumulator A  </td><td>první universální pracovní registr</td></tr>
<tr><td>B  </td><td>8 b </td><td>accumulator B  </td><td>druhý universální pracovní registr</td></tr>
<tr><td>X  </td><td>16 b</td><td>index register </td><td>používán při adresování operandů</td></tr>
<tr><td>PC </td><td>16 b</td><td>program counter</td><td>používán při adresování instrukcí</td></tr>
<tr><td>SP </td><td>16 b</td><td>stact pointer  </td><td>použit při operacích se zásobníkem</td></tr>
<tr><td>CCR</td><td>6 b </td><td>condition code register</td><td>obsahuje příznakové bity</td></tr>
</table>

<p>Akumulátory <strong>A</strong> a <strong>B</strong> jsou použity u většiny aritmetických a logických operací, protože tvoří vždy první (nebo jediný) operand a současně se do nich ukládá i výsledek operace. Jedinou &bdquo;asymetrii&ldquo; mezi těmito registry můžeme najít u instrukcí <strong>ABA</strong> (A=A+B), <strong>CBA</strong> (A-B) a <strong>SBA</strong> (A=A-B), kde je registr <strong>A</strong> vždy prvním operandem a současně se do něj ukládá (kromě instrukce <strong>CBA</strong>) i výsledek operace; dále pak u instrukcí <strong>DAA</strong> (korekce při BCD sčítání) a <strong>TAP</strong> společně s&nbsp;<strong>TPA</strong> (přesun mezi akumulátorem a příznakovým registrem), které pracují pouze s&nbsp;akumulátorem <strong>A</strong>. Indexový registr je použit při adresování druhého operandu mnoha instrukcí, jeho hodnotu je taktéž možné inkrementovat, dekrementovat, uložit či načíst z&nbsp;paměti a porovnat s&nbsp;dvoubajtovou konstantou. Příznakový registr <strong>CCR</strong> obsahuje následující jednobitové příznaky:</p>

<table>
<tr><th>Příznak</th><th>Název</th><th>Význam</th></tr>
<tr><td>H</td><td>halfcarry</td><td>přetečení ze 3. do 4. bitu (použito při BCD aritmetice)</td></tr>
<tr><td>I</td><td>interrupt</td><td>příznak povolení či zákazu přerušení</td></tr>
<tr><td>N</td><td>negative </td><td>příznak operace se záporným výsledkem</td></tr>
<tr><td>Z</td><td>zero     </td><td>příznak operace s&nbsp;nulovým výsledkem</td></tr>
<tr><td>V</td><td>overflow </td><td>(přeplnění) přetečení ze 6. do 7. (znaménkového) bitu</td></tr>
<tr><td>C</td><td>carry    </td><td>přetečení ze 7. bitu (přenos do vyššího řádu)</td></tr>
</table>

<p>Příznakové bity a jejich kombinace jsou použity u 14 podmíněných relativních
skoků.</p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Další vývoj osmibitové řady Motorola 6800</h2>

<p>Po vzniku osmibitového mikroprocesoru <i>MC6800</i> vytvořila firma Motorola
dvě další varianty tohoto čipu, které se některými svými vlastnostmi blížily
skutečným mikrořadičům. Prvním z&nbsp;těchto čipů byl <i>MC6802</i> z&nbsp;roku
1977, který obsahoval kromě vlastního řadiče a CPU i 128 bajtů paměti RAM,
interní oscilátor (nemusel se připojovat externí zdroj hodinových signálů,
pouze 4 MHz krystal) a spolu s&nbsp;čipem <i>MC6846</i> (2kB paměti ROM,
osmibitový obousměrný port a časovač) bylo možné vytvořit jednoduchý dvoučipový
mikropočítač, což se již v&nbsp;mnoha ohledech blížilo ke klasickému
mikrořadiči. Následoval čip <i>MC6801</i> (číslování je pravda poněkud
neobvyklé), který měl taktéž 128 bajtů paměti RAM, navíc však na tomto čipu
byla přítomna i paměť ROM s&nbsp;kapacitou 2 kB, šestnáctibitový časovač,
sériový port a 31 programovatelných I/O linek. Jednalo se o jeden
z&nbsp;prvních mikroprocesorů (nebo vlastně už mikrořadičů), u nichž bylo možné
oba osmibitové akumulátory <strong>A</strong> a <strong>B</strong> spojit do
jednoho šestnáctibitového akumulátoru <strong>D</strong>.</p>

<a href="http://i.iinfo.cz/images/212/pc132-8.png"><img src="http://i.iinfo.cz/images/212/pc132-8-prev.png" width="251" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Interní struktura mikrořadičů M68HC05 popsaných v&nbsp;následujícím textu.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Ovšem tento čip (s&nbsp;cca 35000 tranzistory) byl poměrně drahý a proto se používal pouze v&nbsp;automobilovém průmyslu a nikoli ve spotřební elektronice.  Firma Motorola proto tento čip poměrně podstatným způsobem zjednodušila a začala ho nabízet pod novým označením <i>MC6805</i>. Od tohoto mikrořadiče je již malý krůček k&nbsp;<i>68HC05</i>, jímž se budeme zabývat v&nbsp;následujícím textu. Jak jsme si již řekli, jedná se o zjednodušenou variantu čipu <i>MC6801</i>, což mj.&nbsp;znamená, že se počet registrů zmenšil na pět (je použit jen jeden osmibitový akumulátor), indexový registr má šířku pouze osm bitů a taktéž čítač instrukcí má sníženou šířku na 13 bitů, protože paměť nainstalovaná na mikrořadiči má menší kapacitu než teoreticky dosažitelných 64 kB:</p>

<table>
<tr><th>Označení</th><th>Šířka</th><th>Název registru </th><th>Význam registru</th></tr>
<tr><td>A  </td><td>8 b </td><td>accumulator A  </td><td>jediný universální pracovní registr</td></tr>
<tr><td>X  </td><td>8 b </td><td>index register </td><td>používán při adresování operandů</td></tr>
<tr><td>PC </td><td>16 b (13 použito)</td><td>program counter</td><td>používán při adresování instrukcí</td></tr>
<tr><td>SP </td><td>16 b</td><td>stact pointer  </td><td>použit při operacích se zásobníkem</td></tr>
<tr><td>CCR</td><td>5 b </td><td>condition code register</td><td>obsahuje příznakové bity</td></tr>
</table>

<a href="http://i.iinfo.cz/images/212/pc132-9.png"><img src="http://i.iinfo.cz/images/212/pc132-9-prev.png" width="257" height="270" alt=" " /></a>
<p><i>Obrázek xxx: Základní zapojení mikrořadiče M68HC05.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Instrukční soubor se taktéž v&nbsp;některých ohledech odlišoval od původní <i>MC6800</i>. Zejména byla přidána instrukce pro celočíselné násobení (X:A = A&times;X) trvající 11 cyklů a navíc se objevily instrukce (podobné instrukcím známým z&nbsp;<i>MCS-51</i>), které umožňovaly přímou manipulaci s&nbsp;jednotlivými bity uloženými v&nbsp;prvních 256 bajtech paměti: <strong>BSET</strong> (bit set), <strong>BCLR</strong> (bit clear), <strong>BRSET</strong> (branch if bit is set) a <strong>BRCLR</strong> (branch if bit is clear). Taktéž možnosti adresování byly poněkud odlišné: bylo možné provádět přímé adresování prvních 256 bajtů, rozšířené adresování (16 bitů adresy), adresování přes index registr a adresování přes index registr a osmibitový či šestnáctibitový posun (offset). Všechny mikrořadiče Motoroly jsou postaveny na von Neumannově architektuře, tj.&nbsp;mají pouze jeden adresový prostor, do nějž je mapována jak paměť RAM, tak i paměť ((E)P)ROM a popř.&nbsp;i elektricky mazatelná paměť EEPROM.</p>

<p>Základní model procesoru <i>68HC05</i> má na jediném čipu 176 bajtů RAM, 5936 bajtů ROM, 256 bajtů EEPROM, tři osmibitové I/O porty, šestnáctibitový čítač/časovač, sériové rozhraní SCI, jeden osmibitový A/D převodník a konečně modul pro PWM (pulsní šířkovou modulaci). Existovaly však i další varianty tohoto procesoru, z&nbsp;nichž některé měly až 32 kB ROM či EPROM, větší kapacitu paměti RAM, nainstalovanou rutinu ve firmware, která umožňovala komunikaci s&nbsp;PC přes sériový port (později se tato rutina vyvinula ve známé <i>BUFFALO</i>) atd. Bližší informace o tomto mikrořadiči i o dalších řadách <i>68HC08</i> a <i>68HC11</i> si řekneme v&nbsp;navazující části seriálu.</p>

<a href="http://i.iinfo.cz/images/212/pc132-10.png"><img src="http://i.iinfo.cz/images/212/pc132-10-prev.png" width="370" height="242" alt=" " /></a>
<p><i>Obrázek xxx: Instrukční sada mikrořadiče M68HC05.<br />
(Zdroj: Freescale Semiconductor, Ltd. MC68HC05B6/D Rev. 4.1 08/2005)</i></p>

<p>Dalším osmibitovým mikrořadičem, který byl navržen firmou <i>Motorola</i>, je mikrořadič nesoucí označení <i>68HC08</i>. Jedná se o v&nbsp;mnoha směrech vylepšenou variantu původního mikrořadiče <i>68HC05</i>, který svým uživatelům nabízel jak větší množství vstupně-výstupních portů, více časovačů a osmikanálový analogově-digitální převodník, tak i rozšířenou kapacitu pamětí ROM a RAM. Došlo i ke změně v&nbsp;konfiguraci registrů a rozšíření instrukční sady tohoto mikrořadiče &ndash; zejména byly přidány nové adresní režimy, které umožňovaly lépe využít zvětšenou kapacitu pamětí ROM a RAM. V&nbsp;následující tabulce jsou vypsány všechny registry centrální procesorové jednotky, které mohly být využity při programování v&nbsp;assembleru. Povšimněte si především toho, že došlo k&nbsp;rozšíření původně osmibitového indexového registru <strong>X</strong> na šestnáctibitový registr <strong>H:X</strong>, jehož obě osmibitové části lze zpracovávat odděleně. Taktéž se rozšířila bitová šířka registrů <strong>PC</strong> a <strong>SP</strong> na plných šestnáct bitů, zatímco u mikrořadiče <i>68HC05</i> měl <strong>PC</strong> měnitelných pouze 13 spodních bitů a <strong>SP</strong> dokonce jen 6 spodních bitů:</p>


<p><a name="k05"></a></p>
<h2 id="k05">5. </h2>



<p><a name="k06"></a></p>
<h2 id="k06">6. </h2>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. </h2>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Wikipedia: Motorola 68HC05<br />
<a href="http://en.wikipedia.org/wiki/Motorola_68HC05">http://en.wikipedia.org/wiki/Motorola_68HC05</a>
</li>

<li>Wikipedia: Freescale 68HC08<br />
<a href="http://en.wikipedia.org/wiki/68HC08">http://en.wikipedia.org/wiki/68HC08</a>
</li>

<li>Wikipedia: Freescale 68HC11<br />
<a href="http://en.wikipedia.org/wiki/68HC11">http://en.wikipedia.org/wiki/68HC11</a>
</li>

<li>Wikipedia: Freescale 68HC12<br />
<a href="http://en.wikipedia.org/wiki/Freescale_68HC12">http://en.wikipedia.org/wiki/Freescale_68HC12</a>
</li>

<li>HC05 Processor Families<br />
<a href="http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684498633">http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684498633</a>
</li>

<li>HC08 Processor Families<br />
<a href="http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684497663">http://www.freescale.com/webapp/sps/site/overview.jsp?nodeId=01624684497663</a>
</li>

<li>Digital Core Design 68HC08 - HDL IP Core <br />
<a href="http://www.dcd.pl/acore.php?idcore=82">http://www.dcd.pl/acore.php?idcore=82</a>
</li>

<li>Freescale 68HC11<br />
<a href="http://www.freescale.com/webapp/sps/site/taxonomy.jsp?nodeId=01624684498635">http://www.freescale.com/webapp/sps/site/taxonomy.jsp?nodeId=01624684498635</a>
</li>

<li>Lifecycle of a CPU:<br />
<a href="http://www.cpushack.net/life-cycle-of-cpu.html">http://www.cpushack.net/life-cycle-of-cpu.html</a>
</li>

<li>Most wanted CPU of the world:<br />
<a href="http://www.cpu-galaxy.at/CPU/Intel%20CPU/3002-8008/4004%20Grey.jpg">http://www.cpu-galaxy.at/CPU/Intel%20CPU/3002-8008/4004%20Grey.jpg</a>
</li>

<li>Atari ST<br />
<a href="http://en.wikipedia.org/wiki/Atari_st">http://en.wikipedia.org/wiki/Atari_st</a>
</li>

<li>Atari Museum<br />
<a href="http://www.atarimuseum.com/">http://www.atarimuseum.com/</a>
</li>

<li>Atari ST and TT<br />
<a href="http://www.atarimuseum.com/computers/16BITS/a1632bit.html">http://www.atarimuseum.com/computers/16BITS/a1632bit.html</a>
</li>

<li>The ST Computer Line<br />
<a href="http://www.atarimuseum.com/computers/16bits/stmenu/atarist.htm">http://www.atarimuseum.com/computers/16bits/stmenu/atarist.htm</a>
</li>

<li>Atari MEGA STE <br />
<a href="http://en.wikipedia.org/wiki/Atari_MEGA_STE">http://en.wikipedia.org/wiki/Atari_MEGA_STE</a>
</li>

<li>Blitter<br />
<a href="http://en.wikipedia.org/wiki/Blitter">http://en.wikipedia.org/wiki/Blitter</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2019</small></p>
</body>
</html>

