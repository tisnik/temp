<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>RCA 1802: poslední mohykán osmibitové éry mikroprocesorů</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>RCA 1802: poslední mohykán osmibitové éry mikroprocesorů</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Na stránkách Roota jsme si již popsali prakticky všechny významné osmibitové mikroprocesory první i druhé generace. Prozatím jsme se však jen okrajem zmínili o čipu RCA 1802, který je významný mj. i tím, že byl použit v několika kosmických projektech, například ve slavné sondě Galileo.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. RCA 1802: poslední mohykán osmibitové éry mikroprocesorů</a></p>
<p><a href="#k02">2. Od čipů 1801U a 1801R k&nbsp;mikroprocesoru 1802</a></p>
<p><a href="#k03">3. Mikroprocesor RCA 1802 a jeho konkurenti</a></p>
<p><a href="#k04">4. Rozhraní čipu RCA 1802</a></p>
<p><a href="#k05">5. Architektura čipu RCA 1802</a></p>
<p><a href="#k06">6. Sada registrů</a></p>
<p><a href="#k07">7. Adresovací režimy</a></p>
<p><a href="#k08">8. Instrukční sada čipu RCA 1802</a></p>
<p><a href="#k09">9. Podrobnější pohled na instrukční sadu</a></p>
<p><a href="#k10">10. Operace s&nbsp;registry (přesuny dat)</a></p>
<p><a href="#k11">11. Práce s&nbsp;operační pamětí</a></p>
<p><a href="#k12">*** 12. Aritmetické operace</a></p>
<p><a href="#k13">*** 13. Logické operace</a></p>
<p><a href="#k14">*** 14. Skoky</a></p>
<p><a href="#k15">*** 15. Přeskočení (vynechání) instrukce</a></p>
<p><a href="#k16">*** 16. Vstupně-výstupní operace</a></p>
<p><a href="#k17">17. Mikroprocesor RCA 1802 v&nbsp;současnosti</a></p>
<p><a href="#k18">18. Obsah druhé části článku</a></p>
<p><a href="#k19">19. Literatura</a></p>
<p><a href="#k20">20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. RCA 1802: poslední mohykán osmibitové éry mikroprocesorů</h2>

<p>Na stránkách Roota jsme si již popsali většinu slavných osmibitových
mikroprocesorů první generace (<a
href="https://www.root.cz/clanky/jak-se-zrodil-procesor/#k05">Intel 8008</a>,
<a
href="https://www.root.cz/clanky/ceskoslovenske-osmibitove-pocitace/#k03">Intel
8080</a>, <a
href="https://www.root.cz/clanky/osmibitove-mikroprocesory-a-mikroradice-firmy-motorola-1/#k03">Motorola
6800</a>, <a
href="https://www.root.cz/clanky/graficke-karty-a-graficke-akceleratory-7/#k02">MOS
6502</a>) i druhé generace (<a
href="https://www.root.cz/clanky/osmibitove-mikroradice-rabbit-pravi-dedicove-mikroprocesoru-zilog-z80/#k02">Zilog
Z80</a>, <a
href="https://www.root.cz/clanky/ctyricet-let-existence-slavnych-mikroprocesoru-rady-motorola-68000/#k06">Motorola
6809</a>). Taktéž jsme se zabývali vývojem osmibitových mikrořadičů (Intel
8048, Intel 8051, Motorola 68HC05, 68HC08, PIC...). Ovšem prozatím jsme se jen
velmi okrajově zmínili o dalším důležitém osmibitovém čipu, který byl používán
jak ve funkci mikroprocesoru, tak i mikrořadiče. Jedná se o čip nazvaný <i>RCA
1802</i> a jeho význam tkví mj.&nbsp;i v&nbsp;tom, že byl použit hned
v&nbsp;několika kosmických projektech. Pravděpodobně nejznámější je jeho
využití v&nbsp;planetární sondě <i>Galileo</i> (použito bylo celkem šest čipů
RCA 1802) nebo v&nbsp;raketoplánech (<i>Space Shuttle</i>), kde byl později
nahrazen výkonnějším čipem <i>80386</i> (s&nbsp;velkou pravděpodobností ve
variantě <i>80386EX</i>). Nalézt jsme ho mohli i ve slavných letadlech Boeing
737 (těch poctivých bez přílepky MAX), v&nbsp;Hubbleově teleskopu, <a
href="https://en.wikipedia.org/wiki/Magellan_(spacecraft)#Computers_and_data_processing">v&nbsp;sondě
Magellan</a> atd.</p>

<p><div class="rs-tip-major">Poznámka: mimochodem &ndash; použití <i>RCA
1802</i> resp. <i>80386</i>, tedy obecně dostupných čipů (pro kosmické programy
ovšem vyrobené jinou technologií), je v&nbsp;kosmických programech spíše
výjimečné, protože se zde můžeme setkat se specializovanými čipy <i>1750A</i>
nebo <i>RAD6000</i> (což jsou však později navržené a vyrobené
mikroprocesory).</div></p>

<p><i>RCA 1802</i>, resp.&nbsp;mikroprocesory se stejnou architekturou, <a
href="https://www.renesas.com/us/en/products/space-harsh-environment/harsh-environment/microprocessors-peripherals/device/CDP1802A.html#overviewInfo">jsou
stále komerčně dostupné</a> (a to za dosti nehorázné ceny), takže se jedná o 44
let starou technologii, která stále nachází své využití. A zapomenout nesmíme
ani na relativně rozsáhlou základnu fanoušků tohoto čipu, což do značné míry
souvisí s&nbsp;počítačem ELF zmíněným v&nbsp;dalším textu. Na druhou stranu se
RCA 1802 z&nbsp;několika důvodů nepodařilo použít v&nbsp;komerčně úspěšných
herních konzolích nebo domácích mikropočítačích, takže v&nbsp;tomto ohledu
můžeme tento čip považovat za poněkud neúspěšný.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Od čipů 1801U a 1801R k&nbsp;mikroprocesoru 1802</h2>

<p><i>&bdquo;This microprocessor is so good that even RCA is not really aware
of how good it is.&ldquo;</i></p>

<p>Vznik čipu, který je dnes známý pod označením <i>RCA 1802</i>, datujeme už
na začátek sedmdesátých let minulého století. Tehdy totiž vznikla koncepce
mikroprocesoru, která byla poprvé na komerční bázi realizována čipem Intel 4004
(i když RCA byla tomuto cíli taktéž velmi blízko). Již v&nbsp;roce 1975 vyvinul
<i>Joseph Weisbecker</i> (ještě se o něm několikrát zmíníme v&nbsp;dalším
textu, protože se jedná o klíčovou postavu celého projektu) osmibitovou
architekturu založenou na dvou čipech označovaných <i>1801U</i> a <i>1801R</i>.
V&nbsp;roce 1976 tým vedený <i>Jerry Herzogem</i> tyto čipy spojil do jediného
integrovaného obvodu, který nesl název <i>1802</i>. Jednalo se o čip postavený
na technologii CMOS, což se ukázalo být velmi užitečné a důležité, protože se
1802 používal i jako mikrořadič, který bez problémů &bdquo;přežil&ldquo; i
snížení hodinové frekvence na 0 Hz (tedy zastavení hodin) s&nbsp;opětovným
rozběhnutím (jinými slovy &ndash; všechny registry musely být statické).</p>

<p><div class="rs-tip-major">Poznámka: někdy se v&nbsp;souvislosti s&nbsp;1802
setkáme se zkratkou <i>COSMAC</i>, která znamená &bdquo;Complementary Symmetry
Monolithic Array Computer&ldquo;.</div></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Mikroprocesor RCA 1802 a jeho konkurenti</h2>

<p>Nový typ mikroprocesoru, jehož plné jméno je RCA CDP1802 (dnes již jen RCA
1802 nebo mezi znalci &bdquo;eighteen oh two&ldquo;), začal být na trh dodáván
v&nbsp;roce 1976. V&nbsp;tomto kontextu je dobré se podívat i na mikroprocesory
a mikrořadiče, které vznikly v&nbsp;první polovině sedmdesátých let minulého
století (pro úplnost jsem přidal i čipy ze druhé generace, tj.&nbsp;především
Zilog Z80 a Intel 8085, oba tyto čipy stavěly na Intel 8080, kterou
vylepšovaly, popř.&nbsp;&bdquo;jen&ldquo; zmenšovaly počet nutných pomocných
obvodů a počet napájecích napětí):</p>

<table>
<tr><th>#</th><th>Čip</th><th>Vznik</th><th>Typ čipu</th></tr>
<tr><td>1</td><td>Intel 4004</td><td>1971</td><td>čtyřbitový mikroprocesor</td></tr>
<tr><td>2</td><td>Intel 8008</td><td>1972</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>3</td><td>Intel 8080</td><td>1974</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>4</td><td>Motorola 6800</td><td>1974</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>5</td><td>MOS 6502</td><td>1975</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>6</td><td>RCA 1802</td><td>1976</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>7</td><td>Zilog Z80</td><td>1976</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>8</td><td>Intel 8085</td><td>1976</td><td>osmibitový mikroprocesor</td></tr>
<tr><td>9</td><td>Intel 8048</td><td>1976</td><td>osmibitový mikrořadič</td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: můžeme vidět, že se RCA 1802 ocitl ve
velmi dobré společnosti :-)</div></p>

<p>RCA 1802 byl postupně dodáván v&nbsp;několika variantách, které se
odlišovaly například maximálním hodinovým cyklem a rozsahem napájecího
napětí:</p>

<table>
<tr><th>#</th><th>Označení</th><th>Maximální frekvence</th><th>Rozsah napájecího napětí</th></tr>
<tr><td>1</td><td>CDP1802C </td><td>2.5 MHz ( 5V)</td><td>4 - 6.5V </td></tr>
<tr><td>2</td><td>CDP1802  </td><td>5.0 MHz (10V)</td><td>4 - 10.5V</td></tr>
<tr><td>3</td><td>CDP1802AC</td><td>3.2 MHz ( 5V)</td><td>4 - 6.5V </td></tr>
<tr><td>4</td><td>CDP1802A </td><td>6.4 MHz (10V)</td><td>4 - 10.5V</td></tr>
<tr><td>5</td><td>CDP1802BC</td><td>5.0 MHz ( 5V)</td><td>4 - 6.5V </td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: čip RCA 1802 vyžadoval pouze jedno
napájecí napětí ve značně velkém rozsahu (viz tabulku). To bylo velmi užitečné
a současně se jednalo o velký kontrast například s&nbsp;čipem Intel 8080, který
vyžadoval hned tři napájecí napětí (+12V, +5V, -5V), které navíc nesmělo příliš
kolísat. Navíc &ndash; i když se jednalo o použití mimo meze udávané výrobcem
&ndash; bylo možné čip provozovat i na 12V (a takových zdrojů bylo dostupných
poměrně hodně, ostatně RCA 1802 se používal mj.&nbsp;i pro řízení zapalování
v&nbsp;některých automobilech).</div></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Rozhraní čipu RCA 1802</h2>

<p>V&nbsp;této kapitole se zaměříme na popis rozhraní mikroprocesoru RCA 1802,
tedy především vstupních a výstupních pinů určených pro připojení pamětí
popř.&nbsp;dalších periferních zařízení. Klasická verze RCA 1802 byla dodávána
v&nbsp;DIP pouzdru se čtyřiceti piny, podobně jako naprostá většina tehdejších
mikroprocesorů a mikrořadičů. Zapojení těchto čtyřiceti pinů je ukázáno na
následujícím obrázku:</p>

<p>Vcc, Vss a Vdd jsou určeny pro napájení. Připomeňme si, že čip byl vyráběn
v&nbsp;technologii CMOS a jeho napájecí napětí mohlo být zvoleno v&nbsp;širokém
rozhraní od 4V do 10,5V (ovšem bez problémů i 12V).</p>

<p>Na obrázku vidíme i piny pro osmibitovou jednosměrnou adresovou sběrnici.
Čip sice používal šestnáctibitové adresy, ovšem adresa byla posílána po osmi
bitech (vyšší bajt následovaný bajtem nižším). To &ndash; společně s&nbsp;piny
pro řízení sběrnice &ndash; umožňovalo snadno připojit i paměti
s&nbsp;osmibitovou adresou, paměti vybavené záchytným registrem (<i>latch</i>)
pro polovinu adresy atd.</p>

<p>Dále čip obsahoval osm obousměrných pinů představujících datovou sběrnici.
Zajímavý je pin označený <strong>Q</strong>. Jedná se o jednobitový výstup. To
se může zdát málo (a pochopitelně v&nbsp;porovnání s&nbsp;mikrořadiči to i málo
je), ovšem pro mnoho amatérských výrobků byl i jednobitový výstup &ndash; který
nepotřeboval žádné další podpůrné obvody typu 8255 &ndash; užitečný.</p>

<p><div class="rs-tip-major">Poznámka: podobné piny najdeme i u mikrořadiče
Intel 8048, který začal být na trh dodáván ve stejné době.</div></p>

<p>Důležité jsou i piny určené pro DMA, tedy přímý přístup do paměti. Tyto piny
umožňovaly programování počítače ELF, o němž se zmíníme později. Řadič DMA,
kterým je RCA 1802 vybaven, totiž umožňuje načítat programy do paměti bez
jakéhokoli obslužného SW. To umožňuje vytvořit mikropočítače založené na RCA
1802, které mají jen minimum komponent &ndash; pouze několik přepínačů,
tlačítek a pomocných logických integrovaných obvodů.</p>

<p><div class="rs-tip-major">Poznámka: jedná se o takzvaný &bdquo;load
mode&ldquo; řízený signály CLEAR a WAIT.</div></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Architektura čipu RCA 1802</h2>

<p>Čip RCA 1802 používal architekturu, která je značně odlišná od všech tehdy
existujících osmibitových čipů. Odlišnost spočívá především ve způsobu využití
pracovních registrů, které sloužily i pro adresování operandů v&nbsp;operační
paměti (což není novinka, v&nbsp;tomto exceluje například <i>MOS 6502</i>),
ovšem u RCA 1802 se jedná o jediný způsob, jak přistupovat k&nbsp;operační
paměti. Čip byl navíc velmi ortogonální, například neobsahoval čítač instrukcí
&ndash; tím mohl být libovolný pracovní registr. Podobným způsobem bylo možné
vybrat index registr. Tyto rozdíly &ndash; nemožnost přímé adresace paměti,
volba registru pro čítač instrukcí, neexistence zásobníku atd. &ndash;
znamenaly, že se RCA 1802 programoval dosti odlišným způsobem, než všechny
tehdejší mikroprocesory.</p>

<p><div class="rs-tip-major">Poznámka: toto řešení je sice velmi flexibilní,
ale samotný čip byl ve zpracování instrukcí velmi pomalý v&nbsp;porovnání
s&nbsp;konkurencí. Většina instrukcí byla provedena v&nbsp;šestnácti hodinových
cyklech, ovšem některé až ve 24 cyklech. Naproti tomu MOS 6502, i když býval
provozován na nižších frekvencích, dokázal nejrychlejší instrukce zpracovat ve
dvou cyklech a nesložitější instrukce (nepřímé adresování s&nbsp;registrem
<strong>Y</strong>) byly provedeny v&nbsp;sedmi cyklech. Právě pomalé
zpracování instrukcí byl jeden z&nbsp;důvodů, proč nebyl RCA 1802 použit
v&nbsp;domácích mikropočítačích.</div></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Sada registrů</h2>

<p>Celá sada registrů čipu RCA 1802 (neboli <i>programátorský model</i>) je
vypsána v&nbsp;následující tabulce:</p>

<table>
<tr><th>#</th><th>Označení</th><th>Počet bitů</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>D</td><td>8</td><td>akumulátor (zde nazývaný <i>data register</i>)</td></tr>
<tr><td>2</td><td>R0-RF</td><td>16</td><td>pracovní registry (<i>scratch-pad</i>) používané pro adresování</td></tr>
<tr><td>3</td><td>P</td><td>4</td><td>výběr jednoho z&nbsp;registrů R0-RF, který bude sloužit jako čítač instrukcí</td></tr>
<tr><td>4</td><td>X</td><td>4</td><td>výběr jednoho z&nbsp;registrů R0-RF, který bude sloužit jako index registr</td></tr>
<tr><td>5</td><td>N</td><td>4</td><td>registr nastavovaný podle dolních čtyř bitů instrukce (typicky obsahuje index registru R0-RF)</td></tr>
<tr><td>6</td><td>I</td><td>4</td><td>registr nastavovaný podle horních čtyř bitů instrukce (typicky obsahuje operační kód, viz další text)</td></tr>
<tr><td>7</td><td>T</td><td>8</td><td>dočasný registr (<i>temporary</i>) používaný několika instrukcemi</td></tr>
<tr><td>8</td><td>A</td><td>16</td><td>interně používaný pro adresování</td></tr>
<tr><td>9</td><td>DF</td><td>1</td><td>příznakový registr DF používaný instrukcemi <strong>ADD</strong> a <strong>SHIFT</strong> pro registraci přetečení</td></tr>
<tr><td>10</td><td>Q</td><td>1</td><td>jednobitový registr Q řídicí výstup označený taktéž <strong>Q</strong></td></tr>
</table>



<p><a name="k07"></a></p>
<h2 id="k07">7. Adresovací režimy</h2>

<p>Čip RCA 1802 používá v&nbsp;instrukcích tři základní adresovací režimy:</p>

<ol>

<li><i>Register</i>: číslo (index) registru, s&nbsp;nímž se má operace provést,
je uložen ve spodních čtyřech bitech instrukčního slova. Příkladem mohou být
instrukce <strong>DEC</strong> a <strong>GET LOW (GLO)</strong>.</li>

<li><i>Register-Indirect</i>: ve spodních bitech instrukce je uloženo číslo
(index) registru, který obsahuje adresu operandu. Podobné adresování nalezneme
v&nbsp;MOS 6502 nebo u 8048 (omezeno na <strong>@R0</strong> a
<strong>@R1</strong>).</li>

<li><i>Immediate</i>: operand (data) jsou uloženy v&nbsp;dalším bajtu za
načtenou instrukcí. Konkrétně se jedná o adresu uloženou
v&nbsp;<strong>R(P)</strong>, tedy v&nbsp;takovém pracovním registru, jehož
číslo (index) je uložen v&nbsp;registru <strong>P</strong>.</li>

</ol>

<p><div class="rs-tip-major">Poznámka: zajímavé je porovnání adresování
s&nbsp;konkurenčním čipem <i>MOS 6502</i>, který používá celkem třináct
adresovacích režimů, které jsou navíc rozděleny podle typů instrukcí (skoky,
aritmeticko-logické instrukce, načtení konstanty atd.). Většina
aritmeticko-logických instrukcí existuje v&nbsp;osmi variantách, které se od
sebe odlišují právě způsobem adresování. Mnoho adresovacích režimů používá
registry <strong>X</strong> a <strong>Y</strong>, které jsou ovšem osmibitové,
takže je jejich využití někdy omezené (o to však rychlejší).</div></p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Instrukční sada čipu RCA 1802</h2>

<p>V&nbsp;předchozích kapitolách jsme si řekli, že samotná architektura čipu
RCA 1802 se dosti podstatným způsobem odlišovala od dalších osmibitových
mikroprocesorů, které vznikly v&nbsp;první polovině sedmdesátých let minulého
století. Týká se to i instrukční sady, která je ovšem na druhou stranu navržena
takovým způsobem, aby byla co nejvíce regulární a navíc i snadno
zapamatovatelná při použití hexadecimálních kódů instrukcí. Jednobajtový
operační kód instrukce je totiž rozdělen na dvě čtyřbitové části, které jsou
při načtení instrukce uloženy do čtyřbitových registrů <strong>I</strong> a
<strong>N</strong>. U mnoha typů instrukcí obsahuje registr <strong>N</strong>
číslo (index) pracovního registru, se kterým se operace provádí (druhým
registrem je většinou implicitně akumulátor <strong>D</strong>). Podívejme se
nejprve na tabulku zobrazující skupiny instrukcí pro všechny možné kombinace
dvou hexadecimálních číslic:</p>

<p>Z&nbsp;tabulky je patrné, že instrukce jsou podle obsahu prvních čtyř bitů
(<strong>I</strong>) rozděleny do šestnácti skupin, které si ve stručnosti
popíšeme v&nbsp;navazující kapitole.</p>

<p><div class="rs-tip-major">Poznámka: dalším mikroprocesorem pocházejícím ze
stejného období, který má do značné míry pravidelnou instrukční sadu, která se
dala snadno naučit nazpaměť, byl čip <i>Intel 8008</i>, jenž se používal
například pro řízení semaforů (v&nbsp;USA). Ovšem zatímco u RCA 1802 je
instrukční bajt rozdělen na dva čtyřbitové nibbly (a tedy dvojici
hexadecimálních číslic), je u Intel 8008 použito rozdělení na tři části: 2 bity
+ 3 bity + 3 bity, takže je kód instrukce lepší zapisovat v&nbsp;osmičkové
soustavě, aby se ukázala její pravidelnost. Viz například tabulku dostupnou na
adrese <a
href="https://www.bytecollector.com/archive/mark_8/My_Mark-8_Info/Software/8008_ReferenceCard.PDF">https://www.bytecollector.com/archive/mark_8/My_Mark-8_Info/Software/8008_ReferenceCard.PDF</a>.
Čtvrtina instrukcí je typu ALU s&nbsp;akumulátorem a pracovním registrem (zcela
pravidelná tabulka), další čtvrtina pak přesun mezi dvěma registry
(s&nbsp;výjimkou paměť:paměť).</div></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Podrobnější pohled na instrukční sadu</h2>

<p>Pojďme se nyní do větších podrobností podívat na instrukční sadu
mikroprocesoru RCA 1802 podrobněji. Víme již, že instrukce jsou rozděleny do
šestnácti skupin, které si postupně popíšeme. Každá skupina je jednoznačně
identifikována hodnotou prvního nibblu instrukčního slova, který je při
načítání instrukce ukládán do registru <strong>I</strong>. Podle typu instrukce
rozpoznáváme tyto typy:</p>

<ol>
<li>Operace s&nbsp;registry (přesuny dat)</li>
<li>Práce s&nbsp;operační pamětí</li>
<li>Aritmetické operace</li>
<li>Logické operace</li>
<li>Skoky</li>
<li>Přeskočení (vynechání) instrukce</li>
<li>Řízení (přerušení atd.)</li>
<li>Vstupně-výstupní operace (jednobitový výstup, čtyřbitové vstupy atd.)</li>
</ol>

<p>Z&nbsp;toho důvodu, že skupina instrukce je určena nejvyššími čtyřmi bity
instrukčního slova, budou v&nbsp;dalších tabulkách hodnoty těchto čtyř bitů
zapsány do sloupce <strong>I</strong> (protože se tato hodnota vždy do registru
<strong>I</strong> ukládala).</p>

<p><div class="rs-tip-major">Poznámka: obsazeno je všech 256 možných operačních
kódů instrukcí, ovšem některé kombinace operace a operandů nejsou prakticky
používané.</div></p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Operace s&nbsp;registry (přesuny dat)</h2>

<p>Celá čtvrtina operačních kódů, tedy 64 kombinací, je vyhrazena pro přesuny
dat mezi registry, konkrétně vždy mezi akumulátorem <i>D</i> a vybraným
pracovním registrem <i>Rn</i>. Existují celkem čtyři instrukce, které začínají
písmenem <strong>G</strong> (<i>Get</i>) nebo <strong>P</strong> (<i>Put</i>),
za kterým následuje <strong>HI</strong>, pokud se používá horní bajt registru
<i>Rn</i> nebo <strong>LO</strong>, pokud je čtení/zápis proveden do spodního
bajtu:</p>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>8</td><td>GLO</td><td>přesun nižšího bajtu registru <i>Rn</i> do akumulátoru <i>D</i></td></tr>
<tr><td>2</td><td>9</td><td>GHI</td><td>přesun vyššího bajtu registru <i>Rn</i> do akumulátoru <i>D</i></td></tr>
<tr><td>3</td><td>A</td><td>PLO</td><td>přesun hodnoty akumulátoru <i>D</i> do dolního bajtu registru <i>Rn</i></td></tr>
<tr><td>4</td><td>B</td><td>PLI</td><td>přesun hodnoty akumulátoru <i>D</i> do horního bajtu registru <i>Rn</i></td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: povšimněte si, že neexistuje možnost
přímého přesunu dat mezi dvěma registry <i>Rn</i> a <i>Rm</i>. To do značné
míry komplikovalo vývoj programů; ostatně se stejným problémem se potýkali i
programátoři používající původní mikrořadiče <i>Intel 8048</i> a <i>Intel
8051</i> (až další polooficiální rozšíření instrukční sady tyto instrukce
přidalo).</div></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Práce s&nbsp;operační pamětí</h2>

<p>Mikroprocesor RCA 1802 obsahoval i instrukce umožňující čtení operandů
z&nbsp;operační paměti popř.&nbsp;zápis operandů do paměti. Tato operace byla
vždy prováděna mezi pamětí a akumulátorem, ovšem s&nbsp;tím, že adresa pro
čtení/zápis byla uložena v&nbsp;některém pracovním registru <i>Rn</i> &ndash;
adresa tedy nebyla součástí instrukčního slova, což dosti podstatným způsobem
komplikovalo (resp.&nbsp;přesněji řečeno prodlužovalo) algoritmy typu
&bdquo;přesuň bajt z&nbsp;adresy X na adresu Y&ldquo;):</p>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>0</td><td>LDN</td><td>načtení obsahu paměti z&nbsp;adresy uložené v registru <i>Rn</i> a uložení hodnoty do akumulátoru <i>D</i></td></tr>
<tr><td>2</td><td>4</td><td>LDA</td><td>jako instrukce <strong>LDN</strong>, ovšem obsah registru <i>Rn</i> se zvýší o jedničku</td></tr>
<tr><td>3</td><td>5</td><td>STR</td><td>uložení obsahu akumulátoru na adresu uloženou v&nbsp;registru <i>Rn</i></td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: díky existenci instrukce
<strong>LDA</strong> bylo například možné zpracovávat pole, a to jednodušeji,
než u konkurenčních čipů (LDA = Load Advance).</div></p>



<p><a name="k12"></a></p>
<h2 id="k12">12. Aritmetické operace</h2>

<p>Další poměrně velkou skupinu instrukcí představují aritmetické operace. Celou šestnáctinu operačních kódů zabírá instrukce <strong>INC</strong>, která slouží pro zvýšení obsahu vybraného registru Rn o jedničku, a to bez detekce přetečení. Podobně v&nbsp;instrukčním kód nalezneme instrukci <strong>DEC</strong>, která obsah vybraného registru Rn snižuje.</p>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>1</td><td>INC</td><td>zvýšení obsahu registru <i>Rn</i> o jedničku</td></tr>
<tr><td>2</td><td>2</td><td>DEC</td><td>snížení obsahu registru <i>Rn</i> o jedničku</td></tr>
<tr><td>3</td><td> </td><td></td><td></td></tr>
<tr><td>4</td><td> </td><td></td><td></td></tr>
</table>




<p><a name="k13"></a></p>
<h2 id="k13">13. Logické operace</h2>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td> </td><td></td><td></td></tr>
<tr><td>2</td><td> </td><td></td><td></td></tr>
</table>



<p><a name="k14"></a></p>
<h2 id="k14">14. Skoky</h2>

<p>Pro řízení běhu programu se používají nepodmíněné a podmíněné skoky. Za
operačním kódem instrukce následuje další bajt představující dolních osm bitů
cílové adresy (horních osm bitů je uloženo v&nbsp;registru <i>R(P)</i>).
Povšimněte si zde velkého rozdílu oproti dalším typům mikroprocesorů &ndash;
instrukce <i>nahradí</i> dolní bajt cílové adresy, nejedná se tedy o relativní
skok ve smyslu, že lze skákat například v&nbsp;rozsahu -128 až 127 adres
(relativní skoky jsou výhodnější v&nbsp;tom, že instrukce skoku může být
umístěna kdekoli v&nbsp;operační paměti):</p>

<table>
<tr><th> #</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td> 1</td><td>3</td><td>BR</td><td>krátký nepodmíněný skok</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 2</td><td>3</td><td>BQ</td><td>krátký podmíněný skok podle obsahu jednobitového registru <i>Q</i> (musí být nulový)</td></tr>
<tr><td> 3</td><td>3</td><td>BNQ</td><td>krátký podmíněný skok podle obsahu jednobitového registru <i>Q</i> (musí být nastaven na 1)</td></tr>
<tr><td> 4</td><td>3</td><td>BZ</td><td>krátký podmíněný skok v závislosti na tom, zda je akumulátor <i>D</i> nulový</td></tr>
<tr><td> 5</td><td>3</td><td>BNZ</td><td>krátký podmíněný skok v závislosti na tom, zda je akumulátor <i>D</i> nenulový</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 6</td><td>3</td><td>BDF</td><td>krátký podmíněný skok podle obsahu jednobitového registru <i>DF</i> (příznak přenosu je nenulový)</td></tr>
<tr><td> 7</td><td>3</td><td>BPZ</td><td>alias pro předchozí instrukci (<i>plus or zero</i>)</td></tr>
<tr><td> 8</td><td>3</td><td>BGE</td><td>alias pro předchozí instrukci (<i>greater or equal</i>)</td></tr>
<tr><td> 9</td><td>3</td><td>BNF</td><td>krátký podmíněný skok podle obsahu jednobitového registru <i>DF</i> (příznak přenosu je nulový)</td></tr>
<tr><td>10</td><td>3</td><td>BM</td><td>alias pro předchozí instrukci (<i>minus</i>)</td></tr>
<tr><td>11</td><td>3</td><td>BL</td><td>alias pro předchozí instrukci (<i>less</i>)</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>12</td><td>3</td><td>B1</td><td>krátký podmíněný skok podle stavu pinu <i>EF1</i></td></tr>
<tr><td>13</td><td>3</td><td>B2</td><td>krátký podmíněný skok podle stavu pinu <i>EF2</i></td></tr>
<tr><td>14</td><td>3</td><td>B3</td><td>krátký podmíněný skok podle stavu pinu <i>EF3</i></td></tr>
<tr><td>15</td><td>3</td><td>B4</td><td>krátký podmíněný skok podle stavu pinu <i>EF4</i></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
</table>



<p><a name="k15"></a></p>
<h2 id="k15">15. Přeskočení (vynechání) instrukce</h2>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td> </td><td></td><td></td></tr>
<tr><td>2</td><td> </td><td></td><td></td></tr>
<tr><td>3</td><td> </td><td></td><td></td></tr>
</table>



<p><a name="k16"></a></p>
<h2 id="k16">16. Vstupně-výstupní operace</h2>

<table>
<tr><th>#</th><th>I</th><th>Instrukce</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>0</td><td>IDL</td><td>čekání na I/O operaci (DMA-IN, DMA-OUT, INT), ve skutečnosti se instrukce IDL provádí v&nbsp;cyklu stále dokola</td></tr>
<tr><td>2</td><td> </td><td></td><td></td></tr>
<tr><td>3</td><td> </td><td></td><td></td></tr>
</table>



<p><a name="k17"></a></p>
<h2 id="k17">17. Mikroprocesor RCA 1802 v&nbsp;současnosti</h2>

<p>RCA 1802 má stále &ndash; neuvěřitelných 44 let po svém vzniku &ndash; velmi
věrnou skupinu uživatelů a fanoušků (což lze ostatně říci o všech výše
jmenovaných osmibitových čipech, snad s&nbsp;výjimkou Intelu 4004 a 8008),
ovšem z&nbsp;hlediska &bdquo;globální popularity&ldquo; měl tak trochu smůlu,
protože nebyl použit v&nbsp;žádném úspěšném domácím mikropočítači a i jeho
použití v&nbsp;herní konzoli bylo prakticky stoprocentně zastíněno fenomenálně
úspěšnou herní konzolí Atari 2600 (založené na zjednodušené variantě čipu MOS
6502). Dnes se RCA 1802 využívá v&nbsp;amatérských konstrukcích, v&nbsp;nichž
se typicky instalují původní čipy RCA (ne ty nově vyrobené &ndash; ty jsou
příliš drahé). RCA 1802 byl převeden i na FPGA, a to například v&nbsp;projektu
používajícím <a
href="https://hackaday.com/2020/01/23/cosmac-elf-lives-again-in-fpga/">SpinalHDL</a>,
popř.&nbsp;existuje i alternativní <a
href="https://github.com/jamesbowman/verilog1802">verze ve Verilogu</a>.</p>

<p><div class="rs-tip-major">Poznámka: skutečně je patrný rozdíl mezi fanoušky
čipu RCA 1802, kteří jsou více zaměřeni na elektroniku a například fanoušky
čipů MOS 6502 či Zilog Z80, u nichž převažuje orientace na použití těchto
slavných mikroprocesorů v&nbsp;domácích osmibitových mikropočítačích.</div></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. Obsah druhé části článku</h2>

<p>Již <a href="#k01">v&nbsp;úvodní kapitole</a> jsme si řekli, že čip RCA 1802
je známý mj.&nbsp;i tím, že byl použit &ndash; a to dokonce několikrát &ndash;
v&nbsp;kosmickém programu, v&nbsp;letadlech a s&nbsp;velkou pravděpodobností i
v&nbsp;armádních projektech. Existovalo totiž několik technologicky odlišných
variant tohoto čipu, z&nbsp;nichž nejzajímavější je varianta používající
technologii <i>SOS</i> neboli <i>silicon on sapphire</i>. Tato technologie
umožňuje produkovat čipy s&nbsp;větší odolností proti záření, včetně
(samozřejmě jen do určité míry) záření ionizujícímu. A právě tato zvýšená
odolnost je vyžadována v&nbsp;kosmickém prostoru i pro vojenské aplikace.</p>

<p>Druhou oblastí, v&nbsp;níž se mikroprocesor RCA 1802 rozšířil, bylo zcela
odlišné spektrum uživatelů. Jednalo se (a vlastně se i stále jedná) o
elektroniky, kteří si sestavovali vlastní mikropočítače. A jeden
z&nbsp;absolutně nejjednodušších mikropočítačů vůbec je založen právě na dnes
popisovaném mikroprocesoru. Tento mikropočítač, který je programován zadáváním
obsahu jednotlivých bajtů ukládaných do operační paměti pomocí osmi přepínačů,
se nazývá <i>COSMAC ELF</i> a jeho popisem se budeme zabývat příště.</p>



<p><a name="k19"></a></p>
<h2 id="k19">19. Literatura</h2>

<ol>

<li>A Radiation-Hardened Bulk Si-Gate Microprocessor Family, R.E. Stricker, A.G.F. Dingwall, S. Cohen, J.R. Adams, and W.C. Slemmer<br />
IEEE Conference on Nuclear and Space Radiation Effects,<br />
Santa Cruz, CA, July 17-20, 1979
</li>

<li>Rapid Annealing Response of the Hardened 1802 Bulk CMOS Microprocessor, John Scarpulla, Robert Mozulay, Christine Ausnit, Edward W. Hogan, and Richard H. Casey<br />
IEEE Transactions on Nuclear Science, Vol. NS-27, No. 6
December 1980<br />
</li>

<li>U.S Shah,<br />
Microprocessor and its applications
</li>

</ol>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>RCA 1802 (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/RCA_1802">https://en.wikipedia.org/wiki/RCA_1802</a>
</li>

<li>Great Microprocessors of the Past and Present (V 13.4.0)<br />
<a href="http://www.cpushack.com/CPU/cpu.html">http://www.cpushack.com/CPU/cpu.html</a>
</li>

<li>Chip Hall of Fame: RCA CDP 1802<br />
<a href="https://spectrum.ieee.org/semiconductors/processors/chip-hall-of-fame-rca-cdp-1802">https://spectrum.ieee.org/semiconductors/processors/chip-hall-of-fame-rca-cdp-1802</a>
</li>

<li>The CPUs of Spacecraft: Computers in Space<br />
<a href="http://cpushack.com/space-craft-cpu.html">http://cpushack.com/space-craft-cpu.html</a>
</li>

<li>Part I: RCA 1802, weirdness at its best (1974)<br />
<a href="http://www.cpushack.com/CPU/cpu2.html#Sec2Part1">http://www.cpushack.com/CPU/cpu2.html#Sec2Part1</a>
</li>

<li>Embedded Processor and Microcontroller primer and FAQ<br />
<a href="http://www.faqs.org/faqs/microcontroller-faq/primer/">http://www.faqs.org/faqs/microcontroller-faq/primer/</a>
</li>

<li>COSMAC ELF: The CDP1802’s Place in Microcomputing History<br />
<a href="http://www.cosmacelf.com/">http://www.cosmacelf.com/</a>
</li>

<li>Cosmac 1802<br />
<a href="http://www.nyx.net/~lturner/public_html/Cosmac.html">http://www.nyx.net/~lturner/public_html/Cosmac.html</a>
</li>

<li>CDP1802AC/3: High-Reliability CMOS 8-Bit Microprocessor<br />
<a href="https://www.renesas.com/eu/en/www/doc/datasheet/cdp1802ac-3.pdf">https://www.renesas.com/eu/en/www/doc/datasheet/cdp1802ac-3.pdf</a>
</li>

<li>A Short Course In Programming<br />
<a href="http://www.ittybittycomputers.com/IttyBitty/ShortCor.htm">http://www.ittybittycomputers.com/IttyBitty/ShortCor.htm</a>
</li>

<li>The 1802 Instruction Set<br />
<a href="https://www.atarimagazines.com/computeii/issue3/page52.php">https://www.atarimagazines.com/computeii/issue3/page52.php</a>
</li>

<li>Jak se zrodil procesor?<br />
<a href="https://www.root.cz/clanky/jak-se-zrodil-procesor/">https://www.root.cz/clanky/jak-se-zrodil-procesor/</a>
</li>

<li>Osmibitové mikroprocesory a mikrořadiče firmy Motorola (1)<br />
<a href="https://www.root.cz/clanky/osmibitove-mikroprocesory-a-mikroradice-firmy-motorola-1/">https://www.root.cz/clanky/osmibitove-mikroprocesory-a-mikroradice-firmy-motorola-1/</a>
</li>

<li>Mikrořadiče a jejich použití v jednoduchých mikropočítačích<br />
<a href="https://www.root.cz/clanky/mikroradice-a-jejich-pouziti-v-jednoduchych-mikropocitacich/">https://www.root.cz/clanky/mikroradice-a-jejich-pouziti-v-jednoduchych-mikropocitacich/</a>
</li>

<li>Mikrořadiče a jejich aplikace v jednoduchých mikropočítačích (2)<br />
<a href="https://www.root.cz/clanky/mikroradice-a-jejich-aplikace-v-jednoduchych-mikropocitacich-2/">https://www.root.cz/clanky/mikroradice-a-jejich-aplikace-v-jednoduchych-mikropocitacich-2/</a>
</li>

<li>Československé osmibitové počítače<br />
<a href="https://www.root.cz/clanky/ceskoslovenske-osmibitove-pocitace/">https://www.root.cz/clanky/ceskoslovenske-osmibitove-pocitace/</a>
</li>

<li>25 Microchips That Shook the World<br />
<a href="https://spectrum.ieee.org/tech-history/silicon-revolution/25-microchips-that-shook-the-world">https://spectrum.ieee.org/tech-history/silicon-revolution/25-microchips-that-shook-the-world</a>
</li>

<li>COSMAC 1802: history of microprocessors in space<br />
<a href="https://www.retrotechnology.com/memship/1802_spacecraft.html">https://www.retrotechnology.com/memship/1802_spacecraft.html</a>
</li>

<li>COSMAC 1802 on AMSATs running IPS<br />
<a href="https://www.retrotechnology.com/memship/amsat.html">https://www.retrotechnology.com/memship/amsat.html</a>
</li>

<li>Technické informace o sondě Galileo<br />
<a href="https://www.retrotechnology.com/memship/galileo.txt">https://www.retrotechnology.com/memship/galileo.txt</a>
</li>

<li>COSMAC “ELF” Microcomputer Trainer User’s Manual:<br />
<a href="http://www.cosmacelf.com/publications/books/cosmac-elf-manual.pdf">http://www.cosmacelf.com/publications/books/cosmac-elf-manual.pdf</a>
</li>

<li>RCA COSMAC MICROPROCESSOR<br />
<a href="http://www.decodesystems.com/cosmac/">http://www.decodesystems.com/cosmac/</a>
</li>

<li>Netronics ELF II<br />
<a href="https://oldcomputers.net/netronics-elf.html">https://oldcomputers.net/netronics-elf.html</a>
</li>

<li>Netronics Elf II<br />
<a href="http://www.qwkslva.com/Museum/Netronics_Elf/netronics_elf.html">http://www.qwkslva.com/Museum/Netronics_Elf/netronics_elf.html</a>
</li>

<li>Assorted COSMAC Computers<br />
<a href="http://www.cosmacelf.com/gallery/assorted-cosmac-computers.html">http://www.cosmacelf.com/gallery/assorted-cosmac-computers.html</a>
</li>

<li>RCA 1802 COSMAC (plocha čipu)<br />
<a href="http://visual6502.org/images/pages/RCA_1802_die_shots.html">http://visual6502.org/images/pages/RCA_1802_die_shots.html</a>
</li>

<li>Joseph Weisbecker<br />
<a href="https://en.wikipedia.org/wiki/Joseph_Weisbecker">https://en.wikipedia.org/wiki/Joseph_Weisbecker</a>
</li>

<li>Joe Weisbecker Video Game Collection<br />
<a href="https://digital.hagley.org/weisbecker">https://digital.hagley.org/weisbecker</a>
</li>

<li>CDP1802A<br />
<a href="https://www.renesas.com/us/en/products/space-harsh-environment/harsh-environment/microprocessors-peripherals/device/CDP1802A.html#overviewInfo">https://www.renesas.com/us/en/products/space-harsh-environment/harsh-environment/microprocessors-peripherals/device/CDP1802A.html#overviewInfo</a>
</li>

<li>Grafické karty a grafické akcelerátory (7)<br />
<a href="https://www.root.cz/clanky/graficke-karty-a-graficke-akceleratory-7/">https://www.root.cz/clanky/graficke-karty-a-graficke-akceleratory-7/</a>
</li>

<li>Osmibitové mikrořadiče Rabbit: praví dědicové mikroprocesoru Zilog Z80<br />
<a href="https://www.root.cz/clanky/osmibitove-mikroradice-rabbit-pravi-dedicove-mikroprocesoru-zilog-z80">https://www.root.cz/clanky/osmibitove-mikroradice-rabbit-pravi-dedicove-mikroprocesoru-zilog-z80</a>
</li>

<li>Čtyřicet let existence slavných mikroprocesorů řady Motorola 68000<br />
<a href="https://www.root.cz/clanky/ctyricet-let-existence-slavnych-mikroprocesoru-rady-motorola-68000/">https://www.root.cz/clanky/ctyricet-let-existence-slavnych-mikroprocesoru-rady-motorola-68000/</a>
</li>

<li>Intel 8008 Instruction Set<br />
<a href="https://www.bytecollector.com/archive/mark_8/My_Mark-8_Info/Software/8008_ReferenceCard.PDF">https://www.bytecollector.com/archive/mark_8/My_Mark-8_Info/Software/8008_ReferenceCard.PDF</a>
</li>

<li>Intel 8008 instruction set<br />
<a href="https://www.pastraiser.com/cpu/i8008/i8008_opcodes.html">https://www.pastraiser.com/cpu/i8008/i8008_opcodes.html</a>
</li>

<li>Silicon on sapphire<br />
<a href="https://en.wikipedia.org/wiki/Silicon_on_sapphire">https://en.wikipedia.org/wiki/Silicon_on_sapphire</a>
</li>

<li>COSMAC ELF Lives Again, In FPGA<br />
<a href="https://hackaday.com/2020/01/23/cosmac-elf-lives-again-in-fpga/">https://hackaday.com/2020/01/23/cosmac-elf-lives-again-in-fpga/</a>
</li>

<li>verilog1802<br />
<a href="https://github.com/jamesbowman/verilog1802">https://github.com/jamesbowman/verilog1802</a>
</li>

<li>1802 FIG FORTH<br />
<a href="https://www.retrotechnology.com/memship/figforth_1802.html">https://www.retrotechnology.com/memship/figforth_1802.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2020</small></p>
</body>
</html>

