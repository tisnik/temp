<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">*** 2. Počítače bez nevolatilních pamětí</a></p>
<p><a href="#k03">*** 3. Maskou programované ROM</a></p>
<p><a href="#k04">*** 4. Elektricky programovatelné ROM (PROM)</a></p>
<p><a href="#k05">*** 5. Vznikající potřeba nevolatilních pamětí, které by bylo možné přeprogramovat</a></p>
<p><a href="#k06">*** 6. Mazatelné paměti (EPROM)</a></p>
<p><a href="#k07">*** 7. Použití EPROM v&nbsp;praxi</a></p>
<p><a href="#k08">*** 8. Elektricky mazatelné ROM (EEPROM)</a></p>
<p><a href="#k09">*** 9. Máme EEPROM &ndash; kam dále?</a></p>
<p><a href="#k10">*** 10. Mžikové paměti (Flash EEPROM)</a></p>
<p><a href="#k11">*** 11. Příklad Flash paměti první generace</a></p>
<p><a href="#k12">*** 12. Operace mazání, zápisu a čtení v&nbsp;mžikových pamětech</a></p>
<p><a href="#k13">*** 13. Způsob zapojení paměťových buněk typu NOR</a></p>
<p><a href="#k14">*** 14. Způsob zapojení paměťových buněk typu NAND</a></p>
<p><a href="#k15">*** 15. Zápis více bitů do jediné paměťové buňky</a></p>
<p><a href="#k16">*** 16. Omezení technologie MLC</a></p>
<p><a href="#k17">*** 17. Porovnání technologií NOR a NAND</a></p>
<p><a href="#k18">*** 18. Hybridní pevné disky a další aplikace mžikových pamětí</a></p>
<p><a href="#k19">*** 19. Literatura</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>



<p><a name="k02"></a></p>
<h2 id="k02">2. Počítače bez nevolatilních pamětí</h2>

<p></p>

*** image ***
<p><i>Obrázek 1: Nevolatilní paměť s&nbsp;kapacitou 256 kilobitů</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Maskou programované ROM</h2>

<p>Ve výpočetní technice se používají či používaly různé typy nevolatilních pamětí. Vývojově nejstarší, ale stále ještě pro některé účely využívané, jsou paměti <i>ROM (Read-Only Memory)</i>, do kterých jsou informace zapsány již při výrobě čipu; jednou zapsanou hodnotu již nelze běžnými postupy změnit. Jedná se o paměti, na jejichž čipu se vyskytuje několik vrstev, v&nbsp;nichž je vytvořena pravidelná síť vodorovných a kolmých vodivých cest propojených v&nbsp;místech spoje tranzistory. Báze (resp.&nbsp;spíše brány, protože se většinou jedná o unipolární technologii) tranzistorů jsou zkonstruovány tak, že je příslušný tranzistor buď stále otevřen (vodivý) nebo naopak stále uzavřen (nevodivý). Otevřený tranzistor představuje bit s&nbsp;logickou hodnotou jedna, tranzistor uzavřený pak logickou nulu. Konfigurace bází jednotlivých tranzistorů se určuje již při výrobě čipu s&nbsp;využitím poslední masky (každá vrstva je v&nbsp;planární technologii vytvářena s&nbsp;jinou maskou, přes kterou se čip ozařuje).</p>

*** image ***
<p><i>Obrázek XXX: Principiální schéma paměťové sítě ROM</i></p>

<p>Výroba <i>maskou programovaných ROM</i>, jak se těmto typům pamětí někdy říká, je velmi levná, protože se v&nbsp;podstatě jedná o prakticky nejjednodušší formu uchování informací na křemíkových čipech, u které je možné dosáhnout velké informační hustoty a tím pádem i malé ceny v&nbsp;přepočtu na jeden bit (rychlost přístupu k&nbsp;datům může dosahovat hodnot 10-20 ns). Nákladné je však prvotní vytvoření masky pro výrobu čipů, proto se tyto typy pamětí vyplatí vyrábět pouze při velkém množství kusů a to ještě pouze za předpokladu, že se maska (resp.&nbsp;obsah výsledné paměti) nebude v&nbsp;různých verzích finálního produktu měnit. Dnes, kdy je zapotřebí dodávat elektronické výrobky na trh co nejrychleji s&nbsp;tím, že se případné chyby v&nbsp;návrhu vyřeší (čti možná lépe řečeno &bdquo;obejdou&ldquo;) novou verzí <i>firmware</i>, se proto již <i>maskou programované ROM</i> příliš často nepoužívají v&nbsp;těch oblastech, kde se nejedná o statisícové či milionové sady výrobků. Jako jejich náhrada se buď nasazují elektricky mazatelné <i>ROM</i> (<i>EEPROM</i>) či mžikové paměti (<i>Flash</i>), což je, jak si povíme v&nbsp;dalších kapitolách, v&nbsp;mnoha ohledech upravená forma elektricky mazatelných <i>ROM</i>.</p>

*** image ***
<p><i>Obrázek XXX: Kolmý řez paměťovým čipem v&nbsp;místě jednobitové paměťové buňky</i></p>

<p><div class="rs-tip-major">Poznámka: i když jsme si v&nbsp;předchozí kapitole řekli, že se maskou programované ROM nepoužívají pro &bdquo;malé&ldquo; série výrobků, u sérií objemných může být využití této ROM výhodné, zejména v&nbsp;situaci, kdy není možné už od výrobce čipu objednat například předprogramovaný mikrořadič (v&nbsp;tomto případě se dnes typicky používají OTP EPROM zmíněné v&nbsp;dalším textu).</div></p>

<p>Vzhledem k&nbsp;tomu, že tento článek je zaměřen spíše na historii, uvedeme si několik příkladů ROM programovaných jednorázově při výrobě pomocí masky. Jedná se o čipy s&nbsp;malou integrací (LSI), které jsou součástí tehdy populární (bipolárních) technologie známé u nás jako řada 7400 (za &bdquo;x&ldquo; se nedosazuje číslice, ale znak, který blíže určuje použitou technologii):</p>

<table>
<tr><th>#</th><th>Čip (označení)</th><th>Stručný popis</th></tr>
<tr><td>1</td><td>74x88</td><td>256bitová ROM s&nbsp;organizací 32&times;8</td></tr>
<tr><td>2</td><td>74x186</td><td>512bitová ROM s&nbsp;organizací 64&times;8</td></tr>
<tr><td>3</td><td>74x187</td><td>1024bitová ROM s&nbsp;organizací 256&times;4</td></tr>
<tr><td>4</td><td>74x270</td><td>2048bitová ROM s&nbsp;organizací 512&times;4</td></tr>
<tr><td>5</td><td>74x271</td><td>2048bitová ROM s&nbsp;organizací 256&times;8</td></tr>
<tr><td>6</td><td>74x370</td><td>2048bitová ROM s&nbsp;organizací 512&times;4</td></tr>
<tr><td>7</td><td>74x371</td><td>2048bitová ROM s&nbsp;organizací 256&times;8</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>8</td><td>74x262</td><td>5760bitová ROM obsahující znaky teletextu v&nbsp;masce 5&times;9 pixelů (128 znaků)</td></tr>
</table>

<p>Tyto čipy se používaly například jako náhrada složitějších logických sítí (ROM je rychlejší řešení, navíc bez hazardů), pro dekodéry apod. Pokud by například neexistoval speciální obvod pro převod z&nbsp;BCD kódu na kód určený pro sedmisegmentové displeje (klasická čísla), bylo by možné takový obvod vytvořit z&nbsp;jakékoli ROM, která má osmibitovou šířku datové sběrnice (ve skutečnosti to není nutné, protože existují čipy 74x46, 74x47 atd.). Podobně lze vytvořit rychlou čtyřbitovou sčítačku nebo násobičku pouze s&nbsp;ROM s&nbsp;nízkou kapacitou (256&times;4 bity pro sčítačku, 256&times;8 bitů pro násobičku), ALU s&nbsp;výběrem čtyř operací v&nbsp;paměti 1024&times;4 bity apod.</p>

<p>Dalším příkladem maskou naprogramovaných ROM je čip <i>HN613128P</i>, který nabízel kapacitu 16384&times;8 bitů, ostatně pro ROM/EPROM atd. je dosti typické, že je k&nbsp;dispozici relativně velké množství datových vodičů (minimálně bajt), na rozdíl od RAM, kde bylo nutné šetřit počtem pinů. Tento čip se používal dosti často v&nbsp;dobách osmibitových domácích mikropočítačů, protože jeho kapacita 16kB prakticky vždy bohatě dostačovala jak pro uložení vlastního operačního systému (resp..&nbsp;systému na pomezí BIOSu a reálného operačního systému), tak i interpretru programovacího jazyka BASIC. Tento čip nalezneme například v&nbsp;některých modelech slavného osmibitového domácího mikropočítače <i>ZX Spectrum</i> &ndash; zde pochopitelně počet vyrobených počítačů dosahoval takových čísel, že se návrh a důsledné otestování masky vyplatilo.</p>

<p><div class="rs-tip-major">Poznámka: ve skutečnosti existovalo více čipů podobných <i>HN613128P</i>, takže některé modely ZX Spectra (a prakticky všechny klony) budou používat odlišný čip. Nicméně na principu &ndash; pro velké série výrobků ROM programovatelná maskou &ndash; to nic nemění.</div></p>

*** image ***
<p><i>Obrázek XXX: </i></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Elektricky programovatelné ROM (PROM)</h2>

<p>Další formu nevolatilních pamětí představují <i>elektricky programovatelné ROM (PROM)</i>. Jedná se o paměti, které je možné naprogramovat pouze jedenkrát, přesněji řečeno hodnoty bitů se mohou měnit pouze z&nbsp;logické jedničky na logickou nulu (naopak to není možné). Technologie těchto pamětí jsou založeny, podobně jako u výše popsaných maskovaných <i>ROM</i>, na pravidelné mřížce, v&nbsp;jejíž spojích se nachází polovodičový prvek. Zatímco u maskovaných ROM jsou báze těchto prvků (tranzistorů) buď uzemněny nebo naopak připojeny na konstantní kladné napětí (podle konfigurace poslední masky), obsahují elektricky programovatelné ROM ve spojích diody (méně často i tranzistory) sériově spojené se speciálně upravenými rezistory. Čip je z&nbsp;výroby dodáván v&nbsp;takové podobě, že jsou tyto polovodičové prvky vodivé, tj.&nbsp;všechny bity při čtení obsahují logickou jedničku. Samotné programování, které se provádí ve speciálním přípravku, je založeno na destruktivním přerušení spojů v&nbsp;těch místech, kde má být zapsána logická nula.</p>

*** image ***
<p><i>Obrázek XXX: Paměťová matice PROM</i></p>

<p>Zápis dat je prováděn po jednotlivých bitech tak, že je na příslušnou svislou vodivou cestu přivedeno relativně vysoké napětí (například 20V) a vodorovná vodivá cesta je uzemněna. V&nbsp;místě spoje vodorovné a svislé vodivé cesty se nachází polovodičový prvek a k&nbsp;němu sériově připojený rezistor (dichromová spojka, nověji spojka z&nbsp;polykrystalického křemíku), kterými začne protékat poměrně vysoký proud. Ten způsobí, že se rezistor zahřeje na tak vysokou teplotu, že je jeho odporová část rozprášena do svého okolí (což je oxid křemičitý, který teplo následně rozptýlí) a spoj se přeruší bez praktické možnosti jeho obnovy &ndash; příslušný bit je trvale vynulován. Důvod, proč musí být v&nbsp;každém spoji kromě rezistoru (ten sám o sobě plní paměťovou funkci), přítomna i dioda, spočívá v&nbsp;tom, že se sousední bity nesmí při čtení navzájem ovlivňovat. Pokud by dioda nebyla použita a tři bity ve čtverci tvořeném čtyřmi sousedními bity, by byly nastaveny na jedničku (propojeny), ovlivnilo by to i bit čtvrtý, nezávisle na jeho skutečné hodnotě. Diody toto nežádoucí ovlivňování jednoduše odstraní.</p>

<p><div class="rs-tip-major">Poznámka: některé PROM používají namísto diody tranzistor; opět se tedy jedná o bipolární technologii, na rozdíl od dále popsaných typů pamětí, které jsou typicky založeny na technologii unipolární.</div></p>

<p>S&nbsp;PROM se </p>

<table>
<tr><th>#</th><th>Čip (označení)</th><th>Stručný popis</th></tr>
<tr><td>1</td><td></td><td></td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: dnes se můžeme velmi často setkat s&nbsp;termínem <i>OTP</i>, což kromě &bdquo;one-time password&ldquo; znamená i &bdquo;One-time programmable&ldquo;</div>. Jedná se tedy o nevolatilní paměť, která po koupi obsahuje buď samé jedničky nebo nuly a obsah jednotlivých bitů lze změnit pouze jedenkrát. Mohlo by se tedy zdát, že moderní OTP jsou založeny na technologii PROM zhruba popsané výše. Ve skutečnosti tomu tak již není, protože OTP bývají založeny na dále popsané technologii EPROM, ovšem s&nbsp;tím, že u takových pamětí chybí okénko pro mazání.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Vznikající potřeba nevolatilních pamětí, které by bylo možné přeprogramovat</h2>

<p>Elektricky programovatelné ROM trpí stejnou nevýhodou jako maskované ROM, tj.&nbsp;jednou zapsanou informaci není možné změnit; jedinou možnost představuje výměna paměťového čipu. Předností na druhou stranu je, že se nemusí vytvářet drahá maska, samotný přípravek pro programování je relativně levný, dostupný a tím pádem i použitelný pro přípravu malé série naprogramovaných pamětí.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Mazatelné paměti (EPROM)</h2>

<p>O mazatelných nevolatilních pamětech jsme se stručně zmínili už v&nbsp;předchozích kapitolách, ovšem musíme si je popsat podrobněji, protože právě u nich se začíná psát historie Flash. Jedná se o paměti označované zkratkou <i>EPROM</i> neboli <i>Erasable Programmable Read-Only Memory</i>. Slovo <i>Erasable</i> značí, že jednou zapsanou informaci je možné vymazat a poté je možné provést opětovný zápis informace jiné. Mazání se však u těchto pamětí neprovádí elektrickým signálem, ale ultrafialovým zářením. Základem paměťové buňky je v&nbsp;tomto případě speciálně upravený unipolární tranzistor s&nbsp;izolovanou řídicí elektrodou, jejíž náboj určuje hodnotu zapsaného bitu. Vzhledem k&nbsp;tomu, že je řídicí elektroda izolovaná od svého okolí, udrží se v&nbsp;ní elektrický náboj po velmi dlouhou dobu, řádově desítky let.</p>

*** image ***
<p><i>Obrázek 5: Starší typ paměti EPROM s&nbsp;okénkem, pod kterým je vidět paměťová matice</i></p>

<p><div class="rs-tip-major">Poznámka: udává se i hodnota 100 let s&nbsp;tím, že 10 let bývá zaručeno a předpokládalo se, že právě deset let je zhruba doba morální životnosti elektronického zařízení (bavíme se o období před masivním nasazováním &bdquo;k.....tek&ldquo;). Ovšem například majitelé starších zařízení s&nbsp;EPROM (druhá generace PC, ...) mohou dosvědčit, že informace v&nbsp;EPROM &ndash; pokud jsou dobře odstíněny &ndash; vydrží i tři desetiletí.</div></p>

*** image ***
<p><i>Obrázek 6: Bitová jednička a nula zapsaná v&nbsp;buňce paměti EPROM</i></p>

<p>Vraťme se však k&nbsp;pamětem EPROM, resp.&nbsp;přesněji řečeno k&nbsp;principu jejich činnosti. Před prvním použitím paměťového čipu jsou všechny řídicí elektrody vybité, což znamená, že tranzistory jsou v&nbsp;nevodivém stavu (to většinou odpovídá logické jedničce). Zápis se provádí větším elektrickým napětím přivedeným na tranzistor &ndash; řídicí elektroda je nabíjena lavinovou injekcí náboje. Pokud elektron překoná nevodivou vrstvičku, která elektrodu izoluje od substrátu, nemá již (bez přispění dalších vlivů) dostatečnou energii k&nbsp;tomu, aby přeskočil zpět &ndash; zapsaná informace je zapamatována a může být následně čtena tak, že se zjišťuje, zda je příslušný tranzistor ve vodivém či nevodivém stavu (elektrický náboj v&nbsp;izolované elektrodě otevírá kanál tranzistoru, který se stává vodivým).</p>

<p>Tímto způsobem je možné, pouze za použití vyššího programovacího napětí (cca 20V, ovšem dnes jen interně: externí napájení je již standardní) či nábojové pumpy zapsat do libovolného místa paměti <i>EPROM</i> bit s&nbsp;hodnotou nula. Zápis jedničky do jediné paměťové buňky není bez smazání celé paměti možný, paměť je tedy z&nbsp;hlediska programátora určena pouze pro čtení (existují ovšem některé aplikace, které této vlastnosti EPROM využívají, jedná se například o starší a dnes již prakticky zapomenuté typy telefonních karet, ze kterých se &bdquo;odmazávají&ldquo; zaplacené impulsy zápisem logických nul). Celou paměť typu <i>EPROM</i> je možné (i opakovaně) smazat. Mazání spočívá v&nbsp;tom, že se ultrafialovým zářením zvýší energie elektronů &bdquo;uzavřených&ldquo; v&nbsp;izolované elektrodě, takže elektrony mohou přeskočit přes izolační vrstvu elektrody a rozptýlit se do okolí. Všechny bity paměti tak získají logickou hodnotu 1. Mazání je možné několikrát opakovat, ovšem s&nbsp;tím, že se postupně vlastnosti čipu degradují (rozptýlení elektronů do substrátu) a doba potřebná pro smazání se prodlužuje.</p>

<p><div class="rs-tip-major">Poznámka: ve skutečnosti je zápis do paměti EPROM dosti pomalý, takže existovala snaha o urychlení celého procesu. Vznikly tak různé &bdquo;chytré&ldquo; algoritmy, které se nejdříve snaží provést zápis (tj.&nbsp;vynulování bitu) rychleji, s&nbsp;následným přečtením hodnoty. Pokud k&nbsp;překlopení bitu došlo, pokračuje se v&nbsp;zápisu dalších bitů. Pokud nedošlo (stále se čte jednička namísto očekávané nuly), je doba zápisu zvětšena a zápis se provede znovu (ve skutečnosti se toto většinou neprovádí na úrovni bitů, ale bajtů, v&nbsp;závislosti na tom, jak široká je datová sběrnice daného konkrétního čipu EPROM).</div></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Použití EPROM v&nbsp;praxi</h2>

<p>Již v&nbsp;kapitole o PROM jsme se zmínili o OTP, tedy pamětech EPROM, které se &bdquo;tváří&ldquo; jako PROM, například tím, že nemají okénko pro mazání. Typicky se jedná právě o EPROM, což lze někdy zjistit z&nbsp;kódového označení čipu. V&nbsp;minulosti, kdy byly EPROM drahé a nedostatkové, se však s&nbsp;větším či menším úspěchem mazaly i tyto OTP. Ovšem vzhledem k&nbsp;absenci okénka bylo nutné namísto UV použít záření jiné délky &ndash; u nás se například používaly vyřazené zubařské rentgeny (to by dnes s&nbsp;velkou pravděpodobností způsobilo skandál :-).</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Elektricky mazatelné ROM (EEPROM)</h2>

<p>Pokračovatelem pamětí typu <i>EPROM</i> jsou paměti označované jako <i>EEPROM</i> či <i>E<sup>2</sup>PROM</i>. Jedná se o paměti založené na podobném principu jako <i>EPROM</i> (tranzistor s&nbsp;izolovanou elektrodou), ovšem s&nbsp;tím rozdílem, že se mazání provádí elektricky, není tedy nutné používat ultrafialové záření a v&nbsp;mnoha případech ani vyjímat paměti z&nbsp;původní patice. <i>EEPROM</i> jsou mnohdy zcela kompatibilní s&nbsp;původními paměťmi <i>PROM</i> či <i>EPROM</i>, tj.&nbsp;v&nbsp;mnoha zařízeních (včetně počítačů) bylo možné provést pouhou výměnu paměťového čipu bez nutnosti modifikovat zapojení či způsob přístupu mikroprocesoru k&nbsp;paměťovému subsystému &ndash; <i>PROM</i>, <i>EPROM</i> i <i>EEPROM</i> používají shodný způsob adresování (většinou po bytech či širších slovech). Mazání <i>EEPROM</i> u starších typů vyžadovalo zdroj vyššího mazacího napětí, dnes se setkáme spíše s&nbsp;čipy, které obsahují nábojovou pumpu, pomocí které si paměť sama požadované napětí vytvoří.</p>

<p></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Máme EEPROM &ndash; kam dále?</h2>



<p><a name="k10"></a></p>
<h2 id="k10">10. Mžikové paměti (Flash EEPROM)</h2>

<p>Jedná se o upravené elektricky mazatelné programovatelné paměti, jejichž morfologie je změněna tak, aby se dosáhlo co nejvyšších hustot záznamu informací (každá paměťová buňka je představována jediným tranzistorem), z&nbsp;čehož se odvíjí i velká kapacita čipu a jeho relativně nízká cena. Mžikové paměti se od <i>EEPROM</i> liší především tím, že je zápis i mazání prováděn po blocích, přičemž mazání je velmi rychlé (mžikové). V&nbsp;následující části tohoto seriálu si podrobněji popíšeme oba principiálně odlišné typy mžikových pamětí &ndash; NAND a NOR. Každý typ má poněkud odlišné vlastnosti a používá se v&nbsp;jiných typech zařízení (NAND nahrazuje spíše externí paměti, NOR lze použít místo PROM).</p>

*** image ***
<p><i>Obrázek 1: Paměťový čip určený pro armádní zařízení</i></p>

<p>Jeden z&nbsp;limitujících faktorů, které mohou v&nbsp;některých případech znemožnit či prodražit používání mžikových pamětí, je omezený počet zápisů do každé paměťové buňky, resp.&nbsp;do celého bloku, protože se mžikové paměti mažou, jak již víme, vždy po celých blocích. U většiny komerčně dostupných paměťových čipů se udává minimální garantovaný počet přepisů/vymazání každého bloku v&nbsp;řádu stovek tisíc. Na jednu stranu se jedná o velmi vysokou hodnotu, především v&nbsp;porovnání s&nbsp;přepisovatelnými kompaktními disky či <i>DVD</i>, ovšem v&nbsp;případech, ve kterých by měly mžikové paměti nahradit pevný disk, již může být tato hodnota kritická, hlavně při použití souborových systémů, které nedokáží rozložit zápisy tak, aby byl počet mazání každého paměťového bloku přibližně stejný. Například souborový systém <i>FAT</i>, velmi často používaný právě pro mžikové paměti, je z&nbsp;tohoto hlediska nevýhodný, protože prakticky jakákoli změna v&nbsp;souborovém systému znamená zápis do alokační tabulky umístěné na pevném místě v&nbsp;za sebou jdoucích blocích.</p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Příklad Flash paměti první generace</h2>

57F64 intel   podobné 27C64A, ovšem vývody obousměrné
64kB, 8192&times;8 bitů
mazání celého obvodu, okolo dvou sekund
opětovné naprogramování &bdquo;chytrým&ldquo; algoritmem cca 1 sekunda
přístup k datům 150 ns

dva režimy činnosti - EPROM a on-board



<p><a name="k12"></a></p>
<h2 id="k12">12. Operace mazání, zápisu a čtení v&nbsp;mžikových pamětech</h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. Způsob zapojení paměťových buněk typu NOR</h2>

<p>První mžikové paměti používaly strukturu, která byla později nazvána <i>NOR</i>, protože svým tvůrcům připomínala zapojení hradla typu NOR sestaveného z&nbsp;unipolárních tranzistorů. Na druhém obrázku je zobrazeno uspořádání paměťových buněk, ze kterého je patrné, že se každá buňka skládá z&nbsp;jediného tranzistoru s&nbsp;izolovanou elektrodou (právě ta plní paměťovou funkci, protože elektrony, které do této elektrody proniknou, zde vytvoří náboj s&nbsp;životností minimálně několik let), nad níž je umístěna běžná brána (u bipolárních tranzistorů by se jednalo o bázi) připojená k&nbsp;adresovému vodiči. Každou paměťovou buňku je díky tomu možné adresovat samostatně, proto se také zapojení mžikových pamětí typu <i>NOR</i> používá v&nbsp;těch případech, kdy je zapotřebí v&nbsp;nějakém obvodu nahradit paměti <i>EPROM</i> či <i>EEPROM</i> novou technologií. Samostatné adresování bitů, které jsou většinou na vnější sběrnici paměti sloučeny do bytů či delších slov, se týká čtení dat a jejich zápisu (přesněji řečeno přepisu bitů z&nbsp;logické jedničky na logickou nulu). Mazání, tj.&nbsp;nastavení bitů na logickou jedničku, se provádí po větších blocích; na rozdíl od <i>EPROM</i> se tedy nemusí smazat všechny bity na čipu, pouze blok o velikosti typicky několika desítek či stovek kilobitů.</p>

*** image ***
<p><i>Obrázek 2: Zapojení paměťových buněk u flash pamětí typu NOR</i></p>



<p><a name="k14"></a></p>
<h2 id="k14">14. Způsob zapojení paměťových buněk typu NAND</h2>

<p>Paměťové buňky mžikových pamětí jsou při použití zapojení typu <i>NAND</i> sice uspořádány do mřížky prakticky stejně, jako u typu <i>NOR</i>, ovšem liší se způsob jejich vzájemného propojení. Jak je patrné z&nbsp;následujícího obrázku, je vždy několik paměťových buněk zapojeno za sebou v&nbsp;&bdquo;sérii&ldquo;. To na jednu stranu komplikuje čtení i zápisy, protože není možné přistupovat k&nbsp;jednotlivým bitovým buňkám, na stranu druhou to vede k&nbsp;mnohem lepšímu využití plochy čipu. Uvádí se, že informační hustota je při zapojení typu <i>NAND</i> až o 45% vyšší v&nbsp;porovnání s&nbsp;typem <i>NOR</i>, a to nejenom díky tomu, že není zapotřebí tolik tranzistorů zajišťujících připojení k&nbsp;cestám z&nbsp;programovacím napětím, ale i kvůli větší uniformitě tranzistorů s&nbsp;plovoucím hradlem. Nejmenší adresovatelná jednotka se nazývá stránka (<i>page</i>), několik stránek je sdruženo do bloku (<i>block</i>). Čtení a zápis dat je prováděn po stránkách, mazání po blocích. Velikost stránky je u typických čipů předchozí generace (<i>SLC</i>) rovna 2112 bytům, z&nbsp;čehož je 2048 bytů použito pro zaznamenávaná data, zbytek je použit pro uložení detekčních a korekčních kódů. Vzhledem k&nbsp;tomu, že se nemohou číst či zapisovat jednotlivé bity (popř.&nbsp;byty), je čip vybaven registrem o délce 2112 bytů, jehož obsah odpovídá přečtené či zapisované stránce.</p> 

*** image ***
<p><i>Obrázek xxx: Zapojení paměťových buněk u flash pamětí typu NAND</i></p>

<p>Zápis informací do jedné stránky probíhá tak, že se nejprve zapisovaná data nasunou do registru (zde je již vyplněno všech 2112 bytů, tato operace trvá u původních SLC přibližně 30 ns) a posléze se provede zápis celé stránky naráz, což je operace trvající cca 300 ms. Čtení je prováděno opačným způsobem &ndash; celá stránka se po cca 25 ms přesune do pomocného registru, odkud se za 30 ns data mohou přečíst a přenést po sběrnici do mikroprocesoru. Nejpomalejší operací je smazání celého bloku, které trvá cca 2 ms. Samotné řízení paměťového čipu je poměrně náročné, protože je nutné dodržet přesné časování, ovšem většinou je prováděno řadičem umístěným buď přímo na paměťovém čipu či na společném plošném spoji &ndash; jinými slovy se mžiková paměť se zapojením typu <i>NAND</i> nedá přímo použít jako náhrada za <i>EPROM</i> či <i>EEPROM</i> (týká se to především EEPROM s&nbsp;její schopností zápisu po bitech resp.&nbsp;dnes spíše po bajtech).</p>

<p>To má i své výhody, například je možné zavést realokaci vadných stránek či bloků &ndash; po cca 100 000 až 1 000 000 přepisech totiž dochází ke znefunkčnění některých paměťových buněk, takže se celá stránka stává nepoužitelnou. Realokace spočívá v&nbsp;tom, že se stránka (logicky) přesune na vyhrazené místo paměti, podobně jako u pevného disku. Chybná buňka se detekuje již při zápisu, nedojde tedy ke ztrátě dat. Díky realokaci se statisticky velmi významně zvyšuje životnost paměti a je také možné vyrábět a úspěšně prodávat paměťové čipy s&nbsp;vadnými buňkami, což výrazně snižuje výrobní náklady (uvádí se, že prakticky každý prodaný čip obsahuje alespoň jednu vyřazenou stránku).</p>



<p><a name="k15"></a></p>
<h2 id="k15">15. Zápis více bitů do jediné paměťové buňky</h2>

<p>Klasická mžiková paměť dokáže v&nbsp;jedné paměťové buňce uložit právě jeden bit informace, který může nabývat pouze dvou stavů &ndash; logické nuly a logické jedničky. V&nbsp;závislosti na velikosti náboje v&nbsp;izolované elektrodě se mění elektrický proud procházející tranzistorem, který je zesílen čtecím zesilovačem a poté převeden na binární hodnotu. Tato technologie se označuje <i>SLC</i>, podobného principu využívají prakticky všechny další typy pamětí, včetně <i>DRAM</i> i <i>SRAM</i>. Některé mžikové paměti, jak typu <i>NOR</i>, tak i typu <i>NAND</i> však používají odlišnou technologii označovanou <i>MLC</i>, při níž se v&nbsp;jedné paměťové buňce ukládají informace o dvou či třech bitech. Čtecí zesilovač tedy nerozlišuje pouze dva stavy, ale stavy čtyři či dokonce osm. Jak samotné programování, tak i čtení tedy musí být prováděno mnohem pečlivěji (ztrácí se zde snad největší přednost digitální technologie &ndash; velká odolnost proti šumu a rušení), na druhou stranu se však dosahuje větší informační hustoty, což se příznivě projevuje na ceně paměťových součástek.</p>

*** image ***
<p><i>Obrázek 3: Technologie SLC a MLC se na první pohled nijak zvlášť neliší, odlišný je však způsob čtení a zápisu dat</i></p>



<p><a name="k16"></a></p>
<h2 id="k16">16. Omezení technologie MLC</h2>

<p>S&nbsp;vývojem a výrobou paměťových čipů s&nbsp;technologií MLC je &ndash; zejména v&nbsp;počátcích &ndash; spojena především firma Intel, která začala s&nbsp;vývojem již v&nbsp;roce 1992. První generace MLC byla oznámena o tři roky později (1995); jednalo se přitom o čip s&nbsp;kapacitou 32Mb vyráběný technologií 600nm. Produkovat první čipy komerční kvality s&nbsp;MLC se podařilo po roce 1997; kapacita byla 64Mb a výrobní technologie 400nm. Tehdejší MLC čipy byly založeny na uložení dvou bitů do jediné paměťové buňky. To tedy znamená, že bylo nutné rozlišit čtyři možné stavy (převáděné na bitové vzorky 00, 01, 10, 11), které byly reprezentovány odlišným počtem elektronů &bdquo;uvězněných&ldquo; v&nbsp;plovoucím hradle (neboli rozdílným nábojem). Mohlo by se zdát, že počet stavů je možné zvyšovat prakticky libovolně, že vše záleží pouze na šumu v&nbsp;zesilovačích, A/D převodnících atd. Ovšem není tomu tak, protože zde narážíme na to, že náboj v&nbsp;plovoucím hradle je součtem elementárních nábojů &ndash; jednotlivých elektronů, které jsou zde zachyceny při zápisu; navíc dochází k&nbsp;samovolnému samovybíjení, které je sice o mnoho řádů menší, než u DRAM, ale existuje.</p>

<p>Rozdíl v&nbsp;počtu elektronů mezi dvěma sousedními stavy byl v&nbsp;MLC čipech z&nbsp;roku 1997 roven přibližně 3000 elektronům a počítalo se s&nbsp;tím, že každý den buňka ztratí jeden elektron, a to z&nbsp;různých příčin, typicky v&nbsp;kombinaci horší izolace s&nbsp;vnějším zářením. To ovšem znamená, že aby buňka samovolně přešla z&nbsp;jednoho stavu do druhého pouhým samovolným vybíjením, bude to trvat přibližně deset let, což zajišťuje dobu uložení informace srovnatelnou s&nbsp;původní technologií EPROM (prakticky však, jak již víme, drží EPROM informaci i po delší dobu, ovšem i tak je deset let pro typické použití mžikových NAND Flash většinou více než dostatečná doba).</p>

<p>Ovšem technologie Flash a taktéž samotné MLC se neustále vyvíjí. U MLC dochází ke zvyšování počtu bitů, které je možné uložit do jediné paměťové buňky a u Flash (jako celku) se postupně mění výrobní proces, který se přibližuje k&nbsp;pěti nanometrům. Co to znamená? U CPU jsou to převážně kladné vlastnosti, ale u Flash znamená menší plocha MOSFET tranzistorů i zmenšení samotného plovoucího hradla, které (pro danou míru izolace a povolená mazací a programovací napětí) dokáže uložit mnohem menší náboj a tím pádem i mnohem méně elektronů, než dříve. Tím pádem je rozdíl mezi jednotlivými stavy představován nikoli 3000 elektrony, jako tomu bylo v&nbsp;roce 1997, ale u 10nm technologie je kritický rozdíl pouze přibližně dvacet (!) elektronů a u budoucí 5nm technologie ještě méně. Už tedy není možné tolerovat ztrátu jednoho elektronu denně (samovolné vybíjení), ale kvalita uložení se musí zvyšovat &ndash; plánuje se, že budoucí paměti by měly ztratit jednotky elektronů ročně.</p>

<p><div class="rs-tip-major">Poznámka: i přes další vývoj této technologie je zapotřebí s&nbsp;výše popsaným principiálním omezením počítat; ostatně i elektroniky Flash disků mohou pomoci opakovaným přepisem informace po určité době.</div></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. Porovnání technologií NOR a NAND</h2>

<p>V&nbsp;následující tabulce jsou shrnuty některé rozdíly mezi technologiemi <i>NOR</i> a <i>NAND</i>. Z&nbsp;tabulky je patrné, že každá technologie má svoji oblast použití, tyto oblasti se částečně překrývají:</p>

<table>
<tr><th>Technologie</th><th>NAND</th><th>NOR</th></tr>
<tr><td><strong>Přednosti</strong></td><td></td><td></td></tr>
<tr><td>                          </td><td>rychlý zápis</td><td>náhodný přístup</td></tr>
<tr><td>                          </td><td>rychlé čtení</td><td>možnost zápisu po bytech</td></tr>
<tr><td><strong>Zápory</strong>   </td><td></td><td></td></tr>
<tr><td>                          </td><td>pomalý náhodný přístup</td><td>pomalý zápis</td></tr>
<tr><td>                          </td><td>složitý zápis po bytech</td><td>pomalé mazání</td></tr>
<tr><td><strong>Aplikace</strong> </td><td></td><td></td></tr>
<tr><td>                          </td><td>náhrada pevných disků</td><td>náhrada PROM, EPROM, EEROM</td></tr>
<tr><td>                          </td><td>úschova fotek</td><td>jednoduché připojení k procesoru</td></tr>
<tr><td>                          </td><td>záznam zvuku</td><td></td></tr>
</table>

*** image ***
<p><i>Obrázek 5: Wafer, ze kterého se po základních testech vyřezávají základy flash pamětí</i></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. Hybridní pevné disky a další aplikace mžikových pamětí</h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Literatura</h2>

<p><div class="rs-tip-major">Poznámka: schválně uvádím starší literaturu, protože dnešní článek je věnován spíše historii výpočetní techniky. U starší české literatury je poměrně typické, že popisuje čipy, které (tehdy) již byly na západě nahrazeny novějšími komponentami.</div></p>

<ol>

<li>Intel: <i>Memory Component Handbook,</i><br />
Intel, 1986</li>

<li>Pavel Valášek, Roman Loskot: <i>Polovodičové paměti,</i><br />
BEN &ndash; Technická literatura, 1998</li>

<li>Budínský J.: <i>Polovodičové paměti &ndash; Názvosloví a definice</i>,<br />
TESLA VÚST, Praha 1980</li>

<li>Karel Krištoufek: <i>Kurs číslicových počítačů a mikropočítačů,</i><br />
SNTL, 1990</li>

<li>Janů K.: <i>Paměti a řadiče &ndash; část I.</i>,<br />
ČSVTS, Knižnice mikroprocesorová technika, Praha 1982</li>

<li>Texas Instruments: <i>The Bipolar Microcomputer Components Data Book</i><br />
TI, 1977</li>

<li><i>Brief History of CS</i></li>

</ol>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Flash memory<br />
<a href="https://www.britannica.com/technology/flash-memory">https://www.britannica.com/technology/flash-memory</a>
</li>

<li>Solid State Drive (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Solid-state_drive">http://en.wikipedia.org/wiki/Solid-state_drive</a></li>

<li>SSD Write Limit<br />
<a href="http://wiki.eeeuser.com/ssd_write_limit">http://wiki.eeeuser.com/ssd_write_limit</a></li>

<li>Flash vs. hard drives: The battle intensifies<br />
<a href="http://www.solid-state.com/articles/article_display.html?id=272293">http://www.solid-state.com/articles/article_display.html?id=272293</a></li>

<li>Hybrid Drive<br />
<a href="http://en.wikipedia.org/wiki/Hybrid_drive">http://en.wikipedia.org/wiki/Hybrid_drive</a></li>

<li>Magnetic Disk Heritage<br />
<a href="http://www.magneticdiskheritagecenter.org/">http://www.magneticdiskheritagecenter.org/</a></li>

<li>Timeline: 50 Years of Hard Drives<br />
<a href="http://www.pcworld.com/article/127105/timeline_50_years_of_hard_drives.html">http://www.pcworld.com/article/127105/timeline_50_years_of_hard_drives.html</a></li>

<li>What is the importance of Microchip's PIC microcontroller series in today's world?<br />
<a href="https://www.quora.com/What-is-the-importance-of-Microchips-PIC-microcontroller-series-in-todays-world">https://www.quora.com/What-is-the-importance-of-Microchips-PIC-microcontroller-series-in-todays-world</a>
</li>

<li>Why are the PIC “F” models popular?<br />
<a href="https://electronics.stackexchange.com/questions/46879/why-are-the-pic-f-models-popular">https://electronics.stackexchange.com/questions/46879/why-are-the-pic-f-models-popular</a>
</li>

<li>Read-only memory<br />
<a href="https://en.wikipedia.org/wiki/Read-only_memory">https://en.wikipedia.org/wiki/Read-only_memory</a>
</li>

<li>OTP EPROM<br />
<a href="https://www.microchip.com/design-centers/memory/otp-eprom">https://www.microchip.com/design-centers/memory/otp-eprom</a>
</li>

<li>Datasheet paměti 57F64<br />
<a href="https://www.datasheetarchive.com/pdf/download.php?id=087d619e4d94c7168ffb4bea727da1820095d4&amp;type=O&amp;term=57f64">https://www.datasheetarchive.com/pdf/download.php?id=087d619e4d94c7168ffb4bea727da1820095d4&amp;type=O&amp;term=57f64</a>
</li>

<li>HN613128P Datasheet<br />
<a href="https://www.datasheet4u.com/datasheet-pdf/Hitachi/HN613128P/pdf.php?id=755224">https://www.datasheet4u.com/datasheet-pdf/Hitachi/HN613128P/pdf.php?id=755224</a>
</li>

<li>ZX Spectrum 48K - How to replace the ROM with an EPROM<br />
<a href="https://www.youtube.com/watch?v=rJmJBWWoRpE">https://www.youtube.com/watch?v=rJmJBWWoRpE</a>
</li>

<li>Seznam logických integrovaných obvodů řady 7400<br />
<a href="https://cs.wikipedia.org/wiki/Seznam_logick%C3%BDch_integrovan%C3%BDch_obvod%C5%AF_%C5%99ady_7400">https://cs.wikipedia.org/wiki/Seznam_logick%C3%BDch_integrovan%C3%BDch_obvod%C5%AF_%C5%99ady_7400</a>
</li>

<li>List of 7400-series integrated circuits<br />
a href="https://en.wikipedia.org/wiki/List_of_7400-series_integrated_circuits">https://en.wikipedia.org/wiki/List_of_7400-series_integrated_circuits</a>
</li>

<li>1977 TI Bipolar Microcomputer Components Data Book<br />
<a href="https://archive.org/stream/bitsavers_tidataBookcomputerComponentsDataBook_16851665/1977_TI_Bipolar_Microcomputer_Components_Data_Book#page/n181/mode/2up">https://archive.org/stream/bitsavers_tidataBookcomputerComponentsDataBook_16851665/1977_TI_Bipolar_Microcomputer_Components_Data_Book#page/n181/mode/2up</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2020</small></p>
</body>
</html>

