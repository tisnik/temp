<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Mainframy øady IBM System/370</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Mainframy øady IBM System/370</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o historii výpoèetní techniky se budeme zabývat mainframy øady IBM System/370. Jedná se o úspì¹nou architekturu podporovanou firmou IBM po dobu del¹í ne¾ dvacet let, která navazuje na minule popsanou øadu System/360. Mnohé aplikace vytvoøené pro System/370 jsou doposud provozovány, i kdy¾ jsou dnes vìt¹inou spou¹tìny na modernìj¹ích systémech, napøíklad S/390 èi zSeries.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Mainframy øady IBM System/370</a></p>
<p><a href="#k02">2. Architektura S/370</a></p>
<p><a href="#k03">3. Instrukèní sada S/370</a></p>
<p><a href="#k04">4. Ukázka instrukèní sady S/370</a></p>
<p><a href="#k05">5. S/370-XA: roz¹íøení adres z&nbsp;24 na 31 bitù</a></p>
<p><a href="#k06">6. Segmentování a stránkování</a></p>
<p><a href="#k07">7. Obsah dal¹ího pokraèování seriálu</a></p>
<p><a href="#k08">8. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Mainframy øady IBM System/370</h2>

<p>V&nbsp;pøedchozích dvou èástech seriálu o historii výpoèetní techniky jsme
se zamìøili na popis sálových poèítaèù øady <i>IBM System/360</i>, vèetnì klonù
tìchto poèítaèù vyrábìných v&nbsp;zemích RVHP. Øada <i>System/360</i> byla mezi
u¾ivateli, tj.&nbsp;jak specializovanými výpoèetními centry, tak i vìt¹ími
firmami s&nbsp;vlastním poèítaèem, velmi oblíbená, co¾ mj.&nbsp;znamenalo, ¾e
pro tyto poèítaèe vzniklo velké mno¾ství aplikací dùle¾itých pro chod firem.
IBM si tohoto faktu byla vìdoma, tak¾e její dal¹í øada mainframù pojmenovaná
<i>IBM System/370</i>, která byla na trh uvedena v&nbsp;roce 1970, zaruèovala
zpìtnou kompatibilitu pøi migraci star¹ích aplikací (mnohdy se jednalo
napøíklad o velké bankovní systémy), i kdy¾ se technologie operaèních pamìtí,
logických obvodù i externích pamì»ových médií pomìrnì radikálním zpùsobem
zmìnila (pøipomeòme si, ¾e první modely poèítaèù <i>System/360</i> pou¾ívaly
operaèní pamì» vytvoøenou z&nbsp;feritových jader a jediným vysokokapacitním
médiem byly magnetické pásky èi bubnové pamìti).</p>

<a href="http://i.iinfo.cz/images/357/ibm-4-1.jpg"><img src="http://i.iinfo.cz/images/357/ibm-4-1-prev.jpg" alt="ibm-4" height="264" width="370" /></a>
<p><i>Obrázek 1: Èást sálového poèítaèe IBM System/360 Model 40 (rok výroby
1964). V&nbsp;pozadí mù¾eme vidìt jednotky s&nbsp;magnetickými pásky (model
IBM 2401), ovládací panel je umístìn pøímo za sleènou.</i></p>

<p>Mainframy øady <i>System/370</i> (zkrácenì <i>S/370</i>) byly vyrábìny témìø
dvacet let. A¾ poèátkem devadesátých let minulého století je nahradila
architektura <i>Enterprise System Architecture/390</i> (<i>ESA/390</i>, øada
<i>System/390</i>, zkrácenì <i>S/390</i>). V&nbsp;podstatì se jednalo pouze o
pøejmenování <i>ESA/370</i> (viz dal¹í kapitoly) bez vìt¹ích zmìn
v&nbsp;architektuøe systému (zajímavé je, ¾e v&nbsp;osmdesátých letech ¾ádná
øada <i>System/380</i> nevznikla). Øada <i>System/390</i> zaèala být od roku 2000
postupnì nahrazována 64bitovou øadou <i>zSeries</i>, která v¹ak stále zaruèuje
zpìtnou kompatibilitu s&nbsp;poèítaèi <i>System/370</i>. S&nbsp;fungujícími
mainframy <i>System/390</i> se v¹ak stále mù¾eme setkat, ostatnì na tìchto
poèítaèích je mo¾né provozovat i Linux a velkou øadu GNU nástrojù.
V&nbsp;následujících kapitolách si popí¹eme základy architektury sálových
poèítaèù <i>System/370</i>, vèetnì toho, proè se pøi adresování vyu¾ívá pouze
31 bitù z&nbsp;adresy vypoètené z&nbsp;tøicetidvoubitových hodnot
(tato &bdquo;anomálie&ldquo;
je z&nbsp;dùvodu zpìtné kompatibility dodr¾ena i v&nbsp;<i>Enterprise System
Architecture (ESA)/390</i>).</p>

<img src="http://i.iinfo.cz/images/357/ibm-4-2.jpg" alt="ibm-4" height="540" width="419" />
<p><i>Obrázek 2: Nìkterá pamì»ová média pou¾ívaná u mainframù IBM 70xx i
System/360 (i kdy¾ pro System/360 byly následnì vytvoøeny modernìj¹í typy
pamìtí). Mù¾eme zde vidìt jednotky bubnových pamìtí, diskovou pamì» i pamì»
slo¾enou z&nbsp;feritových jader. Právì pamì»ová jednotka IBM 2361 (vlevo dole)
má zajímavou historii &ndash; byla pou¾ita v&nbsp;NASA, zejména
v&nbsp;projektech Gemini a Apollo. Celkem tato pamì» obsahovala neuvìøitelných
témìø 20 milionù pamì»ových bunìk, kde ka¾dá buòka (s&nbsp;kapacitou jednoho
bitu) byla slo¾ena z&nbsp;feritového toroidního jadérka navleèeného na trojici
vodièù.</i></p>



<p><a name="k02"></a></p>
<h2>2. Architektura S/370</h2>

<p>V&nbsp;této kapitole se budeme zabývat architekturou mainframù
<i>System/370</i>, jen¾ je v&nbsp;originálních materiálech popsána velmi
preciznì, proto¾e se firma IBM sna¾ila, aby ve¹keré vylep¹ení této architektury
v&nbsp;budoucnosti nemuselo vést k&nbsp;nutnosti úprav stávajících aplikací.
Pøi popisu nebyla brána do úvahy ¾ádná stávající ani budoucí technologie, co¾
znamená, ¾e konkrétní modely mainframù <i>System/370</i> sice mohly pou¾ívat
zcela odli¹né typy pamìtí èi rùzné technologie pou¾ité pøi výrobì procesorù
(diskrétní souèástky, integrované obvody LSI, VLSI atd.), ale poèítaèe se
z&nbsp;hlediska u¾ivatelských aplikací chovaly stejnì. Právì díky preciznímu
popisu architektury a nezávislosti na pou¾itých technologiích se mohla øada
<i>System/370</i> rozvíjet po dobu 20 let a poté plynule pøejít na mainframy
<i>System/390</i>, ani¾ by se muselo zasahovat do provozovaných aplikací (jedinou
vá¾nìj¹í zmìnou, pøesnìji øeèeno vylep¹ením, je pøechod na 31bitové adresy
popsaný v&nbsp;dal¹ích kapitolách).</p>

<img src="http://i.iinfo.cz/images/357/ibm-4-3.jpg" alt="ibm-4" height="276" width="412" />
<p><i>Obrázek 3: IBM System/370 Model 168 je jedním z&nbsp;prvních mainframù
øady S/370.</i></p>

<p>Poèítaèe øady <i>System/370</i> byly vybaveny jedním èi více procesory
zpracovávajícími operandy ¹iroké 32 bitù rozdìlených do ètyø bajtù (poøadí
bajtù odpovídá konvenci big endian). Ka¾dý procesor obsahoval ¹estnáct
tøicetidvoubitových pracovních registrù (<i>GPR &ndash; general purpose
registers</i>), ¹estnáct takté¾ tøicetidvoubitových øídicích registrù (<i>CR
&ndash; control registers</i>) a stavové slovo (<i>PSW &ndash; program status
word</i>) o ¹íøce 64 bitù, v&nbsp;nìm¾ byly mj.&nbsp;ulo¾eny i pøíznaky získané
v&nbsp;prùbìhu poslednì provádìné aritmetické èi logické operace, ukazatel na
právì zpracovávanou instrukci atd. S&nbsp;pøechodem na architekturu
<i>ESA/390</i> bylo pøidáno dal¹ích ¹estnáct tøicetidvoubitových registrù
pou¾itých pøi adresování. Operaèní pamì» byla adresována po jednotlivých
bajtech (osmici bitù), co¾ mj.&nbsp;umo¾nilo snadnou práci s&nbsp;texty
ukládanými v&nbsp;kódování <i>EBCDIC</i>, o nìm¾ jsme se ji¾ zmínili
v&nbsp;jedné z&nbsp;pøedchozích èástí tohoto seriálu.</p>

<a href="http://i.iinfo.cz/images/357/ibm-4-4.png"><img src="http://i.iinfo.cz/images/357/ibm-4-4-prev.png" alt="ibm-4" height="182" width="370" /></a>
<p><i>Obrázek 4: Mainframe IBM emulovaný na bì¾ném osobním poèítaèi :-).
V&nbsp;levé èásti mù¾eme  vidìt obsah v¹ech ¹estnácti pracovních registrù i
stavového slova, pod tìmito údaji lze pøepínat mezi zobrazením pracovních
registrù (GPR), øídicích registrù (CR), registrù pro roz¹íøené adresování
(System/390: AR) a registrù matematického koprocesoru (FPR). Na pravé stranì
obrazovky je zobrazen stav dvaceti emulovaných periferních zaøízení.
V&nbsp;dolní èásti obrazovky mù¾eme mj.&nbsp;pøeèíst i údaj o aktuální
rychlosti emulovaného stroje: 5,37 MIPS.</i></p>



<p><a name="k03"></a></p>
<h2>3. Instrukèní sada S/370</h2>

<p>Mainframy øady <i>System/360</i> a následnì i <i>System/370</i> jsou
typickými zástupci poèítaèù, jejich¾ procesory vyu¾ívají architekturu
<i>CISC</i>, co¾ znamená, ¾e jejich instrukèní sada obsahuje velké mno¾ství
slo¾itých instrukcí s&nbsp;mnohdy komplikovanými adresními re¾imy v&nbsp;nich¾
je mo¾né pou¾ívat bázové adresy, offsety, indexové registry, provádìt
inkrementaci èi dekrementaci registrù v&nbsp;rámci
adresování (viz instrukce <strong>LA</strong> &ndash; load address) atd.
Instrukèní sada <i>S/370</i> obsahovala
tolik instrukcí, ¾e se programátoøi bavili vtipy o tom, které instrukce
firma IBM ve svých systémech <strong>prozatím</strong> neimplementovala:</p>

<pre>
BOB - BRANCH ON BUG 
KCE - KILL CONSULTANT ON ERROR 
SRDR - SHIFT RIGHT DOUBLE RIDICULOUS
</pre>

<p>Opakem je architektura <i>RISC</i>,
která je vyu¾ívána v&nbsp;tìch procesorech v&nbsp;nich¾ vìt¹ina instrukcí
pracuje s&nbsp;registry a jedinými instrukcemi, které dovolují naèítat èi
ukládat hodnoty do operaèní pamìti, jsou instrukce typu <i>LOAD</i> a
<i>STORE</i> (pøedností této architektury je jednoduchost procesoru, mo¾nost
pou¾ívání pipeliningu bez nutnosti zavádìní slo¾itých obvodù pro detekci kolizí
a z&nbsp;toho vyplývající velké rychlosti zpracování instrukcí; vìt¹ina
slo¾itých operací je provedena ji¾ pøekladaèem).</p>

<a href="http://i.iinfo.cz/images/357/ibm-4-5.jpg"><img src="http://i.iinfo.cz/images/357/ibm-4-5-prev.jpg" alt="ibm-4" height="249" width="370" /></a>
<p><i>Obrázek 5: Mainframe IBM System/370 model 138.</i></p>

<p>Typickým znakem instrukèní sady <i>System/370</i> je podpora strojového
kódu, který je nezávislý na adrese, od které je ulo¾en v&nbsp;operaèní pamìti
(PIC &ndash; Position Independent Code). Ve specifikaci mainframù
<i>System/370</i> není napsáno, ¾e v¹echny &bdquo;kompatibilní&ldquo; procesory
musí umìt zpracovávat v¹echny instrukce. V&nbsp;praxi je tedy mo¾né, aby
procesory levnìj¹ích a ménì výkonných poèítaèù <i>System/370</i> nìkteré
slo¾ité instrukce pøevádìly na sekvenci instrukcí jednodu¹¹ích. Naopak výkonné
poèítaèe <i>System/370</i> mohly být vybaveny procesory, které v¹echny
instrukce dokázaly pøímo provádìt, i kdy¾ to vedlo k&nbsp;jejich vìt¹í
slo¾itosti. K&nbsp;základním procesorùm, které dokázaly pøímo zpracovávat
celoèíselné tøicetidvoubitové hodnoty, bylo mo¾né pøipojit i matematické
koprocesory umo¾òující práci s&nbsp;64bitovými èi 128bitovými hodnotami
ulo¾enými ve formátu plovoucí øádové èárky a takté¾ koprocesory umo¾òující
práci s&nbsp;vektory.</p>

<img src="http://i.iinfo.cz/images/357/ibm-4-6.jpg" alt="ibm-4" height="225" width="300" />
<p><i>Obrázek 6: Procesorová jednotka poèítaèe IBM System/370 Model 9375.</i></p>



<p><a name="k04"></a></p>
<h2>4. Ukázka instrukèní sady S/370</h2>

<p>Zpùsob zápisu programù v&nbsp;assembleru (pøesnìji jazyku symbolických
adres) pou¾ívaného u mainframù <i>System/360</i> i <i>System/370</i>, je ukázán
pod tímto odstavcem. Prakticky celou instrukèní sadu lze nalézt na stránce <a
href="http://www.simotime.com/simoi370.htm">http://www.simotime.com/simoi370.htm</a>,
mnemotechnické kódy instrukcí podmínìných i nepodmínìných skokù
(<i>branches</i>) jsou vysvìtleny na stránce <a
href="http://www.simotime.com/asmbch01.htm">http://www.simotime.com/asmbch01.htm</a>:</p>

<pre>
I@A      EQU   *
* Add 4-byte memory value to register
         L     R4,FW00XX02     x'00000002'
         A     R4,FW00XX01   * Add x'00000001' = x'00000003' cc=2
         A     R4,FW80XX05   * Add x'80000005' = x'80000008' cc=1
***********************************************************************
I@AH     EQU   *
* Add 2-byte memory value to register
         AH    R4,HEX2+2     * Add HEX-2 TO REG-3
***********************************************************************
I@AL     EQU   *
* Add 4-byte memory value to register
         L     R4,FW00XX02     x'00000002'
         AL    R4,FW00XX01   * Add x'00000001' result x'00000003'
         AL    R4,FW80XX05   * Add x'80000005' result x'80000008'
***********************************************************************
I@ALR    EQU   *
* Add Logical Register to Register
         ALR   R3,R4         * Add  Register-Register
***********************************************************************
I@AP     EQU   *
* Add decimal (packed)
         AP    D1,D2         * Add Memory-Memory
***********************************************************************
I@AR     EQU   *
* Add Register to Register
         AR    R3,R4         * Add R4 to R3, Register-Register
***********************************************************************
I@BAL    EQU   *
* The following two instructions are primarily used in 24-bit mode.
* Branch and Link, the BAL and BALR Instructions
         BAL   R9,*+4        * Load R9 with LINK ADDR,BRANCH (24-BIT)
I@BALR   EQU   *
         BALR  R9,R0         * Load R9 with LINK ADDR (24-BIT)
***********************************************************************
I@BAS    EQU   *
* The following two instructions are primarily used in 31-bit mode.
* Branch and Save, the BAS and BASR Instructions
         BAS   R10,*+4       * Load R10 with LINK ADDR,BRANCH (31-BIT)
I@BASR   EQU   *
         BASR  R10,R0        * Load R10 with LINK ADDR (31-BIT)
***********************************************************************
I@BC     EQU   *
* BRANCH on Condition
         BC    15,*+8        * BRANCH to SELF-PLUS-FOUR
         B     *+4             Same as preceding instruction
***********************************************************************
I@BCR    EQU   *
* BRANCH on Condition Register
         LA    R8,BCREND       Load BRANCH-TO ADDRESS into REG-8
         BCR   15,R8         * BRANCH to ADDRESS specified in REG-8
         BR    R8              Same as preceding instruction
BCREND   EQU   *               Label for BCR-INSTRUCTION
</pre>

<img src="http://i.iinfo.cz/images/357/ibm-4-7.jpg" alt="ibm-4" height="540" width="414" />
<p><i>Obrázek 7: Dobovou literaturu o mainframech System/360 a System/370 lze
dodnes najít jak v&nbsp;technických a univerzitních knihovnách, tak i napøíklad
na eBayi.</i></p>

<p>Pro <i>S/370</i> a samozøejmì také pro <i>S/390</i> je dostupný i pøekladaè
GCC spoleènì s&nbsp;celými <i>binutils</i>. Pro <i>S/370</i> ji¾ nejsou
z&nbsp;dùvodu zastaralosti této platformy nové verze GCC pøipravovány, ale
samozøejmì není problém pou¾ít star¹í pøekladaèe. Pøi pøekladu zdrojového kódu
(napøíklad céèkového) do assembleru je pou¾ita syntaxe AT&amp;T, která se od
vý¹e uvedené syntaxe v&nbsp;mnoha ohledech odli¹uje, napøíklad jiným zpùsobem
pojmenování registrù èi zápisu adres. Následuje ukázka pøekladu jednoduché
funkce pro výpoèet nejvìt¹ího spoleèného dìlitele dvou celoèíselných
hodnot:</p>

<pre>
int gcd(int a, int b)
{
    if (a==0)
        return  b;

    while (b&gt;0)
        if (a&gt;b)
            a-=b;
        else
            b-=a;

    return a;
}
</pre>

<p>GCC vyprodukuje (bez pou¾ití optimalizací) následující program
v&nbsp;assembleru:</p>

<pre>
        stmg    %r11,%r15,88(%r15)
        lay     %r15,-168(%r15)
        lgr     %r11,%r15
        lgr     %r1,%r3
        st      %r2,164(%r11)
        st      %r1,160(%r11)
        l       %r1,164(%r11)
        ltr     %r1,%r1
        jne     .L4
        l       %r1,160(%r11)
        j       .L3
.L6:
        l       %r1,164(%r11)
        c       %r1,160(%r11)
        jle     .L5
        l       %r1,164(%r11)
        s       %r1,160(%r11)
        st      %r1,164(%r11)
        j       .L4
.L5:
        l       %r1,160(%r11)
        s       %r1,164(%r11)
        st      %r1,160(%r11)
.L4:
        l       %r1,160(%r11)
        ltr     %r1,%r1
        jh      .L6
        l       %r1,164(%r11)
.L3:
        lgfr    %r1,%r1
        lgr     %r2,%r1
        lg      %r4,280(%r11)
        lmg     %r11,%r15,256(%r11)
        br      %r4
</pre>

<p>Pov¹imnìte si, ¾e pro pøístup k&nbsp;lokálním promìnným se pou¾ívá registr
<i>R11</i> s&nbsp;offsetem 160 resp.&nbsp;164, proto¾e promìnné typu <i>int</i>
jsou od sebe v&nbsp;operaèní pamìti vzdálené ètyøi bajty. Pøi zapnutí
optimalizaèních metod se samozøejmì naèítání i ukládání hodnot do operaèní
pamìti v&nbsp;co nejvy¹¹í míøe eliminuje.</p>



<p><a name="k05"></a></p>
<h2>5. S/370-XA: roz¹íøení adres z&nbsp;24 na 31 bitù</h2>

<p>Pùvodní mainframy øady <i>System/370</i> pou¾ívaly z&nbsp;dùvodu zpìtné
kompatibility s&nbsp;poèítaèi <i>System/360</i> pouze 24bitové adresování, i
kdy¾ ¹íøka pracovních registrù byla rovna 32 bitùm. Pøi naèítání dat
z&nbsp;operaèní pamìti nebo pøi provádìní skokù se nejvy¹¹ích osm bitù adresy
ignorovalo, èeho¾ nìkteré aplikace vyu¾ívaly, napøíklad tak, ¾e do zmiòovaných
osmi bitù ukládaly dal¹í informace (napøíklad informaci o typu dat, pøíznaky
atd.). Firma IBM se po zhruba deseti letech existence mainframù
<i>System/370</i> rozhodla pro roz¹íøení adresového prostoru, který byl
v&nbsp;pøípadì pou¾ití 24 bitù adresy omezen na kapacitu pouhých 16 MB; výsledkem
byla architektura <i>System/370-XA</i> resp.&nbsp;pouze <i>S/370-XA</i>. Dùvod
byl jednoduchý &ndash; nové aplikace vy¾adovaly práci s&nbsp;vìt¹ími objemy dat
a souèasnì ji¾ byly k&nbsp;dispozici technologie, které vedly k&nbsp;tomu, ¾e
zaèaly být cenovì dostupné pamìti o kapacitách stovek megabajtù i jednotek
gigabajtù (v&nbsp;dobách <i>S/360</i> s&nbsp;feritovými pamì»mi byla tato
kapacita takøka nepøedstavitelná, u¾ jen z&nbsp;prostorových dùvodù). Jakým
zpùsobem bylo adresování provádìno je vysvìtleno v&nbsp;dal¹í kapitole.</p>

<img src="http://i.iinfo.cz/images/357/ibm-4-8.jpg" alt="ibm-4" height="400" width="300" />
<p><i>Obrázek 8: Èást mainframu IBM System/370 Model 9375.</i></p>

<p>To, zda se bude pou¾ívat 24bitové èi 31bitové adresování je provádìno na
základì hodnoty nejvy¹¹ího bitu adresy. Pokud je tento bit nulový, pou¾ívá se
pùvodní 24bitové adresování (horních osm bitù adresy se ignoruje),
v&nbsp;opaèném pøípadì je zbylých 31 bitù pou¾ito pro výpoèet fyzické adresy.
V&nbsp;praxi to znamená, ¾e bylo nutné upravit pouze ty star¹í aplikace, které
nastavovaly nejvy¹¹í bit adresy na jednièku, ostatní aplikace bì¾ely stále
v&nbsp;re¾imu 24bitového adresování.</p>



<p><a name="k06"></a></p>
<h2>6. Segmentování a stránkování</h2>

<p>Adresa ulo¾ená napøíklad v&nbsp;pracovním registru neurèovala pøímo adresu
buòky v&nbsp;operaèní pamìti, ale takzvanou virtuální adresu. Pro transformaci
virtuálních adres na adresy fyzické se pou¾íval pøepoèet na základì obsahu
segmentové tabulky (<i>segment table</i>) a stránkových tabulek (<i>page
table(s)</i>). Virtuální 24bitová èi 31bitová adresa, se kterou mohl
programátor manipulovat, byla rozdìlena na tøi èásti &ndash; index do
segmentové tabulky, index do stránkové tabulky vybrané na základì jednoho ze
¹estnácti segmentù a offset. V&nbsp;pøípadì 24bitových adres byl index do
segmentové tabulky ¹iroký 4 bity, index do stránkové tabulky 8 bitù a pro
offset bylo vyhrazeno zbývajících 12 bitù. Segmentová tabulka obsahovala ¹estnáct záznamù,
pøièem¾ ka¾dý záznam byl slo¾en z&nbsp;reálné adresy tabulky stránek a její
délky (1 a¾ 256 záznamù). Na základì ètyøbitového indexu se ze segmentové
tabulky vybrala adresa jedné ze ¹estnácti stránkových tabulek. Tyto tabulky
mohly obsahovat a¾ 256 záznamù o ¹íøce 12 èi 20 bitù, z&nbsp;nich¾ jeden byl
vybraný na základì osmibitového &bdquo;stránkového&ldquo; indexu.</p>

<a href="http://i.iinfo.cz/images/357/ibm-4-9.png"><img src="http://i.iinfo.cz/images/357/ibm-4-9-prev.png" alt="ibm-4" height="270" width="264" /></a>
<p><i>Obrázek 9: Zpùsob výpoètu fyzické adresy z&nbsp;adresy virtuální pøi
pou¾ití 24 bitového adresování. Situace je obdobná jako v&nbsp;pøípadì 31
bitového adresování, ale bitové ¹íøky jednotlivých èástí adresy jsou
odli¹né.</i></p>

<p>Vybraných 12 èi 20 bitù ze stránkové tabulky bylo po bitovém posunu o 12
míst doleva pøipojeno k&nbsp;offsetu, èím¾ vznikla ký¾ená 24bitová èi 32bitová
fyzická adresa. Tento zpùsob výpoètu fyzických adres mìl nìkolik pøedností
&ndash; eliminoval fragmentaci dat v&nbsp;operaèní pamìti a souèasnì umo¾òoval
operaènímu systému rozdìlit jednotlivé bloky operaèní pamìti mezi rùzné procesy
(postaèilo zakázat modifikace segmentových a stránkových tabulek) a umo¾òoval mìnit
velikosti jednotlivých segmentù zvìt¹ováním èi naopak zmen¹ováním pøíslu¹ných
stránkových tabulek. Navíc byl tento zpùsob výpoètu adres flexibilnìj¹í ne¾
varianta segment:offset s&nbsp;pøekrývajícími se segmenty a offsety, jak ji
známe z&nbsp;architektury i86. Tím, ¾e nedochází k&nbsp;pøekryvu offsetu
s&nbsp;adresou stránky, je velikost ka¾dé stránky rovna 2<sup>12</sup> bajtùm,
tj.&nbsp;ètyøem kilobajtùm, co¾ je vlastnì minimální velikost pamì»ových blokù,
po kterých mù¾e operaèní systém efektivnì pøidìlovat èásti operaèní pamìti
jednotlivým procesùm.</p>



<p><a name="k07"></a></p>
<h2>7. Obsah dal¹ího pokraèování seriálu</h2>

<p>V&nbsp;následující èásti seriálu o historii vývoje poèítaèù si øekneme, jaké
operaèní systémy a programovací jazyky byly pou¾ívány na mainframech øady
<i>System/370</i> i <i>System/390</i>. Firma IBM i dal¹í subjekty se podílely
na vytvoøení pomìrnì velkého mno¾ství operaèních systémù pro tyto poèítaèe,
ka¾dý systém byl urèen pro provozování urèitého typu úloh. Mezi základní
systémy patøí <i>DOS/VS</i>, <i>OS/MFT (OS/VS1)</i> a <i>OS/MVT (OS/VS2)</i>,
pozdìji byl vyvinut pravdìpodobnì nejznámìj¹í a nejvýkonnìj¹í systém pro tyto
poèítaèe &ndash; <i>MVS/370</i>. Samozøejmì nezapomeneme ani na
<i>Linux/390</i>, který je pro nìkteré typy úloh (napøíklad webové aplikace)
vhodnìj¹í ne¾ <i>MVS</i>. Z&nbsp;programovacích jazykù si struènì pøedstavíme
<i>COBOL</i> (typicky pou¾ívaný v&nbsp;bankovních systémech, který se
v&nbsp;této oblasti stále vyu¾ívá), <i>Fortran</i> (dodnes pou¾ívaný
v&nbsp;oblasti numerických výpoètù, napøíklad simulací) a <i>PL/1</i>, který se
firma IBM pomìrnì neúspì¹nì pokou¹ela prosadit jako univerzální programovací
jazyk vhodný pro vìt¹inu úloh (existovala i zjednodu¹ená verze tohoto jazyka
urèená pro mikroprocesory a mikroøadièe, která se nazývala <i>PL/M</i>).</p>

<img src="http://i.iinfo.cz/images/357/ibm-4-10.jpg" alt="ibm-4" height="522" width="400" />
<p><i>Obrázek 10: Kniha o Linuxu na mainframech S/390 a zSeries.</i></p>

<p>Takté¾ si popí¹eme nìkteré klony mainframù <i>System/370</i> a
<i>System/390</i> i populární emulátor tìchto strojù urèený pro osobní poèítaèe
&ndash; <i>Hercules</i>. S&nbsp;vyu¾itím tohoto emulátoru je mo¾né zprovoznit
mainframe (vèetnì vybraného operaèního systému i aplikací) napøíklad i na
obyèejném netbooku.</p>

<a href="http://i.iinfo.cz/images/357/ibm-4-11.png"><img src="http://i.iinfo.cz/images/357/ibm-4-11-prev.png" alt="ibm-4" height="252" width="370" /></a>
<p><i>Obrázek 11: Hercules &ndash; emulátor mainframù System/370 i
System/390.</i></p>



<p><a name="k08"></a></p>
<h2>8. Odkazy na Internetu</h2>

<ol>

<li>IBM ESA/390<br />
<a href="http://en.wikipedia.org/wiki/IBM_ESA/390">http://en.wikipedia.org/wiki/IBM_ESA/390</a>
</li>

<li>31-bit<br />
<a href="http://en.wikipedia.org/wiki/31-bit">http://en.wikipedia.org/wiki/31-bit</a>
</li>

<li>Hercules IBM S/370 and ESA/390 Emulator<br />
<a href="http://www.jaymoseley.com/hercules/">http://www.jaymoseley.com/hercules/</a>
</li>

<li>The Hercules System/370, ESA/390, and z/Architecture Emulator<br />
<a href="http://www.hercules-390.org/">http://www.hercules-390.org/</a>
</li>

<li>MVS<br />
<a href="http://en.wikipedia.org/wiki/MVS">http://en.wikipedia.org/wiki/MVS</a>
</li>

<li>MVS... a long history. A history of IBM's most powerful and reliable operating system<br />
<a href="http://www.os390-mvs.freesurf.fr/mvshist.htm">http://www.os390-mvs.freesurf.fr/mvshist.htm</a>
</li>

<li>MVS : the operating system that keeps the world going<br />
<a href="http://www.os390-mvs.freesurf.fr/mvs.htm">http://www.os390-mvs.freesurf.fr/mvs.htm</a>
</li>

<li>The 370 Instruction Set<br />
<a href="http://www.simotime.com/simoi370.htm">http://www.simotime.com/simoi370.htm</a>
</li>

<li>Mainframe family tree and chronology<br />
<a href="http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_FT1.html">http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_FT1.html</a>
</li>

<li>704 Data Processing System<br />
<a href="http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_PP704.html">http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_PP704.html</a>
</li>

<li>705 Data Processing System<br />
<a href="http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_PP705.html">http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_PP705.html</a>
</li>

<li>The IBM 704<br />
<a href="http://www.columbia.edu/acis/history/704.html">http://www.columbia.edu/acis/history/704.html</a>
</li>

<li>IBM Mainframe album<br />
<a href="http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_album.html">http://www-03.ibm.com/ibm/history/exhibits/mainframe/mainframe_album.html</a>
</li>

<li>Mainframe computer<br />
<a href="http://en.wikipedia.org/wiki/Mainframe_computer">http://en.wikipedia.org/wiki/Mainframe_computer</a>
</li>

<li>IBM mainframe<br />
<a href="http://en.wikipedia.org/wiki/IBM_mainframe">http://en.wikipedia.org/wiki/IBM_mainframe</a>
</li>

<li>IBM 700/7000 series<br />
<a href="http://en.wikipedia.org/wiki/IBM_700/7000_series">http://en.wikipedia.org/wiki/IBM_700/7000_series</a>
</li>

<li>IBM System/360<br />
<a href="http://en.wikipedia.org/wiki/IBM_System/360">http://en.wikipedia.org/wiki/IBM_System/360</a>
</li>

<li>IBM System/370<br />
<a href="http://en.wikipedia.org/wiki/IBM_System/370">http://en.wikipedia.org/wiki/IBM_System/370</a>
</li>

<li>IBM Floating Point Architecture<br />
<a href="http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture">http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture</a>
</li>

<li>Extended Binary Coded Decimal Interchange Code<br />
<a href="http://en.wikipedia.org/wiki/EBCDIC">http://en.wikipedia.org/wiki/EBCDIC</a>
</li>

<li>25 let ÚVT MU v Brnì - Technika: Sálové poèítaèe<br />
<a href="http://www.ics.muni.cz/25let/technika/salove_pocitace.html">http://www.ics.muni.cz/25let/technika/salove_pocitace.html</a>
</li>

<li>IBM System/360 (1964)<br />
<a href="http://www.computermuseum.li/Testpage/IBM-360-1964.htm">http://www.computermuseum.li/Testpage/IBM-360-1964.htm</a>
</li>

<li>Mainframe Museum 'Where we started'<br />
<a href="http://www.techsystemsps.com/Mainframe-Museum.htm">http://www.techsystemsps.com/Mainframe-Museum.htm</a>
</li>

<li>360 Assembly<br />
<a href="http://en.wikibooks.org/wiki/360_Assembly">http://en.wikibooks.org/wiki/360_Assembly</a>
</li>

<li>360 Assembly/360 Architecture<br />
<a href="http://en.wikibooks.org/wiki/360_Assembly/360_Architecture">http://en.wikibooks.org/wiki/360_Assembly/360_Architecture</a>
</li>

<li>ASCII/EBCDIC Conversion Table<br />
<a href="http://docs.hp.com/en/32212-90008/apcs01.html">http://docs.hp.com/en/32212-90008/apcs01.html</a>
</li>

<li>EBCDIC<br />
<a href="http://www.hansenb.pdx.edu/DMKB/dict/tutorials/ebcdic.php">http://www.hansenb.pdx.edu/DMKB/dict/tutorials/ebcdic.php</a>
</li>

<li>EBCDIC tables<br />
<a href="http://home.mnet-online.de/wzwz.de/temp/ebcdic/cc_en.htm">http://home.mnet-online.de/wzwz.de/temp/ebcdic/cc_en.htm</a>
</li>

<li>The Mainframe Blog<br />
<a href="http://mainframe.typepad.com/blog/2006/11/my_personal_mai.html">http://mainframe.typepad.com/blog/2006/11/my_personal_mai.html</a>
</li>

<li>IBM Tightens Stranglehold Over Mainframe Market Gets Hit with Antitrust Complaint in Europe<br />
<a href="http://www.ccianet.org/artmanager/publish/news/IBM_Tightens_Stranglehold_Over_Mainframe_Market_Gets_Hit_with_Antitrust_Complaint_in_Europe.shtml">http://www.ccianet.org/artmanager/publish/news/IBM_Tightens_Stranglehold_Over_Mainframe_Market_Gets_Hit_with_Antitrust_Complaint_in_Europe.shtml</a>
</li>

<li>Lectures in the History of Computing: Mainframes<br />
<a href="http://www.computinghistorymuseum.org/teaching/lectures/pptlectures/9-MainframeComputers.ppt">http://www.computinghistorymuseum.org/teaching/lectures/pptlectures/9-MainframeComputers.ppt</a>
</li>

<li>36-bit<br />
<a href="http://en.wikipedia.org/wiki/36-bit_word_length">http://en.wikipedia.org/wiki/36-bit_word_length</a>
</li>

<li>36bit.org<br />
<a href="http://www.36bit.org/">http://www.36bit.org/</a>
</li>

<li>ES EVM<br />
<a href="http://en.wikipedia.org/wiki/ES_EVM">http://en.wikipedia.org/wiki/ES_EVM</a>
</li>

<li>History of computer hardware in Soviet Bloc countries<br />
<a href="http://en.wikipedia.org/wiki/History_of_computer_hardware_in_communist_countries">http://en.wikipedia.org/wiki/History_of_computer_hardware_in_communist_countries</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2009</small></p>
</body>
</html>

