<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">2. Vytvoření nové databáze v&nbsp;nástroji <strong>psql</strong></a></p>
<p><a href="#k03">3. Kostra jednoduché databáze s&nbsp;trojicí tabulek</a></p>
<p><a href="#k04">4. Konstrukce tabulek s&nbsp;jejich zobrazením v&nbsp;<strong>psql</strong></a></p>
<p><a href="#k05">5. Instalace nástroje <strong>SchemaSpy</strong></a></p>
<p><a href="#k06">6. Přepínače používané nástrojem <strong>SchemaSpy</strong></a></p>
<p><a href="#k07">7. Spuštění <strong>SchemaSpy</strong> proti zvolené databázi s&nbsp;vygenerováním výsledků</a></p>
<p><a href="#k08">*** 8. Zobrazení vygenerované dokumentace</a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. Příloha: databáze podporované nástrojem <strong>SchemaSpy</strong> s&nbsp;požadovanými parametry</a></p>
<p><a href="#k19">19. Skripty pro vytvoření tabulek</a></p>
<p><a href="#k20">20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>

<p></p>

<p><div class="rs-tip-major">Poznámka: v&nbsp;následujících kapitolách se předpokládá, že databáze PostgreSQL je nainstalována na některém z&nbsp;dostupných počítačů a že uživatel k&nbsp;ní má přístupová práva.</div></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Vytvoření nové databáze v&nbsp;nástroji <strong>psql</strong></h2>

<p>Před odzkoušením možností nabízených nástrojem <i>SchemaSpy</i> si
připravíme novou testovací databázi. K&nbsp;tomuto účelu použijeme standardní
interaktivní terminál <strong>psql</strong>, který uživatelům nabízí pokročilé
ovládání přes příkazovou řádku. Terminál spustíme příkazem
<strong>psql</strong> a předáme mu jméno uživatele, který se přihlašuje:</p>

<pre>
$ <strong>psql -U postgres</strong>
&nbsp;
Password for user postgres: 
psql (9.6.22)
Type "help" for help.
&nbsp;
postgres=#
</pre>

<p><div class="rs-tip-major">Poznámka: takto se lze přihlásit k&nbsp;lokálně
běžící databázi na standardním portu. Pokud se připojujete
k&nbsp;nestandardnímu portu (PostgreSQL v&nbsp;Dockeru atd.) nebo ke vzdálenému
stroji, je nutné použít volby <strong>-h</strong> a
<strong>-p</strong>.</div></p>

<p>Po úspěšném přihlášení vytvoříme novou databázi nazvanou
<strong>test1</strong>, a to konkrétně následujícím příkazem:</p>

<pre>
postgres=# <strong>create database test1</strong>
&nbsp;
CREATE DATABASE
</pre>

<p>Dále si necháme vypsat seznam všech dostupných databází s&nbsp;využitím
takzvaného <i>metapříkazu</i> <strong>\l</strong>:</p>

<pre>
postgres=# <strong>\l</strong>
</pre>

<p>Výsledek může vypadat takto:</p>

<pre>
                                   List of databases
     Name     |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
--------------+----------+----------+-------------+-------------+-----------------------
 postgres     | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 ptisnovs     | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres           +
              |          |          |             |             | postgres=CTc/postgres
 template1    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres           +
              |          |          |             |             | postgres=CTc/postgres
 <strong>test1</strong>        | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
(5 rows)
</pre>

<p><div class="rs-tip-major">Poznámka: samozřejmě je možné, že se vám vypíšou
odlišné řádky, nicméně databáze <strong>test1</strong> by se zde měla
vyskytovat.</div></p>

<p>Metapříkazem <strong>\c</strong> se přepneme do vybrané databáze:</p>

<pre>
postgres=# <strong>\c test1</strong>
&nbsp;
You are now connected to database "test1" as user "postgres".
</pre>



<p><a name="k03"></a></p>
<h2 id="k03">3. Kostra jednoduché databáze s&nbsp;trojicí tabulek</h2>

<p>Nyní se můžeme podívat na kostru velmi jednoduché databáze s&nbsp;trojicí
tabulek. Struktura této databáze byla inspirována databází <a
href="https://github.com/cristiscu/employees-test-database">Employees Test
Database</a>, akorát jsem použil nezkrácená jména tabulek a jednotlivých
sloupců (popravdě nevidím jediný důvod, proč toto zkracování někdo provádí, a
to zrovna v&nbsp;jazyku SQL, který by měl být čitelný primárně pro lidi):</p>

<pre>
CREATE TABLE department (
   ID       integer NOT NULL,
   name     varchar(20) NOT NULL,
   location varchar(20) NOT NULL
);
&nbsp;
CREATE TABLE employee (
   ID         integer NOT NULL,
   name       varchar(20) NOT NULL,
   job        varchar(20) NOT NULL,
   manager    integer,
   hiredate   date NOT NULL,
   salary     integer NOT NULL,
   comment    integer,
   department integer NOT NULL
);
&nbsp;
CREATE TABLE project (
   ID        integer NOT NULL,
   employee  integer NOT NULL,
   startdate date NOT NULL,
   enddate   date NOT NULL
);
</pre>

<p><div class="rs-tip-major">Poznámka: jednotlivé tabulky neobsahují deklarace
primárních ani cizích klíčů. Ovšem nelekejte se, protože tyto údaje přidáme
v&nbsp;rámci dalších dvou testovacích databází. Tím, že klíče nejsou uvedeny,
otestujeme některé vlastnosti nástroje <i>SchemaSpy</i>, zejména jeho schopnost
označit některé problematické části návrhu databáze.</div></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Konstrukce tabulek s&nbsp;jejich zobrazením v&nbsp;<strong>psql</strong></h2>

<p>Soubor se specifikací tabulek, jehož obsah byl uveden <a
href="#k03">v&nbsp;předchozí kapitole</a>, se jmenuje <strong>db1.sql</strong>.
V&nbsp;případě, že se tento soubor nachází v&nbsp;pracovním adresáři (<i>cwd
&ndash; current working directory</i>), lze ho načíst přímo do interaktivního
terminálu <strong>psql</strong> metapříkazem <strong>\i</strong>:</p>

<pre>
test1-# <strong>\i db1.sql</strong>
&nbsp;
CREATE TABLE
CREATE TABLE
CREATE TABLE
</pre>

<p>Předchozí metapříkaz po svém spuštění vypsal pouze tři informace
&bdquo;CREATE TABLE&ldquo;, což znamená, že tabulky by měly být vytvořeny. O
tom se ostatně můžeme snadno přesvědčit, a to s&nbsp;využitím dalšího
metapříkazu <strong>\dt</strong>:</p>

<pre>
test1-# <strong>\dt</strong>
&nbsp;
           List of relations
 Schema |    Name    | Type  |  Owner   
--------+------------+-------+----------
 public | department | table | postgres
 public | employee   | table | postgres
 public | project    | table | postgres
(3 rows)
</pre>

<p>Zobrazit si můžeme i strukturu jednotlivých tabulek, a to metapříkazem
<strong>\d</strong>:</p>

<pre>
test1-# <strong>\d employee</strong>
&nbsp;
            Table "public.employee"
   Column   |         Type          | Modifiers 
------------+-----------------------+-----------
 id         | integer               | not null
 name       | character varying(20) | not null
 job        | character varying(20) | not null
 manager    | integer               | 
 hiredate   | date                  | not null
 salary     | integer               | not null
 comment    | integer               | 
 department | integer               | not null
</pre>

<p>Druhá tabulka:</p>

<pre>
test1-# <strong>\d department</strong>
&nbsp;
          Table "public.department"
  Column  |         Type          | Modifiers 
----------+-----------------------+-----------
 id       | integer               | not null
 name     | character varying(20) | not null
 location | character varying(20) | not null
</pre>

<p>Třetí tabulka:</p>

<pre>
test1-# <strong>\d project</strong>
&nbsp;
     Table "public.project"
  Column   |  Type   | Modifiers 
-----------+---------+-----------
 id        | integer | not null
 employee  | integer | not null
 startdate | date    | not null
 enddate   | date    | not null
</pre>

<p>Nyní je testovací databáze připravena, takže můžeme interaktivní prostředí
terminálu <strong>psql</strong> ukončit:</p>

<pre>
test1-# <strong>\q</strong>
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. Instalace nástroje <strong>SchemaSpy</strong></h2>

<p>Po přípravě testovací databáze je nutné nainstalovat nástroj
<i>SchemaSpy</i>. Ve skutečnosti ovšem není plnohodnotná instalace zapotřebí,
protože pouze dostačuje provést dva kroky:</p>

<ol>
<li>Stáhnout Java archiv (JAR) s&nbsp;nástrojem <i>SchemaSpy</i></li>
<li>Stáhnout JDBC ovladač pro databázi PostgreSQL (JDBC je standardní rozhraní nezávislé na konkrétní databázi, v&nbsp;důsledku ovšem musí komunikovat s&nbsp;konkrétní databází)</li>
</ol>

<p>Poslední stabilní verzi nástroje <i>SchemaSpy</i> naleznete na stránce <a
href="https://github.com/schemaspy/schemaspy/releases/tag/v6.1.0">https://github.com/schemaspy/schemaspy/releases/tag/v6.1.0</a>.
Vyberte soubor pojmenovaný <strong>schemaspy-6.1.0.jar</strong> a ten si
stáhněte do pracovního adresáře.</p>

<p>Z&nbsp;adresy <a
href="https://jdbc.postgresql.org/download.html">https://jdbc.postgresql.org/download.html</a>
si do stejného adresáře stáhněte JDBC ovladač pro databázi PostgreSQL.
K&nbsp;dispozici jsou varianty pro tři verze virtuálních strojů a běhových
prostředí Javy &ndash; JRE 6, JRE 7 a všech novějších JRE.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Přepínače používané nástrojem <i>SchemaSpy</i></h2>

<p>Nástroj <i>SchemaSpy</i> podporuje několik desítek přepínačů, ovšem pouze
devět z&nbsp;nich je skutečně vyžadováno při práci s&nbsp;databází PostgreSQL.
Jedná se o následující přepínače (které využijeme v&nbsp;navazující
kapitole):</p>

<table>
<tr><th>#</th><th>Přepínač</th><th>Význam přepínače</th><th>Hodnota v&nbsp;příkladu</th></tr>
<tr><td>1</td><td>-t</td><td>typ databáze</td><td>psql</td></tr>
<tr><td>2</td><td>-u</td><td>uživatelské jméno pro přihlášení do DB</td><td>postgres</td></tr>
<tr><td>3</td><td>-p</td><td>heslo pro přihlášení do DB</td><tr>postgres</tr></tr>
<tr><td>4</td><td>-host</td><td>jméno počítače, na kterém databáze běží</td><td>localhost</td></tr>
<tr><td>5</td><td>-port</td><td>port, na kterém databáze běží</td><td>je použita výchozí hodnota</td></tr>
<tr><td>6</td><td>-s</td><td>jméno schématu</td><td>public</td></tr>
<tr><td>7</td><td>-o</td><td>adresář, do kterého se budou generovat výsledky</td><td>test1/test2/test3</td></tr>
<tr><td>8</td><td>-db</td><td>jméno databáze, která se zkoumá</td><td>test1/test2/test3</td></tr>
<tr><td>9</td><td>-dp</td><td>cesta k&nbsp;JDBC ovladači PostgreSQL</td><td>postgresql-42.2.20.jre7.jar</td></tr>
</table>

<p><div class="rs-tip-major">Poznámka: schéma pro přepínač <strong>-s</strong>
získáte přímo z&nbsp;interaktivního terminálu <strong>psql</strong>
následujícím způsobem:</div></p>

<pre>
postgres=# <strong>\dn</strong>
&nbsp;
  List of schemas
  Name  |  Owner   
--------+----------
 public | postgres
(1 row)
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Spuštění <strong>SchemaSpy</strong> proti zvolené databázi s&nbsp;vygenerováním výsledků</h2>

<p>Informace o přepínačích, které byly uvedeny <a href="#k06">v&nbsp;předchozí
kapitole</a>, nyní použijeme pro spuštění nástroje <i>SchemaSpy</i> oproti
databázi nazvané <strong>test1</strong>, již jsme vytvořili v&nbsp;rámci
předchozích kroků. Vzhledem k&nbsp;tomu, že <i>SchemaSpy</i> je dodávána ve
formě Java archivu (JAR), provede se spuštění přes <strong>java -jar</strong>
(a ve stejném adresáři by měl být umístěn i Java archiv s&nbsp;JDBC ovladačem
pro PostgreSQL):</p>

<pre>
$ <strong>java -jar schemaspy-6.1.0.jar -cp . -t pgsql -u postgres -p postgres -host localhost -s public -o test1 -db test1 -dp postgresql-42.2.20.jre7.jar</strong>
</pre>

<p>V&nbsp;případě, že PostgreSQL běží a databáze <strong>test1</strong>
existuje (měla by), zobrazí se na standardním výstupu postup získávání
informací o této databázi i o vytváření výsledků, které budou umístěny do
podadresáře pojmenovaného taktéž <strong>test1</strong>:</p>

<pre>
  ____       _                          ____
 / ___|  ___| |__   ___ _ __ ___   __ _/ ___| _ __  _   _
 \___ \ / __| '_ \ / _ \ '_ ` _ \ / _` \___ \| '_ \| | | |
  ___) | (__| | | |  __/ | | | | | (_| |___) | |_) | |_| |
 |____/ \___|_| |_|\___|_| |_| |_|\__,_|____/| .__/ \__, |
                                             |_|    |___/
&nbsp;
                                              6.1.0
&nbsp;
SchemaSpy generates an HTML representation of a database schema's relationships.
SchemaSpy comes with ABSOLUTELY NO WARRANTY.
SchemaSpy is free software and can be redistributed under the conditions of LGPL version 3 or later.
http://www.gnu.org/licenses/
&nbsp;
INFO  - Starting Main v6.1.0 on localhost.localdomain with PID 17134 (/tmp/ramdisk/schemaspy-6.1.0.jar started by ptisnovs in /tmp/ramdisk)
INFO  - The following profiles are active: default
INFO  - Started Main in 1.543 seconds (JVM running for 2.118)
INFO  - Starting schema analysis
INFO  - Connected to PostgreSQL - 9.6.22
INFO  - Gathering schema details
Gathering schema details......(0sec)
Connecting relationships......(0sec)
Writing/graphing summary.INFO  - Gathered schema details in 0 seconds
INFO  - Writing/graphing summary
INFO  - Graphviz rendered set to ''
........(0sec)
Writing/diagramming detailsINFO  - Completed summary in 0 seconds
INFO  - Writing/diagramming details
...(0sec)
Wrote relationship details of 3 tables/views to directory 'test1' in 1 seconds.
View the results by opening test1/index.html
INFO  - Wrote table details in 0 seconds
INFO  - Wrote relationship details of 3 tables/views to directory 'test1' in 1 seconds.
INFO  - View the results by opening test1/index.html
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. Zobrazení vygenerované dokumentace</h2>

<p>Dokumentace, která byla vygenerovaná nástrojem <i>SchemaSpy</i> pro naši první testovací databázi, je dostupná na adrese <a href="https://tisnik.github.io/presentations/coffee-talks/schemaspy/db1/index.html">https://tisnik.github.io/presentations/coffee-talks/schemaspy/db1/index.html</a>. Nyní se podívejme na nejzajímavější části této dokumentace. Na listu <a href="https://tisnik.github.io/presentations/coffee-talks/schemaspy/db1/index.html">Tables</a> (což je výchozí list) se zobrazují.</p>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>

<pre>
CREATE TABLE department (
   ID       serial PRIMARY KEY,
   name     varchar(20) NOT NULL,
   location varchar(20) NOT NULL
);

CREATE TABLE employee (
   ID         serial PRIMARY KEY,
   name       varchar(20) NOT NULL,
   job        varchar(20) NOT NULL,
   manager    integer,
   hiredate   date NOT NULL,
   salary     integer NOT NULL,
   comment    integer,
   department integer NOT NULL
);

CREATE TABLE project (
   ID        serial PRIMARY KEY,
   employee  integer NOT NULL,
   startdate date NOT NULL,
   enddate   date NOT NULL
);
</pre>


<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>

<pre>
$ psql -U postgres
Password for user postgres: 
psql (9.6.22)
Type "help" for help.

postgres=# create database test2;
&nbsp;
CREATE DATABASE

postgres=# \l
                                   List of databases
     Name     |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
--------------+----------+----------+-------------+-------------+-----------------------
 postgres     | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 ptisnovs     | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
              |          |          |             |             | postgres=CTc/postgres
 template1    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
              |          |          |             |             | postgres=CTc/postgres
 test1        | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 test2        | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
(6 rows)

postgres=# \c test2
You are now connected to database "test2" as user "postgres".
</pre>

<pre>
test2=# \i db2.sql
CREATE TABLE
CREATE TABLE
CREATE TABLE
test2=# \dt
           List of relations
 Schema |    Name    | Type  |  Owner   
--------+------------+-------+----------
 public | department | table | postgres
 public | employee   | table | postgres
 public | project    | table | postgres
(3 rows)
</pre>

<pre>
test2=# \d employee
                                  Table "public.employee"
   Column   |         Type          |                       Modifiers                       
------------+-----------------------+-------------------------------------------------------
 id         | integer               | not null default nextval('employee_id_seq'::regclass)
 name       | character varying(20) | not null
 job        | character varying(20) | not null
 manager    | integer               | 
 hiredate   | date                  | not null
 salary     | integer               | not null
 comment    | integer               | 
 department | integer               | not null
Indexes:
    "employee_pkey" PRIMARY KEY, btree (id)

test2=# \d department
                                 Table "public.department"
  Column  |         Type          |                        Modifiers                        
----------+-----------------------+---------------------------------------------------------
 id       | integer               | not null default nextval('department_id_seq'::regclass)
 name     | character varying(20) | not null
 location | character varying(20) | not null
Indexes:
    "department_pkey" PRIMARY KEY, btree (id)

test2=# \d project
                           Table "public.project"
  Column   |  Type   |                      Modifiers                       
-----------+---------+------------------------------------------------------
 id        | integer | not null default nextval('project_id_seq'::regclass)
 employee  | integer | not null
 startdate | date    | not null
 enddate   | date    | not null
Indexes:
    "project_pkey" PRIMARY KEY, btree (id)
</pre>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>

<pre>
$ java -jar schemaspy-6.1.0.jar -cp . -u postgres -t pgsql -p postgres -o test2 -host localhost -db test2 -dp postgresql-42.2.20.jre7.jar -s public
  ____       _                          ____
 / ___|  ___| |__   ___ _ __ ___   __ _/ ___| _ __  _   _
 \___ \ / __| '_ \ / _ \ '_ ` _ \ / _` \___ \| '_ \| | | |
  ___) | (__| | | |  __/ | | | | | (_| |___) | |_) | |_| |
 |____/ \___|_| |_|\___|_| |_| |_|\__,_|____/| .__/ \__, |
                                             |_|    |___/

                                              6.1.0

SchemaSpy generates an HTML representation of a database schema's relationships.
SchemaSpy comes with ABSOLUTELY NO WARRANTY.
SchemaSpy is free software and can be redistributed under the conditions of LGPL version 3 or later.
http://www.gnu.org/licenses/

INFO  - Starting Main v6.1.0 on localhost.localdomain with PID 18080 (/tmp/ramdisk/schemaspy-6.1.0.jar started by ptisnovs in /tmp/ramdisk)
INFO  - The following profiles are active: default
INFO  - Started Main in 1.674 seconds (JVM running for 2.293)
INFO  - Starting schema analysis
INFO  - Connected to PostgreSQL - 9.6.10
INFO  - Gathering schema details
Gathering schema details......(0sec)
Connecting relationships......(0sec)
Writing/graphing summary.INFO  - Gathered schema details in 0 seconds
INFO  - Writing/graphing summary
INFO  - Graphviz rendered set to ''
........(0sec)
Writing/diagramming detailsINFO  - Completed summary in 0 seconds
INFO  - Writing/diagramming details
...(0sec)
Wrote relationship details of 3 tables/views to directory 'test2' in 1 seconds.
View the results by opening test2/index.html
INFO  - Wrote table details in 0 seconds
INFO  - Wrote relationship details of 3 tables/views to directory 'test2' in 1 seconds.
INFO  - View the results by opening test2/index.html
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>

test3=# <strong>\i db3.sql </strong>
CREATE TABLE
CREATE TABLE
CREATE TABLE

test3=# <strong>\dt</strong>
           List of relations
 Schema |    Name    | Type  |  Owner   
--------+------------+-------+----------
 public | department | table | postgres
 public | employee   | table | postgres
 public | project    | table | postgres
(3 rows)

test3=# <strong>\d employee</strong>
            Table "public.employee"
   Column   |         Type          | Modifiers 
------------+-----------------------+-----------
 id         | integer               | not null
 name       | character varying(20) | not null
 job        | character varying(20) | not null
 manager    | integer               | 
 hiredate   | date                  | not null
 salary     | integer               | not null
 comment    | integer               | 
 department | integer               | not null
Indexes:
    "employee_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "fk_department" FOREIGN KEY (department) REFERENCES department(id) ON DELETE RESTRICT
    "fk_manager" FOREIGN KEY (manager) REFERENCES employee(id) ON UPDATE CASCADE ON DELETE SET NULL
Referenced by:
    TABLE "employee" CONSTRAINT "fk_manager" FOREIGN KEY (manager) REFERENCES employee(id) ON UPDATE CASCADE ON DELETE SET NULL
    TABLE "project" CONSTRAINT "fk_project" FOREIGN KEY (employee) REFERENCES employee(id) ON UPDATE CASCADE

test3=# <strong>\d employee</strong>
            Table "public.employee"
   Column   |         Type          | Modifiers 
------------+-----------------------+-----------
 id         | integer               | not null
 name       | character varying(20) | not null
 job        | character varying(20) | not null
 manager    | integer               | 
 hiredate   | date                  | not null
 salary     | integer               | not null
 comment    | integer               | 
 department | integer               | not null
Indexes:
    "employee_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "fk_department" FOREIGN KEY (department) REFERENCES department(id) ON DELETE RESTRICT
    "fk_manager" FOREIGN KEY (manager) REFERENCES employee(id) ON UPDATE CASCADE ON DELETE SET NULL
Referenced by:
    TABLE "employee" CONSTRAINT "fk_manager" FOREIGN KEY (manager) REFERENCES employee(id) ON UPDATE CASCADE ON DELETE SET NULL
    TABLE "project" CONSTRAINT "fk_project" FOREIGN KEY (employee) REFERENCES employee(id) ON UPDATE CASCADE

test3=# <strong>\d project</strong>
     Table "public.project"
  Column   |  Type   | Modifiers 
-----------+---------+-----------
 id        | integer | not null
 employee  | integer | not null
 startdate | date    | not null
 enddate   | date    | not null
Indexes:
    "project_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "fk_project" FOREIGN KEY (employee) REFERENCES employee(id) ON UPDATE CASCADE



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. Příloha: databáze podporované nástrojem <strong>SchemaSpy</strong> s&nbsp;požadovanými parametry</h2>

<p>Podporované databáze i přepínače, které je nutné použít pro připojení, lze
získat následovně:</p>

<pre>
$ <strong>java -jar schemaspy-6.1.0.jar -dbhelp</strong>
</pre>

<p>Výsledky:</p>

<pre>
</pre>



<p><a name="k19"></a></p>
<h2 id="k19">19. Skripty pro vytvoření tabulek</h2>

<p>Skripty určené pro vytvoření tabulek ve třech demonstračních databázích byly
uloženy do Git repositáře, který je dostupný na adrese <a
href="https://github.com/tisnik/presentations">https://github.com/tisnik/presentations</a>.
Odkazy na jednotlivé skripty naleznete v&nbsp;následující tabulce:</p>

<table>
<tr><th>#</th><th>Skript</th><th>Stručný popis skriptu</th><th>Cesta</th></tr>
<tr><td>1</td><td>db1.sql</td><td>kostra jednoduché databáze s&nbsp;trojicí tabulek</td><td><a href="https://github.com/tisnik/presentations/blob/master/SchemaSpy/db1.sql">https://github.com/tisnik/presentations/blob/master/SchemaSpy/db1.sql</a></td></tr>
<tr><td>2</td><td>db2.sql</td><td>přidání primárních klíčů do databáze</td><td><a href="https://github.com/tisnik/presentations/blob/master/SchemaSpy/db2.sql">https://github.com/tisnik/presentations/blob/master/SchemaSpy/db2.sql</a></td></tr>
<tr><td>3</td><td>db3.sql</td><td>přidání cizích klíčů do databáze</td><td><a href="https://github.com/tisnik/presentations/blob/master/SchemaSpy/db3.sql">https://github.com/tisnik/presentations/blob/master/SchemaSpy/db3.sql</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Employees Test Database<br />
<a href="https://github.com/cristiscu/employees-test-database">https://github.com/cristiscu/employees-test-database</a>
</li>

<li>SchemaSpy home page<br />
<a href="http://schemaspy.org/](http://schemaspy.org/">http://schemaspy.org/](http://schemaspy.org/</a>
</li>

<li>SchemaSpy (verze pro starší JVM)<br />
<a href="http://schemaspy.sourceforge.net/">http://schemaspy.sourceforge.net/</a>
</li>

<li>SchemaSpy na GitHubu<br />
<a href="https://github.com/schemaspy/schemaspy">https://github.com/schemaspy/schemaspy</a>
</li>

<li>SchemaSpy download page<br />
<a href="https://github.com/schemaspy/schemaspy/releases/tag/v6.1.0">https://github.com/schemaspy/schemaspy/releases/tag/v6.1.0</a>
</li>

<li>SchemaSpy on PostgreSQL wiki<br />
<a href="https://wiki.postgresql.org/wiki/SchemaSpy">https://wiki.postgresql.org/wiki/SchemaSpy</a>
</li>

<li>SchemaSpy Documentation<br />
<a href="https://schemaspy.readthedocs.io/_/downloads/en/latest/pdf/">https://schemaspy.readthedocs.io/_/downloads/en/latest/pdf/</a>
</li>

<li>PostgreSQL JDBC driver download page<br />
<a href="https://jdbc.postgresql.org/download.html">https://jdbc.postgresql.org/download.html</a>
</li>

<li>PostgreSQL Primary Key<br />
<a href="https://www.postgresqltutorial.com/postgresql-primary-key/">https://www.postgresqltutorial.com/postgresql-primary-key/</a>
</li>

<li>PostgreSQL Foreign Key<br />
<a href="https://www.postgresqltutorial.com/postgresql-foreign-key/">https://www.postgresqltutorial.com/postgresql-foreign-key/</a>
</li>

<li>psql man page<br />
<a href="https://linux.die.net/man/1/psql">https://linux.die.net/man/1/psql</a>
</li>

<li>GraphViz Pocket Reference<br />
<a href="https://graphs.grevian.org/example">https://graphs.grevian.org/example</a>
</li>

<li>graphviz(3) - Linux man page<br />
<a href="https://linux.die.net/man/3/graphviz">https://linux.die.net/man/3/graphviz</a>
</li>

<li>dot(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/dot">https://linux.die.net/man/1/dot</a>
</li>

<li>neato(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/neato">https://linux.die.net/man/1/neato</a>
</li>

<li>twopi(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/twopi">https://linux.die.net/man/1/twopi</a>
</li>

<li>circo(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/circo">https://linux.die.net/man/1/circo</a>
</li>

<li>fdp(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/fdp">https://linux.die.net/man/1/fdp</a>
</li>

<li>sfdp(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/sfdp">https://linux.die.net/man/1/sfdp</a>
</li>

<li>Graphviz – Graph Visualization Software<br />
<a href="http://www.graphviz.org/">http://www.graphviz.org/</a>
</li>

<li>graphviz (Manual Page)<br />
<a href="http://www.root.cz/man/7/graphviz/">http://www.root.cz/man/7/graphviz/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2021</small></p>
</body>
</html>

