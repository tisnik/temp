<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Ve třetí části seriálu o utilitách vylepšujících práci s příkazovou řádkou se seznámíme s nástrojem nazvaným fzf neboli command-line fuzzy finder. Tento nástroj lze použít pro interaktivní vyhledání a výběr souborů, příkazů z historie, proměnných prostředí, větví v Git repositáři atd.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Projekt <i>fzf</i>: command-line fuzzy finder</a></p>
<p><a href="#k02">2. Princip činnosti nástroje <i>fzf</i></a></p>
<p><a href="#k03">3. Funkce nabízené projektem <i>fzf</i></a></p>
<p><a href="#k04">*** 4. Instalace <i>fzf</i></a></p>
<p><a href="#k05">*** 5. Vyhledávání souborů</a></p>
<p><a href="#k06">*** 6. Syntaxe výrazů používaná při vyhledávání</a></p>
<p><a href="#k07">*** 7. Vyhledávání procesů podle jejich jména</a></p>
<p><a href="#k08">*** 8. Připojení ke vzdáleným strojům přes ssh</a></p>
<p><a href="#k09">*** 9. Práce s&nbsp;proměnnými prostředí</a></p>
<p><a href="#k10">*** 10. Zjednodušení práce s&nbsp;Gitem</a></p>
<p><a href="#k11">*** 11. Interaktivní příkaz <strong>cd</strong></a></p>
<p><a href="#k12">*** 12. Prohlížení obsahu souboru vybraného přes <i>fzf</i></a></p>
<p><a href="#k13">*** 13. Integrace <i>fzf</i> s&nbsp;projektem <i>Bat</i></a></p>
<p><a href="#k14">*** 14. Vyhledávání v&nbsp;historii dříve zadaných příkazů</a></p>
<p><a href="#k15">*** 15. Nástroj <i>fd</i></a></p>
<p><a href="#k16">*** 16. Integrace <i>fzf</i> s&nbsp;Vimem</a></p>
<p><a href="#k17">*** 17. Pokročilejší integrace s&nbsp;Vimem</a></p>
<p><a href="#k18">*** 18. Alternativa ke kombinaci fzf+Vim: plugin CtrlP</a></p>
<p><a href="#k19">*** 19. </a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Projekt <i>fzf</i>: command-line fuzzy finder</h2>

<p>V&nbsp;předchozích dvou částech seriálu o utilitách, které je možné použít
pro vylepšení a zrychlení práce v&nbsp;příkazové řádce, jsme se nejprve
seznámili s&nbsp;nástrojem <i>Go Bullet Train</i> (<i>GBT</i>), jenž vylepšuje
výzvu <i>prompt</i> [<a
href="https://www.root.cz/clanky/vylepseni-prikazove-radky-nastrojem-go-bullet-train-gbt/">1</a>].
Dále jsme si popsali některé možnosti nástrojů <i>bat</i> a <i>ccat</i>, které
dokážou vypsat obsah souborů se zdrojovými kódy, konfiguračních souborů atd. se
zvýrazněním syntaxe (jedná se tedy o rozšíření standardní utility <i>cat</i>)
[<a
href="https://www.root.cz/clanky/nahrada-utility-cat-nastrojem-bat-a-ccat/">2</a>].
Ovšem existuje nepřeberné množství dalších užitečných nástrojů, které mohou
práci v&nbsp;příkazové řádce zjednodušit a/nebo urychlit. Jedním z&nbsp;těchto
nástrojů, jenž se navíc těší velké popularitě, je utilita nazvaná <i>fzf</i>
neboli &bdquo;command-line fuzzy finder&ldquo; (jméno je poněkud nepřesné,
protože <i>fzf</i> lze použít například i v&nbsp;textovém editoru Vim
atd.).</p>

<p><div class="rs-tip-major">Poznámka: mimochodem &ndash; jedná se o utilitu,
která je naprogramovaná <a
href="https://www.root.cz/serialy/programovaci-jazyk-go/">v&nbsp;jazyce Go</a>.
O opět, jako tomu bylo i minule, je možné tuto utilitu zkombinovat
s&nbsp;nástrojem <strong>df</strong>, který je pro změnu naprogramovaný <a
href="https://www.root.cz/serialy/programovaci-jazyk-rust/">v&nbsp;Rustu</a>.
Vidíme, že v&nbsp;některých oblastech se možnosti nabízené jazyky Go a Rust
skutečně překrývají.</div></p>

<a href="https://www.root.cz/obrazek/401763/"><img src="https://i.iinfo.cz/images/5/fzf-14-prev.png" class="image-401763" alt="&#160;" width="370" height="232" /></a>
<p><i>Obrázek 1: Použití nástroje <strong>fzf</strong> společně s&nbsp;minule
popsanou utilitou <strong>bat</strong> při výběru souborů společně se
zobrazením obsahu souboru, který je aktuálně uživatelem vybrán.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Princip činnosti nástroje <i>fzf</i></h2>

<p>Základní funkce <i>fzf</i> je ve skutečnosti velmi jednoduchá a vlastně i
typicky &bdquo;unixovská&ldquo;. Nástroj <i>fzf</i> totiž na svém standardním
vstupu (<i>stdin</i>) získá libovolný seznam, který následně zobrazí a nechá
uživatele vybrat jednu položku z&nbsp;tohoto seznamu. Výsledek následně předá
na svůj standardní výstup (<i>stdout</i>) pro další zpracování. To
pravděpodobně nezní moc bombasticky ani příliš užitečně, ovšem samotný výběr
položky ze seznamu je plně interaktivní a podporuje takzvaný
&bdquo;fuzzy&ldquo; výběr (použitelný je i pro ty uživatele, kteří neznají
regulární výrazy). A především &ndash; největší síla <i>fzf</i> spočívá
v&nbsp;tom, že tento nástroj je možné kombinovat s&nbsp;vybranými standardními
příkazy popř.&nbsp;dalšími utilitami, všude tam, kde je nutné vybrat hodnotu ze
seznamu (platného například v&nbsp;nějakém kontextu). Možnosti využití jsou
prakticky nepřeberné, takže si v&nbsp;dalších kapitolách přiblížíme jen
nepatrný zlomek možného nasazení <i>fzf</i>.</p>

<a href="https://www.root.cz/obrazek/401764/"><img src="https://i.iinfo.cz/images/5/fzf-15-prev.png" class="image-401764" alt="&#160;" width="370" height="232" /></a>
<p><i>Obrázek 2: Použití standardního barvového schématu na terminálu
s&nbsp;tmavým pozadím.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. </h2>

<p>S&nbsp;principem základní činnosti <i>fzf</i> jsme se již seznámili <a
href="#k02">v&nbsp;předchozí kapitole</a>. Pojďme si ovšem popsat a následně
ukázat praktické příklady použití <i>fzf</i>. Tuto utilitu lze použít například
k&nbsp;těmto operacím:</p>


<p><a name="k04"></a></p>
<h2 id="k04">4. </h2>

<li>Vyhledávání souborů společně s&nbsp;prohlížením jejich obsahu
v&nbsp;kombinaci s&nbsp;utilitami <strong>cat</strong>, <strong>bat</strong> či
<strong>ccat</strong>.</li>


<p><a name="k05"></a></p>
<h2 id="k05">5. </h2>



<p><a name="k06"></a></p>
<h2 id="k06">6. </h2>

<pre>
$ <strong>sudo dnf install fzf</strong>
</pre>

<p><div class="rs-tip-major">Poznámka:</div></p>

<pre>
$ <strong>go get github.com/junegunn/fzf</strong>
</pre>

<pre>
$ <strong>man fzf</strong>
&nbsp;
fzf(1)                 fzf - a command-line fuzzy finder                fzf(1)
&nbsp;
NAME
       fzf - a command-line fuzzy finder
&nbsp;
SYNOPSIS
       fzf [options]
&nbsp;
DESCRIPTION
       fzf is a general-purpose command-line fuzzy finder.
&nbsp;
OPTIONS
   Search mode
       -x, --extended
              Extended-search  mode. Since 0.10.9, this is enabled by default.
              You can disable it with +x or --no-extended.
&nbsp;
       -e, --exact
              Enable exact-match
&nbsp;
       -i     Case-insensitive match (default: smart-case match)
&nbsp;
       +i     Case-sensitive match
...
...
...
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>

<pre>
$ <strong>alias fp="fzf --preview 'cat {}'"</strong>
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>

<pre>
$ <strong>alias fp="fzf --preview '~/bin/bat {} --color=always'"</strong>
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>

<table>
<tr><th>#</th><th></th><th></th></tr>
<tr><td>1</td><td></td><td></td></tr>
<tr><td>2</td><td></td><td></td></tr>
<tr><td>3</td><td></td><td></td></tr>
<tr><td>4</td><td></td><td></td></tr>
<tr><td>5</td><td></td><td></td></tr>
<tr><td>6</td><td></td><td></td></tr>
<tr><td>7</td><td></td><td></td></tr>
</table>

:Files
:GFiles
:GFiles?
:Buffers
:Colors
:Ag
:Rg
:Lines
:BLines
:Tags
:BTags
:Marks
:Windows
:Locate
:History
:History:
:History/
:Snippets
:Commits
:BCommits
:Commands
:Maps
:Helptags
:Filetypes



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Alternativa ke kombinaci fzf+Vim: plugin CtrlP</h2>

<p>Pro mnoho uživatelů textového editoru <i>Vim</i> se stal velmi užitečným přídavným modulem plugin nazvaný <i>ctrlp.vim</i>. Po instalaci tohoto pluginu je možné přes klávesovou zkratku <strong>Ctrl-P</strong>, která modulu dala název, vyhledávat soubory, buffery atd., a to i s&nbsp;využitím regulárních výrazů. Podobně jako samotný <i>Vim</i>, i plugin <i>ctrlp.vim</i> se může nacházet v&nbsp;několika režimech, mezi nimiž se uživatel přepíná několika klávesovými zkratkami (každý režim je reprezentován jinou výzvou &ndash; prompt). Tento plugin taktéž dokáže vytvářet soubory i adresáře, otevřít větší množství souborů současně apod. Jedná se tedy o alternativu k&nbsp;minule popsanému pluginu <i>NERD Tree</i>, i když způsob ovládání <i>NERT Tree</i> se značně odlišuje od ovládání <i>ctrlp.vim</i> &ndash; každému uživateli bude vyhovovat něco jiného (druhý jmenovaný plugin má nepochybně větší množství příkazů, ovšem zpočátku je poněkud nepřehledný &ndash; tento problém však po několika použitích zmizí).</p>

<a href="http://www.root.cz/obrazek/202062/"><img src="http://i.iinfo.cz/images/173/vim3-12-prev.png" class="image-202062" width="370" height="243" alt="&#160;" /></a>
<p><i>Obrázek xx: Nápověda k&nbsp;pluginu ctrlp.vim.</i></p>

<p>Plugin <i>ctrlp.vim</i> se vyvolá v&nbsp;normálním režimu klávesovou zkratkou <strong>Ctrl-P</strong> (kterou však je možné samozřejmě přemapovat).  Po použití této zkratky se zobrazí nové horizontálně rozdělené okno se speciálně naformátovaným stavovým řádkem. Změní se i vstupní řádek, do něhož je možné začít zapisovat jméno souboru, resp.&nbsp;přesněji řečeno část jména &ndash; mnohdy postačuje zadat několik počátečních písmen či počáteční a koncové písmeno &ndash; ihned při psaní se seznam souborů zmenšuje či zvětšuje tak, aby odpovídal zadané masce. Soubory se vyhledávají jak v&nbsp;aktuálním adresáři, tak i v&nbsp;podadresářích, což je výhodné především ve chvíli, kdy uživatel pracuje na rozsáhlejším projektu. K&nbsp;dispozici je velké množství klávesových zkratek, zejména pak:</p>

<table>
<tr><th>Klávesová zkratka</th><th>Význam</th></tr>
<tr><td>Ctrl+D</td><td>přepnutí mezi vyhledáváním ve jménech souborů či i ve jménech souborů a adresářů (výchozí)</td></tr>
<tr><td>Ctrl+R</td><td>přepnutí mezi použitím regexpů či tzv. řetězcového režimu (výchozí)</td></tr>
<tr><td>Ctrl+T</td><td>otevření vybraného souboru v&nbsp;novém tabu</td></tr>
<tr><td>Ctrl+V</td><td>vertikální rozdělení okna a otevření vybraného souboru</td></tr>
<tr><td>Ctrl+S</td><td>horizontální rozdělení okna a otevření vybraného souboru</td></tr>
<tr><td>Ctrl+Z</td><td>označení souboru (vedle jména souboru se zobrazí značka)</td></tr>
<tr><td>Ctrl+O</td><td>otevření všech označených souborů</td></tr>
<tr><td>Tab</td><td>automatické doplnění názvu adresáře</td></tr>
<tr><td>Esc</td><td>zavření okna pluginu <i>ctrlp.vim</i></td></tr>
</table>


<a href="http://www.root.cz/obrazek/202065/"><img src="http://i.iinfo.cz/images/173/vim3-15-prev.png" class="image-202065" width="370" height="243" alt="&#160;" /></a>
<p><i>Obrázek 17: Zvýraznění souborů na základě zapsané masky.</i></p>

<a href="http://www.root.cz/obrazek/202063/"><img src="http://i.iinfo.cz/images/173/vim3-13-prev.png" class="image-202063" width="370" height="243" alt="&#160;" /></a>
<p><i>Obrázek xx: Výběr souborů pro editaci s&nbsp;využitím pluginu ctrlp.vim.</i></p>

<p>V&nbsp;tabulce je mj.&nbsp;zmíněn tzv. řetězcový režim. Jedná se o způsob reprezentace masky bez explicitního použití regexpů. Po zadání řetězce &bdquo;abc&ldquo; v&nbsp;řetězcovém režimu je tento řetězec interně chápán jako regulární výraz &bdquo;a[^a]\{-}b[^b]\{-}c&ldquo;, což sice vypadá poněkud složitě, nicméně řetězcový režim je v&nbsp;praxi dosti návykový :-)</p>

<a href="http://www.root.cz/obrazek/202064/"><img src="http://i.iinfo.cz/images/173/vim3-14-prev.png" class="image-202064" width="370" height="243" alt="&#160;" /></a>
<p><i>Obrázek xx: Výběr souborů pro editaci s&nbsp;využitím pluginu ctrlp.vim.</i></p>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Repositář projektu fzf<br />
<a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a>
</li>

<li>fzf wiki<br />
<a href="https://github.com/junegunn/fzf/wiki/examples">https://github.com/junegunn/fzf/wiki/examples</a>
</li>

<li>fzf.vim<br />
<a href="https://github.com/junegunn/fzf.vim">https://github.com/junegunn/fzf.vim</a>
</li>

<li>Vim universe. fzf - command line fuzzy finder (video)<br />
<a href="https://www.youtube.com/watch?v=qgG5Jhi_Els">https://www.youtube.com/watch?v=qgG5Jhi_Els</a>
</li>

<li>FZF Vim integration<br />
<a href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">https://github.com/junegunn/fzf/blob/master/README-VIM.md</a>
</li>

<li>fzf: Terminal Fuzzy Finder for Linux (video)<br />
<a href="https://www.youtube.com/watch?v=vt33Hp-4RXg">https://www.youtube.com/watch?v=vt33Hp-4RXg</a>
</li>

<li>Fzf Installation and Usage<br />
<a href="https://jdhao.github.io/2018/11/05/fzf_install_use/">https://jdhao.github.io/2018/11/05/fzf_install_use/</a>
</li>

<li>Integrated Usage of VIM and Fuzzy Search Artifact FZF – From Simple to Advanced<br />
<a href="https://developpaper.com/integrated-usage-of-vim-and-fuzzy-search-artifact-fzf-from-simple-to-advanced/">https://developpaper.com/integrated-usage-of-vim-and-fuzzy-search-artifact-fzf-from-simple-to-advanced/</a>
</li>

<li>Navigating a filesystem quickly with fzf and fd<br />
<a href="https://mike.place/2017/fzf-fd/">https://mike.place/2017/fzf-fd/</a>
</li>

<li>Nástroj fd<br />
<a href="https://github.com/sharkdp/fd">https://github.com/sharkdp/fd</a>
</li>

<li>Alternativy k&nbsp;batu<br />
<a href="https://github.com/sharkdp/bat/blob/master/doc/alternatives.md">https://github.com/sharkdp/bat/blob/master/doc/alternatives.md</a>
</li>

<li>Ccat<br />
<a href="https://github.com/jingweno/ccat">https://github.com/jingweno/ccat</a>
</li>

<li>How to colorizing cat command output or files using ccat app on Linux or Unix system<br />
<a href="https://www.cyberciti.biz/howto/linux-unix-cat-command-with-colours/">https://www.cyberciti.biz/howto/linux-unix-cat-command-with-colours/</a>
</li>

<li>Go Bullet Train (GBT)<br />
<a href="https://github.com/tisnik/gbt">https://github.com/tisnik/gbt</a>
</li>

<li>bullettrain-sh<br />
<a href="https://github.com/caiogondim/bullet-train.zsh">https://github.com/caiogondim/bullet-train.zsh</a>
</li>

<li>An oh-my-zsh shell theme based on the Powerline Vim plugin<br />
<a href="https://github.com/caiogondim/bullet-train.zsh">https://github.com/caiogondim/bullet-train.zsh</a>
</li>

<li>Nerd fonts<br />
<a href="https://www.nerdfonts.com/">https://www.nerdfonts.com/</a>
</li>

<li>nerd-fonts (repositář)<br />
<a href="https://github.com/ryanoasis/nerd-fonts">https://github.com/ryanoasis/nerd-fonts</a>
</li>

<li>Repositář projektu bat<br />
<a href="https://github.com/sharkdp/bat">https://github.com/sharkdp/bat</a>
</li>

<li>bat releases<br />
<a href="https://github.com/sharkdp/bat/releases">https://github.com/sharkdp/bat/releases</a>
</li>

<li>Shell<br />
<a href="https://en.wikipedia.org/wiki/Shell_(computing)">https://en.wikipedia.org/wiki/Shell_(computing)</a>
</li>

<li>Minimalistická a rychlá příkazová řádka pro libovolný shell Starship<br />
<a href="https://www.root.cz/zpravicky/minimalisticka-a-rychla-prikazova-radka-pro-libovolny-shell-starship/">https://www.root.cz/zpravicky/minimalisticka-a-rychla-prikazova-radka-pro-libovolny-shell-starship/</a>
</li>

<li>Finally, a command line shell for the 90s<br />
<a href="http://fishshell.com/">http://fishshell.com/</a>
</li>

<li>Bourne shell<br />
<a href="https://en.wikipedia.org/wiki/Bourne_shell">https://en.wikipedia.org/wiki/Bourne_shell</a>
</li>

<li>Korn shell<br />
<a href="http://www.kornshell.org/">http://www.kornshell.org/</a>
</li>

<li>Prompt Expansion<br />
<a href="http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html#Prompt-Expansion">http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html#Prompt-Expansion</a>
</li>

<li>PS1 prompt explained for Linux/Unix<br />
<a href="https://www.linuxnix.com/linuxunix-shell-ps1-prompt-explained-in-detail/">https://www.linuxnix.com/linuxunix-shell-ps1-prompt-explained-in-detail/</a>
</li>

<li>Bash $PS1 Generator<u>2.0</u><br />
<a href="https://www.kirsle.net/wizards/ps1.html">https://www.kirsle.net/wizards/ps1.html</a>
</li>

<li>BASH Git Prompt<br />
<a href="https://github.com/magicmonty/bash-git-prompt">https://github.com/magicmonty/bash-git-prompt</a>
</li>

<li>Seznam vybraných Unicode fontů<br />
<a href="https://en.wikipedia.org/wiki/Unicode_font#List_of_Unicode_fonts">https://en.wikipedia.org/wiki/Unicode_font#List_of_Unicode_fonts</a>
</li>

<li>Unix History<br />
<a href="https://www.levenez.com/unix/">https://www.levenez.com/unix/</a>
</li>

<li>C shell<br />
<a href="https://en.wikipedia.org/wiki/C_shell">https://en.wikipedia.org/wiki/C_shell</a>
</li>

<li>tput(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/tput">https://linux.die.net/man/1/tput</a>
</li>

<li>fc-list(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/fc-list">https://linux.die.net/man/1/fc-list</a>
</li>

<li>fc-cache(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/fc-cache">https://linux.die.net/man/1/fc-cache</a>
</li>

<li>fc-query(1) - Linux man page<br />
<a href="https://linux.die.net/man/1/fc-query">https://linux.die.net/man/1/fc-query</a>
</li>

<li>Unicode character recognition<br />
<a href="http://shapecatcher.com/">http://shapecatcher.com/</a>
</li>

<li>Pygments<br />
<a href="https://pygments.org/">https://pygments.org/</a>
</li>

<li>GNU Source-highlight 3.1.8<br />
<a href="https://www.gnu.org/software/src-highlite/">https://www.gnu.org/software/src-highlite/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2020</small></p>
</body>
</html>

