<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">*** 2. </a></p>
<p><a href="#k03">*** 3. Čtení informací ze souborů s&nbsp;formátem TOML</a></p>
<p><a href="#k04">*** 4. Příklady jednoduchých dotazů</a></p>
<p><a href="#k05">*** 5. Čtení informací ze souborů s&nbsp;formátem YAML</a></p>
<p><a href="#k06">*** 6. Příklady jednoduchých dotazů</a></p>
<p><a href="#k07">*** 7. Filtrace na základě nepovinných atributů</a></p>
<p><a href="#k08">*** 8. Export výsledků do jiného formátu</a></p>
<p><a href="#k09">*** 9. Čtení informací ze souborů s&nbsp;formátem XML</a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>



<p><a name="k02"></a></p>
<h2 id="k02">2. </h2>

<pre>
$ <strong>go install -v github.com/tomwright/dasel/v2/cmd/dasel@master</strong>
</pre>

<pre>
go: downloading github.com/tomwright/dasel v1.27.4-0.20230111120636-c9187a46f74e
go: downloading github.com/tomwright/dasel/v2 v2.1.3-0.20230404173316-88bf4414bc0b
go: downloading github.com/spf13/cobra v1.6.1
go: downloading github.com/alecthomas/chroma v0.10.0
go: downloading github.com/clbanning/mxj/v2 v2.5.7
go: downloading golang.org/x/net v0.8.0
go: downloading github.com/dlclark/regexp2 v1.4.0
go: downloading golang.org/x/text v0.8.0
golang.org/x/text/internal/utf8internal
golang.org/x/net/html/atom
golang.org/x/text/encoding/internal/identifier
golang.org/x/text/transform
golang.org/x/text/internal/tag
github.com/tomwright/dasel/v2/internal
github.com/tomwright/dasel/v2
github.com/dlclark/regexp2/syntax
github.com/clbanning/mxj/v2
github.com/spf13/cobra
github.com/pelletier/go-toml
golang.org/x/net/html
golang.org/x/text/internal/language
golang.org/x/text/encoding
golang.org/x/text/encoding/internal
golang.org/x/text/encoding/charmap
golang.org/x/text/encoding/japanese
golang.org/x/text/encoding/korean
github.com/dlclark/regexp2
golang.org/x/text/encoding/simplifiedchinese
golang.org/x/text/encoding/traditionalchinese
golang.org/x/text/runes
golang.org/x/text/encoding/unicode
golang.org/x/text/internal/language/compact
golang.org/x/text/language
github.com/alecthomas/chroma
github.com/alecthomas/chroma/formatters/html
github.com/alecthomas/chroma/lexers/internal
github.com/alecthomas/chroma/formatters/svg
github.com/alecthomas/chroma/styles
github.com/alecthomas/chroma/lexers/a
github.com/alecthomas/chroma/lexers/b
github.com/alecthomas/chroma/formatters
github.com/alecthomas/chroma/lexers/p
github.com/alecthomas/chroma/lexers/j
github.com/alecthomas/chroma/lexers/e
github.com/alecthomas/chroma/lexers/f
github.com/alecthomas/chroma/lexers/i
github.com/alecthomas/chroma/lexers/d
github.com/alecthomas/chroma/lexers/c
github.com/alecthomas/chroma/lexers/k
github.com/alecthomas/chroma/lexers/l
github.com/alecthomas/chroma/lexers/n
github.com/alecthomas/chroma/lexers/o
github.com/alecthomas/chroma/lexers/q
github.com/alecthomas/chroma/lexers/r
github.com/alecthomas/chroma/lexers/t
github.com/alecthomas/chroma/lexers/v
github.com/alecthomas/chroma/lexers/w
github.com/alecthomas/chroma/lexers/x
github.com/alecthomas/chroma/lexers/y
github.com/alecthomas/chroma/lexers/z
github.com/alecthomas/chroma/lexers/h
github.com/alecthomas/chroma/lexers/circular
github.com/alecthomas/chroma/lexers/g
github.com/alecthomas/chroma/lexers/m
github.com/alecthomas/chroma/lexers/s
github.com/alecthomas/chroma/lexers
github.com/alecthomas/chroma/quick
golang.org/x/text/encoding/htmlindex
golang.org/x/net/html/charset
github.com/tomwright/dasel/v2/storage
github.com/tomwright/dasel/v2/internal/command
github.com/tomwright/dasel/v2/cmd/dasel
</pre>

<pre>
$ <strong>whereis -b dasel</strong>
&nbsp;
dasel: /home/ptisnovs/go/bin/dasel
</pre>

<pre>
$ <strong>ls -l -h /home/ptisnovs/go/bin/dasel</strong>
&nbsp;
-rwxrwxr-x 1 ptisnovs ptisnovs 14M Apr  8 08:40 /home/ptisnovs/go/bin/dasel
</pre>



<p><a name="k03"></a></p>
<h2 id="k03">3. Čtení informací ze souborů s&nbsp;formátem TOML</h2>

<pre>
[logging]
debug = true
log_level = "info"
logging_to_cloud_watch_enabled = false

[kafka_broker]
enabled = true
address = "kafka:29092" #provide in deployment env or as secret
security_protocol = "PLAINTEXT"
cert_path = "not-set"
sasl_mechanism = "PLAIN"
sasl_username = "not-used"
sasl_password = "not-used"
topic = "platform.notifications.ingress" #provide in deployment env or as secret
timeout = "60s"
likelihood_threshold = 0
impact_threshold = 0
severity_threshold = 0
total_risk_threshold = 2
event_filter = "totalRisk &gt;= totalRiskThreshold"
tag_filter_enabled = false
tags = []
# valid units are SQL epoch time units: months days hours minutes seconds"
# set to empty string "" or 0 to disable
cooldown = "1 week"

[service_log]
client_id = "a-service-id"
client_secret = "a-secret"
created_by = "service-account-service"
username ="service-username"
token_url = ""
enabled = false
url = "https://api.foobar.com/api/service_logs/v1/"
timeout = "15s"
likelihood_threshold = 0
impact_threshold = 0
severity_threshold = 0
total_risk_threshold = 0
event_filter = "totalRisk &gt;= totalRiskThreshold"
tag_filter_enabled = true
tags = ["osd_customer"]
# valid units are SQL epoch time units: months days hours minutes seconds"
# set to empty string "" or "0" to disable
cooldown = "1 week"

[storage]
db_driver = "postgres"
pg_username = "postgres" #provide in deployment env or as secret
pg_password = "postgres" #provide in deployment env or as secret
pg_host = "localhost" #provide in deployment env or as secret
pg_port = 5432 #provide in deployment env or as secret
pg_db_name = "notification" #provide in deployment env or as secret
pg_params = "sslmode=disable"
log_sql_queries = true
</pre>



<p><a name="k04"></a></p>
<h2 id="k04">4. Příklady jednoduchých dotazů</h2>

<pre>
dasel -f config.toml "."
</pre>

<pre>
</pre>

<pre>
dasel -f config.toml "service_log"
</pre>

<pre>
</pre>

<pre>
dasel -f config.toml "service_log.cooldown"
</pre>

<pre>
</pre>

<pre>
dasel -f config.toml "kafka_broker.address"
</pre>

<pre>
</pre>

<pre>
dasel -f config.toml kafka_broker.address.port
</pre>

<pre>
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. Čtení informací ze souborů s&nbsp;formátem YAML</h2>

<pre>
name: Build and deploy Jekyll site to GitHub Pages
&nbsp;
on:
  push:
    branches:
      - master
&nbsp;
jobs:
  github-pages:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Setup Go
        uses: actions/setup-go@v2
        with:
          go-version: '^1.14.1'
      - name: Generate docgo
        run: make godoc
      - name: Generate Jekyll site
        uses: helaili/jekyll-action@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          jekyll_src: 'docs'
</pre>

<pre>
$ <strong>dasel -f gh-pages.yml '.'</strong>
&nbsp;
jobs:
  github-pages:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Setup Go
      uses: actions/setup-go@v2
      with:
        go-version: ^1.14.1
    - name: Generate docgo
      run: make godoc
    - name: Generate Jekyll site
      uses: helaili/jekyll-action@v2
      with:
        jekyll_src: docs
        token: ${{ secrets.GITHUB_TOKEN }}
name: Build and deploy Jekyll site to GitHub Pages
"true":
  push:
    branches:
    - master
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. Příklady jednoduchých dotazů</h2>

<pre>
$ <strong>dasel -f gh-pages.yml ".jobs.github-pages.steps"</strong>
&nbsp;
- name: Checkout
  uses: actions/checkout@v2
- name: Setup Go
  uses: actions/setup-go@v2
  with:
    go-version: ^1.14.1
- name: Generate docgo
  run: make godoc
- name: Generate Jekyll site
  uses: helaili/jekyll-action@v2
  with:
    jekyll_src: docs
    token: ${{ secrets.GITHUB_TOKEN }}
</pre>

<pre>
$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps.all().name'</strong>
&nbsp;
Checkout
Setup Go
Generate docgo
Generate Jekyll site
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Filtrace na základě nepovinných atributů</h2>


$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps.all().uses' -w json</strong>

$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps.all().uses?' -w json</strong>

"actions/checkout@v2"
"actions/setup-go@v2"
"helaili/jekyll-action@v2"

$ dasel -f config.toml '.all().cooldown?'
1 week
1 week



<p><a name="k08"></a></p>
<h2 id="k08">8. Export výsledků do jiného formátu</h2>

<pre>
$ <strong>dasel -f gh-pages.yml -w json</strong>
&nbsp;
{
  "jobs": {
    "github-pages": {
      "runs-on": "ubuntu-latest",
      "steps": [
        {
          "name": "Checkout",
          "uses": "actions/checkout@v2"
        },
        {
          "name": "Setup Go",
          "uses": "actions/setup-go@v2",
          "with": {
            "go-version": "^1.14.1"
          }
        },
        {
          "name": "Generate docgo",
          "run": "make godoc"
        },
        {
          "name": "Generate Jekyll site",
          "uses": "helaili/jekyll-action@v2",
          "with": {
            "jekyll_src": "docs",
            "token": "${{ secrets.GITHUB_TOKEN }}"
          }
        }
      ]
    }
  },
  "name": "Build and deploy Jekyll site to GitHub Pages",
  "true": {
    "push": {
      "branches": [
        "master"
      ]
    }
  }
}
</pre>

$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps' -w json</strong>

[
  {
    "name": "Checkout",
    "uses": "actions/checkout@v2"
  },
  {
    "name": "Setup Go",
    "uses": "actions/setup-go@v2",
    "with": {
      "go-version": "^1.14.1"
    }
  },
  {
    "name": "Generate docgo",
    "run": "make godoc"
  },
  {
    "name": "Generate Jekyll site",
    "uses": "helaili/jekyll-action@v2",
    "with": {
      "jekyll_src": "docs",
      "token": "${{ secrets.GITHUB_TOKEN }}"
    }
  }
]

$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps.all()' -w json</strong>
{
  "name": "Checkout",
  "uses": "actions/checkout@v2"
}
{
  "name": "Setup Go",
  "uses": "actions/setup-go@v2",
  "with": {
    "go-version": "^1.14.1"
  }
}
{
  "name": "Generate docgo",
  "run": "make godoc"
}
{
  "name": "Generate Jekyll site",
  "uses": "helaili/jekyll-action@v2",
  "with": {
    "jekyll_src": "docs",
    "token": "${{ secrets.GITHUB_TOKEN }}"
  }
}

$ <strong>dasel -f gh-pages.yml '.jobs.github-pages.steps.all().name' -w json</strong>

"Checkout"
"Setup Go"
"Generate docgo"
"Generate Jekyll site"

dasel -f config.toml '.all()' -w json
{
  "client_id": "a-service-id",
  "client_secret": "a-secret",
  "cooldown": "1 week",
  "created_by": "service-account-service",
  "enabled": false,
  "event_filter": "totalRisk >= totalRiskThreshold",
  "impact_threshold": 0,
  "likelihood_threshold": 0,
  "severity_threshold": 0,
  "tag_filter_enabled": true,
  "tags": [
    "osd_customer"
  ],
  "timeout": "15s",
  "token_url": "",
  "total_risk_threshold": 0,
  "url": "https://api.foobar.com/api/service_logs/v1/",
  "username": "service-username"
}
{
  "db_driver": "postgres",
  "log_sql_queries": true,
  "pg_db_name": "notification",
  "pg_host": "localhost",
  "pg_params": "sslmode=disable",
  "pg_password": "postgres",
  "pg_port": 5432,
  "pg_username": "postgres"
}
{
  "debug": true,
  "log_level": "info",
  "logging_to_cloud_watch_enabled": false
}
{
  "address": "kafka:29092",
  "cert_path": "not-set",
  "cooldown": "1 week",
  "enabled": true,
  "event_filter": "totalRisk >= totalRiskThreshold",
  "impact_threshold": 0,
  "likelihood_threshold": 0,
  "sasl_mechanism": "PLAIN",
  "sasl_password": "not-used",
  "sasl_username": "not-used",
  "security_protocol": "PLAINTEXT",
  "severity_threshold": 0,
  "tag_filter_enabled": false,
  "tags": [],
  "timeout": "60s",
  "topic": "platform.notifications.ingress",
  "total_risk_threshold": 2
}



<p><a name="k09"></a></p>
<h2 id="k09">9. Čtení informací ze souborů s&nbsp;formátem XML</h2>

<pre>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<database name="notification" schema="public" type="PostgreSQL - 9.6.10">
   <sequences>
      <sequence increment="1" name="read_errors_error_id_seq" startValue="1"/>
   </sequences>
   <tables>
      <table name="event_targets" numRows="2" remarks="specification of all event targets currently supported" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="id" nullable="false" remarks="" size="10" type="int4" typeCode="4">
            <child column="event_type_id" foreignKey="reported_event_type_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reported"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="name" nullable="false" remarks="" size="2147483647" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="metainfo" nullable="false" remarks="" size="2147483647" type="varchar" typeCode="12"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="event_targets_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="event_targets_metainfo_key" unique="true">
            <column ascending="true" name="metainfo"/>
         </index>
         <index name="event_targets_name_key" unique="true">
            <column ascending="true" name="name"/>
         </index>
      </table>
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Comma-Separated Values<br />
<a href="https://en.wikipedia.org/wiki/Comma-separated_values">https://en.wikipedia.org/wiki/Comma-separated_values</a>
</li>

<li>Tab-Separated Values<br />
<a href="https://en.wikipedia.org/wiki/Tab-separated_values">https://en.wikipedia.org/wiki/Tab-separated_values</a>
</li>

<li>Delimiter-separated values<br />
<a href="https://en.wikipedia.org/wiki/Delimiter-separated_values">https://en.wikipedia.org/wiki/Delimiter-separated_values</a>
</li>

<li>q - Run SQL directly on CSV or TSV files<br />
<a href="https://harelba.github.io/q/">https://harelba.github.io/q/</a>
</li>

<li>q - examples<br />
<a href="https://harelba.github.io/q/#examples">https://harelba.github.io/q/#examples</a>
</li>

<li>Repositář projektu q (GitHub)<br />
<a href="https://github.com/harelba/q">https://github.com/harelba/q</a>
</li>

<li>How to run SQL queries directly on CSV or TSV file<br />
<a href="https://computingforgeeks.com/run-sql-queries-directly-on-csv-files/">https://computingforgeeks.com/run-sql-queries-directly-on-csv-files/</a>
</li>

<li>Tab separated values<br />
<a href="https://datatables.net/extensions/buttons/examples/flash/tsv.html">https://datatables.net/extensions/buttons/examples/flash/tsv.html</a>
</li>

<li>csvkit 1.0.5 (dokumentace)<br />
<a href="https://csvkit.readthedocs.io/en/latest/#">https://csvkit.readthedocs.io/en/latest/#</a>
</li>

<li>Repositář projektu csvkit (GitHub)<br />
<a href="https://github.com/wireservice/csvkit">https://github.com/wireservice/csvkit</a>
</li>

<li>Příklad CSV schématu<br />
<a href="https://github.com/wireservice/ffs/blob/master/us/irs/irs_exempt_org_schema.csv">https://github.com/wireservice/ffs/blob/master/us/irs/irs_exempt_org_schema.csv</a>
</li>

<li>Repositář projektu jq (GitHub)<br />
<a href="https://github.com/stedolan/jq">https://github.com/stedolan/jq</a>
</li>

<li>GitHub stránky projektu jq<br />
<a href="https://stedolan.github.io/jq/">https://stedolan.github.io/jq/</a>
</li>

<li>5 modern alternatives to essential Linux command-line tools<br />
<a href="https://opensource.com/article/20/6/modern-linux-command-line-tools">https://opensource.com/article/20/6/modern-linux-command-line-tools</a>
</li>

<li>Návod k&nbsp;nástroji jq<br />
<a href="https://stedolan.github.io/jq/tutorial/">https://stedolan.github.io/jq/tutorial/</a>
</li>

<li>jq Manual (development version)<br />
<a href="https://stedolan.github.io/jq/manual/">https://stedolan.github.io/jq/manual/</a>
</li>

<li>Introducing JSON<br />
<a href="https://www.json.org/json-en.html">https://www.json.org/json-en.html</a>
</li>

<li>jq.py: a lightweight and flexible JSON processor<br />
<a href="https://github.com/mwilliamson/jq.py">https://github.com/mwilliamson/jq.py</a>
</li>

<li>Discover how to use jq, a JSON manipulation command line, with GeoJSON<br />
<a href="https://webgeodatavore.com/jq-json-manipulation-command-line-with-geojson.html">https://webgeodatavore.com/jq-json-manipulation-command-line-with-geojson.html</a>
</li>

<li>Reshaping JSON with jq<br />
<a href="https://programminghistorian.org/en/lessons/json-and-jq">https://programminghistorian.org/en/lessons/json-and-jq</a>
</li>

<li>Python bindings for jq<br />
<a href="https://pypi.org/project/jq/">https://pypi.org/project/jq/</a>
</li>

<li>edn<br />
<a href="https://github.com/edn-format/edn">https://github.com/edn-format/edn</a>
</li>

<li>Why use JSON over XML?<br />
<a href="https://www.sitepoint.com/json-vs-xml/">https://www.sitepoint.com/json-vs-xml/</a>
</li>

<li>XML and XPath<br />
<a href="https://www.w3schools.com/XML/xml_xpath.asp">https://www.w3schools.com/XML/xml_xpath.asp</a>
</li>

<li>XPath (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/XPath">https://en.wikipedia.org/wiki/XPath</a>
</li>

<li>RFC7159<br />
<a href="https://www.ietf.org/rfc/rfc7159.txt">https://www.ietf.org/rfc/rfc7159.txt</a>
</li>

<li>The Art of Unix Programming - DSV Style<br />
<a href="https://www.linuxtopia.org/online_books/programming_books/art_of_unix_programming/ch05s02.html">https://www.linuxtopia.org/online_books/programming_books/art_of_unix_programming/ch05s02.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2023</small></p>
</body>
</html>

