<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Programovací jazyky a knihovny určené pro výuku základů počítačové grafiky: práce s bitmapami a TrueType fonty</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Programovací jazyky a knihovny určené pro výuku základů počítačové grafiky: práce s bitmapami a TrueType fonty</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V&nbsp;dnešní části seriálu, v&nbsp;němž se věnujeme programovacím jazykům a taktéž knihovnám, které mohou být použity pro výuku programování i základů počítačové grafiky, se seznámíme s&nbsp;některými dalšími možnostmi, které lze využít při kopírování a vykreslování rastrových obrázků. S&nbsp;problematikou vykreslování bitmap v&nbsp;knihovně <i>Pygame</i> úzce souvisí i práce s&nbsp;písmem a fonty, což je taktéž téma, kterému se dnes budeme věnovat.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Programovací jazyky a knihovny určené pro výuku základů počítačové grafiky: práce s bitmapami a TrueType fonty</a></p>
<p><a href="#k02">2. Konverze objektů typu Surface do takzvaného kompatibilního formátu</a></p>
<p><a href="#k03">3. Zachování alfa kanálu při konverzi objektů typu Surface</a></p>
<p><a href="#k04">4. Rastrové operace prováděné v&nbsp;průběhu BitBLT (Blit)</a></p>
<p><a href="#k05">5. Vyžití TrueType fontů v&nbsp;knihovně Pygame</a></p>
<p><a href="#k06">6. Vykreslení textu vybraným fontem do samostatné bitmapy</a></p>
<p><a href="#k07">7. Ukázka vlivu použití antialiasingu na kvalitu vykresleného textu</a></p>
<p><a href="#k08">8. Pozadí textu: využití průhlednosti či vybrané konstantní barvy</a></p>
<p><a href="#k09">9. Obsah další části seriálu</a></p>
<p><a href="#k10">10. Repositář se zdrojovými kódy dnešních demonstračních příkladů</a></p>
<p><a href="#k11">11. Funkce použité v&nbsp;dnešních demonstračních příkladech</a></p>
<p><a href="#k12">12. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Programovací jazyky a knihovny určené pro výuku základů počítačové grafiky: práce s bitmapami a TrueType fonty</h2>

<p>Jednou z&nbsp;nejdůležitějších operací, kterou knihovna <i>Pygame</i> svým uživatelům nabízí, je <a href="http://mojefedora.cz/programovaci-jazyky-a-knihovny-urcene-pro-vyuku-zakladu-pocitacove-grafiky-knihovna-pygame-prakticky/">minule popsaná</a> operace typu <i>BitBLT</i> neboli též <i>blit</i>. Aby bylo možné tuto operaci provádět co nejrychleji, je nutné, aby zdrojové bitmapy používaly stejný formát uložení pixelů, jako bitmapy cílové, což je téma, kterému se budeme věnovat ve <a href="#k02">druhé</a> a taktéž ve <a href="#k03">třetí</a> kapitole. V&nbsp;kapitole <a href="#04">čtvrté</a> se zmíníme o rastrových operacích (raster ops, rops) aplikovaných při kopírování bitmap a <a href="#k05">v&nbsp;navazujících kapitolách</a> se již budeme zabývat další důležitou součástí knihovny <i>Pygame</i> &ndash; podporou pro TrueType fonty.</p>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/101.png"><img class="alignnone size-medium wp-image-6215" src="http://mojefedora.cz/wp-content/uploads/2015/12/101.png" alt="10" width="96" height="96" /></a>
<p><i>Obrázek 1: Tento rastrový obrázek bude použit (podobně jako minule) ve všech demonstračních příkladech, v&nbsp;nichž bude použita funkce blit().</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Konverze objektů typu Surface do takzvaného kompatibilního formátu</h2>

<p>Při frekventovaném vykreslování mnoha bitmap do herní scény poměrně rychle zjistíme, že se v&nbsp;herním algoritmu vyskytl jeden dosti závažný problém: vykreslování bude pomalé ve chvíli, kdy formát uložení hodnot (barev) pixelů ve framebufferu (resp.&nbsp;přesněji řečeno v&nbsp;zadním bufferu) je odlišný od formátu uložení pixelů v&nbsp;načtených bitmapách. Ostatně stačí si vzpomenout na jeden z&nbsp;demonstračních příkladů, který jsme si popsali v&nbsp;předchozí části tohoto seriálu. V&nbsp;tomto příkladu se po jeho spuštění zjistily informace o použitém grafickém režimu; mezi tyto informace samozřejmě patří i způsob uložení hodnot (barev) pixelů v&nbsp;bufferu. Informace zjištěné o aktuálně nastaveném grafickém režimu vypadaly takto:</p>

<pre>
Desktop resolution:   1280 x 1024 pixels
Video memory size:  2560 MB
bits per pixel:       16
bytes per pixel:      2
windowed mode:        yes

HW acceleration:      yes
HW blitting:          no
HW colorkey blitting: no
HW alpha blitting:    no

SW blitting:          no
SW colorkey blitting: no
SW alpha blitting:    no

Masks:                (63488, 2016, 31, 0)
Shifts:               (11, 5, 0, 0)
Losses:               (3, 2, 3, 8)
</pre>

<p>Ve chvíli, kdy načtené bitmapy mají odlišný formát uložení pixelů (což je v&nbsp;praxi více než pravděpodobné), bude muset knihovna <i>Pygame</i> při <strong>každém</strong> vykreslení takové bitmapy aplikovat konverzní funkci pro každý vykreslovaný pixel, což je samozřejmě časově náročné. Řešení tohoto problému je však velmi jednoduché &ndash; bitmapy je možné ihned po jejich načtení jednorázově konvertovat do formátu kompatibilního s&nbsp;bufferem:</p>

<pre>
<i># Načtení bitmapy a její okamžitá konverze do formátu kompatibilního s framebufferem</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert())
</pre>

<p>A právě způsob konverze bitmapy do formátu kompatibilního s&nbsp;framebufferem je ukázána v&nbsp;dnešním <a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame12.py">prvním demonstračním příkladu</a>:</p>

<pre>
<i>#!/usr/bin/python</i>
<i># vim: set fileencoding=utf-8</i>

<i># Demonstrační příklady využívající knihovnu Pygame</i>

<i># Příklad číslo 12: konverze objektů typu Surface.</i>


<strong>import</strong> pygame, sys, os, math

<i># Nutno importovat kvůli konstantám QUIT atd.</i>
<strong>from</strong> pygame.locals <strong>import</strong> *

<i># Velikost okna aplikace</i>
WIDTH = 320
HEIGHT = 240

<i># Inicializace knihovny Pygame</i>
pygame.init()

clock = pygame.time.Clock()

<i># Vytvoření okna pro vykreslování</i>
display = pygame.display.set_mode([WIDTH, HEIGHT])

<i># Nastavení titulku okna</i>
pygame.display.set_caption('Pygame test #12')

<i># Konstanty s n-ticemi představujícími základní barvy</i>
BLACK   = (  0,   0,   0)
BLUE    = (  0,   0, 255)
CYAN    = (  0, 255, 255)
GREEN   = (  0, 255,   0)
YELLOW  = (255, 255,   0)
RED     = (255,   0,   0)
MAGENTA = (255,   0, 255)
WHITE   = (255, 255, 255)

<i># Vyplnění plochy okna černou barvou</i>
display.fill(BLACK)

<i># Vykreslení čar různou barvou</i>
pygame.draw.line(display, BLUE,    (10, 10), (160, 10))
pygame.draw.line(display, CYAN,    (10, 20), (160, 20))
pygame.draw.line(display, GREEN,   (10, 30), (160, 30))
pygame.draw.line(display, YELLOW,  (10, 40), (160, 40))
pygame.draw.line(display, RED,     (10, 50), (160, 50))
pygame.draw.line(display, MAGENTA, (10, 60), (160, 60))

<i># Vykreslení čar s různým sklonem</i>
<strong>for</strong> i <strong>in</strong> range(1,90,5):
    <i># převod ze stupňů na radiány</i>
    angle = math.radians(i)
    radius = 150
    <i># výpočet koncových bodů úseček</i>
    x = radius * math.sin(math.radians(i))
    y = radius * math.cos(math.radians(i))

    <strong>if</strong> display.get_bitsize() &gt;= 24:
        <i># vykreslení jedné antialiasované úsečky, blend je nastaveno na True</i>
        pygame.draw.aaline(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y), True)
    <strong>else:</strong>
        <i># vykreslení jedné úsečky</i>
        pygame.draw.line(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y))

<i># Vykreslení čar různou šířkou</i>
<strong>for</strong> i <strong>in</strong> range(1,10):
    pygame.draw.line(display, WHITE, (10 + i*15, 90), (10 + i*15, 230), i)

<i># Načtení bitmapy a její okamžitá konverze do formátu kompatibilního s framebufferem</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert())

<i># Výpočet souřadnic pro umístění obrázku přesně doprostřed okna</i>
center_x = (display.get_width() - image_surface.get_width()) / 2
center_y = (display.get_height() - image_surface.get_height()) / 2

<i># Vykreslení obrázku</i>
display.blit(image_surface, (center_x, center_y))


<i># Hlavní herní smyčka</i>
<strong>while</strong> True:
    <i># Načtení a zpracování všech událostí z fronty</i>
    <strong>for</strong> event <strong>in</strong> pygame.event.get():
        <strong>if</strong> event.type == QUIT:
            pygame.quit()
            sys.exit()
        <strong>if</strong> event.type == KEYDOWN <strong>and</strong> event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    clock.tick(20)

<i># finito</i>
</pre>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/011.png"><img class="alignnone size-full wp-image-6236" src="http://mojefedora.cz/wp-content/uploads/2015/12/011.png" alt="01" width="320" height="240" /></a>
<p><i>Obrázek 2: Obrazovka prvního demonstračního příkladu. Povšimněte si toho, že při konverzi bitmapy muselo dojít ke ztrátě informací uložených v&nbsp;alfa kanálu, protože celá bitmapa (planeta i její pozadí) je zcela neprůhledná.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Zachování alfa kanálu při konverzi objektů typu Surface</h2>

<p>Pokud se podíváme na obrázek číslo 2 zobrazený před začátkem této kapitoly, ihned zjistíme, že konverze bitmapy do formátu kompatibilního s&nbsp;framebufferem nedopadla zcela korektně, a to z&nbsp;toho důvodu, že se ztratily informace o alfa kanálu. Ve zdrojové bitmapě totiž bylo pozadí planety průhledné, ovšem při konverzi došlo ke ztrátě této mnohdy velmi důležité informace. Tento problém je snadno řešitelný, pouze je nutné původní programový kód:</p>

<pre>
<i># Načtení bitmapy a její okamžitá konverze do formátu kompatibilního s framebufferem</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert())
</pre>

<p>nahradit za:</p>

<pre>
<i># Načtení bitmapy a její okamžitá konverze do formátu kompatibilního s framebufferem</i>
<i># Při konverzi se zachová i alfa kanál</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert_alpha())
</pre>

<p>V&nbsp;závislosti na tom, jaký formát má zdrojová bitmapa a jaký je formát framebufferu může dojít ke třem typům konverzí:</p>

<ul>
<li>Ve výsledné bitmapě bude plnohodnotný osmibitový alfa kanál (použito u 24bpp a 32bpp).</li>
<li>Ve výsledné bitmapě bude jeden bit rezervovaný pro uložení informace o průhlednosti (použito u 15bpp a 16bpp).</li>
<li>Ve výsledné bitmapě bude jeden index barvy rezervovaný pro uložení informace o průhlednosti (použito u 8bpp).</li>
</ul>

<p>V&nbsp;dnešním <a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame13.py">druhém demonstračním příkladu</a> je problém zachování alfa kanálu vyřešen:</p>

<pre>
<i>#!/usr/bin/python</i>
<i># vim: set fileencoding=utf-8</i>

<i># Demonstrační příklady využívající knihovnu Pygame</i>

<i># Příklad číslo 13: konverze objektů typu Surface.</i>
<i>#                   Zachování alfa kanálu.</i>


<strong>import</strong> pygame, sys, os, math

<i># Nutno importovat kvůli konstantám QUIT atd.</i>
<strong>from</strong> pygame.locals <strong>import</strong> *

<i># Velikost okna aplikace</i>
WIDTH = 320
HEIGHT = 240

<i># Inicializace knihovny Pygame </i>
pygame.init()

clock = pygame.time.Clock()

<i># Vytvoření okna pro vykreslování</i>
display = pygame.display.set_mode([WIDTH, HEIGHT])

<i># Nastavení titulku okna</i>
pygame.display.set_caption('Pygame test #13')

<i># Konstanty s n-ticemi představujícími základní barvy</i>
BLACK   = (  0,   0,   0)
BLUE    = (  0,   0, 255)
CYAN    = (  0, 255, 255)
GREEN   = (  0, 255,   0)
YELLOW  = (255, 255,   0)
RED     = (255,   0,   0)
MAGENTA = (255,   0, 255)
WHITE   = (255, 255, 255)

<i># Vyplnění plochy okna černou barvou</i>
display.fill(BLACK)

<i># Vykreslení čar různou barvou</i>
pygame.draw.line(display, BLUE,    (10, 10), (160, 10))
pygame.draw.line(display, CYAN,    (10, 20), (160, 20))
pygame.draw.line(display, GREEN,   (10, 30), (160, 30))
pygame.draw.line(display, YELLOW,  (10, 40), (160, 40))
pygame.draw.line(display, RED,     (10, 50), (160, 50))
pygame.draw.line(display, MAGENTA, (10, 60), (160, 60))

<i># Vykreslení čar s různým sklonem</i>
<strong>for</strong> i <strong>in</strong> range(1,90,5):
    <i># převod ze stupňů na radiány</i>
    angle = math.radians(i)
    radius = 150
    <i># výpočet koncových bodů úseček</i>
    x = radius * math.sin(math.radians(i))
    y = radius * math.cos(math.radians(i))

    <strong>if</strong> display.get_bitsize() &gt;= 24:
        <i># vykreslení jedné antialiasované úsečky, blend je nastaveno na True</i>
        pygame.draw.aaline(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y), True)
    <strong>else:</strong>
        <i># vykreslení jedné úsečky</i>
        pygame.draw.line(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y))

<i># Vykreslení čar různou šířkou</i>
<strong>for</strong> i <strong>in</strong> range(1,10):
    pygame.draw.line(display, WHITE, (10 + i*15, 90), (10 + i*15, 230), i)

<i># Načtení bitmapy a její okamžitá konverze do formátu kompatibilního s framebufferem</i>
<i># Při konverzi se zachová i alfa kanál</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert_alpha())

<i># Výpočet souřadnic pro umístění obrázku přesně doprostřed okna</i>
center_x = (display.get_width() - image_surface.get_width()) / 2
center_y = (display.get_height() - image_surface.get_height()) / 2

<i># Vykreslení obrázku</i>
display.blit(image_surface, (center_x, center_y))


<i># Hlavní herní smyčka</i>
<strong>while</strong> True:
    <i># Načtení a zpracování všech událostí z fronty</i>
    <strong>for</strong> event <strong>in</strong> pygame.event.get():
        <strong>if</strong> event.type == QUIT:
            pygame.quit()
            sys.exit()
        <strong>if</strong> event.type == KEYDOWN <strong>and</strong> event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    clock.tick(20)

<i># finito</i>
</pre>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/021.png"><img class="alignnone size-medium wp-image-6237" src="http://mojefedora.cz/wp-content/uploads/2015/12/021.png" alt="02" width="320" height="240" /></a>
<p><i>Obrázek 3: Obrazovka prvního demonstračního příkladu. Zde je již zobrazení korektní, protože se informace uložené v&nbsp;alfa kanálu zdrojové bitmapy při konverzi zachovaly..</i></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Rastrové operace prováděné v&nbsp;průběhu BitBLT (Blit)</h2>

<p>Operace <i>BitBLT (blit)</i>, jejímž popisem jsme se zabývali <a href="http://mojefedora.cz/programovaci-jazyky-a-knihovny-urcene-pro-vyuku-zakladu-pocitacove-grafiky-knihovna-pygame-prakticky/">v&nbsp;předchozí části tohoto seriálu</a>, je většinou používána &bdquo;pouze&ldquo; pro kopii obsahu jedné bitmapy do bitmapy druhé. Ve skutečnosti jsou však možnosti této operace větší, a to z&nbsp;toho důvodu, že při přesunu jednotlivých pixelů je možné provádět takzvané &bdquo;rastrové operace&ldquo;, které jsou někdy zkráceně nazývány <i>Raster Op</i>, <i>Raster Ops</i> či dokonce jen <i>ROPS</i>. V&nbsp;minulosti byly tyto operace implementovány logickými funkcemi, ovšem v&nbsp;knihovně <i>Pygame</i> se setkáme spíše s&nbsp;funkcemi využívajícími alfa kanál či barvové složky jednotlivých pixelů. Všechny verze knihovny <i>Pygame</i> podporují tyto operace: BLEND_ADD, BLEND_SUB, BLEND_MULT, BLEND_MIN, BLEND_MAX. Od verze 1.8.1 jsou pak dostupné i složitější operace: BLEND_RGBA_ADD, BLEND_RGBA_SUB, BLEND_RGBA_MULT, BLEND_RGBA_MIN, BLEND_RGBA_MAX BLEND_RGB_ADD, BLEND_RGB_SUB, BLEND_RGB_MULT, BLEND_RGB_MIN a BLEND_RGB_MAX.</p>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/14.png"><img class="alignnone size-medium wp-image-6219" src="http://mojefedora.cz/wp-content/uploads/2015/12/14-450x369.png" alt="14" width="450" height="369" /></a>
<p><i>Obrázek 4: Příklad použití rastrové operace BLEND_ADD. Zajímavé je, že bitmapa je vykreslena <strong>až</strong> po vykreslení všech úseček a přesto úsečky přes bitmapu prosvítají.</i></p>

<p>V&nbsp;následujícím demonstračním příkladu je do framebufferu vykreslena jedna a tatáž bitmapa, ovšem pokaždé s&nbsp;použitím odlišné rastrové operace. Povšimněte si, že specifikace požadované rastrové operace se provádí přes nepovinný parametr <strong>special_flags</strong>:</p>

<pre>
<i># Vykreslení obrázku, použití různých operací při vykreslování</i>
display.blit(image_surface, ( 25,  25), special_flags = BLEND_ADD)
display.blit(image_surface, (125,  25), special_flags = BLEND_SUB)
display.blit(image_surface, (225,  25), special_flags = BLEND_MULT)
display.blit(image_surface, ( 25, 125), special_flags = BLEND_MIN)
display.blit(image_surface, (125, 125), special_flags = BLEND_MAX)
</pre>

<p>Následuje úplný zdrojový kód tohoto příkladu:</p>

<pre>
<i>#!/usr/bin/python</i>
<i># vim: set fileencoding=utf-8</i>

<i># Demonstrační příklady využívající knihovnu Pygame</i>

<i># Příklad číslo 14: konverze objektů typu Surface.</i>
<i>#                   Operace s alfa kanálem.</i>


<strong>import</strong> pygame, sys, os, math

<i># Nutno importovat kvůli konstantám QUIT atd.</i>
<strong>from</strong> pygame.locals <strong>import</strong> *

<i># Velikost okna aplikace</i>
WIDTH = 320
HEIGHT = 240

<i># Inicializace knihovny Pygame </i>
pygame.init()

clock = pygame.time.Clock()

<i># Vytvoření okna pro vykreslování</i>
display = pygame.display.set_mode([WIDTH, HEIGHT])

<i># Nastavení titulku okna</i>
pygame.display.set_caption('Pygame test #14')

<i># Konstanty s n-ticemi představujícími základní barvy</i>
BLACK   = (  0,   0,   0)
BLUE    = (  0,   0, 255)
CYAN    = (  0, 255, 255)
GREEN   = (  0, 255,   0)
YELLOW  = (255, 255,   0)
RED     = (255,   0,   0)
MAGENTA = (255,   0, 255)
WHITE   = (255, 255, 255)

<i># Vyplnění plochy okna černou barvou</i>
display.fill(BLACK)

<i># Vykreslení čar různou barvou</i>
pygame.draw.line(display, BLUE,    (10, 10), (160, 10))
pygame.draw.line(display, CYAN,    (10, 20), (160, 20))
pygame.draw.line(display, GREEN,   (10, 30), (160, 30))
pygame.draw.line(display, YELLOW,  (10, 40), (160, 40))
pygame.draw.line(display, RED,     (10, 50), (160, 50))
pygame.draw.line(display, MAGENTA, (10, 60), (160, 60))

<i># Vykreslení čar s různým sklonem</i>
<strong>for</strong> i <strong>in</strong> range(1,90,5):
    <i># převod ze stupňů na radiány</i>
    angle = math.radians(i)
    radius = 150
    <i># výpočet koncových bodů úseček</i>
    x = radius * math.sin(math.radians(i))
    y = radius * math.cos(math.radians(i))

    <strong>if</strong> display.get_bitsize() &gt;= 24:
        <i># vykreslení jedné antialiasované úsečky, blend je nastaveno na True</i>
        pygame.draw.aaline(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y), True)
    <strong>else:</strong>
        <i># vykreslení jedné úsečky</i>
        pygame.draw.line(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y))

<i># Vykreslení čar různou šířkou</i>
<strong>for</strong> i <strong>in</strong> range(1,12):
    pygame.draw.line(display, WHITE, (10 + i*15, 90), (10 + i*15, 230), i)


<i># Načtení a konverze obrázku</i>
image_surface = (pygame.image.load(os.path.join('images', 'gnome-globe.png')).convert_alpha())

<i># Vykreslení obrázku, použití různých operací při vykreslování</i>
display.blit(image_surface, ( 25,  25), special_flags = BLEND_ADD)
display.blit(image_surface, (125,  25), special_flags = BLEND_SUB)
display.blit(image_surface, (225,  25), special_flags = BLEND_MULT)
display.blit(image_surface, ( 25, 125), special_flags = BLEND_MIN)
display.blit(image_surface, (125, 125), special_flags = BLEND_MAX)
display.blit(image_surface, (225, 125))


<i># Hlavní herní smyčka</i>
<strong>while</strong> True:
    <i># Načtení a zpracování všech událostí z fronty</i>
    <strong>for</strong> event <strong>in</strong> pygame.event.get():
        <strong>if</strong> event.type == QUIT:
            pygame.quit()
            sys.exit()
        <strong>if</strong> event.type == KEYDOWN <strong>and</strong> event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    clock.tick(20)

<i># finito</i>
</pre>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/13.png"><img class="alignnone size-full wp-image-6218" src="http://mojefedora.cz/wp-content/uploads/2015/12/13.png" alt="13" width="320" height="240" /></a>
<p><i>Obrázek 5: Výsledek běhu předchozího demonstračního příkladu.</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Vyžití TrueType fontů v&nbsp;knihovně Pygame</h2>

<p>Při programování grafických aplikací a samozřejmě i při vytváření počítačových her se v&nbsp;naprosté většině případů setkáme s&nbsp;nutností vykreslit na obrazovku nějaký text, ať již se jedná o pouhý titulek hry, zobrazení dosaženého skóre či o součást grafického uživatelského rozhraní aplikace (hlavní menu, nápověda atd.). V&nbsp;knihovně <i>Pygame</i> samozřejmě existuje podpora pro vykreslování znaků i delších textů, přičemž veškerá funkcionalita je ve skutečnosti zajištěna nativní knihovnou nazvanou <strong>SDL_ttf</strong> verze 1.2 či 2.0, která navíc při své činnosti využívá další nativní knihovnu pojmenovanou <strong>(lib)FreeType</strong> (<a href="http://www.freetype.org/">http://www.freetype.org/</a>) určenou pro práci s&nbsp;TrueType fonty. V&nbsp;praxi to znamená, že i když se pro vykreslování používá jiný driver než SDL, tak při práci s&nbsp;fonty by měla být knihovna <strong>SDL_ttf</strong> přítomná (alternativně lze použít knihovnu nazvanou <strong>pygame.freetype</strong>, která je vybrána automaticky ve chvíli, kdy <strong>SDL_ttf</strong> není v&nbsp;systému nalezena.</p>

<p>Jak jsme si již řekli v&nbsp;předchozím odstavci, dokáže knihovna <i>Pygame</i> pracovat s&nbsp;fonty typu TTF (True Type Font), v&nbsp;nichž jsou tvary jednotlivých znaků uloženy ve formě obrysů složených ze sekvence na sebe navazujících úseček a kvadratických Bézierových křivek. Ve skutečnosti se však v&nbsp;naprosté většině případů programátoři nemusí zabývat přesným algoritmem vykreslování jednotlivých znaků, což je ostatně dosti komplikované, především při menších velikostech znaků a použití  takzvaného hintingu. Díky modulům nabízených knihovnou <i>Pygame</i> je možné jednoduše načíst vybraný soubor typu TTF s&nbsp;uvedením velikosti výsledného písma. Knihovna <i>Pygame</i> se s&nbsp;využitím nativních částí <i>SDL_ttf</i> a <i>FreeType</i> sama postará o takzvanou <i>rasterizaci</i> jednotlivých znaků, tj.&nbsp;o vykreslení a vyplnění již zmíněných úseček a Bézierových křivek představujících obrysy znaků obsažených v&nbsp;textu, který se má zobrazit. Základem při práci s&nbsp;písmy je třída <strong>pygame.font.Font</strong>. Inicializace písma se provede následujícím způsobem:</p>

<pre>
<i># Načtení fontu (zadává se soubor se jménem fontu a požadovaná velikost písma</i>
font = pygame.font.Font("fonts/FreeSans.ttf", 40)
</pre>

<p>Následně je možné využít instanci třídy <strong>pygame.font.Font</strong> pro vykreslení řetězce do samostatné automaticky vytvořené bitmapy (Surface), se kterou je možné pracovat jako s&nbsp;každou jinou bitmapou. Velikost bitmapy je vypočtena na základě tvaru znaků v&nbsp;použitém fontu, zadané velikosti textu a samozřejmě i na základě toho, jaký text se má vykreslit. Samotné vykreslení, tj.&nbsp;již výše zmíněná &bdquo;rasterizace&ldquo; je provedena metodou <strong>pygame.font.Font.render()</strong>, vykreslení pak zajišťuje nám již dobře známá metoda <strong>pygame.Surface.blit()</strong>:</p>

<pre>
<i># Vytvoření obrázku s vykresleným textem</i>
<i># - první parametr obsahuje řetězec, který se má vykreslit</i>
<i># - druhý parametr řídí použití antialiasingu</i>
<i># - třetí parametr volí barvu fontu</i>
font_surface = font.render("mojefedora.cz", False, WHITE)

<i># Vykreslení obrázku s nápisem do bufferu</i>
display.blit(font_surface, ( 25,  125))
</pre>

<p>Pro běh dále popsaných demonstračních příkladů je taktéž nutné mít v&nbsp;pracovním adresáři vytvořený podadresář nazvaný &bdquo;fonts&ldquo;, v&nbsp;němž je umístěn soubor &bdquo;FreeSans.ttf&ldquo; s&nbsp;fontem. Tento soubor je dostupný na adrese <a href="http://www.fontspace.com/gnu-freefont/freesans">http://www.fontspace.com/gnu-freefont/freesans</a>. Ze staženého archivu ve skutečnosti postačuje rozbalit pouze jediný uvedený soubor &bdquo;freesans.ttf&ldquo; či &bdquo;FreeSans.ttf&ldquo; &ndash; pozor na správné použití velkých a malých písmen v&nbsp;demonstračních příkladech!).</p>

<p>Důležité upozornění: pokud se má do herní scény vykreslit jiný text, je nutné postup pro vytvoření nové bitmapy a jejího následného přenosu do zadního bufferu s&nbsp;využitím metody <strong>pygame.Surface.blit()</strong> opakovat. Samotná rasterizace je relativně složitá a tím pádem i pomalá operace, proto se vyplatí si bitmapy s&nbsp;texty připravit již ve fázi inicializace hry.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Vykreslení textu vybraným fontem do samostatné bitmapy</h2>

<p>Výše zmíněný postup pro načtení fontu, rasterizaci textu do bitmapy a přenos bitmapy do zadního bufferu s&nbsp;využitím funkce <strong>blit()</strong> je implementován v&nbsp;dalším demonstračním příkladu, jehož úplný zdrojový kód naleznete na adrese <a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame15.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame15.py</a>. V&nbsp;tomto příkladu se po inicializaci grafického režimu či po otevření okna nejprve vykreslí řada úseček (což již známe z&nbsp;předchozích příkladů) a následně se do vytvořené scény vypíše i text fontem vysokým 40 pixelů. Při rasterizaci textu se používá bílá barva. Na řádku:</p>

<pre>
font_surface = font.render("mojefedora.cz", False, WHITE)
</pre>

<p>je možné druhým parametrem povolit či zakázat použití antialiasingu, což je problematika, které se budeme podrobněji věnovat <a href="#k07">v&nbsp;navazující kapitole</a>. Následuje výpis zdrojového kódu demonstračního příkladu:</p>

<pre>
<i>#!/usr/bin/python</i>
<i># vim: set fileencoding=utf-8</i>

<i># Demonstrační příklady využívající knihovnu Pygame</i>

<i># Příklad číslo 15: použití TrueType fontů</i>


<strong>import</strong> pygame, sys, os, math

<i># Nutno importovat kvůli konstantám QUIT atd.</i>
<strong>from</strong> pygame.locals <strong>import</strong> *

<i># Velikost okna aplikace</i>
WIDTH = 320
HEIGHT = 240

<i># Inicializace knihovny Pygame </i>
pygame.init()

clock = pygame.time.Clock()

<i># Vytvoření okna pro vykreslování</i>
display = pygame.display.set_mode([WIDTH, HEIGHT])

<i># Nastavení titulku okna</i>
pygame.display.set_caption('Pygame test #15')

<i># Konstanty s n-ticemi představujícími základní barvy</i>
BLACK   = (  0,   0,   0)
BLUE    = (  0,   0, 255)
CYAN    = (  0, 255, 255)
GREEN   = (  0, 255,   0)
YELLOW  = (255, 255,   0)
RED     = (255,   0,   0)
MAGENTA = (255,   0, 255)
GRAY    = (128, 128, 128)
WHITE   = (255, 255, 255)

<i># Vyplnění plochy okna černou barvou</i>
display.fill(BLACK)

<i># Vykreslení čar různou barvou</i>
pygame.draw.line(display, BLUE,    (10, 10), (160, 10))
pygame.draw.line(display, CYAN,    (10, 20), (160, 20))
pygame.draw.line(display, GREEN,   (10, 30), (160, 30))
pygame.draw.line(display, YELLOW,  (10, 40), (160, 40))
pygame.draw.line(display, RED,     (10, 50), (160, 50))
pygame.draw.line(display, MAGENTA, (10, 60), (160, 60))

<i># Vykreslení čar s různým sklonem</i>
<strong>for</strong> i in range(1,90,5):
    <i># převod ze stupňů na radiány</i>
    angle = math.radians(i)
    radius = 150
    <i># výpočet koncových bodů úseček</i>
    x = radius * math.sin(math.radians(i))
    y = radius * math.cos(math.radians(i))

    <strong>if</strong> display.get_bitsize() &gt;= 24:
        <i># vykreslení jedné antialiasované úsečky, blend je nastaveno na True</i>
        pygame.draw.aaline(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y), True)
    <strong>else</strong>:
        <i># vykreslení jedné úsečky</i>
        pygame.draw.line(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y))

<i># Vykreslení čar různou šířkou</i>
<strong>for</strong> i <strong>in</strong> range(1,12):
    pygame.draw.line(display, GRAY, (10 + i*15, 90), (10 + i*15, 230), i)


<i># Načtení fontu (zadává se soubor se jménem fontu a velikost</i>
font = pygame.font.Font("fonts/FreeSans.ttf", 40)

<i># Vytvoření obrázku s vykresleným textem</i>
<i># - první parametr obsahuje řetězec, který se má vykreslit</i>
<i># - druhý parametr řídí použití antialiasingu</i>
<i># - třetí parametr volí barvu fontu</i>
font_surface = font.render("mojefedora.cz", False, WHITE)

<i># Vykreslení obrázku s nápisem do bufferu</i>
display.blit(font_surface, ( 25,  125))



<i># Hlavní herní smyčka</i>
<strong>while</strong> True:
    <i># Načtení a zpracování všech událostí z fronty</i>
    <strong>for</strong> event <strong>in</strong> pygame.event.get():
        <strong>if</strong> event.type == QUIT:
            pygame.quit()
            sys.exit()
        <strong>if</strong> event.type == KEYDOWN <strong>and</strong> event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    clock.tick(20)

<i># finito</i>
</pre>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/031.png"><img class="alignnone size-medium wp-image-6238" src="http://mojefedora.cz/wp-content/uploads/2015/12/031.png" alt="03" width="320" height="240" /></a>
<p><i>Obrázek 6: Výpis textu bez použití antialiasingu.</i></p>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/041.png"><img class="alignnone size-medium wp-image-6239" src="http://mojefedora.cz/wp-content/uploads/2015/12/041.png" alt="04" width="320" height="240" /></a>
<p><i>Obrázek 7: Výpis textu s&nbsp;využitím antialiasingu.</i></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Ukázka vlivu použití antialiasingu na kvalitu vykresleného textu</h2>

<p>Při vykreslování textu s&nbsp;využitím výše popsaných metod se většinou vytvoří bitmapa s&nbsp;bitovou hloubkou 8bpp. Samotné vykreslování takového bitmapy s&nbsp;použitím nám již známé metody <strong>pygame.Surface.blit()</strong> je velmi rychlé a i samotný způsob uložení bitmapy v&nbsp;paměti je poměrně efektivní, ovšem na druhou stranu zde neexistuje podpora pro skutečný antialiasing textů, takže šikmé tahy znaků budou vykazovat typické &bdquo;schody&ldquo;. V&nbsp;případě, že je antialiasing nutné použít (což nemusí být případ hry, kde se většinou upřednostňuje rychlejší vykreslování před kvalitou!), je možné v&nbsp;metodě <strong>pygame.font.Font.render()</strong> pomocí hodnoty druhého parametru specifikovat, aby se při rasterizaci vytvořila bitmapa s&nbsp;bitovou hloubkou 32bpp a tím pádem i s&nbsp;plnohodnotným osmibitovým alfa kanálem. A právě alfa kanál je využit při antialiasingu, zejména při rasterizaci okrajů písma (zde budou použity pixely s&nbsp;variabilní průhledností).</p>

<p>Podívejme se na rozdíl mezi vykreslením textu bez použití antialiasingu a s&nbsp;použitím antialiasingu:</p>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/05.png"><img class="alignnone size-medium wp-image-6240" src="http://mojefedora.cz/wp-content/uploads/2015/12/05.png" alt="05" width="328" height="168" /></a>
<p><i>Obrázek 8: Detailní pohled na scénu vykreslenou v&nbsp;předchozím demonstračním příkladu zavoláním metody <strong>font_surface = font.render("mojefedora.cz", False, WHITE)</strong> (zákaz antialiasingu).</i></p>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/062.png"><img class="alignnone size-medium wp-image-6241" src="http://mojefedora.cz/wp-content/uploads/2015/12/062.png" alt="06" width="328" height="168" /></a>
<p><i>Obrázek 9: Detailní pohled na scénu vykreslenou v&nbsp;předchozím demonstračním příkladu zavoláním metody <strong>font_surface = font.render("mojefedora.cz", True, WHITE)</strong> (povolení antialiasingu).</i></p>

<p>Nevýhody použití antialiasingu při práci s&nbsp;texty jsou tři:</p>

<ol>
<li>Pomalejší vykreslování výsledné bitmapy, neboť je nutné provádět výpočet průhlednosti s&nbsp;každým pixelem (násobení!)</li>
<li>Větší paměťové nároky (projeví se při meziukládání bitmap a větším množství textů)</li>
<li>Problematická práce s&nbsp;těmito bitmapami ve chvíli, kdy není nastaven celoobrazovkový grafický režim s&nbsp;hloubkou 24bpp či 32bpp &ndash; a tyto režimy se v&nbsp;mnoha hrách nepoužívají, právě z&nbsp;důvodu větších nároků při práci s&nbsp;grafikou (přesun větších bitmap při operaci <i>blit()</i> atd.)</li>
</ol>

<p>Je tedy nutné pečlivě zvážit, kterou metodou se budou texty do (herních) scén vykreslovat a mnohdy převáží sice méně kvalitní, ale zato rychlejší rendering textů bez antialiasingu.</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Pozadí textu: využití průhlednosti či vybrané konstantní barvy</h2>

<p>Bitmapa (resp.&nbsp;přesněji řečeno objekt typu <i>Surface</i>), která je automaticky vytvořena při vykreslení fontu, může obsahovat buď průhlednou barvu pozadí (kde je průhlednost nastavena na 100%) nebo naopak libovolnou zvolenou barvu. To, jaká možnost se při vykreslování využije, závisí na tom, zda se při volání metody <strong>pygame.font.Font.render()</strong> použije čtvrtý nepovinný parametr obsahující zvolenou barvu pozadí. V&nbsp;prvním případě (= čtvrtý nepovinný parametr není použit) je vytvořena bitmapa s&nbsp;bitovou hloubkou 8bpp obsahující v&nbsp;místech, kde se nenachází žádný znak, zcela průhledné pixely. Pokud je zapnut antialiasing, je použita bitmapa s&nbsp;hloubkou 32bpp a průhlednost je tedy reprezentována plnohodnotným osmibitovým alfa kanálem, barva pozadí tedy nemusí být na hranách písma přesně 100%, ale i méně. Při použití druhé metody jsou průhledné či poloprůhledné pixely vyplněny zadanou barvou.</p>

<p>V&nbsp;dnešním <a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame16.py">posledním demonstračním příkladu</a> je tato možnost ukázána. Na screenshotu zobrazeném pod výpisem zdrojového kódu si povšimněte vlivu použití antialiasingu na kvalitu zobrazeného textu i vliv rastrové operace <strong>BLEND_ADD</strong>:</p>

<pre>
<i>#!/usr/bin/python</i>
<i># vim: set fileencoding=utf-8</i>

<i># Demonstrační příklady využívající knihovnu Pygame</i>

<i># Příklad číslo 16: použití TrueType fontů</i>


<strong>import</strong> pygame, sys, os, math

<i># Nutno importovat kvůli konstantám QUIT atd.</i>
<strong>from</strong> pygame.locals <strong>import</strong> *

<i># Velikost okna aplikace</i>
WIDTH = 320
HEIGHT = 240

<i># Inicializace knihovny Pygame </i>
pygame.init()

clock = pygame.time.Clock()

<i># Vytvoření okna pro vykreslování</i>
display = pygame.display.set_mode([WIDTH, HEIGHT])

<i># Nastavení titulku okna</i>
pygame.display.set_caption('Pygame test <i>#16')</i>

<i># Konstanty s n-ticemi představujícími základní barvy</i>
BLACK   = (  0,   0,   0)
BLUE    = (  0,   0, 255)
CYAN    = (  0, 255, 255)
GREEN   = (  0, 255,   0)
YELLOW  = (255, 255,   0)
RED     = (255,   0,   0)
MAGENTA = (255,   0, 255)
GRAY    = (128, 128, 128)
WHITE   = (255, 255, 255)

<i># Vyplnění plochy okna černou barvou</i>
display.fill(BLACK)

<i># Vykreslení čar různou barvou</i>
pygame.draw.line(display, BLUE,    (10, 10), (160, 10))
pygame.draw.line(display, CYAN,    (10, 20), (160, 20))
pygame.draw.line(display, GREEN,   (10, 30), (160, 30))
pygame.draw.line(display, YELLOW,  (10, 40), (160, 40))
pygame.draw.line(display, RED,     (10, 50), (160, 50))
pygame.draw.line(display, MAGENTA, (10, 60), (160, 60))

<i># Vykreslení čar s různým sklonem</i>
<strong>for</strong> i in range(1,90,5):
    <i># převod ze stupňů na radiány</i>
    angle = math.radians(i)
    radius = 150
    <i># výpočet koncových bodů úseček</i>
    x = radius * math.sin(math.radians(i))
    y = radius * math.cos(math.radians(i))

    <strong>if</strong> display.get_bitsize() &gt;= 24:
        <i># vykreslení jedné antialiasované úsečky, blend je nastaveno na True</i>
        pygame.draw.aaline(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y), True)
    <strong>else</strong>:
        <i># vykreslení jedné úsečky</i>
        pygame.draw.line(display, WHITE, (WIDTH-1, 0), (WIDTH-x, y))

<i># Vykreslení čar různou šířkou</i>
<strong>for</strong> i <strong>in</strong> range(1,12):
    pygame.draw.line(display, GRAY, (10 + i*15, 90), (10 + i*15, 230), i)


<i># Načtení fontu (zadává se soubor se jménem fontu a velikost</i>
font = pygame.font.Font("fonts/FreeSans.ttf", 40)

<i># Vytvoření obrázku s vykresleným textem</i>
<i># - první parametr obsahuje řetězec, který se má vykreslit</i>
<i># - druhý parametr řídí použití antialiasingu</i>
<i># - třetí parametr volí barvu fontu</i>
font_surface1 = font.render("mojefedora.cz", True, WHITE, RED)

<i># Vykreslení obrázku s nápisem do bufferu</i>
display.blit(font_surface1, ( 25,  90), special_flags = BLEND_ADD)
display.blit(font_surface1, ( 25,  150))



<i># Hlavní herní smyčka</i>
<strong>while</strong> True:
    <i># Načtení a zpracování všech událostí z fronty</i>
    <strong>for</strong> event <strong>in</strong> pygame.event.get():
        <strong>if</strong> event.type == QUIT:
            pygame.quit()
            sys.exit()
        <strong>if</strong> event.type == KEYDOWN <strong>and</strong> event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    clock.tick(20)

<i># finito</i>
</pre>

<a href="http://mojefedora.cz/wp-content/uploads/2015/12/072.png"><img class="alignnone size-medium wp-image-6242" src="http://mojefedora.cz/wp-content/uploads/2015/12/072.png" alt="07" width="320" height="240" /></a>
<p><i>Obrázek 10: První text byl do své bitmapy vykreslen bez použití antialiasingu, při operaci <strong>blit()</strong> se ovšem použila rastrová operace <strong>BLEND_ADD</strong>. Druhý text byl do své bitmapy vykreslen s&nbsp;použitím antialiasingu a při přenosu bitmapy se použila běžná rastrová operace <strong>COPY</strong>.</i></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Obsah další části seriálu</h2>

<p>Prakticky žádná hra odehrávající se v&nbsp;2D prostoru se neobejde bez množství objektů, které se pohybují v&nbsp;herním světě. Tyto objekty spolu mohou kolidovat (narážet do sebe atd.), popř.&nbsp;mohou nastat kolize mezi pohyblivým objektem a nepohyblivým pozadím herní scény. Aby nebylo nutné výpočet kolizí pro každou vznikající hru znovu programovat, nabízí knihovna <i>Pygame</i> svým uživatelům řešení ve formě modulu <strong>pygame.sprite</strong>. A právě popisem některých možností nabízených tímto modulem se budeme zabývat v&nbsp;navazující části tohoto seriálu.</p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Repositář se zdrojovými kódy dnešních demonstračních příkladů</h2>

<p>Všechny demonstrační příklady, s&nbsp;nimiž jsme se v&nbsp;dnešním článku seznámili, byly, podobně jako v&nbsp;předchozích částech tohoto seriálu, uloženy do Git repositáře umístěného na GitHubu (<a href="https://github.com/tisnik/presentations">https://github.com/tisnik/presentations</a>):</p>

<table>
<tr><th>#</th><th>Příklad</th><th>Zdrojový kód</th></tr>
<tr><td>1</td><td>pygame12.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame12.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame12.py</a></td></tr>
<tr><td>2</td><td>pygame13.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame13.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame13.py</a></td></tr>
<tr><td>3</td><td>pygame14.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame14.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame14.py</a></td></tr>
<tr><td>4</td><td>pygame15.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame15.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame15.py</a></td></tr>
<tr><td>5</td><td>pygame16.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/pygame16.py">https://github.com/tisnik/presentations/blob/master/pygame/pygame16.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>6</td><td>images/gnome-globe.png</td><td><a href="https://github.com/tisnik/presentations/tree/master/pygame/images">https://github.com/tisnik/presentations/tree/master/pygame/images</a></td></tr>
<tr><td>7</td><td>fonts/FreeSans.ttf</td><td><a href="https://github.com/tisnik/presentations/blob/master/pygame/fonts/FreeSans.ttf">https://github.com/tisnik/presentations/blob/master/pygame/fonts/FreeSans.ttf</a></td></tr>
</table>

<p>Poznámka: soubor nazvaný &bdquo;gnome-globe.png&ldquo; musí být uložen v&nbsp;podadresáři &bdquo;images&ldquo;, protože právě z&nbsp;tohoto podadresáře je načítán demonstračními příklady. Podobné pravidlo je nutné dodržet i pro soubor nazvaný &bdquo;FreeSans.ttf&ldquo;, který je očekáván v&nbsp;podadresáři &bdquo;fonts&ldquo;.</p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Funkce použité v&nbsp;dnešních demonstračních příkladech</h2>

<ol>

<li>pygame.init()<br />
<a href="http://www.pygame.org/docs/ref/pygame.html#pygame.init">http://www.pygame.org/docs/ref/pygame.html#pygame.init</a>
</li>

<li>pygame.quit()<br />
<a href="http://www.pygame.org/docs/ref/pygame.html#pygame.quit">http://www.pygame.org/docs/ref/pygame.html#pygame.quit</a>
</li>

<li>pygame.display.set_mode()<br />
<a href="http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode">http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode</a>
</li>

<li>pygame.display.set_caption()<br />
<a href="http://www.pygame.org/docs/ref/display.html#pygame.display.set_caption">http://www.pygame.org/docs/ref/display.html#pygame.display.set_caption</a>
</li>

<li>pygame.display.quit()<br />
<a href="http://www.pygame.org/docs/ref/display.html#pygame.display.quit">http://www.pygame.org/docs/ref/display.html#pygame.display.quit</a>
</li>

<li>pygame.display.update()<br />
<a href="http://www.pygame.org/docs/ref/display.html#pygame.display.update">http://www.pygame.org/docs/ref/display.html#pygame.display.update</a>
</li>

<li>pygame.Surface.blit()<br />
<a href="http://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit">http://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit</a>
</li>

<li>pygame.Surface.convert()<br />
<a href="http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert">http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert</a>
</li>

<li>pygame.Surface.convert_alpha()<br />
<a href="http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert_alpha">http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert_alpha</a>
</li>

<li>pygame.event.get()<br />
<a href="http://www.pygame.org/docs/ref/event.html#pygame.event.get">http://www.pygame.org/docs/ref/event.html#pygame.event.get</a>
</li>

<li>pygame.time.Clock.tick()<br />
<a href="http://www.pygame.org/docs/ref/time.html#pygame.time.Clock.tick">http://www.pygame.org/docs/ref/time.html#pygame.time.Clock.tick</a>
</li>

<li>pygame.draw.line()<br />
<a href="http://www.pygame.org/docs/ref/draw.html#pygame.draw.line">http://www.pygame.org/docs/ref/draw.html#pygame.draw.line</a>
</li>

<li>pygame.draw.aaline()<br />
<a href="http://www.pygame.org/docs/ref/draw.html#pygame.draw.aaline">http://www.pygame.org/docs/ref/draw.html#pygame.draw.aaline</a>
</li>

<li>pygame.image.load()<br />
<a href="http://www.pygame.org/docs/ref/image.html#pygame.image.load">http://www.pygame.org/docs/ref/image.html#pygame.image.load</a>
</li>

<li>pygame.font.Font()<br />
<a href="http://www.pygame.org/docs/ref/font.html#pygame.font.Font">http://www.pygame.org/docs/ref/font.html#pygame.font.Font</a></li>

<li>pygame.font.Font.render()<br />
<a href="http://www.pygame.org/docs/ref/font.html#pygame.font.Font.render">http://www.pygame.org/docs/ref/font.html#pygame.font.Font.render</a></li>

</ol>



<p><a name="k12"></a></p>
<h2 id="k12">12. Odkazy na Internetu</h2>

<ol>

<li>Pygame.org<br />
<a href="http://pygame.org/hifi.html">http://pygame.org/hifi.html</a>
</li>

<li>Pygame - instalační soubory pro různé operační systémy<br />
<a href="http://pygame.org/download.shtml">http://pygame.org/download.shtml</a>
</li>

<li>Pygame: documentation<br />
<a href="http://www.pygame.org/docs/">http://www.pygame.org/docs/</a>
</li>

<li>Pygame Wiki: Getting Started<br />
<a href="http://www.pygame.org/wiki/GettingStarted">http://www.pygame.org/wiki/GettingStarted</a>
</li>

<li>Pygame Tutorials: Tutorials Basic<br />
<a href="http://pygametutorials.wikidot.com/tutorials-basic">http://pygametutorials.wikidot.com/tutorials-basic</a>
</li>

<li>Pygame: Font class<br />
<a href="http://www.pygame.org/docs/ref/font.html">http://www.pygame.org/docs/ref/font.html</a>
</li>

<li>Python.org (dokumentace k&nbsp;jazyku, odkazy na instalační soubory atd.)<br />
<a href="https://www.python.org/">https://www.python.org/</a>
</li>

<li>How to Draw with Pygame on Your Raspberry Pi<br />
<a href="http://www.dummies.com/how-to/content/how-to-draw-with-pygame-on-your-raspberry-pi.html">http://www.dummies.com/how-to/content/how-to-draw-with-pygame-on-your-raspberry-pi.html</a>
</li>

<li>Bresenham's line algorithm<br />
<a href="https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm">https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm</a>
</li>

<li>Xiaolin Wu's line algorithm<br />
<a href="https://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm">https://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm</a>
</li>

<li>Pyglet<br />
<a href="https://pypi.python.org/pypi/pyglet/1.2.4">https://pypi.python.org/pypi/pyglet/1.2.4</a>
</li>

<li>Pyglet documentation<br />
<a href="http://pythonhosted.org/pyglet/">http://pythonhosted.org/pyglet/</a>
</li>

<li>PyOpenGL<br />
<a href="https://pypi.python.org/pypi/PyOpenGL/">https://pypi.python.org/pypi/PyOpenGL/</a>
</li>

<li>Computer font (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Computer_font">https://en.wikipedia.org/wiki/Computer_font</a>
</li>

<li>TrueType (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/TrueType">https://en.wikipedia.org/wiki/TrueType</a>
</li>

<li>SDL and Fonts<br />
<a href="http://www.gamedev.net/page/resources/_/technical/game-programming/sdl--fonts-r1953">http://www.gamedev.net/page/resources/_/technical/game-programming/sdl--fonts-r1953</a>
</li>

<li>SDL_ttf Documentation<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/docs/">http://www.libsdl.org/projects/SDL_ttf/docs/</a>
</li>

<li>SDL_ttf 2.0 (není prozatím součástí SDLJava)<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/">http://www.libsdl.org/projects/SDL_ttf/</a>
</li>

<li>SDL_ttf doc<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/docs/SDL_ttf_frame.html">http://www.libsdl.org/projects/SDL_ttf/docs/SDL_ttf_frame.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_Surface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_PixelFormat<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlpixelformat.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlpixelformat.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_LockSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdllocksurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdllocksurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_UnlockSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlunlocksurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlunlocksurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_LoadBMP<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlloadbmp.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlloadbmp.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_SaveBMP<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsavebmp.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsavebmp.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_BlitSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlblitsurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlblitsurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_VideoInfo<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlvideoinfo.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlvideoinfo.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_GetVideoInfo<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlgetvideoinfo.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlgetvideoinfo.html</a>
</li>

<li>Graphical user interface (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Graphical_user_interface">http://en.wikipedia.org/wiki/Graphical_user_interface</a>
</li>

<li>The Real History of the GUI<br />
<a href="http://articles.sitepoint.com/article/real-history-gui">http://articles.sitepoint.com/article/real-history-gui</a>
</li>

<li>Computer-History: Xerox Alto<br />
<a href="http://www.mr-gadget.de/apple/2004-01-15/computer-history-xerox-alto">http://www.mr-gadget.de/apple/2004-01-15/computer-history-xerox-alto</a>
</li>

<li>bitsavers.org<br />
<a href="http://www.bitsavers.org/">http://www.bitsavers.org/</a>
</li>

<li>Dokumenty k&nbsp;počítači Xerox Alto na bitsavers.org<br />
<a href="http://www.bitsavers.org/pdf/xerox/alto/">http://www.bitsavers.org/pdf/xerox/alto/</a>
</li>

<li>The ALTO Computer<br />
<a href="http://www.maniacworld.com/alto-computer-video.html">http://www.maniacworld.com/alto-computer-video.html</a>
</li>

<li>Xerox Alto Operating System and Alto Applications<br />
<a href="http://www.digibarn.com/collections/software/alto/index.html">http://www.digibarn.com/collections/software/alto/index.html</a>
</li>

<li>Xerox Alto (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Xerox_Alto">http://en.wikipedia.org/wiki/Xerox_Alto</a>
</li>

<li>BitBLT routines (1975)<br />
<a href="http://www.bitsavers.org/pdf/xerox/alto/BitBLT_Nov1975.pdf">http://www.bitsavers.org/pdf/xerox/alto/BitBLT_Nov1975.pdf</a>
</li>

<li>BitBlt in Squeak<br />
<a href="http://wiki.squeak.org/squeak/189">http://wiki.squeak.org/squeak/189</a>
</li>

<li>Bitmaps, Device Contexts and BitBlt<br />
<a href="http://www.winprog.org/tutorial/bitmaps.html">http://www.winprog.org/tutorial/bitmaps.html</a>
</li>

<li>BitBlt Game Programming Tutorial<br />
<a href="http://www.freevbcode.com/ShowCode.asp?ID=3677">http://www.freevbcode.com/ShowCode.asp?ID=3677</a>
</li>

<li>Bit blit (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/BitBLT">http://en.wikipedia.org/wiki/BitBLT</a>
</li>

<li>The Xerox Alto<br />
<a href="http://toastytech.com/guis/alto3.html">http://toastytech.com/guis/alto3.html</a>
</li>

<li>History of the graphical user interface<br />
<a href="http://en.wikipedia.org/wiki/History_of_the_graphical_user_interface">http://en.wikipedia.org/wiki/History_of_the_graphical_user_interface</a>
</li>

<li>Domovská stránka systému LÖVE<br />
<a href="http://love2d.org/">http://love2d.org/</a>
</li>

<li>Dokumentace k&nbsp;systému LÖVE<br />
<a href="http://love2d.org/wiki/love">http://love2d.org/wiki/love</a>
</li>

<li>Domovská stránka programovacího jazyka Lua<br />
<a href="http://www.lua.org/ ">http://www.lua.org/ </a>
</li>

<li>Seriál o programovacím jazyku Lua (root.cz):<br />
<a href="http://www.root.cz/serialy/programovaci-jazyk-lua/">http://www.root.cz/serialy/programovaci-jazyk-lua/</a>
</li>

<li>Domovská stránka systému LÖVE<br />
<a href="http://love2d.org/">http://love2d.org/</a>
</li>

<li>Domovská stránka programovacího jazyka Lua<br />
<a href="http://www.lua.org/ ">http://www.lua.org/ </a>
</li>

<li>Web o Lieru, Gusanos, GeneRally, Atari atd.<br />
<a href="http://karelik.wz.cz/">http://karelik.wz.cz/</a>
</li>

<li>Web o Lieru, Gusanos<br />
<a href="http://karelik.wz.cz/gusanos.php">http://karelik.wz.cz/gusanos.php</a>
</li>

<li>GUSANOS<br />
<a href="http://gusanos.sourceforge.net/">http://gusanos.sourceforge.net/</a>
</li>

<li>GUSANOS Download<br />
<a href="http://sourceforge.net/projects/gusanos/">http://sourceforge.net/projects/gusanos/</a>
</li>

<li>Lua<br />
<a href="http://www.linuxexpres.cz/praxe/lua">http://www.linuxexpres.cz/praxe/lua</a>
</li>

<li>Lua<br />
<a href="http://cs.wikipedia.org/wiki/Lua">http://cs.wikipedia.org/wiki/Lua</a>
</li>

<li>Lua (programming language)<br />
<a href="http://en.wikipedia.org/wiki/Lua_(programming_language)">http://en.wikipedia.org/wiki/Lua_(programming_language)</a>
</li>

<li>The Lua Programming Language<br />
<a href="http://www.tiobe.com/index.php/paperinfo/tpci/Lua.html">http://www.tiobe.com/index.php/paperinfo/tpci/Lua.html</a>
</li>

<li>Lua Programming Gems<br />
<a href="http://www.lua.org/gems/">http://www.lua.org/gems/</a>
</li>

<li>LuaForge<br />
<a href="http://luaforge.net/">http://luaforge.net/</a>
</li>

<li>Forge project tree<br />
<a href="http://luaforge.net/softwaremap/trove_list.php">http://luaforge.net/softwaremap/trove_list.php</a>
</li>

<li>SdlBasic home page<br />
<a href="http://www.sdlbasic.altervista.org/main/">http://www.sdlbasic.altervista.org/main/</a>
</li>

<li>SdlBasic examples<br />
<a href="http://nitrofurano.linuxkafe.com/sdlbasic/">http://nitrofurano.linuxkafe.com/sdlbasic/</a>
</li>

<li>SdlBasic na Wikipedii<br />
<a href="http://en.wikipedia.org/wiki/SdlBasic">http://en.wikipedia.org/wiki/SdlBasic</a>
</li>

<li>Simple DirectMedia Layer<br />
<a href="http://en.wikipedia.org/wiki/Simple_DirectMedia_Layer">http://en.wikipedia.org/wiki/Simple_DirectMedia_Layer</a>
</li>

<li>SDLBASIC &ndash; The high-level interpreter for all?<br />
<a href="http://openbytes.wordpress.com/2008/11/08/sdlbasic-the-high-level-interpreter-for-all/">http://openbytes.wordpress.com/2008/11/08/sdlbasic-the-high-level-interpreter-for-all/</a>
</li>

<li>FreeBasic home page<br />
<a href="http://www.freebasic.net/">http://www.freebasic.net/</a>
</li>

<li>FreeBASIC (Wikipedia EN)<br />
<a href="https://en.wikipedia.org/wiki/FreeBASIC">https://en.wikipedia.org/wiki/FreeBASIC</a>
</li>

<li>FreeBASIC Wiki<br />
<a href="http://www.freebasic.net/wiki/wikka.php?wakka=FBWiki">http://www.freebasic.net/wiki/wikka.php?wakka=FBWiki</a>
</li>

<li>FreeBASIC Manual<br />
<a href="http://www.freebasic.net/wiki/wikka.php?wakka=DocToc">http://www.freebasic.net/wiki/wikka.php?wakka=DocToc</a>
</li>

<li>FreeBASIC (Wikipedia CZ)<br />
<a href="http://cs.wikipedia.org/wiki/FreeBASIC">http://cs.wikipedia.org/wiki/FreeBASIC</a>
</li>

<li>The Griffon Legend<br />
<a href="http://syn9.thingie.net/?table=griffonlegend">http://syn9.thingie.net/?table=griffonlegend</a>
</li>

<li>Seriál Letní škola programovacího jazyka Logo<br />
<a href="http://www.root.cz/serialy/letni-skola-programovaciho-jazyka-logo/">http://www.root.cz/serialy/letni-skola-programovaciho-jazyka-logo/</a>
</li>

<li>Scratch: oficiální stránka projektu<br />
<a href="http://scratch.mit.edu/">http://scratch.mit.edu/</a>
</li>

<li>Scratch: galerie projektů vytvořených ve Scratchi<br />
<a href="http://scratch.mit.edu/galleries/browse/newest">http://scratch.mit.edu/galleries/browse/newest</a>
</li>

<li>Scratch: nápověda<br />
<a href="file:///usr/share/scratch/Help/en/index.html">file:///usr/share/scratch/Help/en/index.html</a>
</li>

<li>Scratch: obrazovky nápovědy<br />
<a href="file:///usr/share/scratch/Help/en/allscreens.html">file:///usr/share/scratch/Help/en/allscreens.html</a>
</li>

<li>Scratch (Wikipedie CZ)<br />
<a href="http://cs.wikipedia.org/wiki/Scratch">http://cs.wikipedia.org/wiki/Scratch</a>
</li>

<li>Scratch (programming language)<br />
<a href="http://en.wikipedia.org/wiki/Scratch_(programming_language)">http://en.wikipedia.org/wiki/Scratch_(programming_language)</a>
</li>

<li>Scratch Modification<br />
<a href="http://wiki.scratch.mit.edu/wiki/Scratch_Modification">http://wiki.scratch.mit.edu/wiki/Scratch_Modification</a>
</li>

<li>Scratch Lowers Resistance to Programming<br />
<a href="http://www.wired.com/gadgetlab/2009/03/scratch-lowers/">http://www.wired.com/gadgetlab/2009/03/scratch-lowers/</a>
</li>

<li>Snap!<br />
<a href="http://snap.berkeley.edu/">http://snap.berkeley.edu/</a>
</li>

<li>Prostředí Snap!<br />
<a href="http://snap.berkeley.edu/snapsource/snap.html">http://snap.berkeley.edu/snapsource/snap.html</a>
</li>

<li>Alternatives to Scratch<br />
<a href="http://wiki.scratch.mit.edu/wiki/Alternatives_to_Scratch">http://wiki.scratch.mit.edu/wiki/Alternatives_to_Scratch</a>
</li>

<li>Basic-256 home page<br />
<a href="http://www.basic256.org/index_en">http://www.basic256.org/index_en</a>
</li>

<li>Basic-256 Language Documentation<br />
<a href="http://doc.basic256.org/doku.php">http://doc.basic256.org/doku.php</a>
</li>

<li>Basic-256 Art Gallery<br />
<a href="http://www.basic256.org/artgallery">http://www.basic256.org/artgallery</a>
</li>

<li>Basic-256 Tutorial<br />
<a href="http://www.basic256.org/tutorials">http://www.basic256.org/tutorials</a>
</li>

<li>Why BASIC?<br />
<a href="http://www.basic256.org/whybasic">http://www.basic256.org/whybasic</a>
</li>

<li>A book to teach ANYBODY how to program a computer (using BASIC)<br />
<a href="http://www.basicbook.org/">http://www.basicbook.org/</a>
</li>

<li>BASIC Computer Games (published 1978) - Hammurabi<br />
<a href="http://atariarchives.org/basicgames/showpage.php?page=78">http://atariarchives.org/basicgames/showpage.php?page=78</a>
</li>

<li>Hamurabi - zdrojový kód v BASICu<br />
<a href="http://www.dunnington.u-net.com/public/basicgames/HMRABI">http://www.dunnington.u-net.com/public/basicgames/HMRABI</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2015</small></p>
</body>
</html>

