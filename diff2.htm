<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Nástroje pro porovnání obsahu tří různých verzí textových souborů</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Nástroje pro porovnání obsahu tří různých verzí textových souborů</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dnešním článku se seznámíme s nástroji sloužícími pro porovnání obsahu tří různých verzí textových souborů i pro takzvané třícestné sloučení změn. Mezi tyto nástroje patří diff3 ovládaný z příkazové řádky a taktéž nástroje s grafickým uživatelským rozhraním.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Nástroje pro porovnání obsahu tří různých verzí textových souborů</a></p>
<p><a href="#k02">2. Ukázka vzniku dvou nových variant souborů ze společné předlohy</a></p>
<p><a href="#k03">3. Situace, v&nbsp;níž již porovnání dvou souborů nedostačuje</a></p>
<p><a href="#k04">4. Použití utility <strong>diff3</strong> ovládané z&nbsp;příkazového řádku</a></p>
<p><a href="#k05">5. Jak číst výstup z&nbsp;nástroje <strong>diff3</strong></a></p>
<p><a href="#k06">6. Sloučení obou nových variant souboru</a></p>
<p><a href="#k07">7. Druhý příklad: změny provedené lokálně i vzdáleně na totožném řádku</a></p>
<p><a href="#k08">8. Vznik konfliktu při pokusu o sloučení změn</a></p>
<p><a href="#k09">9. Třetí příklad: totožné změny provedené lokálně i vzdáleně na totožném řádku</a></p>
<p><a href="#k10">10. Čtvrtý příklad: přidání nových řádků</a></p>
<p><a href="#k11">11. Sloučení obou nových variant souboru</a></p>
<p><a href="#k12">12. Pátý příklad: vymazání řádků</a></p>
<p><a href="#k13">13. Sloučení obou nových variant souboru</a></p>
<p><a href="#k14">14. Poslední příklad: prohození řádků</a></p>
<p><a href="#k15">15. Sloučení obou nových variant souboru</a></p>
<p><a href="#k16">16. Nástroje s&nbsp;grafickým uživatelským rozhraním, které dokážou provést porovnání a třícestné sloučení</a></p>
<p><a href="#k17">17. Utilita <strong>xxdiff</strong> (stručné připomenutí)</a></p>
<p><a href="#k18">18. Užitečný nástroj <strong>KDiff3</strong></a></p>
<p><a href="#k19">19. Nástroj <strong>Meld</strong></a></p>
<p><a href="#k20">20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Nástroje pro porovnání obsahu tří různých verzí textových souborů</h2>

<p>Na <a
href="https://www.root.cz/clanky/nastroje-pro-porovnani-obsahu-dvou-textovych-souboru/">předchozí
článek</a>, v&nbsp;němž jsme se zabývali popisem nástrojů určených pro
porovnání obsahu <i>dvou</i> textových souborů, dnes navážeme. Ukážeme si
totiž, jakými utilitami je možné porovnat <i>tři</i> soubory. K&nbsp;nutnosti
porovnání tří souborů, resp.&nbsp;většinou tří variant jednoho souboru, dochází
kupodivu velmi často, a to ve chvíli, kdy jsou tyto soubory upravovány větším
množstvím autorů, ať již se jedná o vývojáře, administrátory či autory článků
popř.&nbsp;i knížek. Kromě porovnání je většinou nutné všechny tři verze
souborů slučovat dohromady, což většina dále popsaných nástrojů taktéž
umožňuje. V&nbsp;první části článku si popíšeme možnosti utility
<strong>diff3</strong> spouštěné z&nbsp;příkazového řádku a v&nbsp;části druhé
se budeme zabývat vybranými nástroji s&nbsp;plnohodnotným grafickým
uživatelským rozhraním. Mezi takové nástroje patří především <i>Meld</i>,
<i>KDiff3</i> a již minule zmíněný nástroj <i>xxdiff</i>.</p>

<a href="https://www.root.cz/obrazek/319106/"><img src="https://i.iinfo.cz/images/311/diff1-15-prev.png" class="image-319106" alt="xxx" height="236" width="370" /></a>
<p><i>Obrázek 1: Porovnání dvou verzí testovacího souboru nástrojem
<strong>TkDiff</strong>, který jsme si popsali minule.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Ukázka vzniku dvou nových variant souborů ze společné předlohy</h2>

<p>V&nbsp;mnoha případech, typicky ve chvíli, kdy na nějakém projektu pracuje
větší množství autorů, se může stát, že dva autoři nezávisle na sobě změní
obsah stejného souboru. Pro jednoduchost předpokládejme, že se jedná o prostý
textový soubor. Podívejme se nyní na jednotlivé verze testovacího textového
souboru. Původní verze, která je na disku uložená pod jménem
<strong>old.txt</strong>, obsahuje pouze jedenáct řádků a vypadá přesně
takto:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Novější, lokálně upravená varianta, která je pro jednoduchost pojmenovaná
<strong>new_mine.txt</strong>, se od verze původní liší pouze v&nbsp;jediném
řádku. Pro větší názornost je tento řádek zvýrazněn:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
<strong>Tento řádek jsem změnil já</strong>
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Jiný autor mezitím, tj.&nbsp;nezávisle na lokálních změnách provedených
v&nbsp;souboru <strong>new_mine.txt</strong>, taktéž upravil původní soubor do
podoby zobrazené pod tímto odstavcem. Pro jednoduchost máme tuto verzi uloženou
v&nbsp;souboru pojmenovaném <strong>new_someone_else.txt</strong> (domyslete si
prosím chybějící apostrof). Opět byl změněn jen jediný (odlišný!) řádek, který
je zvýrazněn:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
<strong>Tento řádek změnil někdo jiný</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Celá situace je zobrazena na diagramu:</p>

<img src="https://i.iinfo.cz/images/477/diff2a-1.png" class="image-319594" alt="&#160;" height="310" width="470" />
<p><i>Obrázek 2: Vznik dvou novějších variant odvozených od jednoho původního
souboru.</i></p>

<p>Poznámka: povšimněte si, že provedené změny se týkají odlišných řádků, které
navíc spolu ani nesousedí. To je sice ideální stav, kdy nedochází ke skutečným
konfliktům, ovšem v&nbsp;praxi řešení konfliktů tak jednoduché nebude, což si
ukážeme v&nbsp;dalších kapitolách.</p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Situace, v&nbsp;níž již porovnání dvou souborů nedostačuje</h2>

<p>Samozřejmě si můžeme vyzkoušet, jaké změny zjistíme &bdquo;obyčejným&ldquo;
příkazem <strong>diff</strong>, který dokáže porovnat obsah pouze dvou souborů.
Porovnat můžeme obě novější verze oproti verzi původní, popř.&nbsp;samozřejmě
obě novější verze mezi sebou. Pro snazší čtení použijeme unifikovaný výstup se
zobrazením kontextových informací, jehož formát jsme si popsali minule:</p>

<pre>
diff -u old.txt new_mine.txt
</pre>

<p>V&nbsp;tomto případě se podle očekávání zjistila změna na třetím řádku, což
se zobrazí jako operace vymazání původního řádku následovaná vložením řádku
nového (oba významné řádky jsou zvýrazněny):</p>

<pre>
--- old.txt       2018-01-29 21:32:10.000000000 +0100
+++ new_mine.txt  2018-01-29 21:56:22.000000000 +0100
@@ -1,6 +1,6 @@
 První řádek původního souboru
 Druhý řádek původního souboru
<strong>-Třetí řádek původního souboru</strong>
<strong>+Tento řádek jsem změnil já</strong>
 Čtvrtý řádek původního souboru
 Pátý řádek původního souboru
 Šestý řádek původního souboru
</pre>

<p>Podobně zjistíme rozdíl mezi původní verzí a variantou připravenou jiným
autorem:</p>

<pre>
diff -u old.txt new_someone_else.txt
</pre>

<p>S&nbsp;výsledky:</p>

<pre>
--- old.txt              2018-01-29 21:32:10.000000000 +0100
+++ new_someone_else.txt 2018-01-29 21:56:41.000000000 +0100
@@ -6,6 +6,6 @@
 Šestý řádek původního souboru
 Sedmý řádek původního souboru
 Osmý řádek původního souboru
<strong>-Devátý řádek původního souboru</strong>
<strong>+Tento řádek změnil někdo jiný</strong>
 Desátý řádek původního souboru
 Konec původního souboru
</pre>

<p>Žádné další možnosti pro porovnání tří různých verzí souborů nám však
nástroj <strong>diff</strong> (i přes jeho značnou užitečnost v&nbsp;jiných
případech!) nedává a musíme si tedy zvolit jiný nástroj. Právě popisům těchto
nástrojů jsou věnovány navazující kapitoly.</p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Použití utility <strong>diff3</strong> ovládané z&nbsp;příkazového řádku</h2>

<p>Pokud při práci preferujete použití příkazové řádky popř.&nbsp;automatizaci
celé činnosti (což není vždy snadné), lze pro porovnání tří variant textového
souboru použít nástroj pojmenovaný přiléhavě <strong>diff3</strong>. Tomuto
nástroji se v&nbsp;nejjednodušším případě předávají jména tří souborů
v&nbsp;následujícím pořadí:</p>

<ol>
<li>novější verze souboru upravená lokálně</li>
<li>starší (původní) verze</li>
<li>novější verze souboru upravená mezitím dalším autorem</li>
</ol>

<p>Zkusme se tedy podívat, jaké informace získáme pro tři verze našeho
testovacího souboru. Použijeme příkaz:</p>

<pre>
diff3 new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výsledek by měl vypadat přibližně takto:</p>

<pre>
====1
1:3c
  Tento řádek jsem změnil já
2:3c
3:3c
  Třetí řádek původního souboru
====3
1:9c
2:9c
  Devátý řádek původního souboru
3:9c
  Tento řádek změnil někdo jiný
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. Jak číst výstup z&nbsp;nástroje <strong>diff3</strong></h2>

<p>Jak se má tento výstup, který se v&nbsp;mnoha ohledech odlišuje od výstupu
utility <strong>diff</strong>, dešifrovat? Podívejme se na jednotlivé části
výstupu a označme si je čísly:</p>

<img src="https://i.iinfo.cz/images/227/diff2-1.png" class="image-319569" alt="&#160;" height="312" width="445" />
<p><i>Obrázek 3: Výstup z&nbsp;utility <strong>diff3</strong> s&nbsp;číselným
označením jednotlivých bloků.</i></p>

<p>Význam jednotlivých očíslovaných bloků je následující (čísla odrážek
odpovídají předchozímu obrázku):</p>

<ol>

<li>Na prvním řádku výstupu vidíme znaky <strong>====</strong>, které nám
oznamují, že se tři verze souborů od sebe odlišují.</li>

<li>Za těmito znaky se nachází pořadové číslo souboru, který se liší od
ostatních dvou a jehož změny jsou zobrazeny dále. Pořadová čísla odpovídají
pozicím jmen souborů na příkazové řádce při volání utility
<strong>diff3</strong>.</li>

<li>Řádka obsahující znaky <strong>1:3c</strong> nám říká, že se v&nbsp;prvním
souboru (<strong>new_mine.txt</strong>) změnil (<strong>c</strong>=change)
řádek číslo <strong>3</strong>. Ihned poté následuje výpis nové varianty obsahu
tohoto řádku.</li>

<li>Zcela stejným způsobem nám řádka <strong>2:3c</strong> následovaná řádkou
<strong>3:3c</strong> říká, jak vypadá třetí řádek ve druhém a třetím souboru
(pořadí je samozřejmě opět určeno pořadím parametrů na příkazové řádce).</li>

<li>Celý první blok je tedy nutné číst takto: &bdquo;v&nbsp;prvním souboru má
třetí řádek podobu X, zatímco ve druhém a třetím souboru má stejnou podobu
Y&ldquo;.</li>

<li>Celý druhý blok začínající řádkem <strong>====3</strong> se čte následovně:
&bdquo;v&nbsp;prvním a druhém souboru má devátý řádek podobu Z, zatímco ve
třetím souboru má stejný řádek podobu Z&ldquo;.</li>

</ol>

<p>Poznámka: povšimněte si, že v&nbsp;tomto případě nástroj
<strong>diff3</strong> použil pouze jediný příkaz <strong>c</strong>
(<i>change</i>). Ve skutečnosti se však později setkáme i s&nbsp;příkazem
<strong>a</strong> (<i>append</i>), a to ve chvíli, kdy se v&nbsp;souborech
bude měnit počet řádků, nebo pokud se budou řádky přesouvat.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Sloučení obou nových variant souboru</h2>

<p>Vzhledem k&nbsp;tomu, že provedené změny byly provedeny na odlišných
řádcích, které neleží vedle sebe, nedošlo vlastně ke skutečnému konfliktu a
můžeme tedy využít další velmi užitečnou funkci nástroje
<strong>diff3</strong>. Tou je sloučení obou novějších verzí do verze
nejnovější :-) (opět se můžete podívat na obrázek číslo 2). Tato funkce se
zapíná přepínačem <strong>--merge</strong> popř.&nbsp;jeho zkrácenou podobou
<strong>-m</strong>:</p>

<pre>
diff3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výsledný soubor je vypsaný na standardní výstup, takže ho lze snadno
přesměrovat do nového souboru. Ve výpisu, který můžete vidět pod tímto
odstavcem, jsem pro větší přehlednost zvýraznil oba řádky, které byly nezávisle
na sobě změněny a následně sloučeny do výsledné verze:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
<strong>Tento řádek jsem změnil já</strong>
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
<strong>Tento řádek změnil někdo jiný</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Všimněte si, že výsledný soubor již v&nbsp;tomto případě nepotřebuje žádné
další ruční úpravy. Níže uvidíme, že při vzniku konfliktů je situace složitější
a vyžadují ruční zásahy do výsledku práce utility <strong>diff3</strong>.</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Druhý příklad: změny provedené lokálně i vzdáleně na totožném řádku</h2>

<p>Ve druhém &ndash; stále však ještě velmi jednoduchém &ndash; příkladu si
ukážeme, co se stane ve chvíli, kdy se změny týkají pouze jediného řádku, který
je změněn jak lokálně, tak i vzdáleným autorem. Každá varianta modifikovaného
řádku je ovšem odlišná. Soubor <strong>new_mine.txt</strong> má obsah:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
<strong>Tento řádek jsem změnil já</strong>
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Zatímco soubor <strong>new_someone_else.txt</strong> má tento obsah:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
<strong>Tento řádek změnil někdo jiný</strong>
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Vidíme, že oba autoři nezávisle na sobě změnili šestý řádek, takže se
podívejme na to, jak se s&nbsp;tímto úkolem vypořádá popisovaný nástroj
<strong>diff3</strong>:</p>

<pre>
diff3 new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Vygenerovaný výsledek by měl vypadat přibližně takto:</p>

<pre>
====
1:6c
  Tento řádek jsem změnil já
2:6c
  Šestý řádek původního souboru
3:6c
  Tento řádek změnil někdo jiný
</pre>

<p>Nyní se na prvním řádku nachází pouze znaky ==== bez uvedení čísla souboru,
který se od ostatních dvou liší. Je to logické &ndash; existují totiž hned tři
varianty toho samého řádku, takže zde neexistuje žádná vítězná varianta. Obsah
výstupu je zřejmý &ndash; vždy je hlášena změna (<strong>c</strong> -
<i>change</i>) na řádku číslo <strong>6</strong>, a to postupně pro soubor
číslo <strong>1</strong>, <strong>2</strong> i <strong>3</strong>.</p>

<p>V&nbsp;případě, že budeme chtít zobrazit jen konflikty s&nbsp;naší verzí
souboru, lze pro tento účel použít přepínač <strong>-x</strong>:</p>

<pre>
diff3 -x new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výstup nám říká, že pokud budeme chtít provést běžné sloučení naší verze
souboru, je v&nbsp;něm zapotřebí změnit šestý řádek, a to následujícím způsobem
(<strong>diff3</strong> samozřejmě nemůže zaručit, že tato změna bude dávat
význam!):</p>

<pre>
6c
Tento řádek změnil někdo jiný
&lt;Esc&gt;
</pre>

<p>Všechny neprovedené ruční změny v&nbsp;naší verzi zobrazí
<strong>diff3</strong> po použití přepínače <strong>-e</strong>. Zde bude ovšem
výstup naprosto stejný (což ovšem platí pouze pro tento konkrétní příklad, kde
je jediná změna současně i konfliktem):</p>

<pre>
6c
Tento řádek změnil někdo jiný
&lt;Esc&gt;
</pre>

<p>Důležitá poznámka: vzhledem k&nbsp;tomu, že se při použití přepínačů
<strong>-e</strong> a <strong>-x</strong> vygeneruje skript určený pro řádkový
editor <strong>ed</strong> popř.&nbsp;pro <strong>vi/Vim</strong>, je na konec
příkazů umístěn znak Esc, který se většinou zobrazí jako obyčejná tečka. Ovšem
o tečku se skutečně nejedná, o čemž se můžeme přesvědčit po přesměrování
výstupu do utilitky <strong>od</strong> popsané <a
href="https://www.root.cz/clanky/hexadecimalni-prohlizece-a-editory-s-textovym-uzivatelskym-rozhranim/#k05">zde</a>:</p>

<pre>
diff3 -x new_mine.txt old.txt new_someone_else.txt | od -t x1
</pre>

<p>Na výstupu z&nbsp;utilitky <strong>od</strong> skutečně můžeme vidět znak
Esc následovaný znakem pro konec řádku:</p>

<pre>
0000000 36 63 0a 54 65 6e 74 6f 20 c5 99 c3 a1 64 65 6b
0000020 20 7a 6d c4 9b 6e 69 6c 20 6e c4 9b 6b 64 6f 20
0000040 6a 69 6e c3 bd 0a <strong>2e</strong> 0a
0000050
</pre>

<p>Poznámka zcela na okraj: utilita <strong>od</strong> sice dokáže zobrazit i
jména řídicích znaků, ovšem nebude správně fungovat v&nbsp;případě použití
vícebajtového kódování popř.&nbsp;kódování s&nbsp;proměnnou délkou (UTF-8).</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Vznik konfliktu při pokusu o sloučení změn</h2>

<p>Zajímavé bude zjistit, co se stane v&nbsp;případě, že se pokusíme o sloučení
obou novějších souborů:</p>

<pre>
diff3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>V&nbsp;této chvíli se nástroj <strong>diff3</strong> (pochopitelně) nemůže
rozhodnout, které změně má dát přednost, takže namísto čistého sloučení
vygeneruje následující výstup:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
&lt;&lt;&lt;&lt;&lt;&lt;&lt; new_mine.txt
Tento řádek jsem změnil já
||||||| old.txt
Šestý řádek původního souboru
=======
Tento řádek změnil někdo jiný
&gt;&gt;&gt;&gt;&gt;&gt;&gt; new_someone_else.txt
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Na výstupu se oblast, v&nbsp;níž došlo ke konfliktu, zobrazila celkem
třikrát. Poprvé pro první soubor (lokální nová verze), podruhé pro soubor druhý
(původní verze) a potřetí pro soubor třetí (vzdáleně vytvořená nová verze).
Jednotlivé bloky jsou od sebe odvozeny řádky se sekvencí znaků &lt;, |, = a
&gt;:</p>

<pre>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; new_mine.txt
první blok
první blok
první blok
||||||| old.txt
druhý blok
druhý blok
druhý blok
=======
třetí blok
třetí blok
třetí blok
&gt;&gt;&gt;&gt;&gt;&gt;&gt; new_someone_else.txt
</pre>

<p>Sloučení takto označených konfliktních změn již musí uživatel provést ručně
v&nbsp;textovém editoru. Na závěr samozřejmě musí smazat i všechny informační
řádky vložené nástrojem <strong>diff3</strong> (u zdrojových kódů je situace
jednodušší v&nbsp;tom, že vložené řádky vedou ve většině případů k&nbsp;chybě
při překladu či pokusu o interpretaci).</p>

<p>Výběr pouze změn mezi soubory <strong>new_mine.txt</strong> a
<strong>new_someone_else.txt</strong>:</p>

<pre>
diff3 --merge -3 new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výsledkem bude soubor:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
<strong>Tento řádek jsem změnil já</strong>
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. Třetí příklad: totožné změny provedené lokálně i vzdáleně na totožném řádku</h2>

<p>Ve třetím příkladu si ukážeme, co se stane ve chvíli, kdy lokální i vzdálený
autor změní shodný řádek, a to navíc naprosto stejně. K&nbsp;této situaci
dochází kupodivu poměrně často, neboť spousta změn může být provedena různými
lintery (či přímo v&nbsp;IDE), popř.&nbsp;dva autoři mohou opravit tu samou
chybu.</p>

<p>Oba dva novější soubory, tj.&nbsp;jak soubor upravený lokálně, tak i soubor
mezitím upravený vzdáleně, mají shodnou podobu. Jejich obsah je
následující:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
<strong>Tento řádek jsem změnil já a současně naprosto stejně i někdo jiný</strong>
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Nástroj <strong>diff3</strong> samozřejmě dokáže správně rozpoznat, že změny
provedené v&nbsp;prvním a třetím souboru jsou stejné; ve skutečnosti totiž
v&nbsp;tomto případě nijak nerozlišuje, který soubor je původní a které soubory
jsou novější. Výsledek by měl vypadat takto (připomeňme si, že 1:6c značí změnu
na šestém řádku prvního souboru atd.):</p>

<pre>
====2
1:6c
3:6c
  Tento řádek jsem změnil já a současně naprosto stejně i někdo jiný
2:6c
  Šestý řádek původního souboru
</pre>

<p>Pokud o sloučení přepínačem <strong>--merge</strong> ovšem dopadne jinak,
než byste možná očekávali, protože <strong>diff3</strong> nenahradí původní
řádek novým obsahem, ale vytvoří následující výstup, který autora donutí, aby
změny přidal ručně:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
&lt;&lt;&lt;&lt;&lt;&lt;&lt; old.txt
Šestý řádek původního souboru
=======
Tento řádek jsem změnil já a současně naprosto stejně i někdo jiný
&gt;&gt;&gt;&gt;&gt;&gt;&gt; new_someone_else.txt
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Pokud jste si naprosto jisti, že ke sloučení může dojít (což je v&nbsp;tomto
případě pravda), můžete spustit příkaz <strong>--merge</strong>
s&nbsp;modifikátorem <strong>-3</strong> nebo jeho delší variantou
<strong>--easy-only</strong>:</p>

<pre>
diff3 -3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výsledek již vypadá rozumněji a nevyžaduje žádné další úpravy:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Tento řádek jsem změnil já a současně naprosto stejně i někdo jiný
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Poznámka: modifikátor <strong>-3</strong> může vést k&nbsp;tomu, že některé
změny nebudou do výsledného souboru zapracovány, takže je vhodné si výsledek
zkontrolovat zpětným <i>diffem</i> s&nbsp;vaší lokální variantou.</p>



<p><a name="k10"></a></p>
<h2 id="k10">10. Čtvrtý příklad: přidání nových řádků</h2>

<p>Ve čtvrtém příkladu bylo do souboru <strong>new_mine.txt</strong> přidáno
nových deset řádků:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Podobně bylo deset řádků přidaných i druhým autorem. Ovšem řádky byly
přidány na jiné místo v&nbsp;souboru:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Nyní se můžeme podívat, jak se tato změna projeví na výstupu z&nbsp;aplikace
<strong>diff3</strong>:</p>

<pre>
diff3 new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Ve vygenerovaném výstupu můžeme vidět nové příkazy <strong>2:4a</strong>,
<strong>3:4a</strong> atd. Tyto příkazy oznamují, že došlo k&nbsp;přidání
nových řádků:</p>

<pre>
====1
1:5,14c
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
  Deset nových řádků, které jsem přidal já
2:4a
3:4a
====3
1:19a
2:9a
3:10,19c
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
  Deset nových řádků, který přidal někdo jiný
</pre>

<p>Konkrétně můžeme celý první blok přečíst následovně: řádky
<strong>5</strong> až <strong>14</strong> přečtené ze souboru
<strong>1</strong> musí být přidány za řádek číslo <strong>4</strong> ve
<strong>druhém</strong> i <strong>třetím</strong> souboru, aby došlo ke
shodě.</p>

<p>Druhý blok se čte podobně: aby došlo ke shodě mezi všemi třemi soubory, je
nutné (nové) řádky číslo <strong>10</strong> až <strong>19</strong> ze souboru
číslo <strong>3</strong> přidat za řádek <strong>19</strong> v&nbsp;prvním
souboru a současně za řádek číslo <strong>9</strong> ve druhém souboru (odlišné
číslování je způsobeno první změnou).</p>

<p>Poznámka: povšimněte si, že číslování odpovídá původním řádkům.</p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Sloučení obou nových variant souboru</h2>

<p>Samozřejmě nám nic nebrání pokusit se o sloučení obou nových variant
souboru:</p>

<pre>
diff3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Tentokrát nedošlo k&nbsp;žádným konfliktům a výsledek vypadá korektně:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
<strong>Deset nových řádků, které jsem přidal já</strong>
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
<strong>Deset nových řádků, který přidal někdo jiný</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>



<p><a name="k12"></a></p>
<h2 id="k12">12. Pátý příklad: vymazání řádků</h2>

<p>V&nbsp;pátém příkladu některé řádky naopak vymažeme (samozřejmě opět
v&nbsp;porovnání s&nbsp;obsahem původního souboru). Takže jen ve
stručnosti:</p>

<p>Původní soubor <strong>old.txt</strong>:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Obsah souboru <strong>new_mine.txt</strong>:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Obsah souboru <strong>new_someone.txt</strong>:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Všechny tři varianty porovnáme přesně tak, jak jsme již zvyklí:</p>

<pre>
diff3 new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Výsledek třícestného porovnání bude následující:</p>

<pre>
====1
1:2a
2:3,4c
3:3,4c
  Třetí řádek původního souboru
  Čtvrtý řádek původního souboru
====3
1:5,6c
2:7,8c
  Sedmý řádek původního souboru
  Osmý řádek původního souboru
3:6a
</pre>

<p>Z&nbsp;tohoto porovnání můžeme vidět, že nástroj <strong>diff3</strong>
vlastně nezná příkaz <strong>d</strong> (<i>delete</i>), takže nám jen říká, že
aby došlo ke shodě mezi soubory, musí se do souboru číslo <strong>1</strong>
přidat dva řádky (3 a 4), které jsou v&nbsp;obou dvou dalších souborech shodné.
Navíc je nutné (aby došlo ke shodě) přidat dva řádky i do třetího souboru.</p>



<p><a name="k13"></a></p>
<h2 id="k13">13. Sloučení obou nových variant souboru</h2>

<p>Zkusme nyní provést třícestné sloučení:</p>

<pre>
diff3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>Pokus o sloučení příkazem <strong>--merge</strong> dopadne následovně:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Výsledek v&nbsp;tomto případě vypadá podle očekávání &ndash; došlo ke
smazání celkem čtyř řádků.</p>



<p><a name="k14"></a></p>
<h2 id="k14">14. Poslední příklad: prohození řádků</h2>

<p>V&nbsp;posledním příkladu se pokusíme prohodit dva řádky, a to v&nbsp;obou
novějších variantách &ndash; jak v&nbsp;lokální, tak i vzdálené.</p>

<p>Obsah souboru <strong>new_mine.txt</strong>:</p>

<pre>
První řádek původního souboru
Třetí řádek původního souboru
Čtvrtý řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
Osmý řádek původního souboru
Devátý řádek původního souboru
<strong>Druhý řádek původního souboru</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Obsah souboru <strong>new_someone.txt</strong>:</p>

<pre>
První řádek původního souboru
Druhý řádek původního souboru
Třetí řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
<strong>Čtvrtý řádek původního souboru</strong>
Osmý řádek původního souboru
Devátý řádek původního souboru
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Výsledek třícestného porovnání:</p>

<pre>
====1
1:1a
2:2c
3:2c
  Druhý řádek původního souboru
====3
1:3c
2:4c
  Čtvrtý řádek původního souboru
3:3a
====3
1:6a
2:7a
3:7c
  Čtvrtý řádek původního souboru
====1
1:9c
  Druhý řádek původního souboru
2:9a
3:9a
</pre>



<p><a name="k15"></a></p>
<h2 id="k15">15. Sloučení obou nových variant souboru</h2>

<p>Zajímavé je, že i přes relativní komplikovanost změn je možné provést
třícestné sloučení:</p>

<pre>
diff3 --merge new_mine.txt old.txt new_someone_else.txt 
</pre>

<p>S&nbsp;výsledkem:</p>

<pre>
První řádek původního souboru
Třetí řádek původního souboru
Pátý řádek původního souboru
Šestý řádek původního souboru
Sedmý řádek původního souboru
<strong>Čtvrtý řádek původního souboru</strong>
Osmý řádek původního souboru
Devátý řádek původního souboru
<strong>Druhý řádek původního souboru</strong>
Desátý řádek původního souboru
Konec původního souboru
</pre>

<p>Poznámka: zkuste si ještě komplikovanější příklady &ndash; zjistíte, že
automatické třícestné sloučení se většinou nepovede k&nbsp;úplné spokojenosti a
bude nutné provést ruční úpravy.</p>



<p><a name="k16"></a></p>
<h2 id="k16">16. Nástroje s&nbsp;grafickým uživatelským rozhraním, které dokážou provést porovnání a třícestné sloučení</h2>

<p>Popisu možností utility <strong>diff3</strong> ovládané z&nbsp;příkazové
řádky jsme věnovali dosti velkou část dnešního článku. Je tomu tak především
z&nbsp;toho důvodu, aby bylo patrné, k&nbsp;jakým situacím může při slučování
různých variant souborů dojít. Nyní se již můžeme začít věnovat popisu
nástrojů, které jsou vybaveny plnohodnotným grafickým uživatelským rozhraním a
které taktéž slouží pro zjištění rozdílů mezi třemi verzemi souboru a současně
i pro jejich sloučení. Těchto nástrojů existuje relativně velké množství
(některé jsou součástí integrovaných vývojových prostředí), takže muselo dojít
k&nbsp;zúžení výběru (alespoň pro tento článek). V&nbsp;dalších kapitolách si
ukážeme třícestné slučování s&nbsp;využitím nástrojů <a href="#k17">xxdiff</a>,
<a href="#k18">KDiff3</a> a konečně asi nejpoužívanějšího open source nástroje
pro tuto činnost &ndash; aplikace <a href="#k19">Meld</a>.</p>

<a href="https://www.root.cz/obrazek/319570/"><img src="https://i.iinfo.cz/images/227/diff2-2-prev.png" class="image-319570" alt="&#160;" height="253" width="370" /></a>
<p><i>Obrázek 4: Dialog s&nbsp;informacemi o velmi užitečném nástroji
<strong>KDiff3</strong></i></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. Utilita <strong>xxdiff</strong> (stručné připomenutí)</h2>

<p>O utilitě nazvané <i>xxdiff</i> jsme se již zmínili v&nbsp;předchozím
článku, takže si jen připomeňme, že tento relativně malý a na systémové
prostředky nenáročný nástroj sice není tak známý jako <i>Meld</i>, ovšem nabízí
podobné funkce a navíc je v&nbsp;něm možné velmi snadno provádět třícestný
merge, tj.&nbsp;porovnání a aplikování změn mezi třemi verzemi souborů (typicky
se jedná o společného předka, soubor změněný lokálně a soubor mezitím změněný
někým jiným). Utilitě <i>xxdiff</i> je možné při jejím volání
z&nbsp;příkazového řádku předat dva soubory:</p>

<pre>
xxdiff old.py new.py
</pre>

<p>Ovšem nás bude zajímat, jak provést třícestný merge. V&nbsp;tomto případě
spustíme utilitu <i>xxdiff</i> následujícím způsobem:</p>

<pre>
xxdiff new_mine.txt old.txt new_someone_else.txt
</pre>

<p>Možnosti nástroje <i>xxdiff</i> jsou ukázány na následujících
screenshotech:</p>

<a href="https://www.root.cz/obrazek/319587/"><img src="https://i.iinfo.cz/images/227/diff2-19-prev.png" class="image-319587" alt="&#160;" height="193" width="370" /></a>
<p><i>Obrázek 5: Velmi nepříjemné je, že <strong>xxdiff</strong> stále nedokáže
pracovat s&nbsp;Unicode (i když samozřejmě záleží na způsobu použití; některým
týmům to nemusí vadit).</i></p>

<a href="https://www.root.cz/obrazek/319588/"><img src="https://i.iinfo.cz/images/227/diff2-20-prev.png" class="image-319588" alt="&#160;" height="193" width="370" /></a>
<p><i>Obrázek 6: Nejjednodušší situace, ve které jsou změny provedeny na
odlišných řádcích. Barevné pozadí nám říká, že nedochází ke konfliktům.</i></p>

<a href="https://www.root.cz/obrazek/319590/"><img src="https://i.iinfo.cz/images/227/diff2-22-prev.png" class="image-319590" alt="&#160;" height="193" width="370" /></a>
<p><i>Obrázek 7: Nepatrně složitější situace, kdy jsou změny provedeny na
shodném řádku. Zde si musíme vybrat, z&nbsp;jaké verze provést
sloučení.</i></p>

<a href="https://www.root.cz/obrazek/319591/"><img src="https://i.iinfo.cz/images/227/diff2-23-prev.png" class="image-319591" alt="&#160;" height="193" width="370" /></a>
<p><i>Obrázek 8: Jiná situace, ve které jsou změněny shodné řádky, které mají
náhodou i stejný obsah.</i></p>

<a href="https://www.root.cz/obrazek/319592/"><img src="https://i.iinfo.cz/images/227/diff2-24-prev.png" class="image-319592" alt="&#160;" height="221" width="370" /></a>
<p><i>Obrázek 9: Přes menu <strong>Display</strong> lze zobrazit čtvrté okno
s&nbsp;výsledkem sloučení.</i></p>

<a href="https://www.root.cz/obrazek/319593/"><img src="https://i.iinfo.cz/images/227/diff2-25-prev.png" class="image-319593" alt="&#160;" height="221" width="370" /></a>
<p><i>Obrázek 10: Takto vypadá postupné slučování změn. V&nbsp;horním (čtvrtém)
okně lze sledovat, jak bude vypadat výsledek.</i></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. Užitečný nástroj <strong>KDiff3</strong></h2>

<p>Dalším nástrojem s&nbsp;plnohodnotným grafickým uživatelským rozhraním,
který je možné použít pro porovnání a/nebo sloučení tří variant téhož souboru,
je aplikace nazvaná příhodně <strong>KDiff3</strong>. Již ze jména je zřejmé,
že se jedná o aplikaci založenou na frameworku Qt, ovšem samozřejmě ji lze
použít i mimo prostředí KDE (ostatně všechny screenshoty vznikly na počítači
s&nbsp;Fluxboxem). Nástroj <strong>KDiff3</strong> dokáže pracovat i
s&nbsp;Unicode, což je vhodné pro projekty, v&nbsp;nichž se používají znaky
s&nbsp;nabodeníčky. Kromě běžného třícestného porovnání se zvýrazňují i změny
provedené na shodných řádcích, což je velmi užitečné především při práci se
zdrojovými kódy a hledání mnohdy jen jednoznakových úprav. Opět se podívejme na
sérii screenshotů, které ukazují některé možnosti této utility:</p>

<a href="https://www.root.cz/obrazek/319572/"><img src="https://i.iinfo.cz/images/227/diff2-4-prev.png" class="image-319572" alt="&#160;" height="253" width="370" /></a>
<p><i>Obrázek 11: Automatické sloučení souborů z&nbsp;našeho <a
href="#k04">prvního příkladu</a>. Povšimněte si, že původní soubor se nachází
v&nbsp;levém okně, nikoli uprostřed (což je častější řešení).</i></p>

<a href="https://www.root.cz/obrazek/319573/"><img src="https://i.iinfo.cz/images/227/diff2-5-prev.png" class="image-319573" alt="&#160;" height="253" width="370" /></a>
<p><i>Obrázek 12: Zde došlo k&nbsp;detekci konfliktu způsobeném změnami na
stejném řádku, jedná se o obdobu <a href="#k07">druhého příkladu</a>.</i></p>

<a href="https://www.root.cz/obrazek/319574/"><img src="https://i.iinfo.cz/images/227/diff2-6-prev.png" class="image-319574" alt="&#160;" height="253" width="370" /></a>
<p><i>Obrázek 13: Zajímavá situace &ndash; změny provedené lokálně i vzdáleně
jsou totožné, což je detekováno.</i></p>

<a href="https://www.root.cz/obrazek/319575/"><img src="https://i.iinfo.cz/images/227/diff2-7-prev.png" class="image-319575" alt="&#160;" height="253" width="370" /></a>
<p><i>Obrázek 14: Situace, kdy došlo k&nbsp;přidání nových řádků, ovšem nikoli
ke vzniku konfliktu.</i></p>

<a href="https://www.root.cz/obrazek/319576/"><img src="https://i.iinfo.cz/images/227/diff2-8-prev.png" class="image-319576" alt="&#160;" height="264" width="370" /></a>
<p><i>Obrázek 15: Další situace, kdy došlo k&nbsp;přidání nových řádků, ovšem
nikoli ke vzniku konfliktu.</i></p>

<a href="https://www.root.cz/obrazek/319577/"><img src="https://i.iinfo.cz/images/227/diff2-9-prev.png" class="image-319577" alt="&#160;" height="264" width="370" /></a>
<p><i>Obrázek 16: Složitější případ, kdy byl jeden řádek v&nbsp;novější verzi
souboru smazán.</i></p>

<a href="https://www.root.cz/obrazek/319578/"><img src="https://i.iinfo.cz/images/227/diff2-10-prev.png" class="image-319578" alt="&#160;" height="264" width="370" /></a>
<p><i>Obrázek 17: Podobná situace, jako na předchozím screenshotu. I zde
dokázal <strong>KDiff3</strong> korektně synchronizovat oba novější
soubory.</i></p>



<p><a name="k19"></a></p>
<h2 id="k19">19. Nástroj <strong>Meld</strong></h2>

<p>Poslední nástroj s&nbsp;plnohodnotným grafickým uživatelským rozhraním,
s&nbsp;nímž se dnes setkáme, se jmenuje <i>Meld</i>. Pravděpodobně se jedná o
nejpoužívanější nástroj tohoto typu, minimálně na Linuxu. I <i>Meld</i>
podporuje porovnání tří variant téhož souboru, samozřejmě s&nbsp;možností
sloučení těchto variant do nejnovější verze. Při zvýraznění lokálních změn
(v&nbsp;rámci jednoho řádku) se <i>Meld</i> snaží o zobrazení odlišných znaků
nebo sekvence znaků (jiný kontrast barvy pozadí). Možnosti <i>Meldu</i> při
třícestném slučování jsou ukázány na následující osmici screenshotů. Povšimněte
si, že se, podobně jako u <i>xxdiffu</i>, původní varianta souboru zobrazuje
v&nbsp;prostředním sloupci:</p>

<a href="https://www.root.cz/obrazek/319579/"><img src="https://i.iinfo.cz/images/227/diff2-11-prev.png" class="image-319579" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 18: Nejjednodušší situace, ve které jsou změny provedeny na
odlišných řádcích. Barevné pozadí nám říká, že nedochází ke konfliktům.</i></p>

<a href="https://www.root.cz/obrazek/319580/"><img src="https://i.iinfo.cz/images/227/diff2-12-prev.png" class="image-319580" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 19: Nepatrně složitější situace, kdy jsou změny provedeny na
shodném řádku. Zde si musíme šipkami vybrat, z&nbsp;jaké verze provést
sloučení.</i></p>

<a href="https://www.root.cz/obrazek/319581/"><img src="https://i.iinfo.cz/images/227/diff2-13-prev.png" class="image-319581" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 20: Jiná situace, ve které jsou změněny shodné řádky, které mají
náhodou i stejný obsah.</i></p>

<a href="https://www.root.cz/obrazek/319582/"><img src="https://i.iinfo.cz/images/227/diff2-14-prev.png" class="image-319582" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 21: Způsob zobrazení rozdílů mezi soubory v&nbsp;situaci, kdy
došlo k&nbsp;přidání nových řádků.</i></p>

<a href="https://www.root.cz/obrazek/319583/"><img src="https://i.iinfo.cz/images/227/diff2-15-prev.png" class="image-319583" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 22: Výsledek sloučení změn z&nbsp;obrázku číslo 21.</i></p>

<a href="https://www.root.cz/obrazek/319584/"><img src="https://i.iinfo.cz/images/227/diff2-16-prev.png" class="image-319584" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 23: Komplikovanější situace; řádek byl oproti originálu
vymazán.</i></p>

<a href="https://www.root.cz/obrazek/319585/"><img src="https://i.iinfo.cz/images/227/diff2-17-prev.png" class="image-319585" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 24: Postupná akceptace jednotlivých dílčích změn.</i></p>

<a href="https://www.root.cz/obrazek/319586/"><img src="https://i.iinfo.cz/images/227/diff2-18-prev.png" class="image-319586" alt="&#160;" height="228" width="370" /></a>
<p><i>Obrázek 25: Postupná akceptace jednotlivých dílčích změn.</i></p>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Comparing and Merging Files<br />
<a href="https://www.gnu.org/software/diffutils/manual/diffutils.html">https://www.gnu.org/software/diffutils/manual/diffutils.html</a>
</li>

<li>Three-way merge<br />
<a href="https://en.wikipedia.org/wiki/Merge_(version_control)#Three-way_merge">https://en.wikipedia.org/wiki/Merge_(version_control)#Three-way_merge</a>
</li>

<li>diff (1) - Linux Man Pages<br />
<a href="https://www.systutorials.com/docs/linux/man/1-diff/">https://www.systutorials.com/docs/linux/man/1-diff/</a>
</li>

<li>diff3 (1) - Linux Man Pages<br />
<a href="https://www.systutorials.com/docs/linux/man/1-diff3/">https://www.systutorials.com/docs/linux/man/1-diff3/</a>
</li>

<li>11 Linux diff3 Command Examples (Compare 3 Files Line by Line)<br />
<a href="https://www.thegeekstuff.com/2012/08/diff3-examples/">https://www.thegeekstuff.com/2012/08/diff3-examples/</a>
</li>

<li>How to compare three files in Linux using diff3 tool<br />
<a href="https://www.howtoforge.com/tutorial/how-to-compare-three-files-in-linux-using-diff3-tool/">https://www.howtoforge.com/tutorial/how-to-compare-three-files-in-linux-using-diff3-tool/</a>
</li>

<li>Merging with diff3<br />
<a href="https://blog.jcoglan.com/2017/05/08/merging-with-diff3/">https://blog.jcoglan.com/2017/05/08/merging-with-diff3/</a>
</li>

<li>diff utility (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Diff_utility">https://en.wikipedia.org/wiki/Diff_utility</a>
</li>

<li>diff3<br />
<a href="https://en.wikipedia.org/wiki/Diff3">https://en.wikipedia.org/wiki/Diff3</a>
</li>

<li>GNU Wdiff<br />
<a href="https://www.gnu.org/software/wdiff/">https://www.gnu.org/software/wdiff/</a>
</li>

<li>GNU wdiff Manual<br />
<a href="https://www.gnu.org/software/wdiff/manual/">https://www.gnu.org/software/wdiff/manual/</a>
</li>

<li>wdiff (1) - Linux Man Pages<br />
<a href="https://www.systutorials.com/docs/linux/man/1-wdiff/">https://www.systutorials.com/docs/linux/man/1-wdiff/</a>
</li>

<li>diff3 (1) - Linux Man Pages<br />
<a href="https://www.systutorials.com/docs/linux/man/1-diff3/">https://www.systutorials.com/docs/linux/man/1-diff3/</a>
</li>

<li>sdiff (1) - Linux Man Pages<br />
<a href="https://www.systutorials.com/docs/linux/man/1-sdiff/">https://www.systutorials.com/docs/linux/man/1-sdiff/</a>
</li>

<li>Stránky nástroje Meld<br />
<a href="http://meldmerge.org/">http://meldmerge.org/</a>
</li>

<li>Meld na stránkách GNOME<br />
<a href="https://wiki.gnome.org/Apps/Meld">https://wiki.gnome.org/Apps/Meld</a>
</li>

<li>Stránky nástroje TkDiff<br />
<a href="https://sourceforge.net/projects/tkdiff/">https://sourceforge.net/projects/tkdiff/</a>
</li>

<li>Zdrojové kódy TkDiffu<br />
<a href="https://sourceforge.net/projects/tkdiff/files/tkdiff/4.2/">https://sourceforge.net/projects/tkdiff/files/tkdiff/4.2/</a>
</li>

<li>Poslední verze nástroje TkDiff<br />
<a href="https://sourceforge.net/projects/tkdiff/files/latest/download">https://sourceforge.net/projects/tkdiff/files/latest/download</a>
</li>

<li>Manuálová stránka k&nbsp;nástroji TkDiff<br />
<a href="http://linux.math.tifr.res.in/manuals/man/tkdiff.html">http://linux.math.tifr.res.in/manuals/man/tkdiff.html</a>
</li>

<li>diffh: Make your diff easier to see<br />
<a href="https://inconsolation.wordpress.com/2013/10/07/diffh-make-your-diff-easier-to-see/">https://inconsolation.wordpress.com/2013/10/07/diffh-make-your-diff-easier-to-see/</a>
</li>

<li>Stránky projektu diffh<br />
<a href="https://sourceforge.net/projects/diffh/">https://sourceforge.net/projects/diffh/</a>
</li>

<li>Pretty Diff (implementovaný v&nbsp;JavaScriptu)<br />
<a href="http://prettydiff.com/">http://prettydiff.com/</a>
</li>

<li>Nástroje pro diff textů<br />
<a href="https://en.wikipedia.org/wiki/Diff-Text">https://en.wikipedia.org/wiki/Diff-Text</a>
</li>

<li>Pretty Diff (implementovaný v&nbsp;JavaScriptu)<br />
<a href="https://en.wikipedia.org/wiki/Pretty_Diff">https://en.wikipedia.org/wiki/Pretty_Diff</a>
</li>

<li>Stránky projektu colordiff<br />
<a href="https://www.colordiff.org/">https://www.colordiff.org/</a>
</li>

<li>Skript idiff<br />
<a href="http://www.pixelbeat.org/scripts/idiff">http://www.pixelbeat.org/scripts/idiff</a>
</li>

<li>Three way git merging with Meld<br />
<a href="https://lukas.zapletalovi.com/2012/09/three-way-git-merging-with-meld.html">https://lukas.zapletalovi.com/2012/09/three-way-git-merging-with-meld.html</a>
</li>

<li>xxdiff na serveru SourceForge<br />
<a href="https://sourceforge.net/projects/xxdiff/">https://sourceforge.net/projects/xxdiff/</a>
</li>

<li>Stránka nástroje KDiff3<br />
<a href="http://kdiff3.sourceforge.net/">http://kdiff3.sourceforge.net/</a>
</li>

<li>Seriál o programovacím jazyku TCL a GUI knihovně Tk<br />
<a href="https://www.root.cz/serialy/programovaci-jazyk-tcl/">https://www.root.cz/serialy/programovaci-jazyk-tcl/</a>
</li>

<li>ActiveTcl<br />
<a href="https://www.activestate.com/activetcl">https://www.activestate.com/activetcl</a>
</li>

<li>Tiobe: žebříček popularity programovacích jazyků<br />
<a href="https://www.tiobe.com/tiobe-index/">https://www.tiobe.com/tiobe-index/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2018</small></p>
</body>
</html>

