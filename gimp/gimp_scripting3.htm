<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Tvorba pluginů pro grafický editor GIMP (3.část &ndash; vykreslení hvězdné oblohy)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Tvorba pluginů pro grafický editor GIMP (3.část &ndash; štětce a výběry)</h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p>Ve třetí části článku o tvorbě pluginů určených pro známý bitmapový grafický editor GIMP si ukážeme, jakými způsoby je možné naprogramovat konfigurovatelný přídavný modul (plugin), který po svém spuštění vytvoří nový obrázek s&nbsp;vykreslenou hvězdnou oblohou. Jednotlivé verze pluginu budou paralelně vytvářeny jak v&nbsp;programovacím jazyce Scheme (jde o technologii nazvanou Script-fu), tak i v&nbsp;populárnějším a používanějším Pythonu (technologie pojmenovaná Python-fu).</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Tvorba pluginů pro grafický editor GIMP (3.část &ndash; vykreslení hvězdné oblohy)</a></p>
<p><a href="#k02">2. Jednoduchá hvězdná obloha &ndash; verze naprogramovaná ve Scheme</a></p>
<p><a href="#k03">3. Přepis prvního pluginu do Pythonu</a></p>
<p><a href="#k04">4. Vykreslení hvězd s&nbsp;využitím aktuálně nastavené tužky</a></p>
<p><a href="#k05">5. Varianta druhé verze pluginu naprogramovaná ve Scheme</a></p>
<p><a href="#k06">6. Varianta druhé verze pluginu naprogramovaná v&nbsp;Pythonu</a></p>
<p><a href="#k07">7. Výběr štětce s&nbsp;nastavením velikosti jeho stopy</a></p>
<p><a href="#k08">8. Varianta třetí verze pluginu naprogramovaná ve Scheme</a></p>
<p><a href="#k09">9. Varianta třetí verze pluginu naprogramovaná v&nbsp;Pythonu</a></p>
<p><a href="#k10">10. Proměnná a konfigurovatelná velikost hvězd</a></p>
<p><a href="#k11">11. Varianta čtvrté verze pluginu naprogramovaná ve Scheme</a></p>
<p><a href="#k12">12. Varianta čtvrté verze pluginu naprogramovaná v&nbsp;Pythonu</a></p>
<p><a href="#k13">13. Přidání druhé vrstvy s&nbsp;rozmazanými hvězdami</a></p>
<p><a href="#k14">14. Varianta páté verze pluginu naprogramovaná ve Scheme</a></p>
<p><a href="#k15">15. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k16">16. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Tvorba pluginů pro grafický editor GIMP (3.část &ndash; vykreslení hvězdné oblohy)</h2>

<p>Na předchozí dvě části článku o tvorbě pluginů určených pro bitmapový grafický editor GIMP [<a href="https://mojefedora.cz/tvorba-pluginu-pro-graficky-editor-gimp/">1</a>] [<a href="https://mojefedora.cz/tvorba-pluginu-pro-graficky-editor-gimp-2-cast/">2</a>] dnes navážeme, protože v&nbsp;několika krocích naprogramujeme konfigurovatelný zásuvný modul (<i>plugin</i>), který po svém spuštění vytvoří nový bitmapový obrázek a posléze v&nbsp;tomto obrázku vykreslí hvězdnou oblohu. První verze pluginu bude velmi jednoduchá, poslední (konkrétně pátá) verze pak již poměrně sofistikovaná, protože se v&nbsp;ní budou používat další filtry (rozmazání, normalizace) dostupné v&nbsp;každé instalaci GIMPu a nakonec se nevyhneme ani nutnosti manipulace s&nbsp;hladinami (<i>layers</i>).</p>

<p>Pro začátek si připomeňme, že pluginy pro grafický editor GIMP je možné vytvářet buď v&nbsp;programovacím jazyce Scheme s&nbsp;využitím technologie pojmenované Script-fu, nebo v&nbsp;Pythonu (v&nbsp;tomto případě jde o technologii nazvanou Python-fu). V&nbsp;rámci porovnání syntaxe i sémantiky obou zmíněných jazyků bude plugin paralelně vytvářen jak ve Scheme, tak i v&nbsp;Pythonu. Funkčně by se v&nbsp;obou případech mělo jednat o prakticky totožný plugin jen s&nbsp;nepatrně odlišným chováním.</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/02/16-1.png"><img class="alignnone size-thumbnail wp-image-8398" src="https://mojefedora.cz/wp-content/uploads/2017/02/16-1-312x254.png" alt="" width="312" height="254" /></a>
<p><i>Obrázek 1: Ukázka poměrně jednoduchého demonstračního příkladu popsaného v&nbsp;předchozí části tohoto článku.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Jednoduchá hvězdná obloha &ndash; verze naprogramovaná ve Scheme</h2>

<p>První verze pluginu určeného pro vytvoření hvězdné oblohy bude prozatím velmi jednoduchá. Funkce, která hvězdnou oblohu vytvoří, bude akceptovat tři parametry: šířku obrázku, výšku obrázku a celkový počet hvězd, které se mají vykreslit. Všechny parametry se budou nastavovat z&nbsp;dialogu pluginu, který vypadá následovně:</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/02-1.png"><img class="alignnone size-thumbnail wp-image-8694" src="https://mojefedora.cz/wp-content/uploads/2017/04/02-1-380x254.png" alt="" width="380" height="254" /></a>
<p><i>Obrázek 2: Konfigurační dialog první verze pluginu pro vykreslení hvězdné oblohy.</i></p>

<p>Deklarace konfiguračního dialogu z&nbsp;předchozího obrázku může vypadat takto:</p>

<pre>
(script-fu-register "script-fu-stars-1"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars1"
                    "Vytvori obrazek hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-04-17"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars"        '(250 10 2000 10 20 0 1)
)
</pre>

<p>Zavolaná funkce nazvaná <strong>script-fu-stars-1</strong> postupně provede následující kroky:</p>

<ol>
<li>Vytvoří nový obrázek typu RGB (Red, Green, Blue) s&nbsp;nastavenou šířkou a výškou zadanou prvními dvěma parametry.</li>
<li>Vytvoří hladinu nazvanou &bdquo;Stars&ldquo;, která má stejné rozměry, jako obrázek (teoreticky se mohou rozměry hladiny lišit od rozměrů obrázku).</li>
<li>Tuto hladinu vloží do obrázku na nultou pozici (hladiny se ukládají nad sebe do jakéhosi zásobníku).</li>
<li>Deklaruje tříprvkové pole bajtů sloužící pro uložení RGB barvy hvězd.</li>
<li>Nastaví barvu pozadí (tmavě modrá) a vyplní hladinu &bdquo;Stars&ldquo; touto barvou.</li>
<li>V&nbsp;programové smyčce vykreslí hvězdy na náhodné pozice. Každá hvězda je vykreslena jediným žlutým pixelem.</li>
</ol>

<p>Programová smyčka, v&nbsp;níž se vykreslí hvězdy, vypadá takto:</p>

<pre>
(do ((i 0 (+ i 1)))
    ((= i stars))
    (let* (
       (x (rand width))
       (y (rand height)))
       ; vykreslení žlutého pixelu/hvězdy
       (gimp-drawable-set-pixel layer x y 3 pixel))
) ; end of loop
</pre>

<p>Poznámka: správně by se poslední uzavírací závorka měla psát za volání funkce <strong>gimp-drawable-set-pixel</strong>.</p>

<p>Podívejme se nyní na zdrojový kód funkce <strong>script-fu-stars-1</strong>. Nejsložitější částí skriptu je programová smyčka, která se v&nbsp;programovacím jazyku Scheme dá vytvořit buď makrem pojmenovaným <strong>repeat</strong> (toto makro však většinou není ve Script-fu dostupné), iterací s&nbsp;takzvanou tail call optimalizací (TCO) nebo s&nbsp;využitím takzvané speciální formy <strong>do</strong>. Vlastní vykreslení hvězd se provádí funkcí <strong>gimp-drawable-set-pixel</strong>, kterou již známe z&nbsp;předchozích částí článku:</p>

<pre>
; Funkce, která vytvoří nový obrázek o zadané velikosti.
; V obrázku bude jedna hladina nazvaná "Stars" a
; v této hladině bude vykreslena hvězdná obloha.
(define (script-fu-stars-1 width height stars)
    ; definice lokálních proměnných
    (let*
        (
            ; vytvoření nového obrázku, jehož ID se uloží
            ; do proměnné nazvané "image"
            (image (car (gimp-image-new width height RGB)))
            ; vytvoření nové hladiny, jejíž ID se uloží
            ; do proměnné nazvané "layer"
            (layer (car (gimp-layer-new image width height RGB-IMAGE "Stars" 100 NORMAL-MODE)))
            ; pole s uloženými RGB hodnotami pixelu
            (pixel (cons-array 3 'byte)))

        ; barva vykreslovanych hvezd
        (aset pixel 0 255)
        (aset pixel 1 255)
        (aset pixel 2 50)

        ; zákaz ukládání operací do zásobníku
        (gimp-image-undo-disable image)
        ; přidání hladiny do vytvořeného obrázku
        (gimp-image-add-layer image layer 0)

        ; změna barvy popředí a pozadí
        (gimp-palette-set-foreground '(255 255 255))
        (gimp-context-set-background '(0 0 40))

        ; vyplnění hladiny konstantní barvou
        (gimp-drawable-fill layer 1)  ;0 FG, 1 BG

        (do ((i 0 (+ i 1)))
            ((= i stars))
            (let* (
               (x (rand width))
               (y (rand height)))
               ; vykreslení žlutého pixelu/hvězdy
               (gimp-drawable-set-pixel layer x y 3 pixel))
        ) ; end of loop

        ; zobrazení právě vytvořeného obrázku
        (gimp-display-new image)

        ; povolení ukládání operací do zásobníku
        (gimp-image-undo-enable image)))

; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-1"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars1"
                    "Vytvori obrazek hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-02-19"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars"        '(250 10 2000 10 20 0 1)
)
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/03-2.png"><img class="alignnone size-thumbnail wp-image-8695" src="https://mojefedora.cz/wp-content/uploads/2017/04/03-2-364x254.png" alt="" width="364" height="254" /></a>
<p><i>Obrázek 3: Prozatím velmi primitivní hvězdná obloha vykreslená první verzí pluginu.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Přepis prvního pluginu do Pythonu</h2>

<p>Přepis první verze pluginu z&nbsp;programovacího jazyka Scheme do dnes populárnějšího Pythonu vlastně není nijak složitý. Zkombinujeme zde dva přístupy &ndash; vytváření nových objektů (obrázek, hladina) s&nbsp;využitím konstruktorů <strong>gimpfu.gimp.Image()</strong> a <strong>gimpfu.gimp.Layer()</strong> a přístup k&nbsp;již existujícím &bdquo;GIMPovským&ldquo; objektům přes takzvanou <strong>pdb</strong> neboli <i>procedural database</i>. To se týká především volání funkce <strong>gimp_drawable_set_pixel()</strong>, což je vlastně stejná funkce, jako výše zmíněná <strong>(gimp-drawable-set-pixel)</strong>. Ovšem programovací jazyk Python neumožňuje používat ve jménech funkcí znak pomlčky, takže je nutné všechny pomlčky nahradit za podtržítka (totéž ostatně platí i pro všechny další identifikátory, včetně jmen parametrů funkcí, jmen proměnných, názvů modulů atd.).</p>

<p>Rozdíly ve volání funkcí použitých v&nbsp;našem skriptu ve stručnosti shrnuje následující tabulka:</p>

<table>
<tr><th>Funkce ve Scheme</th><th>Volání v&nbsp;Pythonu</th></tr>
<tr><td>(gimp-image-new)</td><td>gimp.Image()</td></tr>
<tr><td>(gimp-layer-new)</td><td>gimp.Layer()</td></tr>
<tr><td>(gimp-image-add-layer)</td><td>image.add_layer()</td></tr>
<tr><td>(gimp-drawable-fill)</td><td>layer.fill()</td></tr>
<tr><td>(gimp-drawable-set-pixel)</td><td>pdb.gimp_drawable_set_pixel()</td></tr>
<tr><td>(gimp-display-new)</td><td>gimp.Display()</td></tr>
</table>

<p>Navíc si povšimněte, že se barva pixelu specifikuje n-ticí (<i>tuple</i>), což je mnohem jednodušší a dokonce i čitelnější, než v&nbsp;případě programovacího jazyka Scheme:</p>

<pre>
pdb.gimp_drawable_set_pixel(layer, x, y, 3, (255, 255, 50))
</pre>

<p>Programová smyčka vykreslující hvězdy se taktéž částečně zjednodušila:</p>

<pre>
for i in range(int(stars)):
    # pozice hvezdy v obrazku
    x = randint(0, int(width)-1)
    y = randint(0, int(height)-1)
    # vykresleni jedne hvezdy do obrazku
    pdb.gimp_drawable_set_pixel(layer, x, y, 3, (255, 255, 50))
</pre>

<p>Zdrojový kód první verze pluginu přepsaného do programovacího jazyka Python vypadá následovně:</p>

<pre>
#!/usr/bin/env python

from gimpfu import *
from random import *

# funkce zavolana po spusteni pluginu uzivatelem
def create_starry_sky_1(width, height, stars):
    # vytvoreni noveho obrazku
    image = gimp.Image(int(width), int(height), RGB);

    # vytvoreni nove hladiny
    layer = gimp.Layer(image, "Stars", int(width), int(height), RGB_IMAGE, 100, NORMAL_MODE)

    # nastaveni barvy vykreslovani pozadi (druha barva ve vyberu)
    gimp.set_background(0, 0, 40)

    # vyplneni hladiny konstantni barvou
    layer.fill(BACKGROUND_FILL)

    # pridani hladiny do zasobniku hladin v obrazku
    image.add_layer(layer, 0)

    for i in range(int(stars)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-1)
        y = randint(0, int(height)-1)
        # vykresleni jedne hvezdy do obrazku
        pdb.gimp_drawable_set_pixel(layer, x, y, 3, (255, 255, 50))

    # zobrazeni
    gimp.Display(image)

    # zajisteni, ze se okno s obrazkem skutecne prekresli
    gimp.displays_flush()



# Registrace skriptu do prosteedi grafickeho editoru GIMP
# a specifikace parametru nastavitelnych uzivatelem,
# ktere se posleze prenesou jako parametry skriptu.
register(
    "create_starry_sky_1",
    "Vytvor novy obrazek s hvezdnou oblohou",
    "Vytvor novy obrazek s hvezdnou oblohou",
    "Pavel Tisnovsky",
    "Open source",
    "2017-03-16",
    "Vytvor novy obrazek s hvezdnou oblohou",
    "", # plugin se spusti jen pokud neexistuje obrazek
    [
        (PF_SPINNER, "width",  "Image width",  256, (16, 8192, 16)),
        (PF_SPINNER, "height", "Image height", 256, (16, 8192, 16)),
        (PF_SPINNER, "stars",  "Stars",        250, (10, 2000, 10))
    ],
    [],
    create_starry_sky_1,
    menu="&lt;Image&gt;/Filters/Test/")

main()
</pre>

<p>Připomeňme si způsob instalace pluginu naprogramovaného v&nbsp;Pythonu. Celá &bdquo;instalace&ldquo; skládá z&nbsp;pouhých dvou kroků:</p>

<ol>

<li>Kopie zdrojového kódu pluginu do adresáře <i>~/.gimp-2.x/plug-ins</i>, kde <i>x</i> je číslo verze GIMPu. Pro jistotu si zkontrolujte, zda se tento adresář skutečně používá.</li>

<li>Nastavení příznaku spouštění (<strong>+x</strong>). Pokud totiž nebude skript s&nbsp;pluginem spustitelný, bude ho GIMP ignorovat! (dokonce ho ani nezobrazí v&nbsp;seznamu dostupných pluginů). Proto je zapotřebí povolit jeho spuštění aktivním uživatelem, a to konkrétně příkazem <strong>chmod u+x cesta/jméno_skriptu.py</strong>, například <strong>chmod u+x ~/.gimp-2.8/plug-ins/stars1.py</strong> (2.8 nahraďte aktuálně používanou verzí).</li>

</ol>



<p><a name="k04"></a></p>
<h2 id="k04">4. Vykreslení hvězd s&nbsp;využitím aktuálně nastavené tužky</h2>

<p>Již minule jsme se zmínili o tom, že kreslení na úrovni jednotlivých pixelů není v&nbsp;žádném případě typickou operací, kterou skripty určené pro grafický editor <i>GIMP</i> provádí (tuto operaci najdeme jen u několika pluginů). Navíc se jedná i o dosti pomalou operaci, protože plugin vlastně musí nepřímo volat nativní funkce GIMPu. Mnohem častěji se tudíž můžeme setkat se skripty, které kreslí či modifikují obrázek s&nbsp;využitím nástrojů dostupných samotným uživatelům <i>GIMPu</i>, což je samozřejmě mnohem zajímavější a užitečnější, neboť tyto nástroje jsou plně konfigurovatelné, a to jak programově (přímo ze spuštěného skriptu), tak i z&nbsp;grafického uživatelského rozhraní <i>GIMPu</i> (dialogy zobrazované pluginem atd.).</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/02/17-1.png"><img class="alignnone size-thumbnail wp-image-8399" src="https://mojefedora.cz/wp-content/uploads/2017/02/17-1-225x254.png" alt="" width="225" height="254" /></a>
<p><i>Obrázek 4: Výsledek běhu demonstračního příkladu z&nbsp;předchozího článku při malování štětcem (brush).</i></p>

<p>Proto si předchozí verzi pluginu zkusíme nepatrně upravit, a to konkrétně tak, že namísto kreslení na úrovni jednotlivých pixelů použijeme nástroj tužky (<i>pencil</i>). V&nbsp;praxi to konkrétně bude znamenat náhradu řádku:</p>

<pre>
(gimp-drawable-set-pixel layer x y 3 pixel))
</pre>

<p>za řádek:</p>

<pre>
(gimp-pencil layer 2 point))
</pre>

<p>Co však znamenají parametry <strong>2</strong> a <strong>point</strong>? Funkce <strong>gimp-pencil</strong> vyžaduje zadání hladiny, do které se má vykreslovat, dále pak počtu předaných souřadnic a následně taktéž pole vrcholů tvořících stopu tužky. My potřebujeme vykreslit izolované hvězdy (body), takže počet souřadnic bude roven dvěma (jedná se pouze o souřadnice <strong>x</strong> a <strong>y</strong>) a pole vrcholů bude logicky obsahovat právě dvě souřadnice. Pole je v&nbsp;programovacím jazyku Scheme reprezentováno takzvanými <i>vektory</i>, jejichž prvky se nastavují funkcí <strong>vector-set!</strong>. Této funkci je nutné předat vlastní vektor, index měněného prvku a jeho novou hodnotu. Vykreslení jedné hvězdy na náhodně zvolené souřadnice [x,y] tedy bude implementováno přibližně následujícím způsobem:</p>

<pre>
(let* ((point (make-vector 2))
       (x (rand width))
       (y (rand width)))
   (vector-set! point 0 x)
   (vector-set! point 1 y)
   ; vykreslení hvězdy aktuálně nastavenou tužkou
   (gimp-pencil layer 2 point))
</pre>

<p>Poznámka: blok začínající <strong>let*</strong> nám umožňuje snadno vytvořit lokální proměnné (jinými slovy hodnoty navázané na symboly). Zde se konkrétně jedná o proměnné <strong>point</strong>, <strong>x</strong> a <strong>y</strong>. Tyto proměnné jsou platné pouze v&nbsp;daném bloku, tedy až do poslední pravé uzavírací závorky formy <strong>let*</strong>.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Varianta druhé verze pluginu naprogramovaná ve Scheme</h2>

<p>Úprava první verze našeho pluginu takovým způsobem, aby hvězdy vykresloval aktuálně nastaveným nástrojem tužka (<i>pencil</i>) a nikoli přímým vybarvováním jednotlivých pixelů, je jednoduchá, jak je ostatně patrné i z&nbsp;následujícího zdrojového kódu:</p>

<pre>
; Funkce, která vytvoří nový obrázek o zadané velikosti.
; V obrázku bude jedna hladina nazvaná "Stars" a
; v této hladině bude vykreslena hvězdná obloha.
(define (script-fu-stars-2 width height stars)
    ; definice lokálních proměnných
    (let*
        (
            ; vytvoření nového obrázku, jehož ID se uloží
            ; do proměnné nazvané "image"
            (image (car (gimp-image-new width height RGB)))
            ; vytvoření nové hladiny, jejíž ID se uloží
            ; do proměnné nazvané "layer"
            (layer (car (gimp-layer-new image width height RGB-IMAGE "Stars" 100 NORMAL-MODE))))

        ; zákaz ukládání operací do zásobníku
        (gimp-image-undo-disable image)
        ; přidání hladiny do vytvořeného obrázku
        (gimp-image-add-layer image layer 0)

        ; změna barvy popředí a pozadí
        (gimp-palette-set-foreground '(255 255 0))
        (gimp-context-set-background '(0 0 40))

        ; vyplnění hladiny konstantní barvou
        (gimp-drawable-fill layer 1)  ;0 FG, 1 BG

        (do ((i 0 (+ i 1)))
            ((= i stars))
            (let* ((point (make-vector 2))
                   (x (rand width))
                   (y (rand width)))
               (vector-set! point 0 x)
               (vector-set! point 1 y)
               ; vykreslení hvězdy aktuálně nastavenou tužkou
               (gimp-pencil layer 2 point))
        ) ; end of loop

        ; zobrazení právě vytvořeného obrázku
        (gimp-display-new image)

        ; povolení ukládání operací do zásobníku
        (gimp-image-undo-enable image)))

; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-2"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars2"
                    "Vytvori obrazek hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars"        '(250 10 2000 10 20 0 1)
)

; finito
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/05-2.png"><img class="alignnone size-thumbnail wp-image-8696" src="https://mojefedora.cz/wp-content/uploads/2017/04/05-2-419x254.png" alt="" width="419" height="254" /></a>
<p><i>Obrázek 5: Použití nástroje tužka (pencil), která má stopu nastavenou na 3&times;3 pixely.</i></p>

<p>Poznámka: tvar tužky si zvolte ještě před spuštěním pluginu.</p>



<p><a name="k06"></a></p>
<h2 id="k06">6. Varianta druhé verze pluginu naprogramovaná v&nbsp;Pythonu</h2>

<p>Ve variantě pluginu určené pro programovací jazyk Python je zapotřebí provést oproti <a href="#k03">předchozímu příkladu</a> jen jedinou změnu, a to konkrétně náhradu volání <strong>pdb.gimp_drawable_set_pixel()</strong> za <strong>pdb.gimp_pencil()</strong>:</p>

<table>
<tr><th>Funkce ve Scheme</th><th>Volání v&nbsp;Pythonu</th></tr>
<tr><td>(gimp-pencil)</td><td>pdb.gimp_pencil()</td></tr>
</table>

<p>Upravený zdrojový kód druhé verze pluginu naprogramovaného v&nbsp;Pythonu vypadá takto:</p>

<pre>
#!/usr/bin/env python

from gimpfu import *
from random import *

# funkce zavolana po spusteni pluginu uzivatelem
def create_starry_sky_2(width, height, stars):
    # vytvoreni noveho obrazku
    image = gimp.Image(int(width), int(height), RGB);

    # vytvoreni nove hladiny
    layer = gimp.Layer(image, "Stars", int(width), int(height), RGB_IMAGE, 100, NORMAL_MODE)

    # nastaveni barvy vykreslovani pozadi (druha barva ve vyberu)
    gimp.set_background(0, 0, 40)

    # nastaveni barvy vykreslovani popredi (prvni barva ve vyberu)
    gimp.set_foreground(255, 255, 0)

    # vyplneni hladiny konstantni barvou
    layer.fill(BACKGROUND_FILL)

    # pridani hladiny do zasobniku hladin v obrazku
    image.add_layer(layer, 0)

    for i in range(int(stars)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-1)
        y = randint(0, int(height)-1)
        point = (x, y)
        # vykresleni jedne hvezdy do obrazku
        pdb.gimp_pencil(layer, 2, point)

    # zobrazeni
    gimp.Display(image)

    # zajisteni, ze se okno s obrazkem skutecne prekresli
    gimp.displays_flush()



# Registrace skriptu do prostredi grafickeho editoru GIMP
# a specifikace parametru nastavitelnych uzivatelem,
# ktere se posleze prenesou jako parametry skriptu.
register(
    "create_starry_sky_2",
    "Vytvor novy obrazek s hvezdnou oblohou (2)",
    "Vytvor novy obrazek s hvezdnou oblohou (2)",
    "Pavel Tisnovsky",
    "Open source",
    "2017-03-16",
    "Vytvor novy obrazek s hvezdnou oblohou (2)",
    "", # plugin se spusti jen pokud neexistuje obrazek
    [
        (PF_SPINNER, "width",  "Image width",  256, (16, 8192, 16)),
        (PF_SPINNER, "height", "Image height", 256, (16, 8192, 16)),
        (PF_SPINNER, "stars",  "Stars",        250, (10, 2000, 10))
    ],
    [],
    create_starry_sky_2,
    menu="&lt;Image&gt;/Filters/Test/")

main()
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/06-1.png"><img class="alignnone size-thumbnail wp-image-8697" src="https://mojefedora.cz/wp-content/uploads/2017/04/06-1-419x254.png" alt="" width="419" height="254" /></a>
<p><i>Obrázek 6: Volba příliš velké stopy štětce.</i></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. Výběr štětce s&nbsp;nastavením velikosti jeho stopy</h2>

<p><a href="#k05">Předchozí demonstrační příklad</a> sice pracoval korektně, ovšem vyžadoval, aby byla stopa tužky nebo štětce nastavena ještě před vlastním spuštěním skriptu, což je okolnost, kterou uživatelé v&nbsp;naprosté většině případů neočekávají. Proto se pokusíme příklad nepatrně upravit takovým způsobem, aby bylo možné tvar stopy štětce nastavit v&nbsp;konfiguračním dialogu pluginu. Již <a href="https://mojefedora.cz/tvorba-pluginu-pro-graficky-editor-gimp-2-cast/">v&nbsp;předchozí části</a> tohoto seriálu jsme se dozvěděli, že konfigurační dialog skutečně může obsahovat ovládací prvek s&nbsp;výběrem štětce, barvy, barvového přechodu, hladiny atd. Konkrétně v&nbsp;případě výběru štětce se jedná o prvek pojmenovaný <strong>SF-BRUSH</strong>, který dále může obsahovat návěští (<i>label</i>) a implicitně vybraný štětec. Upravený dialog tedy může vypadat například následovně:</p>

<pre>
(script-fu-register "script-fu-stars-3"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars3"
                    "Vytvori obrazek hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars"        '(250 10 2000 10 20 0 1)
                    SF-BRUSH      "Brush"        '("2. Hardness 075" 100 -1 0)
                    SF-COLOR      "Star colors"  "yellow"
)
</pre>

<p>Povšimněte si, jakým způsobem se zapisují informace o implicitně vybraném štětci &ndash; jedná se o řetězec s&nbsp;velikostí stopy, jménem štětce a stupně barevného krytí.</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/07-1.png"><img class="alignnone size-thumbnail wp-image-8698" src="https://mojefedora.cz/wp-content/uploads/2017/04/07-1-364x254.png" alt="" width="364" height="254" /></a>
<p><i>Obrázek 7: Štětec s&nbsp;&bdquo;rozmazanou&ldquo; stopou.</i></p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Varianta třetí verze pluginu naprogramovaná ve Scheme</h2>

<p>Skript bude samozřejmě zapotřebí nepatrně upravit, a to konkrétně takovým způsobem, že se do jeho funkce bude předávat i informace o vybraném štětci:</p>

<pre>
(define (script-fu-stars-3 width height stars selected-brush selected-color)
</pre>

<p>Použití vybraného štětce je snadné (v&nbsp;případě potřeby lze z&nbsp;objektu <strong>selected-brush</strong> získat i velikost štětce, to se nám zde však moc nehodí):</p>

<pre>
; nastavení velikosti a tvaru štětce
(gimp-context-set-brush-size 1.0)
(gimp-context-set-brush      (car selected-brush))
</pre>

<p>Podívejme se na úplný zdrojový kód takto upraveného skriptu:</p>

<pre>
; Funkce, která vytvoří nový obrázek o zadané velikosti.
; V obrázku bude jedna hladina nazvaná "Stars" a
; v této hladině bude vykreslena hvezdna obloha.
(define (script-fu-stars-3 width height stars selected-brush selected-color)
    ; definice lokálních proměnných
    (let*
        (
            ; vytvoření nového obrázku, jehož ID se uloží
            ; do proměnné nazvané "image"
            (image (car (gimp-image-new width height RGB)))
            ; vytvoření nové hladiny, jejíž ID se uloží
            ; do proměnné nazvané "layer"
            (layer (car (gimp-layer-new image width height RGB-IMAGE "Stars" 100 NORMAL-MODE))))
            ; pole s uloženými RGB hodnotami pixelu

        ; zákaz ukládání operací do zásobníku
        (gimp-image-undo-disable image)
        ; přidání hladiny do vytvořeného obrázku
        (gimp-image-add-layer image layer 0)

        ; změna barvy popředí a pozadí
        (gimp-context-set-background '(0 0 40))
        (gimp-context-set-foreground selected-color)
        ; nastavení velikosti a tvaru štětce
        (gimp-context-set-brush-size 1.0)
        (gimp-context-set-brush      (car selected-brush))

        ; vyplnění hladiny konstantní barvou
        (gimp-drawable-fill layer 1)  ;0 FG, 1 BG

        (do ((i 0 (+ i 1)))
            ((= i stars))
            (let* (
               (point (make-vector 2))
               (x (rand width))
               (y (rand height)))
               (vector-set! point 0 x)
               (vector-set! point 1 y)
               ; vykreslení hvězdy pomocí štětce
               (gimp-paintbrush-default layer 2 point))
        ) ; end of loop

        ; zobrazení právě vytvořeného obrázku
        (gimp-display-new image)

        ; povolení ukládání operací do zásobníku
        (gimp-image-undo-enable image)))

; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-3"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars3"
                    "Vytvori obrazek hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars"        '(250 10 2000 10 20 0 1)
                    SF-BRUSH      "Brush"        '("2. Hardness 075" 100 -1 0)
                    SF-COLOR      "Star colors"  "yellow"
)

; finito
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. Varianta třetí verze pluginu naprogramovaná v&nbsp;Pythonu</h2>

<p>Přepis do programovacího jazyka Python vyžaduje v&nbsp;první řadě změnu konfigurace dialogu:</p>

<pre>
# Registrace skriptu do prostredi grafickeho editoru GIMP
# a specifikace parametru nastavitelnych uzivatelem,
# ktere se posleze prenesou jako parametry skriptu.
register(
    "create_starry_sky_3",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "Pavel Tisnovsky",
    "Open source",
    "2017-03-16",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "", # plugin se spusti jen pokud neexistuje obrazek
    [
        (PF_SPINNER, "width",  "Image width",  256, (16, 8192, 16)),
        (PF_SPINNER, "height", "Image height", 256, (16, 8192, 16)),
        (PF_SPINNER, "stars",  "Stars",        250, (10, 2000, 10)),
        (PF_BRUSH,   "brush",  "Brush",        None),
    ],
    [],
    create_starry_sky_3,
    menu="&lt;Image&gt;/Filters/Test/")
</pre>

<p>Dále pak úpravu hlavičky funkce představující plugin:</p>

<pre>
# funkce zavolana po spusteni pluginu uzivatelem
def create_starry_sky_3(width, height, stars, brush):
</pre>

<p>A následně použití objektu představujícího vybraný štětec:</p>

<pre>
# nastaveni velikosti a tvaru stetce
pdb.gimp_context_set_brush_size(1.0)
pdb.gimp_context_set_brush(brush)
</pre>

<p>Podívejme se nyní na úplný zdrojový kód takto upraveného skriptu:</p>

<pre>
#!/usr/bin/env python

from gimpfu import *
from random import *

# funkce zavolana po spusteni pluginu uzivatelem
def create_starry_sky_3(width, height, stars, brush):
    # vytvoreni noveho obrazku
    image = gimp.Image(int(width), int(height), RGB);

    # vytvoreni nove hladiny
    layer = gimp.Layer(image, "Stars", int(width), int(height), RGB_IMAGE, 100, NORMAL_MODE)

    # nastaveni barvy vykreslovani pozadi (druha barva ve vyberu)
    gimp.set_background(0, 0, 40)

    # nastaveni barvy vykreslovani popredi (prvni barva ve vyberu)
    gimp.set_foreground(255, 255, 0)

    # nastaveni velikosti a tvaru stetce
    pdb.gimp_context_set_brush_size(1.0)
    pdb.gimp_context_set_brush(brush)

    # vyplneni hladiny konstantni barvou
    layer.fill(BACKGROUND_FILL)

    # pridani hladiny do zasobniku hladin v obrazku
    image.add_layer(layer, 0)

    for i in range(int(stars)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-1)
        y = randint(0, int(height)-1)
        point = (x, y)
        # vykresleni jedne hvezdy do obrazku
        pdb.gimp_paintbrush_default(layer, 2, point)

    # zobrazeni
    gimp.Display(image)

    # zajisteni, ze se okno s obrazkem skutecne prekresli
    gimp.displays_flush()



# Registrace skriptu do prostredi grafickeho editoru GIMP
# a specifikace parametru nastavitelnych uzivatelem,
# ktere se posleze prenesou jako parametry skriptu.
register(
    "create_starry_sky_3",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "Pavel Tisnovsky",
    "Open source",
    "2017-03-16",
    "Vytvor novy obrazek s hvezdnou oblohou (3)",
    "", # plugin se spusti jen pokud neexistuje obrazek
    [
        (PF_SPINNER, "width",  "Image width",  256, (16, 8192, 16)),
        (PF_SPINNER, "height", "Image height", 256, (16, 8192, 16)),
        (PF_SPINNER, "stars",  "Stars",        250, (10, 2000, 10)),
        (PF_BRUSH,   "brush",  "Brush",        None),
    ],
    [],
    create_starry_sky_3,
    menu="&lt;Image&gt;/Filters/Test/")

main()
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. Proměnná a konfigurovatelná velikost hvězd</h2>

<p>Obrázky vytvořené předchozími variantami pluginu ve skutečnosti nevypadají příliš přirozeně, protože všechny hvězdy mají stejnou velikost (která odpovídá svítivosti). I tento nedostatek můžeme napravit. Nejprve se vrátíme zpět k&nbsp;vykreslování jednotlivých pixelů, ovšem náš plugin upravíme takovým způsobem, že bude vykreslovat tři velikosti hvězd. Nejmenší hvězdy budou mít velikost jeden pixel, prostřední hvězdy velikost 2&times;2 pixely a hvězdy největší budou mít velikost 3&times;3 pixely. K&nbsp;tomu nám pomohou pomocné funkce:</p>

<pre>
(define (pixel-1x1 layer x y pixel)
    (gimp-drawable-set-pixel layer x y 3 pixel))

(define (pixel-2x2 layer x y pixel)
    (gimp-drawable-set-pixel layer x       y       3 pixel)
    (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
    (gimp-drawable-set-pixel layer x       (+ 1 y) 3 pixel)
    (gimp-drawable-set-pixel layer (+ 1 x) (+ 1 y) 3 pixel))

(define (pixel-3x3 layer x y pixel)
    (gimp-drawable-set-pixel layer x       y       3 pixel)
    (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
    (gimp-drawable-set-pixel layer (+ 2 x) y       3 pixel)
    (gimp-drawable-set-pixel layer x       (+ y 1) 3 pixel)
    (gimp-drawable-set-pixel layer (+ 1 x) (+ y 1) 3 pixel)
    (gimp-drawable-set-pixel layer (+ 2 x) (+ y 1) 3 pixel)
    (gimp-drawable-set-pixel layer x       (+ y 2) 3 pixel)
    (gimp-drawable-set-pixel layer (+ 1 x) (+ y 2) 3 pixel)
    (gimp-drawable-set-pixel layer (+ 2 x) (+ y 2) 3 pixel))
</pre>

<p>Dále upravíme skript takovým způsobem, že se vykreslí určitý počet malých hvězd, určitý počet hvězd větších a následně hvězdy největší:</p>

<pre>
(do ((i 0 (+ i 1)))
    ((= i stars1))
    (let* (
       (x (rand width))
       (y (rand height)))
       ; vykreslení hvězdy
       (pixel-1x1 layer x y pixel)))

(do ((i 0 (+ i 1)))
    ((= i stars2))
    (let* (
       (x (rand (- width 1)))
       (y (rand (- height 1))))
       ; vykreslení hvězdy
       (pixel-2x2 layer x y pixel)))

(do ((i 0 (+ i 1)))
    ((= i stars3))
    (let* (
       (x (rand (- width 2)))
       (y (rand (- height 2))))
       ; vykreslení hvězdy
       (pixel-3x3 layer x y pixel)))
</pre>

<p>Poznámka: samozřejmě je možné namísto tří smyček použít smyčku jedinou, které se předá funkce použitá pro vykreslení. Nicméně předchozí varianta je sice delší, ovšem čitelnější.</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/08-2.png"><img class="alignnone size-thumbnail wp-image-8699" src="https://mojefedora.cz/wp-content/uploads/2017/04/08-2-419x254.png" alt="" width="419" height="254" /></a>
<p><i>Obrázek 8: Obloha vykreslená skriptem používajícím proměnnou velikost hvězd.</i></p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/09-2.png"><img class="alignnone size-thumbnail wp-image-8700" src="https://mojefedora.cz/wp-content/uploads/2017/04/09-2-364x254.png" alt="" width="364" height="254" /></a>
<p><i>Obrázek 9: Pro porovnání: konstantní velikost hvězd.</i></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. Varianta čtvrté verze pluginu naprogramovaná ve Scheme</h2>

<p>Plugin samozřejmě potřebuje úpravu dialogu, v&nbsp;němž si uživatel bude moci vybrat, kolik velkých/malých/středních hvězd si přeje zobrazit:</p>

<pre>
; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-4"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars4"
                    "Vytvori obrazek s hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars1"       '(200 10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars2"       '(50  10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars3"       '(5   10 1000 10 20 0 1)
)
</pre>

<p>Úplný zdrojový kód pluginu vypadá následovně:</p>

<pre>
; Funkce, která vytvoří nový obrázek o zadané velikosti.
; V obrázku bude jedna hladina nazvaná "Stars" a
; v této hladině bude vykreslena hvezdna obloha.
(define (script-fu-stars-4 width height stars1 stars2 stars3)
    ; definice lokálních proměnných
    (let*
        (
            ; vytvoření nového obrázku, jehož ID se uloží
            ; do proměnné nazvané "image"
            (image (car (gimp-image-new width height RGB)))
            ; vytvoření nové hladiny, jejíž ID se uloží
            ; do proměnné nazvané "layer"
            (layer (car (gimp-layer-new image width height RGB-IMAGE "Stars" 100 NORMAL-MODE)))
            ; pole s uloženými RGB hodnotami pixelu
            (pixel (cons-array 3 'byte)))

        ; barva vykreslovanych hvezd
        (aset pixel 0 255)
        (aset pixel 1 255)
        (aset pixel 2 50)

        ; zákaz ukládání operací do zásobníku
        (gimp-image-undo-disable image)
        ; přidání hladiny do vytvořeného obrázku
        (gimp-image-add-layer image layer 0)

        ; změna barvy popředí a pozadí
        (gimp-palette-set-foreground '(255 255 255))
        (gimp-context-set-background '(0 0 40))

        ; vyplnění hladiny konstantní barvou
        (gimp-drawable-fill layer 1)  ;0 FG, 1 BG

        (define (pixel-1x1 layer x y pixel)
            (gimp-drawable-set-pixel layer x y 3 pixel))

        (define (pixel-2x2 layer x y pixel)
            (gimp-drawable-set-pixel layer x       y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
            (gimp-drawable-set-pixel layer x       (+ 1 y) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ 1 y) 3 pixel))

        (define (pixel-3x3 layer x y pixel)
            (gimp-drawable-set-pixel layer x       y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) y       3 pixel)
            (gimp-drawable-set-pixel layer x       (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer x       (+ y 2) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ y 2) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) (+ y 2) 3 pixel))

        (do ((i 0 (+ i 1)))
            ((= i stars1))
            (let* (
               (x (rand width))
               (y (rand height)))
               ; vykreslení hvězdy
               (pixel-1x1 layer x y pixel))
        ) ; end of loop

        (do ((i 0 (+ i 1)))
            ((= i stars2))
            (let* (
               (x (rand (- width 1)))
               (y (rand (- height 1))))
               ; vykreslení hvězdy
               (pixel-2x2 layer x y pixel))
        ) ; end of loop

        (do ((i 0 (+ i 1)))
            ((= i stars3))
            (let* (
               (x (rand (- width 2)))
               (y (rand (- height 2))))
               ; vykreslení hvězdy
               (pixel-3x3 layer x y pixel))
        ) ; end of loop

        ; zobrazení právě vytvořeného obrázku
        (gimp-display-new image)

        ; povolení ukládání operací do zásobníku
        (gimp-image-undo-enable image)))

; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-4"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars4"
                    "Vytvori obrazek s hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars1"       '(200 10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars2"       '(50  10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars3"       '(5   10 1000 10 20 0 1)
)

; finito
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/10.png"><img class="alignnone size-thumbnail wp-image-8701" src="https://mojefedora.cz/wp-content/uploads/2017/04/10-284x254.png" alt="" width="284" height="254" /></a>
<p><i>Obrázek 10: Zvětšená část obrázku, na níž jsou vidět skutečné tvary hvězd.</i></p>



<p><a name="k12"></a></p>
<h2 id="k12">12. Varianta čtvrté verze pluginu naprogramovaná v&nbsp;Pythonu</h2>

<p>Přepis čtvrté verze pluginu do programovacího jazyka Python je přímočará, protože i zde si vytvoříme pomocné funkce <strong>pixel_1x1</strong>, <strong>pixel_2x2</strong> a <strong>pixel_3x3</strong>, které postupně zavoláme ve třech programových smyčkách:</p>

<pre>
for i in range(int(stars1)):
    # pozice hvezdy v obrazku
    x = randint(0, int(width)-1)
    y = randint(0, int(height)-1)
    # vykresleni jedne hvezdy do obrazku
    pixel_1x1(layer, x, y, star_color)

for i in range(int(stars2)):
    # pozice hvezdy v obrazku
    x = randint(0, int(width)-2)
    y = randint(0, int(height)-2)
    # vykresleni jedne hvezdy do obrazku
    pixel_2x2(layer, x, y, star_color)

for i in range(int(stars3)):
    # pozice hvezdy v obrazku
    x = randint(0, int(width)-3)
    y = randint(0, int(height)-3)
    # vykresleni jedne hvezdy do obrazku
    pixel_3x3(layer, x, y, star_color)
</pre>

<p>Úplný zdrojový kód čtvrté varianty pluginu vypadá následovně:</p>

<pre>
#!/usr/bin/env python

from gimpfu import *
from random import *

def pixel_1x1(drawable, x, y, color):
    pdb.gimp_drawable_set_pixel(drawable, x, y, 3, color)

def pixel_2x2(drawable, x, y, color):
    pdb.gimp_drawable_set_pixel(drawable, x, y, 3, color)
    pdb.gimp_drawable_set_pixel(drawable, x+1, y, 3, color)
    pdb.gimp_drawable_set_pixel(drawable, x, y+1, 3, color)
    pdb.gimp_drawable_set_pixel(drawable, x+1, y+1, 3, color)

def pixel_3x3(drawable, x, y, color):
    for dy in range(0, 3):
        for dx in range(0, 3):
            pdb.gimp_drawable_set_pixel(drawable, x+dx, y+dy, 3, color)

# funkce zavolana po spusteni pluginu uzivatelem
def create_starry_sky_4(width, height, stars1, stars2, stars3):
    # vytvoreni noveho obrazku
    image = gimp.Image(int(width), int(height), RGB);

    # vytvoreni nove hladiny
    layer = gimp.Layer(image, "Stars", int(width), int(height), RGB_IMAGE, 100, NORMAL_MODE)

    # nastaveni barvy vykreslovani pozadi (druha barva ve vyberu)
    gimp.set_background(0, 0, 40)

    # vyplneni hladiny konstantni barvou
    layer.fill(BACKGROUND_FILL)

    # pridani hladiny do zasobniku hladin v obrazku
    image.add_layer(layer, 0)

    star_color = (255, 255, 50)

    for i in range(int(stars1)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-1)
        y = randint(0, int(height)-1)
        # vykresleni jedne hvezdy do obrazku
        pixel_1x1(layer, x, y, star_color)

    for i in range(int(stars2)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-2)
        y = randint(0, int(height)-2)
        # vykresleni jedne hvezdy do obrazku
        pixel_2x2(layer, x, y, star_color)

    for i in range(int(stars3)):
        # pozice hvezdy v obrazku
        x = randint(0, int(width)-3)
        y = randint(0, int(height)-3)
        # vykresleni jedne hvezdy do obrazku
        pixel_3x3(layer, x, y, star_color)

    # zobrazeni
    gimp.Display(image)

    # zajisteni, ze se okno s obrazkem skutecne prekresli
    gimp.displays_flush()



# Registrace skriptu do prostredi grafickeho editoru GIMP
# a specifikace parametru nastavitelnych uzivatelem,
# ktere se posleze prenesou jako parametry skriptu.
register(
    "create_starry_sky_4",
    "Vytvor novy obrazek s hvezdnou oblohou (4)",
    "Vytvor novy obrazek s hvezdnou oblohou (4)",
    "Pavel Tisnovsky",
    "Open source",
    "2017-03-16",
    "Vytvor novy obrazek s hvezdnou oblohou (4)",
    "", # plugin se spusti jen pokud neexistuje obrazek
    [
        (PF_SPINNER, "width",  "Image width",  256, (16, 8192, 16)),
        (PF_SPINNER, "height", "Image height", 256, (16, 8192, 16)),
        (PF_SPINNER, "stars1", "Stars1",       200, (10, 2000, 10)),
        (PF_SPINNER, "stars2", "Stars2",       50,  (10, 2000, 10)),
        (PF_SPINNER, "stars3", "Stars3",       5,   (10, 2000, 10))
    ],
    [],
    create_starry_sky_4,
    menu="&lt;Image&gt;/Filters/Test/")

main()
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/11.png"><img class="alignnone size-thumbnail wp-image-8702" src="https://mojefedora.cz/wp-content/uploads/2017/04/11-306x254.png" alt="" width="306" height="254" /></a>
<p><i>Obrázek 11: Dialog čtvrté a páté varianty pluginu s&nbsp;výběrem počtu malých/velkých/středních hvězd.</i></p>



<p><a name="k13"></a></p>
<h2 id="k13">13. Přidání druhé vrstvy s&nbsp;rozmazanými hvězdami</h2>

<p>Hvězdnou oblohu je možné vylepšit, a to mnoha různými způsoby. Jeden z&nbsp;nejjednodušších způsobů spočívá v&nbsp;přidání další vrstvy, v&nbsp;níž budou hvězdy rozmazány, konkrétně Gaussovým filtrem s&nbsp;následnou normalizací. Výsledek vypadá zhruba takto:</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/12.png"><img class="alignnone size-thumbnail wp-image-8703" src="https://mojefedora.cz/wp-content/uploads/2017/04/12-364x254.png" alt="" width="364" height="254" /></a>
<p><i>Obrázek 12: Vrstva s&nbsp;rozmazanými hvězdami.</i></p>

<p>Ovšem vzhledem k&nbsp;tomu, že se rozmazáním ztratí přesná kontura hvězd, vyzkoušíme malý trik &ndash; původní vrstvu zkombinujeme s&nbsp;vrstvou novou použitím režimu nazvaného <strong>Screen mode</strong> (<a href="https://docs.gimp.org/en/gimp-concepts-layer-modes.html">https://docs.gimp.org/en/gimp-concepts-layer-modes.html</a>). Při použití tohoto režimu se nejprve pixely z&nbsp;obou vrstev invertují, následně se vynásobí, vydělí konstantou 255 a znovu se invertují. Výsledkem je obrázek, v&nbsp;němž přes rozmazané skvrny hvězd můžeme vidět i původní nerozmazané kontury:</p>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/13.png"><img class="alignnone size-thumbnail wp-image-8704" src="https://mojefedora.cz/wp-content/uploads/2017/04/13-420x254.png" alt="" width="420" height="254" /></a>
<p><i>Obrázek 13: Původní vrstva překrytá s&nbsp;vrstvou s&nbsp;rozmazanými hvězdami. Při kombinaci vrstev se používá Screen mode.</i></p>

<p>Při tvorbě obrázku s&nbsp;rozmazanými hvězdami budeme postupovat následujícím způsobem. Nejprve vytvoříme novou vrstvu, která bude kopií vrstvy původní:</p>

<pre>
; vytvoreni nove vrstvy kopii stavajici vrstvy
(define blurred-stars
    (car (gimp-layer-copy layer 1)))
</pre>

<p>Následně se vrstva přidá do zásobníku vrstev a nastaví se jako vrstva aktivní:</p>

<pre>
(gimp-image-add-layer image blurred-stars -1)
(gimp-image-set-active-layer image blurred-stars)
</pre>

<p>Nyní již můžeme aplikovat vybrané filtry, konkrétně Gaussovo rozmazání a normalizaci:</p>

<pre>
; aplikace dvojice filtru
(plug-in-gauss-rle 1 image blurred-stars 5 1 1)
(plug-in-normalize 1 image blurred-stars)
</pre>

<p>Nastavíme základní parametry vrstvy a její jméno. Povšimněte se především nastavení režimu zobrazení a kombinace vrstev (<strong>SCREEN-MODE</strong>):</p>

<pre>
; nastaveni parametru vrstvy
(gimp-layer-set-mode blurred-stars SCREEN-MODE)
(gimp-layer-set-name blurred-stars "blurred-stars")
</pre>

<p>Nakonec se výsledná bitmapa zobrazí:</p>

<pre>
; zobrazení právě vytvořeného obrázku
(gimp-display-new image)
</pre>

<a href="https://mojefedora.cz/wp-content/uploads/2017/04/14.png"><img class="alignnone size-thumbnail wp-image-8705" src="https://mojefedora.cz/wp-content/uploads/2017/04/14-364x254.png" alt="" width="364" height="254" /></a>
<p><i>Obrázek 14: Zvýšení celkového počtu hvězd.</i></p>



<p><a name="k14"></a></p>
<h2 id="k14">14. Varianta páté verze pluginu naprogramovaná ve Scheme</h2>

<p>Úplný zdrojový kód příkladu, v&nbsp;němž se navíc vytvoří nová vrstva s&nbsp;rozmazaným obrázkem, vypadá následovně. Prozatím si uvedeme jen variantu vytvořenou v&nbsp;programovacím jazyku Scheme:</p>

<pre>
; Funkce, která vytvoří nový obrázek o zadané velikosti.
; V obrázku bude jedna hladina nazvaná "Stars" a
; v této hladině bude vykreslena hvezdna obloha.
(define (script-fu-stars-5 width height stars1 stars2 stars3)
    ; definice lokálních proměnných
    (let*
        (
            ; vytvoření nového obrázku, jehož ID se uloží
            ; do proměnné nazvané "image"
            (image (car (gimp-image-new width height RGB)))
            ; vytvoření nové hladiny, jejíž ID se uloží
            ; do proměnné nazvané "layer"
            (layer (car (gimp-layer-new image width height RGB-IMAGE "Stars" 100 NORMAL-MODE)))
            ; pole s uloženými RGB hodnotami pixelu
            (pixel (cons-array 3 'byte)))

        ; barva vykreslovanych hvezd
        (aset pixel 0 255)
        (aset pixel 1 255)
        (aset pixel 2 50)

        ; zákaz ukládání operací do zásobníku
        (gimp-image-undo-disable image)
        ; přidání hladiny do vytvořeného obrázku
        (gimp-image-add-layer image layer 0)

        ; změna barvy popředí a pozadí
        (gimp-palette-set-foreground '(255 255 255))
        (gimp-context-set-background '(0 0 40))

        ; vyplnění hladiny konstantní barvou
        (gimp-drawable-fill layer 1)  ;0 FG, 1 BG

        (define (pixel-1x1 layer x y pixel)
            (gimp-drawable-set-pixel layer x y 3 pixel))

        (define (pixel-2x2 layer x y pixel)
            (gimp-drawable-set-pixel layer x       y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
            (gimp-drawable-set-pixel layer x       (+ 1 y) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ 1 y) 3 pixel))

        (define (pixel-3x3 layer x y pixel)
            (gimp-drawable-set-pixel layer x       y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) y       3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) y       3 pixel)
            (gimp-drawable-set-pixel layer x       (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) (+ y 1) 3 pixel)
            (gimp-drawable-set-pixel layer x       (+ y 2) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 1 x) (+ y 2) 3 pixel)
            (gimp-drawable-set-pixel layer (+ 2 x) (+ y 2) 3 pixel))

        (do ((i 0 (+ i 1)))
            ((= i stars1))
            (let* (
               (x (rand width))
               (y (rand height)))
               ; vykreslení hvězdy
               (pixel-1x1 layer x y pixel))
        ) ; end of loop

        (do ((i 0 (+ i 1)))
            ((= i stars2))
            (let* (
               (x (rand (- width 1)))
               (y (rand (- height 1))))
               ; vykreslení hvězdy
               (pixel-2x2 layer x y pixel))
        ) ; end of loop

        (do ((i 0 (+ i 1)))
            ((= i stars3))
            (let* (
               (x (rand (- width 2)))
               (y (rand (- height 2))))
               ; vykreslení hvězdy
               (pixel-3x3 layer x y pixel))
        ) ; end of loop

        ; vytvoreni nove vrstvy kopii stavajici vrstvy
        (define blurred-stars
            (car (gimp-layer-copy layer 1)))

        (gimp-image-add-layer image blurred-stars -1)
        (gimp-image-set-active-layer image blurred-stars)

        ; aplikace dvojice filtru
        (plug-in-gauss-rle 1 image blurred-stars 5 1 1)
        (plug-in-normalize 1 image blurred-stars)

        ; nastaveni parametru vrstvy
        (gimp-layer-set-mode blurred-stars SCREEN-MODE)
        (gimp-layer-set-name blurred-stars "blurred-stars")

        ; zobrazení právě vytvořeného obrázku
        (gimp-display-new image)

        ; povolení ukládání operací do zásobníku
        (gimp-image-undo-enable image)))

; Registrace skriptu do prostředí grafického editoru GIMP
; a specifikace proměnných nastavitelných uživatelem,
; které se posléze přenesou jako parametry skriptu.
(script-fu-register "script-fu-stars-5"
                    "&lt;Image&gt;/Filters/Render/Pattern/Stars5"
                    "Vytvori obrazek s hvezdnou oblohou."
                    "Pavel Tisnovsky"
                    "Pavel Tisnovsky"
                    "2017-03-16"
                    ""
                    SF-ADJUSTMENT "Image width"  '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Image height" '(256 16 8192 16 64 0 1)
                    SF-ADJUSTMENT "Stars1"       '(200 10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars2"       '(50  10 1000 10 20 0 1)
                    SF-ADJUSTMENT "Stars3"       '(5   10 1000 10 20 0 1)
)

; finito
</pre>



<p><a name="k15"></a></p>
<h2 id="k15">15. Repositář s&nbsp;demonstračními příklady</h2>

<p>Všechny dnes popisované demonstrační příklady byly uloženy do Git repositáře dostupného na adrese <a href="https://github.com/tisnik/presentations">https://github.com/tisnik/presentations</a>. Příklady si můžete v&nbsp;případě potřeby stáhnout i jednotlivě bez nutnosti klonovat celý repositář:</p>

<table>
<tr><th>Příklad</th><th>Odkaz</th></tr>
<tr><td>stars1.scm</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars1.scm">https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars1.scm</a></td></tr>
<tr><td>stars1.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars1.py">https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars1.py</a></td></tr>
<tr><td>stars2.scm</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars2.scm">https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars2.scm</a></td></tr>
<tr><td>stars2.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars2.py">https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars2.py</a></td></tr>
<tr><td>stars3.scm</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars3.scm">https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars3.scm</a></td></tr>
<tr><td>stars3.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars3.py">https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars3.py</a></td></tr>
<tr><td>stars4.scm</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars4.scm">https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars4.scm</a></td></tr>
<tr><td>stars4.py</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars4.py">https://github.com/tisnik/presentations/blob/master/gimp/GIMP-Python/stars4.py</a></td></tr>
<tr><td>stars5.scm</td><td><a href="https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars5.scm">https://github.com/tisnik/presentations/blob/master/gimp/scheme/stars5.scm</a></td></tr>
</table>



<p><a name="k16"></a></p>
<h2 id="k16">16. Odkazy na Internetu</h2>

<ol>

<li>GIMP Home Page<br />
<a href="http://www.gimp.org/">http://www.gimp.org/</a>
</li>

<li>GIMP Python Documentation<br />
<a href="https://www.gimp.org/docs/python/">https://www.gimp.org/docs/python/</a>
</li>

<li>Writing GIMP Scripts and Plug-Ins<br />
<a href="http://gimpbook.com/scripting/">http://gimpbook.com/scripting/</a>
</li>

<li>GIMP Scripts and Plug-ins (slajdy)<br />
<a href="http://gimpbook.com/scripting/slides/index.html">http://gimpbook.com/scripting/slides/index.html</a>
</li>

<li>Use Python to write plug-ins for GIMP<br />
<a href="http://www.ibm.com/developerworks/library/os-autogimp/index.html">http://www.ibm.com/developerworks/library/os-autogimp/index.html</a>
</li>

<li>A Script-Fu Tutorial<br />
<a href="http://www.linuxtopia.org/online_books/graphics_tools/gimp_user_manual/en/gimp-using-script-fu-tutorial.html">http://www.linuxtopia.org/online_books/graphics_tools/gimp_user_manual/en/gimp-using-script-fu-tutorial.html</a>
</li>

<li>A Script-Fu Tutorial<br />
<a href="http://docs.gimp.org/en/gimp-using-script-fu-tutorial.html">http://docs.gimp.org/en/gimp-using-script-fu-tutorial.html</a>
</li>

<li>Scheme control structures<br />
<a href="http://www.r6rs.org/final/html/r6rs-lib/r6rs-lib-Z-H-6.html#node_chap_5">http://www.r6rs.org/final/html/r6rs-lib/r6rs-lib-Z-H-6.html#node_chap_5</a>
</li>

<li>GIMP Python Documentation<br />
<a href="https://www.gimp.org/docs/python/pygimp.html">https://www.gimp.org/docs/python/pygimp.html</a>
</li>

<li>Digital Watercolor with Mypaint 0.9 and Gimp-painter (video)<br />
<a href="https://vimeo.com/18157214">https://vimeo.com/18157214</a>
</li>

<li>Water in Nature - a MyPaint + GIMP tutorial<br />
<a href="http://www.gimptalk.com/index.php?showtopic=37706">http://www.gimptalk.com/index.php?showtopic=37706</a>
</li>

<li>MyPaint (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/MyPaint">https://en.wikipedia.org/wiki/MyPaint</a>
</li>

<li>David Revoy (mj.&nbsp;používá MyPaint, GIMP i Kritu)<br />
<a href="http://davidrevoy.com/">http://davidrevoy.com/</a>
</li>

<li>Tux Paint Home Page<br />
<a href="http://www.tuxpaint.org/">http://www.tuxpaint.org/</a>
</li>

<li>Tux Paint (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Tux_Paint">https://en.wikipedia.org/wiki/Tux_Paint</a>
</li>

<li>MyPaint Home Page<br />
<a href="http://mypaint.org/">http://mypaint.org/</a>
</li>

<li>MyPaint &ndash; Documentation<br />
<a href="https://github.com/mypaint/mypaint/wiki/Documentation">https://github.com/mypaint/mypaint/wiki/Documentation</a>
</li>

<li>Gamut<br />
<a href="https://cs.wikipedia.org/wiki/Gamut">https://cs.wikipedia.org/wiki/Gamut</a>
</li>

<li>MtPaint Home Page<br />
<a href="http://mtpaint.sourceforge.net/">http://mtpaint.sourceforge.net/</a>
</li>

<li>The mtPaint Handbook<br />
<a href="http://mtpaint.sourceforge.net/handbook/en_GB/chap_00.html">http://mtpaint.sourceforge.net/handbook/en_GB/chap_00.html</a>
</li>

<li>MtPaint na Free Software Directory<br />
<a href="https://directory.fsf.org/wiki/MtPaint">https://directory.fsf.org/wiki/MtPaint</a>
</li>

<li>XPaint (minimalisticky pojatá home page)<br />
<a href="http://sf-xpaint.sourceforge.net/">http://sf-xpaint.sourceforge.net/</a>
</li>

<li>XPaint (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/XPaint">https://en.wikipedia.org/wiki/XPaint</a>
</li>

<li>X Athena Widgets<br />
<a href="https://en.wikipedia.org/wiki/X_Athena_Widgets">https://en.wikipedia.org/wiki/X_Athena_Widgets</a>
</li>

<li>Pinta: Painting Made Simple<br />
<a href="https://pinta-project.com/pintaproject/pinta/">https://pinta-project.com/pintaproject/pinta/</a>
</li>

<li>Pinta (software)<br />
<a href="https://en.wikipedia.org/wiki/Pinta_%28software%29">https://en.wikipedia.org/wiki/Pinta_%28software%29</a>
</li>

<li>Krita Home Page<br />
<a href="https://krita.org/en/">https://krita.org/en/</a>
</li>

<li>Krita (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Krita">https://en.wikipedia.org/wiki/Krita</a>
</li>

<li>Pinta – Image Editing Alternative to The GIMP<br />
<a href="https://www.maketecheasier.com/pinta-image-editing-alternative-to-the-gimp/">https://www.maketecheasier.com/pinta-image-editing-alternative-to-the-gimp/</a>
</li>

<li>GNU Paint Homepage<br />
<a href="https://www.gnu.org/software/gpaint/">https://www.gnu.org/software/gpaint/</a>
</li>

<li>GNU Paint na FreeCode<br />
<a href="http://freecode.com/projects/gpaint/">http://freecode.com/projects/gpaint/</a>
</li>

<li>KolourPaint - Paint Program<br />
<a href="https://www.kde.org/applications/graphics/kolourpaint/">https://www.kde.org/applications/graphics/kolourpaint/</a>
</li>

<li>The KolourPaint Handbook<br />
<a href="https://docs.kde.org/stable5/en/kdegraphics/kolourpaint/index.html">https://docs.kde.org/stable5/en/kdegraphics/kolourpaint/index.html</a>
</li>

<li>KolourPaint (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/KolourPaint">https://en.wikipedia.org/wiki/KolourPaint</a>
</li>

<li>KIconEdit - Icon Editor<br />
<a href="https://www.kde.org/applications/graphics/kiconedit/">https://www.kde.org/applications/graphics/kiconedit/</a>
</li>

<li>Phatch (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/Phatch">https://en.wikipedia.org/wiki/Phatch</a>
</li>

<li>GrafX2 Home Page<br />
<a href="http://pulkomandy.tk/projects/GrafX2">http://pulkomandy.tk/projects/GrafX2</a>
</li>

<li>GrafX2 (Wikipedia)<br />
<a href="https://en.wikipedia.org/wiki/GrafX2">https://en.wikipedia.org/wiki/GrafX2</a>
</li>

<li>Resurgence of Pixel art<br />
<a href="http://www.developmentguruji.com/blog/142/Resurgence-of-Pixel-Art.html">http://www.developmentguruji.com/blog/142/Resurgence-of-Pixel-Art.html</a>
</li>

<li>Citypixel<br />
<a href="http://www.citypixel.com/index.htm">http://www.citypixel.com/index.htm</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2017</small></p>
</body>
</html>

