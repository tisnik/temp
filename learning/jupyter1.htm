<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">*** 2. Technologie, na níž je projekt Jupyter Notebook založen</a></p>
<p><a href="#k03">*** 3. Instalace a spuštění Jupyter Notebooku</a></p>
<p><a href="#k04">*** 4. Založení nového diáře</a></p>
<p><a href="#k05">*** 5. </a></p>
<p><a href="#k06">*** 6. </a></p>
<p><a href="#k07">*** 7. </a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. Zobrazení diáře (notebooku) přímo na GitHubu</a></p>
<p><a href="#k16">*** 16. Příbuzné projekty</a></p>
<p><a href="#k17">*** 17. Gorilla REPL</a></p>
<p><a href="#k18">*** 18. Gophernotes</a></p>
<p><a href="#k19">*** 19. </a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>

<p>V&nbsp;dnešním článku si popíšeme velmi užitečný nástroj nazvaný <i>Jupyter Notebook</i>, který uživatelům (a zdaleka se nemusí jednat pouze o vývojáře) používajícím programovací jazyk <i>Python</i> (popř.&nbsp;některý další jazyk zmíněný dále) zpřístupňuje interaktivní prostředí založené na použití webového rozhraní. <i>Jupyter Notebook</i> vznikl z&nbsp;neméně známého a používaného projektu <i>IPython Notebook(s)</i>. Toto interaktivní prostředí, které se zobrazuje přímo ve webovém prohlížeči, obsahuje klasickou smyčku REPL (Read&ndash;Eval&ndash;Print&ndash;Loop), což mj.&nbsp;znamená, že se jednotlivé výrazy zapsané uživatelem mohou ihned vyhodnocovat s&nbsp;prakticky okamžitou zpětnou vazbou. Navíc však nástroj <i>Jupyter Notebook</i> dokáže do okna prohlížeče vykreslovat tabulky, grafy či různé obrázky, a to jak s&nbsp;přímým využitím předaných dat (vektory či sekvence čísel), tak i při specifikaci funkce, jejíž průběh se má vykreslit (existují zde ovšem některá omezení, kterými se budu zabývat v&nbsp;navazujících kapitolách). Třešničkou na dortu je podpora pro práci se vzorci psanými v&nbsp;TeXu či LaTeXu, tvorba slajdů, sdílení &bdquo;živého&ldquo; zdrojového kódu atd.</p>

<img src="https://i.iinfo.cz/images/669/gophernotes1-1.png" class="image-400279" alt="&#160;" width="708" height="762" />
<p><i>Obrázek 1: Klasický IPython notebook &ndash; nástroj, který umožňoval interaktivní ovládání interpretru Pythonu z&nbsp;GUI, nabízel všechny možnosti konzolového IPythonu a navíc i podporoval práci s&nbsp;grafickými objekty (rastrové obrázky, grafy, diagramy atd.).</i></p>

<p>Celé grafické uživatelské rozhraní <i>Jupyter Notebooku</i> napodobuje diář (<i>notebook</i>), do kterého se zapisují jak poznámky, tak i případný programový kód a jeho výsledek, takže se tento systém může hodit i pro tvorbu (interaktivních) prezentací, použití sdílené pracovní plochy atd. Ostatně v&nbsp;tomto ohledu není přístup zvolený autory nijak nový ani přelomový, protože například i populární Matlab používá podobnou technologii (i když založenou na jiném programovacím jazyku).</p>

<img src="https://i.iinfo.cz/images/669/gophernotes1-2.png" class="image-400280" alt="&#160;" width="928" height="966" />D</p>
<p><i>Obrázek 3: Použití Pythonu v&nbsp;Jupyteru při výpočtu fraktálů.
Složitější numerické výpočty jsou jednou z&nbsp;oblastí, v&nbsp;níž by bylo
výhodnější použít jiný programovací jazyk, resp.&nbsp;přesněji jeho jádro
propojené s&nbsp;Jupyterem.<br />
<a href="https://github.com/vassilikitsios/fractals/blob/master/fractals.ipynb">Zdroj</a></i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Technologie, na níž je projekt Jupyter Notebook založen</h2>

<p>Nástroj <i>Jupyter Notebook</i> je založen na klasické technologii klient-server, kde klientem je webový prohlížeč spuštěný u uživatele (či uživatelů) a serverem je Jupyter s&nbsp;přidaným modulem (kernelem) pro zvolený programovací jazyk nebo jazyky (my dnes budeme používat Python). Výraz, popř.&nbsp;blok výrazů představujících programový kód napsaný ve zvoleném programovacím jazyce, je po stlačení klávesové zkratky <strong>Shift+Enter</strong> přenesen na server, kde je zpracován a výsledek je poslán zpět do prohlížeče.</p>

<p>JavaScriptový kód na straně prohlížeče zajistí interpretaci získaných výsledků a jejich zařazení na správné místo do dynamické webové stránky (jedná se vlastně o dnes tak populární SPA &ndash; <i>Single Page Application</i> se všemi přednostmi a pochopitelně i zápory, které toto řešení přináší). Výsledky poslané serverem na klienta mohou být ve skutečnosti různého typu; typicky se jedná o fragment HTML (tabulky atd.), obrázek typu SVG (graf, histogram), rastrový obrázek (graf získaný například ze systému R), vzorec vykreslený z&nbsp;TeXového či LaTeXového zdrojového kódu apod. Samotná architektura nástroje Jupyter je otevřená a poměrně snadno rozšiřitelná, což znamená, že je v&nbsp;případě potřeby možné přidat například další typy grafů apod.</p>

<p>Existují i podobně koncipované projekty. Na stránkách Rootu jsme se například seznámili s&nbsp;projektem Gorilla REPL, který je určen pro programovací jazyk Clojure &ndash; s&nbsp;tímto projektem se ve stručnosti seznámíme <a href="#k17">v&nbsp;sedmnácté kapitole</a>.</p>

<img src="https://i.iinfo.cz/images/72/gorilla-repl-2.png" class="image-242638" alt="&#160;" width="660" height="341" />
<p><i>Obrázek xx: Nástroj Gorilla REPL obsahuje podporu pro doplňování názvů
funkcí a maker společně se zobrazením nápovědy (programové
dokumentace).</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Instalace a spuštění Jupyter Notebooku</h2>

<p></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Založení nového diáře</h2>

<p></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. </h2>

<p></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. </h2>

<p></p>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>

<p></p>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>

<p></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>

<p></p>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>

<p></p>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>

<p></p>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>

<p></p>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>

<p></p>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>

<p></p>



<p><a name="k15"></a></p>
<h2 id="k15">15. Zobrazení diáře (notebooku) přímo na GitHubu</h2>

<p></p>



<p><a name="k16"></a></p>
<h2 id="k16">16. Příbuzné projekty</h2>

<p></p>

<p>Předchůdcem projektu Jupyter Notebook je IPython Notebooks, jenž je založený na projektu <i>IPython</i>. Jedná se o v&nbsp;mnoha ohledech vylepšený interpret Pythonu &ndash; IPython je ve skutečnosti jedním z&nbsp;nejpropracovanějších REPL, se kterým jsem měl možnost pracovat. Architektura nástroje IPython je navržena takovým způsobem, že je do značné míry modulární, což mj.&nbsp;znamená, že uživatelé mohou s&nbsp;IPythonem komunikovat hned několika možnými způsoby. My se v&nbsp;tomto textu zaměříme zejména na použití interaktivního shellu (což je vlastně v&nbsp;mnoha ohledech vylepšená varianta smyčky REPL), ovšem modulární architektura umožnila vytvořit i zmíněný IPython Notebook, což je naopak implementace konceptu diáře (notebooku). Další množnosti komunikace s&nbsp;IPythonem spočívají v&nbsp;použití 0MQ (Zero MQ), což je zjednodušeně řečeno řešení postavené na bázi socketů (viz též <a href="https://www.root.cz/clanky/0mq-knihovna-pro-asynchronni-predavani-zprav/">článek</a> o této knihovně).</p>

<a href="https://www.root.cz/obrazek/359776/"><img src="https://i.iinfo.cz/images/109/ipython-1-prev.png" class="image-359776" alt="&#160;" width="370" height="242" /></a>
<p><i>Obrázek xx: Start interaktivního prostředí IPythonu.</i></p>

<p>Možnosti IPythonu jsou však ve skutečnosti mnohem větší, než &bdquo;pouhé&ldquo; vylepšené rozhraní mezi uživatelem a interpretrem. Architektura IPythonu například umožňuje, aby se komplikované výpočty neprováděly přímo na tom počítači, kde je spuštěn interaktivní shell (klient), ale aby se pouze předaly dalším strojům tvořícím výpočetní farmu. Díky tomu &ndash; a taktéž díky propojení IPythonu s&nbsp;knihovnami <i>NumPy</i> a <i>SciPy</i> i s&nbsp;nástrojem <i>matplotlib</i> &ndash; se IPython používá i v&nbsp;těch oblastech, kde se provádí mnoho složitých a/nebo časově náročných výpočtů, což může znít poněkud paradoxně, když si uvědomíme, že samotný Python je v&nbsp;těchto ohledech dosti pomalý jazyk (ve skutečnosti <i>NumPy</i> předává výpočty nativnímu kódu psanému v&nbsp;C popř.&nbsp;ve Fortranu, které obsahují optimalizované algoritmy různých výpočtů).</p>

<a href="https://www.root.cz/obrazek/359777/"><img src="https://i.iinfo.cz/images/109/ipython-2-prev.png" class="image-359777" alt="&#160;" width="370" height="242" /></a>
<p><i>Obrázek xx: Zobrazení nápovědy k&nbsp;funkci <strong>range</strong>.</i></p>

<a href="https://www.root.cz/obrazek/359782/"><img src="https://i.iinfo.cz/images/109/ipython-7-prev.png" class="image-359782" alt="&#160;" width="330" height="270" /></a>
<p><i>Obrázek xxx: Grafické rozhraní IPythonu.</i></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. Gorilla REPL</h2>

<img src="https://i.iinfo.cz/images/72/gorilla-repl-1.png" class="image-242637" alt="&#160;" width="660" height="728" />
<p><i>Obrázek xxx: Interaktivní prostředí nástroje Gorilla REPL spuštěné
v&nbsp;běžném webovém prohlížeči (zde konkrétně ve Firefoxu).</i></p>

<a href="http://www.root.cz/obrazek/242639/"><img src="https://i.iinfo.cz/images/72/gorilla-repl-3-prev.png" class="image-242639" alt="&#160;" width="370" height="268" /></a>
<p><i>Obrázek xxx: Standardní grafy jsou v&nbsp;Gorilla REPL do stránky vkládány
ve formátu SVG.</i></p>

<img src="https://i.iinfo.cz/images/72/gorilla-repl-12.png" class="image-242648" alt="&#160;" width="660" height="397" />
<p><i>Obrázek xxx: Ukázka použití jednoduchého sloupcového grafu.</i></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. Gophernotes</h2>

<p><i>&bdquo;There is a tension, especially in scientific computing, between
ease and simplicity&ldquo;</i></p>

<p>Gophernotes je projekt používající programovací jazyk <i>Go</i>, který z&nbsp;Go zpřístupňuje interaktivní prostředí založené na známém projektu <a href="https://jupyter.org/">Jupyter</a>. Nástroj Gophernotes dokáže do okna prohlížeče vykreslovat základní grafy, a to jak s&nbsp;přímým využitím předaných dat (vektory či sekvence čísel), tak i při specifikaci funkce, jejíž průběh se má vykreslit (existují zde ovšem mnohá omezení, kterými se budu zabývat v&nbsp;navazujících kapitolách). Třešničkou na dortu je podpora pro práci se vzorci psanými v&nbsp;TeXu či LaTeXu.</p>

<p>Již v&nbsp;úvodním odstavci jsme si řekli, že Gophernotes je založen na projektu Jupyter. Ve skutečnosti Gophernotes do Jupyteru doplňuje modul (takzvaný <i>kernel</i>) zajišťující interakci s&nbsp;jazykem Go, podobně jako existují další podobné moduly určené pro programovací jazyky <a href="https://www.root.cz/n/python/">Python</a>, <a href="https://www.root.cz/serialy/programovaci-jazyk-julia/">Julia</a>, <a href="https://www.root.cz/serialy/programovaci-jazyk-lua/">Lua</a>, <a href="https://www.root.cz/clanky/jazyky-hy-a-clojure-py-moderni-dialekty-lispu-urcene-pro-python-vm/">jazyk Hy</a> atd. V&nbsp;případě jazyka Go je ovšem situace poněkud složitější, protože Go je primárně překladačem. Aby bylo možné zkombinovat možnosti interpretru a klasického překladače, vznikl projekt pojmenovaný <i>Gomacro</i>.</p>

<p><div class="rs-tip-major">Poznámka: ve skutečnosti existuje hned několik kernelů pro Go. Jmenujme především IGo, gopherlab a právě Gophernotes.</div></p>

<p>Nejjednodušší způsob, jakým lze spustit Gophernotes i se všemi potřebnými závislostmi, spočívá v&nbsp;použití Dockeru, protože již existuje připravený obraz obsahující Gophernotes, Jupyter, gomacro i další knihovny pro numerické výpočty a zpracování dat. Následující příkaz zajistí stažení obrazů, spuštění Gophernotesu a namapování HTTP serveru (Jupyter) na port 8888:</p>

<pre>
$ <strong>docker run -it -p 8888:8888 gopherdata/gophernotes:latest-ds</strong>
&nbsp;
Unable to find image 'gopherdata/gophernotes:latest-ds' locally
Trying to pull repository docker.io/gopherdata/gophernotes ... 
sha256:e2ef4a5b318604b8e5116fcf470e11fecbb2c18631cb73bdbed46ed026e862a6: Pulling from docker.io/gopherdata/gophernotes
a44d943737e8: Pull complete 
0bbfb29b138b: Pull complete 
ef49c0fa046c: Pull complete 
Digest: sha256:e2ef4a5b318604b8e5116fcf470e11fecbb2c18631cb73bdbed46ed026e862a6
Status: Downloaded newer image for docker.io/gopherdata/gophernotes:latest-ds
[I 15:14:32.110 NotebookApp] Writing notebook server cookie secret to /root/.local/share/jupyter/runtime/notebook_cookie_secret
[I 15:14:32.998 NotebookApp] Serving notebooks from local directory: /
[I 15:14:32.999 NotebookApp] The Jupyter Notebook is running at:
[I 15:14:33.000 NotebookApp] http://(6c7428d3f7f9 or 127.0.0.1):8888/?token=f4d754332b4be755cfb351018840af76767e80829d7dfc61
[I 15:14:33.000 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 15:14:33.006 NotebookApp] 
&nbsp;
    To access the notebook, open this file in a browser:
        file:///root/.local/share/jupyter/runtime/nbserver-1-open.html
    Or copy and paste one of these URLs:
        http://(6c7428d3f7f9 or 127.0.0.1):8888/?token=f4d754332b4be755cfb351018840af76767e80829d7dfc61
</pre>

<p><div class="rs-tip-major">Poznámka: povšimněte si, že se zobrazil i token, který použijeme pro přihlášení a založení nového diáře.</div></p>

<p>Do adresního řádku webového browseru napíšeme adresu: http://127.0.0.1:8888.</p>

<img src="https://i.iinfo.cz/images/669/gophernotes1-5.png" class="image-400283" alt="&#160;" width="632" height="775" />
<p><i>Obrázek 8: Prohlížeč se zeptá na token, který zkopírujeme ze zprávy vypsané po spuštění Dockeru s&nbsp;gophernotesem.</i></p>

<a href="https://www.root.cz/obrazek/400284/"><img src="https://i.iinfo.cz/images/669/gophernotes1-6-prev.png" class="image-400284" alt="&#160;" width="370" height="67" /></a>
<p><i>Obrázek 9: Grafické uživatelské rozhraní Jupyteru s&nbsp;Gophernotesem.</i></p>

<a href="https://www.root.cz/obrazek/400285/"><img src="https://i.iinfo.cz/images/669/gophernotes1-7-prev.png" class="image-400285" alt="&#160;" width="370" height="269" /></a>
<p><i>Obrázek 10: Zprávy zapisované na chybový výstup jsou podbarveny červeně, zprávy zapisované na výstup standardní nemají podbarvení žádné (implicitní barvou je bílé pozadí).</i></p>

<a href="https://www.root.cz/obrazek/400286/"><img src="https://i.iinfo.cz/images/669/gophernotes1-8-prev.png" class="image-400286" alt="&#160;" width="370" height="225" /></a>
<p><i>Obrázek 11: Formátování matic.</i></p>



<p><a name="k19"></a></p>
<h2 id="k19">19. </h2>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Jypyter: open source, interactive data science and scientific computing across over 40 programming languages<br />
<a href="https://jupyter.org/">https://jupyter.org/</a>
</li>

<li>The IPython Notebook<br />
<a href="http://ipython.org/notebook.html">http://ipython.org/notebook.html</a>
</li>

<li>nbviewer: a simple way to share Jupyter Notebooks<br />
<a href="https://nbviewer.jupyter.org/">https://nbviewer.jupyter.org/</a>
</li>

<li>Back to the Future: Lisp as a Base for a Statistical Computing System<br />
<a href="https://www.stat.auckland.ac.nz/~ihaka/downloads/Compstat-2008.pdf">https://www.stat.auckland.ac.nz/~ihaka/downloads/Compstat-2008.pdf</a>
</li>

<li>gg4clj: a simple wrapper for using R's ggplot2 in Clojure and Gorilla REPL<br />
<a href="https://github.com/JonyEpsilon/gg4clj">https://github.com/JonyEpsilon/gg4clj</a>
</li>

<li>Analemma: a Clojure-based SVG DSL and charting library<br />
<a href="http://liebke.github.io/analemma/">http://liebke.github.io/analemma/</a>
</li>

<li>Clojupyter: a Jupyter kernel for Clojure<br />
<a href="https://github.com/roryk/clojupyter">https://github.com/roryk/clojupyter</a>
</li>

<li>Incanter is a Clojure-based, R-like platform for statistical computing and graphics.<br />
<a href="http://incanter.org/">http://incanter.org/</a>
</li>

<li>Evolution of incanter (Gource Visualization)<br />
<a href="https://www.youtube.com/watch?v=TVfL5nPELr4">https://www.youtube.com/watch?v=TVfL5nPELr4</a>
</li>

<li>Questions tagged [incanter] (na Stack Overflow)<br />
<a href="https://stackoverflow.com/questions/tagged/incanter?sort=active">https://stackoverflow.com/questions/tagged/incanter?sort=active</a>
</li>

<li>Data Sorcery with Clojure<br />
<a href="https://data-sorcery.org/contents/">https://data-sorcery.org/contents/</a>
</li>

<li>What is REPL?<br />
<a href="https://pythonprogramminglanguage.com/repl/">https://pythonprogramminglanguage.com/repl/</a>
</li>

<li>What is a REPL?<br />
<a href="https://codewith.mu/en/tutorials/1.0/repl">https://codewith.mu/en/tutorials/1.0/repl</a>
</li>

<li>Programming at the REPL: Introduction<br />
<a href="https://clojure.org/guides/repl/introduction">https://clojure.org/guides/repl/introduction</a>
</li>

<li>What is REPL? (Quora)<br />
<a href="https://www.quora.com/What-is-REPL">https://www.quora.com/What-is-REPL</a>
</li>

<li>Gorilla REPL: interaktivní prostředí pro programovací jazyk Clojure<br />
<a href="https://www.root.cz/clanky/gorilla-repl-interaktivni-prostredi-pro-programovaci-jazyk-clojure/">https://www.root.cz/clanky/gorilla-repl-interaktivni-prostredi-pro-programovaci-jazyk-clojure/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2020</small></p>
</body>
</html>

