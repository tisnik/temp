<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Programovací jazyk Clojure 20: vývojová prostøedí pro Clojure (integrace Vimu s REPL)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Programovací jazyk Clojure 20: vývojová prostøedí pro Clojure (integrace Vimu s REPL)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o vlastnostech programovacího jazyka Java i JVM budeme pokraèovat v popisu vývojových prostøedí pou¾itelných pøi práci s programovacím jazykem Clojure. Minule jsme si popsali zpùsob integrace Clojure s vývojovým prostøedím Eclipse, dnes se budeme zabývat &bdquo;odlehèeným&ldquo; IDE zalo¾eným na textovém editoru Vim.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Programovací jazyk Clojure 20: vývojová prostøedí pro Clojure (integrace Vimu s REPL)</a></p>
<p><a href="#k02">2. Plugin VimClojure</a></p>
<p><a href="#k03">3. Instalace pluginu VimClojure</a></p>
<p><a href="#k04">4. Jak se vyznat v&nbsp;komplikovanìj¹ích zdrojových kódech Clojure aneb &bdquo;duhové závorky&ldquo;</a></p>
<p><a href="#k05">5. Spu¹tìní Clojure v&nbsp;rámci serveru Nailgun a volání REPL z&nbsp;Vimu</a></p>
<p><a href="#k06">6. Instalace Nailgun serveru</a></p>
<p><a href="#k07">7. Alternativní integrace externì bì¾ící smyèky REPL a Vimu: SLIME for Vim</a></p>
<p><a href="#k08">8. SLIME for Vim: volání REPL pøímo z&nbsp;Vimu</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Programovací jazyk Clojure 20: vývojová prostøedí pro Clojure (integrace Vimu s REPL)</h2>

<p>V&nbsp;pøedchozí èásti <a
href="http://www.root.cz/serialy/programovaci-jazyk-java-a-jvm/">seriálu o Javì
i o virtuálním stroji Javy (JVM)</a> jsme si popsali zpùsob instalace pluginu
nazvaného <i>Counterclockwise</i> do integrovaného vývojového prostøedí
<i>Eclipse</i>. Tento plugin nabízí vývojáøùm pomìrnì velké mno¾ství funkcí,
které je mo¾né rozdìlit do tøí kategorií. Jednou z&nbsp;dùle¾itých funkcí je
správa projektù (projekt je skupina zdrojových souborù <strong>.clj</strong> se
spoleènou konfigurací), která se v&nbsp;základních rysech podobá správì
Javovských projektù, vèetnì mo¾nosti pou¾ívat systémy pro správu verzí atd.
Dále tento plugin pøidává do integrovaného vývojového prostøedí <i>Eclipse</i>
nový typ specializovaného textového editoru navr¾eného takovým zpùsobem, aby
vývojáøùm co nejvíce ulehèil zápis programù a samozøejmì i jejich následnou
úpravu, vèetnì refaktoringu (jednou z&nbsp;dùle¾itých vlastností tohoto editoru
je jeho schopnost barevnì odli¹it jednotlivé páry závorek).</p>

<a href="http://i.iinfo.cz/images/347/clojure19-1.png"><img src="http://i.iinfo.cz/images/347/clojure19-1-prev.png" width="338" height="270" alt="&#160;" /></a>
<p><i>Obrázek 1: Základní funkce nabízené pluginem Counterclockwise.
V&nbsp;horní èásti je na tomto screenshotu zobrazen specializovaný textový
editor, který samozøejmì zvýrazòuje syntaxi (doká¾e napøíklad rozeznat volání
funkce a volání metody), vèetnì unikátního obarvení párových závorek rùznou
barvou. V&nbsp;dolní èásti screenshotu je umístìna interaktivní konzole. Editor
dále doká¾e doplòovat jména funkcí/metod (dialog s&nbsp;bílým pozadím
uprostøed) a u vybírané funkce se navíc zobrazuje i poèet jejich parametrù a
nápovìda (dialog se ¾lutým pozadím napravo).</i></p>

<p>Tøetí funkce pluginu <i>Counterclockwise</i> zaji¹»uje pøipojení
<i>Eclipse</i> na smyèku <i>REPL (Read-Eval-Print-Loop)</i> programovacího
jazyka <i>Clojure</i>, pøièem¾ samotný jazyk je spu¹tìn jako samostatný proces
(server), k&nbsp;nìmu¾ se <i>Eclipse</i> pøipojuje pøi vyhodnocování
jednotlivých výrazù (èi pøesnìji øeèeno forem). Propojení integrovaného
vývojového prostøedí <i>Eclipse</i> s&nbsp;programovacím jazykem Clojure
implementované v&nbsp;pluginu <i>Counterclockwise</i> je v&nbsp;souèasnosti ji¾
plnì funkèní a mnoho programátorù je s&nbsp;tímto øe¹ením více ne¾ spokojeno.
Pluginy umo¾òující tvorbu programù v&nbsp;Clojure existují i (minimálnì) pro
dal¹í dvì známá javovská IDE &ndash; konkrétnì pro <i>Netbeans</i> i pro
<i>IDEU</i>. Ov¹em kromì tìchto tøí velmi schopných, ale takté¾ ponìkud
&bdquo;tì¾kotoná¾ních&ldquo; IDE existují i dal¹í alternativní vývojová
prostøedí, která mohou nìkterým vývojáøùm vyhovovat lépe, napøíklad kvùli
men¹ím systémovým nárokùm, nebo z&nbsp;toho dùvodu, ¾e vývoj èi opravy programù
je nutné v&nbsp;nìkterých pøípadech provádìt na vzdálených poèítaèích
(napøíklad pøes <i>ssh</i> apod.).</p>

<a href="http://i.iinfo.cz/images/347/clojure19-12.png"><img src="http://i.iinfo.cz/images/347/clojure19-12-prev.png" width="338" height="270" alt="&#160;" /></a>
<p><i>Obrázek 2: I v&nbsp;interaktivní konzoli (z&nbsp;ní¾ se volá smyèka REPL
spu¹tìná ve zvlá¹tním procesu) je mo¾né vyu¾ívat automatické doplòování kódu,
popø.&nbsp;i kontextovou nápovìdu.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Plugin VimClojure</h2>

<p><i>"vi is small, fast, and easy to use. Emacs is huge, slow and easy to use :)"</i></p>

<p>Alternativní vývojová prostøedí zmínìná na konci <a href="#k01">pøedchozí
kapitoly</a> jsou vìt¹inou zalo¾ena na vyu¾ití (programátorských) textových
editorù, jen¾ jsou doplnìny o nìkolik skriptù a popø.&nbsp;i o dal¹í externí
nástroje, které se z&nbsp;textových editorù pøes tyto skripty volají. Typickým
pøíkladem tohoto typu alternativních vývojových prostøedí je modul <i>SLIME
(Superior Lisp Interaction Mode for Emacs)</i> urèený, jak ji¾ jeho jméno
napovídá, pro známý editor <i>Emacs</i>. <i>SLIME</i> zaji¹»uje integraci
<i>Emacsu</i> s&nbsp;mnoha programovacími jazyky zalo¾enými na LISPu, a to
vèetnì programovacího jazyka <i>Clojure</i>. Ov¹em v&nbsp;dne¹ním èlánku se
budu zabývat pøedev¹ím popisem nástrojù urèených pro &bdquo;konkurenèní&ldquo;
textový editor <i>Vim</i> (ve verzi 6 a 7). Pro vývojáøe, kteøí se rozhodnou
vyu¾ít <i>Vim</i> pro vytváøení a úpravu aplikací v&nbsp;programovacím jazyku
<i>Clojure</i>, je urèen plugin nazvaný jednodu¹e <i>VimClojure</i>, jeho¾
poslední verzi je mo¾né získat na adrese <a
href="http://www.vim.org/scripts/script.php?script_id=2501">http://www.vim.org/scripts/script.php?script_id=2501</a>.</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-1-orig.png" alt="obr">
<p><i>Obrázek 3: Podadresáø obsahující soubory se jmény v¹ech funkcí, maker a
globálních symbolù Clojure. Obsah tìchto souborù je pou¾it pøi omni
completion.</i></p>

<p>Tento plugin, který je internì pomìrnì komplikovaný, nabízí vývojáøùm
v&nbsp;první øadì rùzná vylep¹ení editace zdrojových kódù (s&nbsp;koncovkou
<strong>.clj</strong>), vèetnì mo¾nosti zobrazení &bdquo;duhových
závorek&ldquo;, co¾ je pro programovací jazyky zalo¾ené na LISPu jedna
z&nbsp;nejdùle¾itìj¹ích vlastností, kterou by mìl ka¾dý slu¹ný programátorský
editor nabízet (viz té¾ jeden z&nbsp;mo¾ných výkladù zkratky LISP &ndash;
&bdquo;Lost In Stupid Parenthesis&ldquo;). Dále tento plugin v&nbsp;souèasné
verzi obsahuje 20 souborù se seznamem funkcí, maker a &bdquo;globálních&ldquo;
symbolù deklarovaných ve standardních jmenných prostorech <i>Clojure</i>. Tyto
soubory jsou pøi inicializaci pluginu <i>VimClojure</i> naèteny a zpracovány
takovým zpùsobem, aby v¹echna jména funkcí/maker/symbolù byla nabízena systémem
&bdquo;omni completion&ldquo;, tj.&nbsp;jsou vyu¾ity pøi pou¾ití klávesových
zkratek <strong>CTRL+P</strong> a <strong>CTRL+N</strong> pou¾itých ve
vkládacím re¾imu (<i>insert mode</i>). Pøi editaci zdrojových kódù tedy
postaèuje napsat èást jména (napøíklad &bdquo;pri&ldquo;) a po stisku
<strong>CTRL+P/CTRL+N</strong> se v&nbsp;kontextovém menu nabídnou v¹echny
funkce/makra/symboly zaèínající tímto prefixem (&bdquo;println&ldquo;
atd-).</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-2.png" alt="obr">
<p><i>Obrázek 4: Pøíklad pou¾ití funkce omni completion v&nbsp;praxi pøi
editaci zdrojového textu Clojure.</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Instalace pluginu VimClojure</h2>

<p>Instalace pluginu <i>VimClojure</i> je ve skuteènosti velmi jednoduchá
&ndash; po sta¾ení archivu je zapotøebí tento archiv rozbalit buï do adresáøe
<strong>~/.vim/</strong> (plugin sice bude pou¾itelný pouze pro jednoho
u¾ivatele, ov¹em je mo¾né bez problémù zasahovat do jeho interní struktury)
nebo do podadresáøe <strong>/usr/share/vim/${verze_vimu}</strong> (v&nbsp;tomto
pøípadì bude plugin pou¾itelný pro v¹echny u¾ivatele). Obsah adresáøe
<strong>~/.vim</strong> mù¾e vypadat v&nbsp;pøípadì instalace vìt¹ího mno¾ství
pluginù následovnì:</p>

<pre>
<strong>tree ~/.vim</strong>
&nbsp;
.vim
|-- autoload
|   |-- vimclojure
|   |   `-- util.vim
|   `-- vimclojure.vim
|-- bin
|   |-- clj
|   |-- clj.bat
|   |-- ng-server
|   `-- ng-server.bat
|-- colors
|   `-- vo_dark.vim
|-- doc
|   |-- clojure.txt
|   |-- taglist.txt
|   `-- tags
|-- ftdetect
|   |-- clojure.vim
|   `-- vo_base.vim
|-- ftplugin
|   |-- clojure
|   |   |-- completions-clojure.core.txt
|   |   |-- completions-clojure.data.txt
|   |   |-- completions-clojure.inspector.txt
|   |   |-- completions-clojure.java.browse.txt
|   |   |-- completions-clojure.java.io.txt
|   |   |-- completions-clojure.java.javadoc.txt
|   |   |-- completions-clojure.java.shell.txt
|   |   |-- completions-clojure.main.txt
|   |   |-- completions-clojure.pprint.txt
|   |   |-- completions-clojure.repl.txt
|   |   |-- completions-clojure.set.txt
|   |   |-- completions-clojure.stacktrace.txt
|   |   |-- completions-clojure.string.txt
|   |   |-- completions-clojure.template.txt
|   |   |-- completions-clojure.test.junit.txt
|   |   |-- completions-clojure.test.tap.txt
|   |   |-- completions-clojure.test.txt
|   |   |-- completions-clojure.walk.txt
|   |   |-- completions-clojure.xml.txt
|   |   `-- completions-clojure.zip.txt
|   |-- clojure.vim
|   |-- vo_base.vim
|   |-- vo_hoist.vim
|   `-- vo_checkbox.vim
|-- indent
|   `-- clojure.vim
|-- plugin
|   |-- clojure.vim
|   `-- taglist.vim
|-- README.markdown
|-- slime.vim
|-- spell
|   |-- cs.utf-8.add
|   `-- cs.utf-8.add.spl
`-- syntax
    |-- clojure.vim
    `-- vo_base.vim
&nbsp;
12 directories, 45 files
</pre>

<p>Plugin <i>VimClojure</i> je automaticky aktivován ve chvíli, kdy je otevøen
soubor s&nbsp;koncovkou <strong>.clj</strong>, aby v¹ak tato aktivace probìhla
korektnì, je nutné ve <strong>.vimrc</strong> povolit detekci typù naèítaných
souborù a takté¾ naèítání skriptù pou¾ívaných (nejenom) pro formátování
zdrojových textù:</p>

<pre>
:filetype plugin on
:filetype indent on
</pre>

<p>Popø. je mo¾né oba pøíkazy slouèit do pøíkazu jednoho:</p>

<pre>
:filetype plugin indent on
</pre>

<p>Aktuální nastavení volby <strong>:filetype</strong> lze zjistit snadno:</p>

<pre>
:filetype
</pre>

<p>Takté¾ je nutné v&nbsp;konfiguraèním souboru <strong>.vimrc</strong> povolit
zvýrazòování syntaxe:</p>

<pre>
:syntax on
</pre>

<p>Pokud i pøesto plugin <i>VimClojure</i> nebude pracovat korektnì, pøesvìdète
se, zda není editor <i>Vim</i> spu¹tìn v&nbsp;re¾imu kompatibility se staøièkým
<strong>vi</strong>. Následující pøíkaz by mìl vypsat text
&bdquo;nocompatible&ldquo;:</p>

<pre>
:set compatible?
</pre>

<p>Pokud se vypí¹e text &bdquo;compatible&ldquo;, nebyl pravdìpodobnì nalezen
soubor <strong>.vimrc</strong>, <i>Vim</i> byl spu¹tìn s&nbsp;pøepínaèem -C,
popø.&nbsp;nebyl proveden pøíkaz <strong>set nocompatible</strong>
z&nbsp;<strong>.vimrc</strong> (ov¹em v&nbsp;takovém pøípadì doká¾ete vyu¾ít
jen zhruba tøetinu schopností <i>Vimu</i>).</p>

<p>Odkazy na stránky s&nbsp;dal¹ími informacemi o pluginu <i>VimClojure</i> i o
funkci &bdquo;omni completion&ldquo; nabízené nejnovìj¹ími verzemi textového
editoru <i>Vim</i>:</p>

<ol>

<li>A detailed installation Guide for VimClojure 2.2<br />
<a href="http://www.duenas.at/new_homepage/vimclojure">http://www.duenas.at/new_homepage/vimclojure</a>
</li>

<li>VimClojure : A filetype, syntax and indent plugin for Clojure<br />
<a href="http://www.vim.org/scripts/script.php?script_id=2501">http://www.vim.org/scripts/script.php?script_id=2501</a>
</li>

<li>Textový editor Vim jako IDE: 3.èást (omni completion)<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-3-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-3-cast/</a>
</li>

</ol>

<img src="http://i.iinfo.cz/images/575/vimclojure-3.png" alt="obr">
<p><i>Obrázek 5: Vim ji¾ v&nbsp;základní instalaci obsahuje podporu pro editaci
zdrojových kódù LISPu, ov¹em VimClojure jde v&nbsp;podpoøe LISPu/Clojure je¹tì
mnohem dále. Zajímavé je, ¾e se tato volba pou¾ívala ji¾ v&nbsp;pùvodním
editoru vi (i kdy¾ mìla ponìkud odli¹né chování), co¾ jen ukazuje, ¾e se
v&nbsp;minulosti LISPovské jazyky v&nbsp;nìkterých oblastech pou¾ívaly èastìji
ne¾ dnes.</i></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. Jak se vyznat v&nbsp;komplikovanìj¹ích zdrojových kódech Clojure aneb &bdquo;duhové závorky&ldquo;</h2>

<p>Jednou z&nbsp;nejdùle¾itìj¹ích a neju¾iteènìj¹ích funkcí nabízených pluginem
<i>VimClojure</i> je jeho schopnost pou¾ití takzvaných &bdquo;duhových
závorek&ldquo;. Co se vlastnì pod tímto názvem skrývá? Textový editor
<i>Vim</i> samozøejmì doká¾e nalézt párové závorky a zvýraznit druhou párovou
závorku ve chvíli, kdy se nad první závorkou nachází kurzor. Navíc obsahuje i
pøíkaz % pro skok na odpovídající druhou párovou závorku (funkci tohoto pøíkazu
lze roz¹íøit tak, aby napøíklad doskakoval i na otevírací/uzavírací znaèky HTML
èi XML). Takté¾ je relativnì snadné v¹echny závorky obarvit s&nbsp;vyu¾itím
pøíkazu <strong>:syntax</strong>. To je vìt¹inou dostaèující napøíklad pøi
práci se zdrojovými texty Javy, céèka èi Pythonu, ov¹em v&nbsp;programovacích
jazycích odvozených od LISPu se kulaté závorky vyskytují v&nbsp;mnohem vìt¹ím
mno¾ství. Navíc není zvykem tyto závorky chápat jako zaèátek a konec bloku,
tj.&nbsp;podobným zpùsobem, jako napøíklad slo¾ené závorky v&nbsp;céèku. To
znamená, ¾e odpovídající otevírací a uzavírací kulaté závorky
v&nbsp;LISPu/Clojure nejsou umístìny ve stejném sloupci. Následující pøíklad je
sice syntakticky i sémanticky správný, ale LISPaøi se vìt¹inou tomuto zpùsobu
zápisu vyhýbají (a mají k&nbsp;tomu velmi dobré dùvody :-):</p>

<pre>
(defn fibonacci
    [n]
    (if (&gt; n 2)
        n
        (+
            (fibonacci (- n 2)) (fibonacci (- n 1))
        )
    )
)
</pre>

<p>Namísto toho se pou¾ívá zápis, v&nbsp;nìm¾ jsou v¹echny uzavírací (pravé)
závorky zapsány na jediném øádku:</p>

<pre>
(defn fibonacci
    [n]
    (if (&gt; n 2)
        n
        (+ (fibonacci (- n 2)) (fibonacci (- n 1)))))
</pre>

<p>Co z&nbsp;toho vyplývá? Vyznat se v&nbsp;takto zapsaných programech mù¾e být
problematické, kdy¾ i v&nbsp;tak jednoduché funkci, jakou je rekurzivní výpoèet
Fibonacciho posloupnosti máme na konci uvedeno <strong>pìt</strong>
ukonèovacích závorek. Obarvení v¹ech závorek jednou barvou není v&nbsp;tomto
pøípadì dostaèující, namísto toho by bylo výhodnìj¹í, aby ka¾dý pár závorek
pou¾íval barvu jinou. A právì to zaji¹»uje funkce &bdquo;duhových
závorek&ldquo;, kterou je v¹ak nutné v&nbsp;pluginu <i>VimClojure</i> nejprve
povolit. To je ov¹em velmi snadné &ndash; v&nbsp;konfiguraèním souboru
<strong>.vimrc</strong> postaèuje nastavit hodnotu dvou konkrétních promìnných
tak, jak je ukázáno na dal¹ím screenshotu:</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-4.png" alt="obr">
<p><i>Obrázek 6: Pøíklad nastavení konfigurace pluginu VimClojure
v&nbsp;souboru .vimrc.</i></p>

<p>Podívejte se nyní na rozdíl v&nbsp;zobrazení stejného zdrojového kódu bez a
s&nbsp;pou¾itím funkce &bdquo;duhových závorek&ldquo;:</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-5.png" alt="obr">
<p><i>Obrázek 7: Zdrojový kód Clojure se zvýraznìním syntaxe, ov¹em se zákazem
pou¾ití &bdquo;duhových závorek&ldquo;.</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-6.png" alt="obr">
<p><i>Obrázek 8: Zdrojový kód Clojure se zvýraznìním syntaxe a souèasnì
s&nbsp;povolením pou¾ití &bdquo;duhových závorek&ldquo;.</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Spu¹tìní Clojure v&nbsp;rámci serveru Nailgun a volání REPL z&nbsp;Vimu</h2>

<p>Mezi dal¹í funkce, které plugin <i>VimClojure</i> vývojáøùm nabízí, patøí i
mo¾nost propojení textového editoru <i>Vim</i> se smyèkou <i>REPL</i>
programovacího jazyka <i>Clojure</i>. Toto propojení s&nbsp;sebou pøiná¹í
relativnì velké mno¾ství pøedností, napøíklad mo¾nost ihned si odzkou¹et a
otestovat vytváøené funkce, tj.&nbsp;v¹e lze provádìt bez nutnosti pøekladu èi
neustálého spou¹tìní externích nástrojù. Dále je díky tomuto propojení umo¾nìn
pøímý pøístup k&nbsp;nápovìdì pøes <strong>(doc symbol)</strong>. Aby byla
kooperace mezi textovým editorem <i>Vim</i> a smyèkou <i>REPL</i> okam¾itá, je
nutné, aby byla smyèka <i>REPL</i> spu¹tìna jako samostatný proces,
k&nbsp;nìmu¾ se <i>Vim</i> v&nbsp;pøípadì potøeby pøipojí (je to tedy øe¹ení,
které bylo vyu¾ité i v&nbsp;pluginu <i>Counterclockwise</i> pro
<i>Eclipse</i>). Toto øe¹ení s&nbsp;sebou pøiná¹í i dal¹í výhody, pøedev¹ím
mo¾nost pou¾ít v&nbsp;<i>REPL</i> ji¾ døíve definované funkce, programátor
nemusí èekat na spu¹tìní nové instance <i>Clojure</i> atd.</p>

<p>Pro propojení <i>Vimu</i> s&nbsp;<i>REPL</i> se vyu¾ívá dal¹í pomocný
nástroj &ndash; jednoduchý server nazvaný <i>Nailgun</i>. Jedná se o pomìrnì
jednoduchou utilitu, která bì¾í v&nbsp;re¾imu serveru v&nbsp;JVM, pøes ni¾ je
mo¾né spou¹tìt libovolný javovský program. Idea, na ní¾ je server
<i>Nailgun</i> postaven, je ve skuteènosti velmi jednoduchá &ndash; spou¹tìní
Javovských programù je pomalé zejména z&nbsp;toho dùvodu, ¾e je nejdøíve nutné
spustit virtuální stroj Javy, do nìj naèíst v¹echny potøebné tøídy a a¾ posléze
zahájit bìh programu. Pokud se podaøí inicializaci JVM a naètení tøíd provést
pouze jedenkrát, bude ka¾dý dal¹í start aplikace mnohem rychlej¹í (v&nbsp;praxi
dokonce mù¾e být rychlej¹í, ne¾ spu¹tìní srovnatelné nativní aplikace &ndash;
zále¾í to na mno¾ství dynamicky linkovaných knihoven). <i>Nailgun</i> se musí
spustit v&nbsp;JVM s&nbsp;nastavenou cestou k&nbsp;java archivu
s&nbsp;interpretrem programovacího jazyka <i>Clojure</i> a ihned po startu
serveru se otevøe port 2113, pøes nìj¾ je mo¾né komunikovat s&nbsp;JVM, kde je
<i>Nailgun</i> a souèasnì i <i>Clojure</i> spu¹tìn. Na stranì klienta je mo¾né
vyu¾ít libovolný program, který doká¾e pracovat se sockety. V&nbsp;na¹em
pøípadì to bude jednoduchý nativní klient spou¹tìný z&nbsp;<i>Vimu</i>.</p>

<p>Jeden z&nbsp;dùvodù pro pou¾ití <i>Nailgun</i> serveru je popsán na
následující stránce:</p>

<ol>

<li>Nailgun server<br />
<a href="http://www.martiansoftware.com/nailgun/background.html">http://www.martiansoftware.com/nailgun/background.html</a>
</li>

</ol>



<p><a name="k06"></a></p>
<h2 id="k06">6. Instalace Nailgun serveru</h2>

<p>Pro korektní funkci tohoto zpùsobu propojení <i>Vimu</i> a <i>REPL</i> je
nejlep¹í postupovat podle návodu zveøejnìného na této stránce: <a
href="http://blog.darevay.com/2010/10/how-i-tamed-vimclojure/">http://blog.darevay.com/2010/10/how-i-tamed-vimclojure/</a>.
Nejjednodu¹¹í je zkopírovat javovský archiv s&nbsp;Nailgun serverem do stejného
adresáøe, v&nbsp;nìm¾ je umístìn i interpret jazyka <i>Clojure</i> a následnì
server spustit pomocí pøíkazu:</p>

<pre>
java -cp server-2.3.0.jar:clojure-1.4.0.jar vimclojure.nailgun.NGServer
</pre>

<p>Volba <strong>-cp</strong> zajistí umístìní v¹ech tøíd z&nbsp;obou vypsaných
archivù na CLASSPATH.</p>

<p>Dále je nutné si stáhnout klientskou èást (nativní) z&nbsp;adresy <a
href="http://kotka.de/projects/vimclojure/vimclojure-nailgun-client-2.2.0.zip">http://kotka.de/projects/vimclojure/vimclojure-nailgun-client-2.2.0.zip</a>,
rozbalit tento archiv a následnì ho pøelo¾it:</p>

<pre>
pavel@bender:~$ unzip vimclojure-nailgun-client-2.2.0.zip 
&nbsp;
Archive:  vimclojure-nailgun-client-2.2.0.zip
   creating: vimclojure-nailgun-client/
  inflating: vimclojure-nailgun-client/Makefile  
  inflating: vimclojure-nailgun-client/ng.exe  
   creating: vimclojure-nailgun-client/ngclient/
  inflating: vimclojure-nailgun-client/ngclient/ng.c  
&nbsp;
pavel@bender:~$ make
Building ng client.  To build a Windows binary, type 'make ng.exe'
gcc -Wall -pedantic -s -O3  -o ng ngclient/ng.c
</pre>

<p>Pokud v¹e probìhlo v&nbsp;poøádku (tj.&nbsp;v&nbsp;pøípadì, ¾e máte
v&nbsp;poèítaèi nainstalovaný GCC i v¹echny potøebné knihovny), mìl by být
výsledkem pøekladu soubor <strong>ng</strong> s&nbsp;právy nastavenými na
<strong>-rwxr-xr-x</strong>. Tento soubor pøekopírujte do nìkterého adresáøe,
na nìj¾ ukazuje promìnná <strong>PATH</strong>, napøíklad do
<strong>/usr/local/bin</strong>. Po tìchto pøípravných krocích by ji¾ mìlo být
mo¾né vyu¾ívat smyèku <i>REPL</i> jazyka Clojure pøímo z&nbsp;Vimu zpùsobem,
jaký je popsán v&nbsp;dokumentaci k&nbsp;<i>VimClojure</i>.</p>

<p>Dal¹í informace o konfiguraci Nailgun serveru a VimClojure:</p>

<ol>

<li>How I Tamed VimClojure<br />
<a href="http://blog.darevay.com/2010/10/how-i-tamed-vimclojure/">http://blog.darevay.com/2010/10/how-i-tamed-vimclojure/</a>
</li>

<li>github: vim-scripts / VimClojure<br />
<a href="https://github.com/vim-scripts/VimClojure">https://github.com/vim-scripts/VimClojure</a>
</li>

<li>Step by step setup guide<br />
<a href="https://groups.google.com/forum/?fromgroups=#!msg/vimclojure/aavuqfV8tzs/3BqE-hD5dIIJ">https://groups.google.com/forum/?fromgroups=#!msg/vimclojure/aavuqfV8tzs/3BqE-hD5dIIJ</a>
</li>

</ol>



<p><a name="k07"></a></p>
<h2 id="k07">7. Alternativní integrace externì bì¾ící smyèky REPL a Vimu: SLIME for Vim</h2>

<p>Vyu¾ití serveru <i>Nailgun</i> pro spu¹tìní interpretru programovacího
jazyka <i>Clojure</i> je sice (po chvilce ruèní práce) funkèní, ov¹em nejedná
se o øe¹ení, které by bylo elegantní. Kromì samotného <i>Vimu</i> a interpretru
<i>Clojure</i> je toti¾ nutné vyu¾ívat dal¹í dva nástroje &ndash; server
<i>Nailgun</i> naprogramovaný v&nbsp;Javì a nativního klienta, který se
k&nbsp;<i>Nailgunu</i> pøipojuje a který je volán z&nbsp;<i>Vimu</i>. ®e je
toto øe¹ení ponìkud náchylné na rùzné chyby si uvìdomili i dal¹í vývojáøi a
z&nbsp;tohoto dùvodu vzniklo je¹tì jedno alternativní øe¹ení, které mì osobnì
pøipadá být mnohem jednodu¹¹í a pou¾itelnìj¹í. Interaktivní smyèka <i>REPL</i>
interpretru jazyka <i>Clojure</i> je stále spou¹tìna v&nbsp;samostatném
procesu, ov¹em namísto toho, aby se interpreter spou¹tìl
v&nbsp;&bdquo;normálním&ldquo; terminálu (resp.&nbsp;ve virtuálním terminálu),
je spu¹tìn v&nbsp;pojmenované session nástroje <strong>screen</strong>.
Vzhledem k&nbsp;tomu, ¾e je tato session pojmenovaná, je mo¾né do pøíslu¹ného
okna poslat sekvenci znakù, které budou zpracovány stejným zpùsobem, jako by je
u¾ivatel napsal na klávesnici.</p>

<p>Odkaz na zdrojový kód skriptu <i>slime.vim</i> a odkazy na stránky
s&nbsp;informacemi o <i>SLIME</i> pro <i>Emacs</i>:</p>

<p>Jaká sekvence znakù v¹ak bude do <i>REPL</i> poslána? O to se postará velmi
jednoduchý Vimovský plugin nazvaný <i>slime.vim</i> (<a
href="http://s3.amazonaws.com/mps/slime.vim">http://s3.amazonaws.com/mps/slime.vim</a>),
jeho¾ jméno se odkazuje na ji¾ zmínìný plugin <i>Slime</i> urèený pro editor
<i>Emacs</i>. Tyto pluginy mají kromì jména spoleènou i dal¹í vìc &ndash; pro
pøenos textu z&nbsp;<i>Vimu</i> do <i>REPL</i> se pou¾ívá shodná klávesová
zkratka <strong>Ctrl+C Ctrl+C</strong>. Podívejme se nejprve na to, jak se musí
spustit <i>Clojure</i> v&nbsp;pojmenované session nástroje
<strong>screen</strong>. Celý postup je ukázán na sekvenci tøí obrázkù:</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-7.png" alt="obr">
<p><i>Obrázek 9: Pøíprava na spu¹tìní REPL &ndash; obsah adresáøe, z&nbsp;nìho¾
se REPL bude spou¹tìt.</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-8.png" alt="obr">
<p><i>Obrázek 10: Spu¹tìní nové pojmenované session nástroje screen.</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-9.png" alt="obr">
<p><i>Obrázek 11: V&nbsp;nové session se ji¾ mù¾e nastartovat REPL stejným
zpùsobem, jak jsme si to ukazovali v&nbsp;úvodních èástech tohoto
seriálu.</i></p>

<ol>

<li>slime.vim<br />
<a href="http://s3.amazonaws.com/mps/slime.vim">http://s3.amazonaws.com/mps/slime.vim</a>
</li>

<li>SLIME: The Superior Lisp Interaction Mode for Emacs<br />
<a href="http://common-lisp.net/project/slime/">http://common-lisp.net/project/slime/</a>
</li>

<li>SLIME pro editor Emacs (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/SLIME">http://en.wikipedia.org/wiki/SLIME</a>
</li>

</ol>



<p><a name="k08"></a></p>
<h2 id="k08">8. SLIME for Vim: volání REPL pøímo z&nbsp;Vimu</h2>

<p>Pokud je ji¾ smyèka <i>REPL</i> programovacího jazyka <i>Clojure</i>
spu¹tìna v&nbsp;session pojmenovaném &bdquo;clojure&ldquo;, lze v&nbsp;jiném
oknì èi v&nbsp;jiném terminálu spustit samotný editor <i>Vim</i> a
s&nbsp;vyu¾itím pøíkazu <strong>:source</strong> naèíst a spustit skript
<strong>slime.vim</strong>. Ideální je tento pøíkaz zavolat automaticky pøi
naèítání souborù s&nbsp;koncovkou <strong>.clj</strong>. Pokud je tento skript
naèten, je mo¾né v&nbsp;jakémkoli okam¾iku stisknout klávesovou zkratku
<strong>Ctrl+C Ctrl+C</strong>. Skript se pøi prvním stisku této zkratky zeptá
na jméno session a na okno &ndash; vìt¹inou jsou nabízené hodnoty správné,
tak¾e se jen potvrdí Enterem. Poté se ji¾ zcela automaticky celý odstavec vlo¾í
do vizuálního bloku (sekvence pøíkazù <strong>vip</strong>), vizuální blok se
vlo¾í do pojmenovaného registru <strong>y</strong> (sekvence pøíkazù
<strong>"ry</strong> a nakonec se obsah tohoto registru pøenese do okna,
v&nbsp;nìm¾ bì¾í <i>REPL</i> jazyka <i>Clojure</i> (tam se hned vyhodnotí,
proto¾e souèástí pøená¹eného bloku je i koncový Enter).</p>

<p>Celý postup mo¾ná vypadá ponìkud slo¾itì, ve skuteènosti si v¹ak na tento
nástroj velmi rychle zvyknete. Je ho samozøejmì mo¾né upravovat a roz¹iøovat,
napøíklad vyu¾ít klávesovou zkratku <strong>K</strong> (hledání slova pod
kurzorem v&nbsp;manuálových stránkách) k&nbsp;tomu, aby se do <i>REPL</i>
poslal pøíkaz <strong>(doc "hledané-slovo")</strong> atd.</p>

<p>Podívejme se je¹tì na screenshoty, kde je ukázána kooperace mezi textovým
editorem a interpretrem. Pro jednoduchost pou¾ívám dva terminály, stejnì tak je
ale mo¾né obì okna vyu¾ívat z&nbsp;jediného terminálu &ndash; opìt
s&nbsp;vyu¾itím nástroje <strong>screen</strong>.</p>

<img src="http://i.iinfo.cz/images/575/vimclojure-10-orig.png" alt="obr">
<p><i>Obrázek 12: Textový editor Vim spu¹tìný v&nbsp;jiném terminálu (èi
v&nbsp;jiném oknì nástroje <strong>screen</strong>). Pøímo z&nbsp;Vimu je
naèten a proveden (spu¹tìn) skript slime.vim.</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-11-orig.png" alt="obr">
<p><i>Obrázek 13: Po prvním stisku Ctrl+C Ctrl+C se skript zeptá na jméno
session (lze pouze potvrdit Enterem).</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-12-orig.png" alt="obr">
<p><i>Obrázek 14: Dále se zeptá na jméno okna (lze takté¾ pouze potvrdit
Enterem).</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-13-orig.png" alt="obr">
<p><i>Obrázek 15: Vybraná èást programu je &bdquo;magicky&ldquo; pøenesena do
REPL a tam vykonána.</i></p>

<img src="http://i.iinfo.cz/images/575/vimclojure-14-orig.png" alt="obr">
<p><i>Obrázek 16: Dal¹í pøíklad &ndash; stlaèení Ctrl+C Ctrl+C nad
formou/výrazem (range 0 10) &ndash; nyní se v¹e provede bez dal¹ích
dotazù.</i></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Odkazy na Internetu</h2>

<ol>

<li>A detailed installation Guide for VimClojure 2.2<br />
<a href="http://www.duenas.at/new_homepage/vimclojure">http://www.duenas.at/new_homepage/vimclojure</a>
</li>

<li>VimClojure : A filetype, syntax and indent plugin for Clojure<br />
<a href="http://www.vim.org/scripts/script.php?script_id=2501">http://www.vim.org/scripts/script.php?script_id=2501</a>
</li>

<li>Nailgun server<br />
<a href="http://www.martiansoftware.com/nailgun/background.html">http://www.martiansoftware.com/nailgun/background.html</a>
</li>

<li>SLIME (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/SLIME">http://en.wikipedia.org/wiki/SLIME</a>
</li>

<li>slime.vim<br />
<a href="http://s3.amazonaws.com/mps/slime.vim">http://s3.amazonaws.com/mps/slime.vim</a>
</li>

<li>Textový editor Vim jako IDE: 1. èást<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide/</a>
</li>

<li>Textový editor Vim jako IDE: 2. èást<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-2-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-2-cast/</a>
</li>

<li>Textový editor Vim jako IDE: 3. èást (omni completion)<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-3-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-3-cast/</a>
</li>

<li>Textový editor Vim jako IDE: 4. èást<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-4-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-4-cast/</a>
</li>

<li>Textový editor Vim jako IDE: 5. èást<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-5-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-5-cast/</a>
</li>

<li>Textový editor Vim jako IDE: 6. èást &ndash; Vim Script<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-6-cast-vim-script/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-6-cast-vim-script/</a>
</li>

<li>Textový editor Vim jako IDE: 7. èást &ndash; Vim Script<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-7-cast-vim-script/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-7-cast-vim-script/</a>
</li>

<li>Textový editor Vim jako IDE: 8. èást<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-8-cast/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-8-cast/</a>
</li>

<li>Textový editor Vim jako IDE: 9. èást &ndash; pluginy Netrw a snipMate<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-9-cast-pluginy-netrw-a-snipmate/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-9-cast-pluginy-netrw-a-snipmate/</a>
</li>

<li>Textový editor Vim jako IDE: 10. èást &ndash; rùzné tipy a triky<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-10-cast-ruzne-tipy-a-triky/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-10-cast-ruzne-tipy-a-triky/</a>
</li>

<li>Pøenos textù mezi Vimem a dal¹ími aplikacemi<br />
<a href="http://www.root.cz/clanky/prenos-textu-mezi-vimem-a-dalsimi-aplikacemi/">http://www.root.cz/clanky/prenos-textu-mezi-vimem-a-dalsimi-aplikacemi/</a>
</li>

<li>Textový editor Vim: konfigurace pravítka a stavového øádku<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-12-cast-konfigurace-pravitka-a-stavoveho-radku/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-12-cast-konfigurace-pravitka-a-stavoveho-radku/</a>
</li>

<li>Textový editor Vim: automatické formátování textù<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-14-cast-automaticke-formatovani-textu/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-14-cast-automaticke-formatovani-textu/</a>
</li>

<li>Textový editor Vim: automatické formátování textù<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-automaticke-formatovani-textu-dokonceni/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-automaticke-formatovani-textu-dokonceni/</a>
</li>

<li>Textový editor Vim: editace XML a HTML<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-15-cast-editace-xml-a-html/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-15-cast-editace-xml-a-html/</a>
</li>

<li>Textový editor Vim: kooperace mezi Vimem a skripty<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-16-cast-kooperace-mezi-vimem-a-skriptovacimi-jazyky/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-16-cast-kooperace-mezi-vimem-a-skriptovacimi-jazyky/</a>
</li>

<li>Textový editor Vim: kooperace mezi Vimem a jazykem Perl<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-17-cast-kooperace-mezi-vimem-a-jazykem-perl/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-17-cast-kooperace-mezi-vimem-a-jazykem-perl/</a>
</li>

<li>Textový editor Vim: konfigurace a pøeklad Vimu<br />
<a href="http://www.root.cz/clanky/textovy-editor-vim-jako-ide-18-cast-konfigurace-a-preklad-vimu/">http://www.root.cz/clanky/textovy-editor-vim-jako-ide-18-cast-konfigurace-a-preklad-vimu/</a>
</li>

<li>Counterclockwise<br />
<a href="http://code.google.com/p/counterclockwise/">http://code.google.com/p/counterclockwise/</a>
</li>

<li>Clojure IDEs - The Grand Tour<br />
<a href="http://www.bestinclass.dk/index.clj/2010/03/clojure-ides-the-grand-tour-getting-started.html">http://www.bestinclass.dk/index.clj/2010/03/clojure-ides-the-grand-tour-getting-started.html</a>
</li>

<li>Light Table - a new IDE concept<br />
<a href="http://www.chris-granger.com/2012/04/12/light-table---a-new-ide-concept/">http://www.chris-granger.com/2012/04/12/light-table---a-new-ide-concept/</a>
</li>

<li>SICP (The Structure and Interpretation of Computer Programs)<br />
<a href="http://mitpress.mit.edu/sicp/">http://mitpress.mit.edu/sicp/</a>
</li>

<li>Pure function<br />
<a href="http://en.wikipedia.org/wiki/Pure_function">http://en.wikipedia.org/wiki/Pure_function</a>
</li>

<li>Funkcionální programování<br />
<a href="http://cs.wikipedia.org/wiki/Funkcionální_programování">http://cs.wikipedia.org/wiki/Funkcionální_programování</a>
</li>

<li>Èistì funkcionální (datové struktury, jazyky, programování)<br />
<a href="http://cs.wikipedia.org/wiki/Èistì_funkcionální">http://cs.wikipedia.org/wiki/Èistì_funkcionální</a>
</li>

<li>Clojure Macro Tutorial (Part I, Getting the Compiler to Write Your Code For You)<br />
<a href="http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-i-getting.html">http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-i-getting.html</a>
</li>

<li>Clojure Macro Tutorial (Part II: The Compiler Strikes Back)<br />
<a href="http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-ii-compiler.html">http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-ii-compiler.html</a>
</li>

<li>Clojure Macro Tutorial (Part III: Syntax Quote)<br />
<a href="http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-ii-syntax.html">http://www.learningclojure.com/2010/09/clojure-macro-tutorial-part-ii-syntax.html</a>
</li>

<li>Tech behind Tech: Clojure Macros Simplified<br />
<a href="http://techbehindtech.com/2010/09/28/clojure-macros-simplified/">http://techbehindtech.com/2010/09/28/clojure-macros-simplified/</a>
</li>

<li>Fatvat - Exploring functional programming: Clojure Macros<br />
<a href="http://www.fatvat.co.uk/2009/02/clojure-macros.html">http://www.fatvat.co.uk/2009/02/clojure-macros.html</a>
</li>

<li>Eulerovo èíslo<br />
<a href="http://cs.wikipedia.org/wiki/Eulerovo_èíslo">http://cs.wikipedia.org/wiki/Eulerovo_èíslo</a>
</li>

<li>List comprehension<br />
<a href="http://en.wikipedia.org/wiki/List_comprehension">http://en.wikipedia.org/wiki/List_comprehension</a>
</li>

<li>List Comprehensions in Clojure<br />
<a href="http://asymmetrical-view.com/2008/11/18/list-comprehensions-in-clojure.html">http://asymmetrical-view.com/2008/11/18/list-comprehensions-in-clojure.html</a>
</li>

<li>Clojure Programming Concepts: List Comprehension<br />
<a href="http://en.wikibooks.org/wiki/Clojure_Programming/Concepts#List_Comprehension">http://en.wikibooks.org/wiki/Clojure_Programming/Concepts#List_Comprehension</a>
</li>

<li>Clojure core API: for macro<br />
<a href="http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/for">http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/for</a>
</li>

<li>cirrus machina - The Clojure for macro<br />
<a href="http://www.cirrusmachina.com/blog/comment/the-clojure-for-macro/">http://www.cirrusmachina.com/blog/comment/the-clojure-for-macro/</a>
</li>

<li>Clojure.org: Clojure home page<br />
<a href="http://clojure.org/downloads">http://clojure.org/downloads</a>
</li>

<li>Clojure.org: Vars and the Global Environment<br />
<a href="http://clojure.org/Vars">http://clojure.org/Vars</a>
</li>

<li>Clojure.org: Refs and Transactions<br />
<a href="http://clojure.org/Refs">http://clojure.org/Refs</a>
</li>

<li>Clojure.org: Atoms<br />
<a href="http://clojure.org/Atoms">http://clojure.org/Atoms</a>
</li>

<li>Clojure.org: Agents as Asynchronous Actions<br />
<a href="http://clojure.org/agents">http://clojure.org/agents</a>
</li>

<li>A Couple of Clojure Agent Examples<br />
<a href="http://lethain.com/a-couple-of-clojure-agent-examples/">http://lethain.com/a-couple-of-clojure-agent-examples/</a>
</li>

<li>Clojure - Functional Programming for the JVM<br />
<a href="http://java.ociweb.com/mark/clojure/article.html">http://java.ociweb.com/mark/clojure/article.html</a>
</li>

<li>Clojure quick reference<br />
<a href="http://faustus.webatu.com/clj-quick-ref.html">http://faustus.webatu.com/clj-quick-ref.html</a>
</li>

<li>4Clojure<br />
<a href="http://www.4clojure.com/">http://www.4clojure.com/</a>
</li>

<li>ClojureDoc<br />
<a href="http://clojuredocs.org/">http://clojuredocs.org/</a>
</li>

<li>Clojure (Wikipedia EN)<br />
<a href="http://en.wikipedia.org/wiki/Clojure">http://en.wikipedia.org/wiki/Clojure</a>
</li>

<li>Clojure (Wikipedia CS)<br />
<a href="http://cs.wikipedia.org/wiki/Clojure">http://cs.wikipedia.org/wiki/Clojure</a>
</li>

<li>Riastradh's Lisp Style Rules<br />
<a href="http://mumble.net/~campbell/scheme/style.txt">http://mumble.net/~campbell/scheme/style.txt</a>
</li>

<li>Dynamic Languages Strike Back<br />
<a href="http://steve-yegge.blogspot.cz/2008/05/dynamic-languages-strike-back.html">http://steve-yegge.blogspot.cz/2008/05/dynamic-languages-strike-back.html</a>
</li>

<li>Scripting: Higher Level Programming for the 21st Century<br />
<a href="http://www.tcl.tk/doc/scripting.html">http://www.tcl.tk/doc/scripting.html</a>
</li>

<li>Java Virtual Machine Support for Non-Java Languages<br />
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html">http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html</a>
</li>

<li>New JDK 7 Feature: Support for Dynamically Typed Languages in the Java Virtual Machine<br />
<a href="http://java.sun.com/developer/technicalArticles/DynTypeLang/">http://java.sun.com/developer/technicalArticles/DynTypeLang/</a>
</li>

<li>JSR 223: Scripting for the Java<sup>TM</sup> Platform<br />
<a href="http://jcp.org/en/jsr/detail?id=223">http://jcp.org/en/jsr/detail?id=223</a>
</li>

<li>JSR 292: Supporting Dynamically Typed Languages on the Java<sup>TM</sup> Platform<br />
<a href="http://jcp.org/en/jsr/detail?id=292">http://jcp.org/en/jsr/detail?id=292</a>
</li>

<li>Java 7: A complete invokedynamic example<br />
<a href="http://niklasschlimm.blogspot.com/2012/02/java-7-complete-invokedynamic-example.html">http://niklasschlimm.blogspot.com/2012/02/java-7-complete-invokedynamic-example.html</a>
</li>

<li>InvokeDynamic: Actually Useful?<br />
<a href="http://blog.headius.com/2007/01/invokedynamic-actually-useful.html">http://blog.headius.com/2007/01/invokedynamic-actually-useful.html</a>
</li>

<li>A First Taste of InvokeDynamic<br />
<a href="http://blog.headius.com/2008/09/first-taste-of-invokedynamic.html">http://blog.headius.com/2008/09/first-taste-of-invokedynamic.html</a>
</li>

<li>Java 6 try/finally compilation without jsr/ret<br />
<a href="http://cliffhacks.blogspot.com/2008/02/java-6-tryfinally-compilation-without.html">http://cliffhacks.blogspot.com/2008/02/java-6-tryfinally-compilation-without.html</a>
</li>

<li>An empirical study of Java bytecode programs<br />
<a href="http://www.mendeley.com/research/an-empirical-study-of-java-bytecode-programs/">http://www.mendeley.com/research/an-empirical-study-of-java-bytecode-programs/</a>
</li>

<li>Java quick guide: JVM Instruction Set (tabulka v¹ech instrukcí JVM)<br />
<a href="http://www.mobilefish.com/tutorials/java/java_quickguide_jvm_instruction_set.html">http://www.mobilefish.com/tutorials/java/java_quickguide_jvm_instruction_set.html</a>
</li>

<li>The JVM Instruction Set<br />
<a href="http://mpdeboer.home.xs4all.nl/scriptie/node14.html">http://mpdeboer.home.xs4all.nl/scriptie/node14.html</a>
</li>

<li>Control Flow in the Java Virtual Machine<br />
<a href="http://www.artima.com/underthehood/flowP.html">http://www.artima.com/underthehood/flowP.html</a>
</li>

<li>Root.cz: Vyu¾ití komprimovaných ukazatelù na objekty v&nbsp;JVM<br />
<a href="http://www.root.cz/clanky/vyuziti-komprimovanych-ukazatelu-na-objekty-v-nbsp-jvm/">http://www.root.cz/clanky/vyuziti-komprimovanych-ukazatelu-na-objekty-v-nbsp-jvm/</a></a>
</li>

<li>Root.cz: JamVM aneb alternativa k HotSpotu nejenom pro embedded zaøízení a chytré telefony<br />
<a href="http://www.root.cz/clanky/jamvm-aneb-alternativa-k-hotspotu-nejenom-pro-embedded-zarizeni-tablety-a-chytre-telefony/">http://www.root.cz/clanky/jamvm-aneb-alternativa-k-hotspotu-nejenom-pro-embedded-zarizeni-tablety-a-chytre-telefony/</a>
</li>

<li>The Java<sup>TM</sup> Virtual Machine Specification, Second Edition<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html</a>
</li>

<li>The class File Format<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html</a>
</li>

<li>javap - The Java Class File Disassembler<br />
<a href="http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html">http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html</a>
</li>

<li>javap-java-1.6.0-openjdk(1) - Linux man page<br />
<a href="http://linux.die.net/man/1/javap-java-1.6.0-openjdk">http://linux.die.net/man/1/javap-java-1.6.0-openjdk</a>
</li>

<li>Using javap<br />
<a href="http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html">http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html</a>
</li>

<li>Examine class files with the javap command<br />
<a href="http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354">http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354</a>
</li>

<li>BCEL Home page<br />
<a href="http://commons.apache.org/bcel/">http://commons.apache.org/bcel/</a>
</li>

<li>BCEL Manual<br />
<a href="http://commons.apache.org/bcel/manual.html">http://commons.apache.org/bcel/manual.html</a>
</li>

<li>Byte Code Engineering Library (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/BCEL">http://en.wikipedia.org/wiki/BCEL</a>
</li>

<li>Java programming dynamics, Part 7: Bytecode engineering with BCEL<br />
<a href="http://www.ibm.com/developerworks/java/library/j-dyn0414/">http://www.ibm.com/developerworks/java/library/j-dyn0414/</a>
</li>

<li>Bytecode Engineering<br />
<a href="http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html">http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html</a>
</li>

<li>BCEL Tutorial<br />
<a href="http://www.smfsupport.com/support/java/bcel-tutorial!/">http://www.smfsupport.com/support/java/bcel-tutorial!/</a>
</li>

<li>ASM Home page<br />
<a href="http://asm.ow2.org/">http://asm.ow2.org/</a>
</li>

<li>Seznam nástrojù vyu¾ívajících projekt ASM<br />
<a href="http://asm.ow2.org/users.html">http://asm.ow2.org/users.html</a>
</li>

<li>ObjectWeb ASM (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/ObjectWeb_ASM">http://en.wikipedia.org/wiki/ObjectWeb_ASM</a>
</li>

<li>Java Bytecode BCEL vs ASM<br />
<a href="http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/">http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/</a>
</li>

<li>Bytecode Outline plugin for Eclipse (screenshoty + info)<br />
<a href="http://asm.ow2.org/eclipse/index.html">http://asm.ow2.org/eclipse/index.html</a>
</li>

<li>aspectj (Eclipse)<br />
<a href="http://www.eclipse.org/aspectj/">http://www.eclipse.org/aspectj/</a>
</li>

<li>Aspect-oriented programming (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Aspect_oriented_programming">http://en.wikipedia.org/wiki/Aspect_oriented_programming</a>
</li>

<li>AspectJ (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/AspectJ">http://en.wikipedia.org/wiki/AspectJ</a>
</li>

<li>EMMA: a free Java code coverage tool<br />
<a href="http://emma.sourceforge.net/">http://emma.sourceforge.net/</a>
</li>

<li>Cobertura<br />
<a href="http://cobertura.sourceforge.net/">http://cobertura.sourceforge.net/</a>
</li>

<li>FindBugs<br />
<a href="http://findbugs.sourceforge.net/">http://findbugs.sourceforge.net/</a>
</li>

<li>GNU Classpath<br />
<a href="www.gnu.org/s/classpath/">www.gnu.org/s/classpath/</a></li>

<li>Java VMs Compared<br />
<a href="http://bugblogger.com/java-vms-compared-160/">http://bugblogger.com/java-vms-compared-160/</a>
</li>

<li>JSRs: Java Specification Requests &ndash; JSR 223: Scripting for the Java Platform<br />
<a href="http://www.jcp.org/en/jsr/detail?id=223">http://www.jcp.org/en/jsr/detail?id=223</a>
</li>

<li>Scripting for the Java Platform<br />
<a href="http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/">http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/</a>
</li>

<li>Scripting for the Java Platform (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform">http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform</a>
</li>

<li>Java Community Process<br />
<a href="http://en.wikipedia.org/wiki/Java_Specification_Request">http://en.wikipedia.org/wiki/Java_Specification_Request</a>
</li>

<li>Java HotSpot VM Options<br />
<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a>
</li>

<li>Great Computer Language Shootout<br />
<a href="http://c2.com/cgi/wiki?GreatComputerLanguageShootout">http://c2.com/cgi/wiki?GreatComputerLanguageShootout</a>
</li>

<li>Java performance<br />
<a href="http://en.wikipedia.org/wiki/Java_performance">http://en.wikipedia.org/wiki/Java_performance</a>
</li>

<li>Trying the prototype<br />
<a href="http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html">http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html</a>
</li>

<li>Better closures (for Java)<br />
<a href="http://blogs.sun.com/jrose/entry/better_closures">http://blogs.sun.com/jrose/entry/better_closures</a>
</li>

<li>Lambdas in Java: An In-Depth Analysis<br />
<a href="http://www.infoq.com/articles/lambdas-java-analysis">http://www.infoq.com/articles/lambdas-java-analysis</a>
</li>

<li>Class ReflectiveOperationException<br />
<a href="http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html">http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html</a>
</li>

<li>Scala Programming Language<br />
<a href="http://www.scala-lang.org/">http://www.scala-lang.org/</a>
</li>

<li>Run Scala in Apache Tomcat in 10 minutes<br />
<a href="http://www.softwaresecretweapons.com/jspwiki/run-scala-in-apache-tomcat-in-10-minutes">http://www.softwaresecretweapons.com/jspwiki/run-scala-in-apache-tomcat-in-10-minutes</a>
</li>

<li>Fast Web Development With Scala<br />
<a href="http://chasethedevil.blogspot.cz/2007/09/fast-web-development-with-scala.html">http://chasethedevil.blogspot.cz/2007/09/fast-web-development-with-scala.html</a>
</li>

<li>Top five scripting languages on the JVM<br />
<a href="http://www.infoworld.com/d/developer-world/top-five-scripting-languages-the-jvm-855">http://www.infoworld.com/d/developer-world/top-five-scripting-languages-the-jvm-855</a>
</li>

<li>Proposal: Indexing access syntax for Lists and Maps<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html</a>
</li>

<li>Proposal: Elvis and Other Null-Safe Operators<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html</a>
</li>

<li>Java 7 : Oracle pushes a first version of closures<br />
<a href="http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/">http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/</a>
</li>

<li>Groovy: An agile dynamic language for the Java Platform<br />
<a href="http://groovy.codehaus.org/Operators">http://groovy.codehaus.org/Operators</a>
</li>

<li>Better Strategies for Null Handling in Java<br />
<a href="http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java">http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java</a>
</li>

<li>Control Flow in the Java Virtual Machine<br />
<a href="http://www.artima.com/underthehood/flowP.html">http://www.artima.com/underthehood/flowP.html</a>
</li>

<li>Java Virtual Machine<br />
<a href="http://en.wikipedia.org/wiki/Java_virtual_machine">http://en.wikipedia.org/wiki/Java_virtual_machine</a>
</li>

<li>==, .equals(), compareTo(), and compare()<br />
<a href="http://leepoint.net/notes-java/data/expressions/22compareobjects.html">http://leepoint.net/notes-java/data/expressions/22compareobjects.html</a>
</li>

<li>New JDK7 features<br />
<a href="http://openjdk.java.net/projects/jdk7/features/">http://openjdk.java.net/projects/jdk7/features/</a>
</li>

<li>Project Coin: Bringing it to a Close(able)<br />
<a href="http://blogs.sun.com/darcy/entry/project_coin_bring_close">http://blogs.sun.com/darcy/entry/project_coin_bring_close</a>
</li>

<li>CloseableFinder source code<br />
<a href="http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java">http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java</a>
</li>

<li>Joe Darcy blog about JDK<br />
<a href="http://blogs.sun.com/darcy">http://blogs.sun.com/darcy</a>
</li>

<li>Java 7 - more dynamics<br />
<a href="http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/">http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/</a>
</li>

<li>New JDK 7 Feature: Support for Dynamically Typed Languages in the Java Virtual Machine<br />
<a href="http://java.sun.com/developer/technicalArticles/DynTypeLang/index.html">http://java.sun.com/developer/technicalArticles/DynTypeLang/index.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2012</small></p>
</body>
</html>

