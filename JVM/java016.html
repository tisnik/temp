<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Podpora skriptovacích jazykù v JDK6 a OpenJDK6 (3.èást)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Podpora skriptovacích jazykù v JDK6 a OpenJDK6 (3.èást)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V ¹estnácté èásti seriálu o programovacím jazyce Java a o vlastnostech (Open)JDK se ji¾ potøetí vrátíme k aplikaènímu programovému rozhraní (API) navr¾eného v rámci JSR 223, které slou¾í k podpoøe skriptovacích jazykù bì¾ících nad virtuálním strojem Javy (JVM). Dnes se zamìøíme na zpùsob pøedávání hodnot (obecnì objektù) mezi aplikací napsanou v Javì a skriptem s vyu¾itím sdílených pojmenovaných objektù.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Vyu¾ití sdílených objektù mezi aplikací v&nbsp;Javì a skripty</a></p>
<p><a href="#k02">2. Základní vlastnosti metod ScriptEngineManager.put() a ScriptEngineManager.get(), pøístup ke sdíleným objektùm ze skriptù</a></p>
<p><a href="#k03">3. První demonstraèní pøíklad: pou¾ití metod ScriptEngineManager.put() a ScriptEngineManager.get()</a></p>
<p><a href="#k04">4. Druhý demonstraèní pøíklad: výpis hodnot pøedaných do skriptovacího enginu</a></p>
<p><a href="#k05">5. Rozdíly mezi datovými typy pou¾itými v&nbsp;Javì a JavaScriptu</a></p>
<p><a href="#k06">6. Tøetí demonstraèní pøíklad: typy hodnot pøedaných do JavaScriptu</a></p>
<p><a href="#k07">7. Porovnání datových typù pou¾ívaných v&nbsp;Javì a JavaScriptu</a></p>
<p><a href="#k08">8. Ètvrtý demonstraèní pøíklad: modifikace hodnot programem v&nbsp;JavaScriptu</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2>1. Vyu¾ití sdílených objektù mezi aplikací v&nbsp;Javì a skripty</h2>

<p>Aplikaèní programové rozhraní pro podporu skriptovacích jazykù ve virtuálním
stroji Javy (JVM), které bylo standardizované v&nbsp;rámci <i>JSR 223</i>,
obsahuje i metody pou¾itelné pro vytvoøení pojmenovaných objektù sdílených mezi
aplikací napsanou v&nbsp;Javì a skriptem vytvoøeným v&nbsp;libovolném
(podporovaném) skriptovacím jazyce. V&nbsp;pøedchozí èásti tohoto seriálu jsme
si ukázali, jakým zpùsobem lze funkci naprogramované v&nbsp;<i>JavaScriptu</i>
(tj.&nbsp;jednom z&nbsp;podporovaných skriptovacích jazykù) pøedat seznam
libovolných hodnot a jak mù¾e tato funkce naopak vrátit programu v&nbsp;Javì
nìjakou hodnotu, která je automaticky zkonvertována na takový datový typ (a»
ji¾ primitivní nebo objektový), jen¾ je mo¾né v&nbsp;javovských aplikacích
jednodu¹e zpracovat (konverzi je v¹ak nutné provést programovì). Skripty takté¾
mohou volat viditelné metody javovských objektù (pøedaných formou parametrù) a
pøistupovat k&nbsp;jejich viditelným (<i>public</i>) atributùm, co¾ je takté¾
jedna z&nbsp;mo¾ností, jak zajistit vzájemnou komunikaci mezi programem
v&nbsp;Javì a skripty spou¹tìnými v&nbsp;rámci tohoto programu.</p>

<p>Ov¹em ¾ádná z&nbsp;vý¹e uvedených mo¾ností nemusí vyhovovat ve v¹ech
pøípadech, proto¾e napøíklad pøedávání v¹ech potøebných hodnot pøes parametry
javascriptových funkcí volaných z&nbsp;Javy by vedla k&nbsp;tomu, ¾e by poèet
parametrù mnohdy zbyteènì narùstal. Z&nbsp;tohoto dùvodu jsou, jako alternativa
k&nbsp;pøedávání parametrù, v&nbsp;<i>JSR 223</i> popsány dvì metody nazvané
<strong>put()</strong> a <strong>get()</strong>, které jsou implementovány
ka¾dou instancí tøídy <strong>ScriptEngineManager</strong> (podobné metody lze
pou¾ít i v&nbsp;rámci jednotlivých skriptovacích enginù, kde se v¹ak mù¾e li¹it
oblast jejich viditelnosti). Pomocí metody <strong>put()</strong> se do
pojmenovaného sdíleného objektu mù¾e ulo¾it libovolná hodnota primitivního
datového typu Javy (pøevedená na &bdquo;obalový&ldquo; typ) nebo libovolný
objekt. S&nbsp;vyu¾itím metody <strong>get()</strong> se naopak pøeète
pojmenovaný sdílený objekt (zde je vìt¹inou nutné pou¾ít pøetypování vrácené
hodnoty). Pojmenování sdíleného objektu musí navíc vycházet ze zvyklostí
pou¾ívaných ve skriptovacích jazycích, co¾ napøíklad znamená, ¾e jméno
<strong>sum-x</strong> by mohlo být pou¾ito v&nbsp;jazyce <i>Clojure</i>
(varianta <i>LISPu</i>), ale ji¾ nikoli v&nbsp;<i>JavaScriptu</i>.</p>



<p><a name="k02"></a></p>
<h2>2. Základní vlastnosti metod ScriptEngineManager.put() a ScriptEngineManager.get(), pøístup ke sdíleným objektùm ze skriptù</h2>

<p>Metoda <strong>ScriptEngineManager.put()</strong> jako svùj první parametr
oèekává øetìzec pøedstavující jméno promìnné, pod kterým je mo¾né ke sdílenému
objektu pøistupovat ve skriptech, co¾ jsme si ji¾ ostatnì øekli
v&nbsp;pøedchozí kapitole. Druhým parametrem je obecný typ <i>Object</i>, co¾
mj.&nbsp;znamená, ¾e se v&nbsp;tomto parametru mù¾e skriptovacímu enginu pøedat
instance libovolné tøídy, tj.&nbsp;objektový typ. Pokud je pøedávána hodnota
primitivního datového typu (mù¾e se jednat o pravdivostní hodnotu, celé èíslo
libovolného rozsahu, znak, popø.&nbsp;o reálné èíslo libovolného rozsahu a
pøesnosti), je díky <i>autoboxingu</i> zavedeného v&nbsp;JDK 5 automaticky
pøevedena na pøíslu¹ný &bdquo;obalový&ldquo; objekt. Namísto reference na
existující objekt lze pøedat i <strong>null</strong>. V&nbsp;tomto pøípadì
k&nbsp;vytvoøení sdíleného objektu sice skuteènì dojde, o èem¾ se pøesvìdèíme
v&nbsp;dal¹ích demonstraèních pøíkladech, ale hodnota bude ve skriptu
(konkrétnì v&nbsp;JavaScriptu) bude nastavena na <strong>null</strong> (nikoli
v¹ak <strong>Undefined</strong>).</p>

<p>V&nbsp;pøípadì, ¾e nedojde ke zmìnì hodnoty nìkterého sdíleného objektu ve
skriptu, není jeho typ ¾ádným zpùsobem skriptovacím enginem upravován, co¾ lze
jednodu¹e zjistit získáním jména tøídy pøíslu¹ného objektu získaného metodou
<strong>ScriptEngineManager.get</strong>(), nebo s&nbsp;vyu¾itím operátoru
<strong>instanceof</strong>. Ov¹em skript obecnì mù¾e do sdílených objektù
&ndash; které se z&nbsp;pohledu skriptu chovají jako bì¾né globální promìnné
&ndash; zapsat jakoukoli hodnotu, proto¾e ve vìt¹inì skriptovacích jazykù se
typy vá¾ou pøímo k&nbsp;hodnotám, nikoli k&nbsp;promìnným nesoucím tyto
hodnoty. To napøíklad znamená, ¾e ve sdíleném objektu, kterému byl pùvodnì
v&nbsp;Javì pøiøazen typ <strong>java.lang.Integer</strong> mù¾e být po
spu¹tìní skriptu ulo¾en øetìzec, seznam, instance tøídy
<strong>java.util.Date</strong> atd. S&nbsp;tímto rozdílem v&nbsp;chování Javy
a JavaScriptu (popø.&nbsp;dal¹ích dynamicky typovaných programovacích jazykù)
jsme se ji¾ setkali v&nbsp;pøedchozí èásti tohoto seriálu.</p>



<p><a name="k03"></a></p>
<h2>3. První demonstraèní pøíklad: pou¾ití metod ScriptEngineManager.put() a ScriptEngineManager.get()</h2>

<p>V&nbsp;dne¹ním prvním demonstraèním pøíkladu jsou ukázány v¹echny vlastnosti
metod <strong>ScriptEngineManager.put()</strong> a
<strong>ScriptEngineManager.get()</strong> popsané v&nbsp;pøedchozí kapitole.
Nejprve jsou s&nbsp;vyu¾itím metody <strong>put()</strong> vytvoøeny sdílené
objekty (zde se v&nbsp;nìkterých pøípadech uplatní <i>autoboxing</i>), posléze
jsou tyto objekty získány zpìt pomocí metody <strong>get()</strong> s&nbsp;tím,
¾e je zji¹tìn i typ objektu, který zùstane nezmìnìn, proto¾e sdílené objekty
nejsou skriptem modifikovány (¾ádný skript ostatnì ani není spu¹tìn):</p>

<pre>
import java.util.Date;
import java.util.List;
import java.util.ArrayList;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import javax.script.Invocable;



/**
 * Ukazka volani metod ScriptEngineManager.put() a ScriptEngineManager.get(),
 * ktere mohou byt pouzity pro predavani hodnot mezi skripty a Javovskym
 * programem.
 *
 * @author Pavel Tisnovsky
 */
public class ScriptingTest11 {

    private ScriptEngineManager scriptEngineManager;
    private ScriptEngine scriptEngine;
    private Invocable invocable;

    /**
      * Inicializace skriptovaciho engine v konstruktoru.
      */
    protected ScriptingTest11() {
        this.scriptEngineManager = new ScriptEngineManager();
        this.scriptEngine = this.scriptEngineManager.getEngineByName("JavaScript");
        this.invocable = (Invocable)this.scriptEngine;
    }

    /**
     * Vytvoreni nekolika globalnich promennych v ramci skriptovaciho enginu a
     * jejich zpetne precteni s vyhodnocenim jejich hodnoty a taktez typu.
     */
    private void testScriptEngineManagerGetMethod() {
        System.out.println("testScriptEngineManagerGetMethod:");

        // ulozeni retezcove hodnoty a hodnoty null
        this.scriptEngineManager.put("foo2", "bar");
        this.scriptEngineManager.put("foo3", null);

        // booleovske hodnoty
        this.scriptEngineManager.put("pravda", true);
        this.scriptEngineManager.put("nepravda", false);

        // ruzne typy celociselnych hodnot
        this.scriptEngineManager.put("cele_cislo1", (byte)42);
        this.scriptEngineManager.put("cele_cislo2", (short)42);
        this.scriptEngineManager.put("cele_cislo3", 42);
        this.scriptEngineManager.put("cele_cislo4", 42L);

        // ruzne typy realnych hodnot
        this.scriptEngineManager.put("realne_cislo1", 3.14f);
        this.scriptEngineManager.put("realne_cislo2", 3.14);

        // dalsi typy objektu
        this.scriptEngineManager.put("datum", new Date());
        this.scriptEngineManager.put("seznam", new ArrayList());

        // vypis typu a hodnot vlastnosti (i vlastnosti neexistujicich)
        for (String propertyName : new String[] {
                "foo1", "foo2", "foo3", "pravda", "nepravda",
                "cele_cislo1", "cele_cislo2", "cele_cislo3", "cele_cislo4",
                "realne_cislo1", "realne_cislo2", "datum", "seznam"}) {
            printPropertyTypeAndValue(propertyName);
        }
    }

    /**
      * Vypis typu a hodnoty vybrane promenne.
      */
    private void printPropertyTypeAndValue(String propertyName) {
        String propertyType = "void";
        // tato metoda muze vratit null namisto skutecne reference
        Object propertyValue = this.scriptEngineManager.get(propertyName);

        // zjistovat tridu (typ) ma smysl pouze pro existujici objekty
        if (propertyValue != null) {
            propertyType = propertyValue.getClass().getName();
        }
        System.out.format("property name: %-14s type: %-20s value: %s\n",
                propertyName, propertyType, propertyValue);
    }

    /**
      * Inicializace a spusteni testu.
      */
    protected void runTests() {
        testScriptEngineManagerGetMethod();
    }

    /**
     * @param args nepouzito.
     */
    public static void main(String[] args) {
        new ScriptingTest11().runTests();
    }

}
</pre>

<p>Po spu¹tìní prvního demonstraèního pøíkladu se na standardní výstup vypí¹e
následující tabulka. Pov¹imnìte si toho, jak se pùvodní hodnoty nìkterého
primitivního datového typu (<strong>byte</strong>, <strong>short</strong>,
<strong>int</strong>, <strong>float</strong>, <strong>double</strong>,
<strong>boolean</strong>) automaticky ji¾ pøi ukládání nahradily obalujícím
objektovým typem (<strong>java.lang.Byte</strong>, ...):</p>

<pre>
testScriptEngineManagerGetMethod:
property name: foo1           type: void                 value: null
property name: foo2           type: java.lang.String     value: bar
property name: foo3           type: void                 value: null
property name: pravda         type: java.lang.Boolean    value: true
property name: nepravda       type: java.lang.Boolean    value: false
property name: cele_cislo1    type: java.lang.Byte       value: 42
property name: cele_cislo2    type: java.lang.Short      value: 42
property name: cele_cislo3    type: java.lang.Integer    value: 42
property name: cele_cislo4    type: java.lang.Long       value: 42
property name: realne_cislo1  type: java.lang.Float      value: 3.14
property name: realne_cislo2  type: java.lang.Double     value: 3.14
property name: datum          type: java.util.Date       value: Tue Apr 26 20:56:08 CEST 2011
property name: seznam         type: java.util.ArrayList  value: []
</pre>



<p><a name="k04"></a></p>
<h2>4. Druhý demonstraèní pøíklad: výpis hodnot pøedaných do skriptovacího enginu</h2>

<p>Ve druhém demonstraèním pøíkladu se nejprve pomocí metody
<strong>ScriptEngineManager.put()</strong> pojmenují a vytvoøí sdílené objekty,
jejich¾ hodnoty jsou následnì pøeèteny a vypsány na standardní vystup
v&nbsp;javascriptové funkci nazvané <strong>showValues()</strong>. Pov¹imnìte
si, ¾e tato funkce mù¾e ke sdíleným objektùm pøistupovat naprosto stejným
zpùsobem, jako ke globálním promìnným &ndash; z&nbsp;pohledu skriptu se toti¾
skuteènì jedná o globální promìnné, které jsou ve skripovacím enginu ulo¾eny
v&nbsp;samostatné sdílené oblasti. Pøesnìji øeèeno tyto globální promìnné
<i>nejsou</i> ulo¾eny pøímo ve skriptovacím enginu, ale jsou navíc sdíleny mezi
více skriptovacími enginy, co¾ mù¾e ale takté¾ nemusí být po¾adovaná vlastnost
(pokud by bylo ¾ádoucí, aby byly sdílené objekty pro ka¾dý skriptovací engine
ulo¾ené samostatnì, je mo¾né pou¾ít rozhraní <a
href="http://download.oracle.com/javase/6/docs/api/javax/script/Bindings.html">Bindings</a>
popsané pøí¹tì:</p>

<pre>
import java.util.Date;
import java.util.List;
import java.util.ArrayList;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import javax.script.Invocable;



/**
 * Ukazka vyuziti hodnot ulozenych metodou ScriptEngineManager.put()
 * ve skriptech.
 *
 * @author Pavel Tisnovsky
 */
public class ScriptingTest12 {

    private ScriptEngineManager scriptEngineManager;
    private ScriptEngine scriptEngine;
    private Invocable invocable;

    /**
      * Inicializace skriptovaciho engine v konstruktoru.
      */
    protected ScriptingTest12() {
        this.scriptEngineManager = new ScriptEngineManager();
        this.scriptEngine = this.scriptEngineManager.getEngineByName("JavaScript");
        this.invocable = (Invocable)this.scriptEngine;
    }

    /**
     * Vytvoreni nekolika globalnich promennych v ramci skriptu.
     */
    private void putValues() {

        // ulozeni retezcove hodnoty a hodnoty null
        this.scriptEngineManager.put("foo2", "bar");
        this.scriptEngineManager.put("foo3", null);

        // booleovske hodnoty
        this.scriptEngineManager.put("pravda", true);
        this.scriptEngineManager.put("nepravda", false);

        // ruzne typy celociselnych hodnot
        this.scriptEngineManager.put("cele_cislo1", (byte)42);
        this.scriptEngineManager.put("cele_cislo2", (short)42);
        this.scriptEngineManager.put("cele_cislo3", 42);
        this.scriptEngineManager.put("cele_cislo4", 42L);

        // ruzne typy realnych hodnot
        this.scriptEngineManager.put("realne_cislo1", 3.14f);
        this.scriptEngineManager.put("realne_cislo2", 3.14);

        // dalsi typy objektu
        this.scriptEngineManager.put("datum", new Date());
        this.scriptEngineManager.put("seznam", new ArrayList());
    }

    /**
      * Metoda, ktera vykona prislusny program v JavaScriptu, jehoz
      * funkce mohou byt spousteny v dalsich castech testu.
      */
    private void evaluateScript() throws ScriptException {
        final String script =
            "function showValues() {" +
            "    println('inside showValues() function:');" +
            "    println('variable foo2 = ' + foo2);" +
            "    println('variable foo3 = ' + foo3);" +
            "    println('variable pravda = ' + pravda);" +
            "    println('variable nepravda = ' + nepravda);" +
            "    println('variable cele_cislo1 = ' + cele_cislo1);" +
            "    println('variable cele_cislo2 = ' + cele_cislo2);" +
            "    println('variable cele_cislo3 = ' + cele_cislo3);" +
            "    println('variable cele_cislo4 = ' + cele_cislo4);" +
            "    println('variable realne_cislo1 = ' + realne_cislo1);" +
            "    println('variable realne_cislo2 = ' + realne_cislo2);" +
            "    println('variable datum = ' + datum);" +
            "    println('variable seznam = ' + seznam);" +
            "}";
        this.scriptEngine.eval(script);
    }

    /**
      * Vypis hodnot promennych pomoci skriptu.
      */
    private void printValues() throws ScriptException, NoSuchMethodException {
        this.invocable.invokeFunction("showValues");
        System.out.println();
    }

    /**
      * Inicializace a spusteni testu.
      */
    protected void runTests() {
        try {
            putValues();
            evaluateScript();
            printValues();
        }
        catch (ScriptException e) {
            e.printStackTrace();
        }
        catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    /**
     * @param args nepouzito.
     */
    public static void main(String[] args) {
        new ScriptingTest12().runTests();
    }

}
</pre>

<p>Na výstupu vytvoøeného druhým demonstraèním pøíkladem je zajímavý pøedev¹ím
øádek s&nbsp;promìnnou <strong>foo3</strong>, která sice skuteènì existuje
(jinak by do¹lo k&nbsp;vyhození výjimky pøi pokusu o její výpis), ov¹em její
hodnota je <strong>null</strong>:</p>

<pre>
inside showValues() function:
variable foo2 = bar
variable foo3 = null
variable pravda = true
variable nepravda = false
variable cele_cislo1 = 42
variable cele_cislo2 = 42
variable cele_cislo3 = 42
variable cele_cislo4 = 42
variable realne_cislo1 = 3.140000104904175
variable realne_cislo2 = 3.14
variable datum = Tue Apr 26 21:20:32 CEST 2011
variable seznam = []
</pre>



<p><a name="k05"></a></p>
<h2>5. Rozdíly mezi datovými typy pou¾itými v&nbsp;Javì a JavaScriptu</h2>

<p>Pøi sdílení objektù mezi aplikací naprogramovanou v&nbsp;Javì a skriptem
napsaným v&nbsp;nìkterém podporovaném skriptovacím jazyce, je obèas nutné, aby
skriptovací engine sdílené objekty konvertoval takovým zpùsobem, aby k&nbsp;nim
mìly bezproblémový pøístup obì komunikující strany, tj.&nbsp;jak silnì a
souèasnì i staticky typovaná <i>Java</i>, tak i dynamicky typovaný skriptovací
jazyk. V&nbsp;pøípadì pou¾ití <i>JavaScriptu</i> tedy dochází ke konverzi mezi
objektovými typy Javy (mù¾e se jednat o instanci jakékoli tøídy) a jedním
z&nbsp;pìti datových typù, s&nbsp;nimi¾ pracuje JavaScript:</p>

<table>
<tr><th>Datový typ</th><th>Význam</th></tr>
<tr><td>boolean </td><td>pravdivostní hodnota</td></tr>
<tr><td>number  </td><td>reálné èíslo v&nbsp;dvojité pøesnosti</td></tr>
<tr><td>string  </td><td>øetìzec</td></tr>
<tr><td>object  </td><td>objektový typ</td></tr>
<tr><td>array   </td><td>pole s&nbsp;volitelnou velikostí</td></tr>
<tr><td>null    </td><td>odpovídá <strong>null</strong> v&nbsp;Javì</td></tr>
<tr><td>function</td><td>funkce je v&nbsp;JS plnohodnotným typem, dynamicky generovaný objekty sun.org.mozilla.javascript.gen.XXX v&nbsp;Javì</td></tr>
</table>

<p>Nejjednodu¹¹í je situace pøi práci s&nbsp;pravdivostními hodnotami, ale
problém mù¾e nastat ji¾ u numerických hodnot, proto¾e v&nbsp;<i>JavaScriptu</i>
jsou tyto hodnoty reprezentovány jako reálná èísla v&nbsp;dvojité pøesnosti,
tedy céèkovským èi javovským typem <i>double</i> (<a
href="http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference">http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference</a>).
Pøi konverzích tedy mù¾e dojít ke zmìnì nejni¾¹ích cifer u hodnot, které byly
v&nbsp;Javì ulo¾eny v&nbsp;promìnných typu <i>long</i>, proto¾e jak typ
<i>long</i>, tak i typ <i>double</i> pou¾ívá pro reprezentaci hodnot osm bajtù,
pøièem¾ nìkteré bity jsou u typu <i>double</i> vyhrazeny pro ulo¾ení exponentu.
Mnohem dùle¾itìj¹í je ale konverze dal¹ích typù objektù v&nbsp;Javì na obecný
javascriptový typ <i>object</i> &ndash; pokud programátor ve skriptu pouze
vyu¾ívá viditelné atributy a metody pøedaných objektù, nedochází k&nbsp;¾ádným
problémùm (to jsme si ostatnì ukázali ji¾ minule), ov¹em ve chvíli pøidání
nového atributu èi metody, co¾ je v&nbsp;JavaScriptu zcela legální postup, by
se ji¾ zpìtná konverze na odpovídající objekt v&nbsp;Javì nemohla provést.</p>



<p><a name="k06"></a></p>
<h2>6. Tøetí demonstraèní pøíklad: typy hodnot pøedaných do JavaScriptu</h2>

<p>Ve tøetím demonstraèním pøíkladu je ukázáno, jak lze pøímo z&nbsp;programu
vytvoøeného v&nbsp;JavaScriptu zjistit a vypsat typ sdílených objektù. Pokud si
porovnáme výpis prvního a tohoto pøíkladu, snadno zjistíme, jaké typové
konverze jsou v&nbsp;èase bìhu aplikace provádìny pøi pøedávání hodnot mezi
Javou a skriptovacím enginem. Takté¾ si v¹imnìte, ¾e zdrojový kód skriptu,
který je reprezentován øetìzcem, je mo¾né v&nbsp;nìkterých pøípadech relativnì
snadno generovat s&nbsp;vyu¾itím programových smyèek a operací s&nbsp;øetìzci
nebo instancemi tøíd <strong>StringBuilder</strong> a
<strong>StringBuffer</strong>:</p>

<pre>
import java.util.Date;
import java.util.List;
import java.util.ArrayList;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import javax.script.Invocable;



/**
 * Typy dat predavanych mezi programem napsanym v Jave a JavaScriptu
 * se z pochopitelnych duvodu lisi. V nasledujicim programu je volana
 * JavaScriptova funkce, ktera vyhodnoti a nasledne vypise typy
 * globalnich promennych predanych pomoci metody ScriptEngineManager.put().
 *
 * @author Pavel Tisnovsky
 */
public class ScriptingTest13 {

    private ScriptEngineManager scriptEngineManager;
    private ScriptEngine scriptEngine;
    private Invocable invocable;

    /**
      * Inicializace skriptovaciho engine v konstruktoru.
      */
    protected ScriptingTest13() {
        this.scriptEngineManager = new ScriptEngineManager();
        this.scriptEngine = this.scriptEngineManager.getEngineByName("JavaScript");
        this.invocable = (Invocable)this.scriptEngine;
    }

    /**
     * Vytvoreni nekolika globalnich promennych v ramci skriptu.
     */
    private void putValues() {

        // ulozeni retezcove hodnoty a hodnoty null
        this.scriptEngineManager.put("foo2", "bar");
        this.scriptEngineManager.put("foo3", null);

        // booleovske hodnoty
        this.scriptEngineManager.put("pravda", true);
        this.scriptEngineManager.put("nepravda", false);

        // ruzne typy celociselnych hodnot
        this.scriptEngineManager.put("cele_cislo1", (byte)42);
        this.scriptEngineManager.put("cele_cislo2", (short)42);
        this.scriptEngineManager.put("cele_cislo3", 42);
        this.scriptEngineManager.put("cele_cislo4", 42L);

        // ruzne typy realnych hodnot
        this.scriptEngineManager.put("realne_cislo1", 3.14f);
        this.scriptEngineManager.put("realne_cislo2", 3.14);

        // dalsi typy objektu
        this.scriptEngineManager.put("datum", new Date());
        this.scriptEngineManager.put("seznam", new ArrayList());
    }

    /**
      * Metoda, ktera vykona prislusny program v JavaScriptu, jehoz
      * funkce mohou byt spousteny v dalsich castech testu.
      */
    private void evaluateScript() throws ScriptException {
        String[] variables = new String[] {
            "foo2", "foo3", "pravda", "nepravda",
            "cele_cislo1", "cele_cislo2", "cele_cislo3", "cele_cislo4",
            "realne_cislo1", "realne_cislo2", "datum", "seznam"
        };

        // mala ukazka generovani skriptu pomoci zakladni
        // manipulace s retezci v Jave
        StringBuilder script = new StringBuilder();

        script.append("function showValues() {\n");
        for (String variable : variables) {
            script.append("    println('variable " + variable + " = ' + " + variable + ");\n");
        }
        script.append("}\n\n");

        script.append("function showTypes() {\n");
        for (String variable : variables) {
            script.append("    println('type of variable " + variable + " = ' + typeof " + variable + ");\n");
        }
        script.append("}\n");
        System.out.println("Generated script:\n" + script.toString());
        this.scriptEngine.eval(script.toString());
    }

    /**
      * Vypis hodnot promennych pomoci skriptu.
      */
    private void printValues() throws ScriptException, NoSuchMethodException {
        this.invocable.invokeFunction("showValues");
        System.out.println();
    }

    /**
      * Vypis typu promennych pomoci skriptu.
      */
    private void showTypes() throws ScriptException, NoSuchMethodException {
        this.invocable.invokeFunction("showTypes");
        System.out.println();
    }

    /**
      * Inicializace a spusteni testu.
      */
    protected void runTests() {
        try {
            putValues();
            evaluateScript();
            printValues();
            showTypes();
        }
        catch (ScriptException e) {
            e.printStackTrace();
        }
        catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    /**
     * @param args nepouzito.
     */
    public static void main(String[] args) {
        new ScriptingTest13().runTests();
    }

}
</pre>

<p>Tento pøíklad po svém spu¹tìní nejdøíve vypí¹e skuteènou øetìzcovou
reprezentaci skriptu, jeho¾ zdrojový kód obsahuje dvojici funkcí pojmenovaných
<strong>showValues()</strong> a <strong>showTypes()</strong>:</p>

<pre>
Generated script:
function showValues() {
    println('variable foo2 = ' + foo2);
    println('variable foo3 = ' + foo3);
    println('variable pravda = ' + pravda);
    println('variable nepravda = ' + nepravda);
    println('variable cele_cislo1 = ' + cele_cislo1);
    println('variable cele_cislo2 = ' + cele_cislo2);
    println('variable cele_cislo3 = ' + cele_cislo3);
    println('variable cele_cislo4 = ' + cele_cislo4);
    println('variable realne_cislo1 = ' + realne_cislo1);
    println('variable realne_cislo2 = ' + realne_cislo2);
    println('variable datum = ' + datum);
    println('variable seznam = ' + seznam);
}

function showTypes() {
    println('type of variable foo2 = ' + typeof foo2);
    println('type of variable foo3 = ' + typeof foo3);
    println('type of variable pravda = ' + typeof pravda);
    println('type of variable nepravda = ' + typeof nepravda);
    println('type of variable cele_cislo1 = ' + typeof cele_cislo1);
    println('type of variable cele_cislo2 = ' + typeof cele_cislo2);
    println('type of variable cele_cislo3 = ' + typeof cele_cislo3);
    println('type of variable cele_cislo4 = ' + typeof cele_cislo4);
    println('type of variable realne_cislo1 = ' + typeof realne_cislo1);
    println('type of variable realne_cislo2 = ' + typeof realne_cislo2);
    println('type of variable datum = ' + typeof datum);
    println('type of variable seznam = ' + typeof seznam);
}
</pre>

<p>Posléze se vypí¹ou hodnoty globálních promìnných:</p>

<pre>
variable foo2 = bar
variable foo3 = null
variable pravda = true
variable nepravda = false
variable cele_cislo1 = 42
variable cele_cislo2 = 42
variable cele_cislo3 = 42
variable cele_cislo4 = 42
variable realne_cislo1 = 3.140000104904175
variable realne_cislo2 = 3.14
variable datum = Tue Apr 26 21:31:47 CEST 2011
variable seznam = []
</pre>

<p>A na závìr jejich typy tak, jak byly zkonvertovány skriptovacím enginem:</p>

<pre>
type of variable foo2 = string
type of variable foo3 = object
type of variable pravda = boolean
type of variable nepravda = boolean
type of variable cele_cislo1 = number
type of variable cele_cislo2 = number
type of variable cele_cislo3 = number
type of variable cele_cislo4 = number
type of variable realne_cislo1 = number
type of variable realne_cislo2 = number
type of variable datum = object
type of variable seznam = object
</pre>



<p><a name="k07"></a></p>
<h2>7. Porovnání datových typù pou¾ívaných v&nbsp;Javì a JavaScriptu</h2>

<p>Zkusme nyní zkombinovat výstup prvního a tøetího demonstraèního pøíkladu,
abychom získali pøehled o typových konverzích provádìných skriptovacím
enginem:</p>

<table>
<tr><th>Sdílený objekt</th><th>Typ v Javì</th><th>Typ v JavaScriptu</th></tr>
<tr><td>foo2         </td><td>java.lang.String   </td><td>string </td></tr>
<tr><td>foo3         </td><td>void               </td><td>object </td></tr>
<tr><td>pravda       </td><td>java.lang.Boolean  </td><td>boolean</td></tr>
<tr><td>nepravda     </td><td>java.lang.Boolean  </td><td>boolean</td></tr>
<tr><td>cele_cislo1  </td><td>java.lang.Byte     </td><td>number </td></tr>
<tr><td>cele_cislo2  </td><td>java.lang.Short    </td><td>number </td></tr>
<tr><td>cele_cislo3  </td><td>java.lang.Integer  </td><td>number </td></tr>
<tr><td>cele_cislo4  </td><td>java.lang.Long     </td><td>number </td></tr>
<tr><td>realne_cislo1</td><td>java.lang.Float    </td><td>number </td></tr>
<tr><td>realne_cislo2</td><td>java.lang.Double   </td><td>number </td></tr>
<tr><td>datum        </td><td>java.util.Date     </td><td>object </td></tr>
<tr><td>seznam       </td><td>java.util.ArrayList</td><td>object </td></tr>
</table>



<p><a name="k08"></a></p>
<h2>8. Ètvrtý demonstraèní pøíklad: modifikace hodnot programem v&nbsp;JavaScriptu</h2>

<p>Po odzkou¹ení pøedchozích dvou demonstraèních pøíkladù by se mohlo zdát, ¾e
jakákoli globální promìnná vytvoøená ve skriptu se automaticky stane souèástí
sdílených objektù. Ve skuteènosti tomu tak v¹ak není &ndash; mno¾ina sdílených
objektù se nemìní ani v&nbsp;pøípadì, ¾e je ve skriptu vytvoøena nová globální
promìnná; hodnotu ani typ této promìnné nebude mo¾né pomocí metody
<strong>ScriptEngineManager.get()</strong> pøeèíst. Mo¾nosti skriptu ovlivnit
chování programu napsaného v&nbsp;Javì jsou tedy èásteènì omezeny, co¾ opìt
odpovídá filozofii bìhu skriptu v&nbsp;&bdquo;sandboxu&ldquo;. V&nbsp;dne¹ním
posledním demonstraèním pøíkladu je toto chování ukázáno na pøípadu globální
promìnné <strong>foo0</strong>, která je sice skriptem vytvoøena, ale aplikace
napsaná v&nbsp;Javì k&nbsp;ní nemù¾e pøistupovat. Navíc je v&nbsp;pøíkladu
ukázáno, ¾e je mo¾né pøistupovat k&nbsp;viditelným metodám pøedávaných objektù
(zde seznamu) i to, jak je provedena konverze typù polo¾ek seznamu vytvoøených
pøímo ve skriptu (nikoli v&nbsp;Javì). Jako malý úkol si mù¾ete vyzkou¹et, co
se stane, pokud se nìkterému sdílenému objektu pøiøadí funkce:</p>

<pre>
import java.util.Date;
import java.util.List;
import java.util.ArrayList;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import javax.script.Invocable;



/**
 * Ukazka, jak muze skript modifikovat globalni promenne.
 *
 * @author Pavel Tisnovsky
 */
public class ScriptingTest14 {

    private ScriptEngineManager scriptEngineManager;
    private ScriptEngine scriptEngine;
    private Invocable invocable;

    /**
      * Inicializace skriptovaciho engine v konstruktoru.
      */
    protected ScriptingTest14() {
        this.scriptEngineManager = new ScriptEngineManager();
        this.scriptEngine = this.scriptEngineManager.getEngineByName("JavaScript");
        this.invocable = (Invocable)this.scriptEngine;
    }

    /**
     * Vytvoreni nekolika globalnich promennych v ramci skriptu.
     */
    private void putValues() {

        // ulozeni retezcove hodnoty a hodnoty null
        this.scriptEngineManager.put("foo2", "bar");
        this.scriptEngineManager.put("foo3", null);

        // booleovske hodnoty
        this.scriptEngineManager.put("pravda", true);
        this.scriptEngineManager.put("nepravda", false);

        // ruzne typy celociselnych hodnot
        this.scriptEngineManager.put("cele_cislo1", (byte)42);
        this.scriptEngineManager.put("cele_cislo2", (short)42);
        this.scriptEngineManager.put("cele_cislo3", 42);
        this.scriptEngineManager.put("cele_cislo4", 42L);

        // ruzne typy realnych hodnot
        this.scriptEngineManager.put("realne_cislo1", 3.14f);
        this.scriptEngineManager.put("realne_cislo2", 3.14);

        // dalsi typy objektu
        this.scriptEngineManager.put("datum", new Date());
        this.scriptEngineManager.put("seznam", new ArrayList());
    }

    /**
      * Vypis typu a hodnot vlastnosti (i vlastnosti neexistujicich).
      */
    private void showTypes() {
        for (String propertyName : new String[] {
                "foo0", "foo1", "foo2", "foo3", "pravda", "nepravda",
                "cele_cislo1", "cele_cislo2", "cele_cislo3",
                "realne_cislo1", "realne_cislo2", "datum", "seznam"}) {
            printPropertyTypeAndValue(propertyName);
        }
    }

    /**
      * Vypis typu a hodnoty vybrane promenne.
      */
    private void printPropertyTypeAndValue(String propertyName) {
        String propertyType = "void";
        Object propertyValue = this.scriptEngineManager.get(propertyName);
        // zjistovat tridu (typ) ma smysl pouze pro existujici objekty
        if (propertyValue != null) {
            propertyType = propertyValue.getClass().getName();
        }
        System.out.format("property name: %-14s type: %-20s value: %s\n",
                propertyName, propertyType, propertyValue);
    }

    /**
      * Vypis hodnot a typu vsech prvku ulozenych v seznamu.
      */
    private void showListValues() {
        List list = (List)this.scriptEngineManager.get("seznam");
        int i = 0;
        for (Object item : list) {
            System.out.format("List item #%d has type %s and value %s\n",
                    i++, item.getClass().getName(), item.toString());
        }
    }

    /**
      * Metoda, ktera vykona prislusny program v JavaScriptu, jehoz
      * funkce mohou byt spousteny v dalsich castech testu.
      */
    private void evaluateScript() throws ScriptException {
        final String script =
            "function modifyValues() {" +
            "    foo0 = 'xyzzy';" + // bude tato promenna viditelna?
            "    foo2 = 'xyzzy';" +
            "    foo3 = 'not void';" +
            "    pravda = !pravda;" +
            "    cele_cislo1++;" +
            "    cele_cislo2 *= cele_cislo3 + 1;" +
            "    datum = new java.util.Date(0);" + // pocatek epochy!

            // pridani dalsich polozek do seznamu je snadne, nebot
            // se seznam chova jako bezny objekty typu List v Jave.
            "    seznam.add('prvni');" +
            "    seznam.add(false);" +
            "    seznam.add(cele_cislo1);" +
            "    seznam.add(0);" +
            "    seznam.add(datum);" +
            "    seznam.addAll(seznam);" +
            "}";
        this.scriptEngine.eval(script);
    }

    /**
      * Vyvolani JavaScriptove funkce pro modifikaci globalnich promennych.
      */
    private void modifyValues() throws ScriptException, NoSuchMethodException {
        this.invocable.invokeFunction("modifyValues");
    }

    /**
      * Inicializace a spusteni testu.
      */
    protected void runTests() {
        try {
            putValues();
            evaluateScript();
            modifyValues();
            showTypes();
            showListValues();
        }
        catch (ScriptException e) {
            e.printStackTrace();
        }
        catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    /**
     * @param args nepouzito.
     */
    public static void main(String[] args) {
        new ScriptingTest14().runTests();
    }

}
</pre>

<p>Výstup vý¹e uvedeného demonstraèního pøíkladu je opìt rozdìlený na dvì
èásti. V&nbsp;první èásti se vypí¹ou nové hodnoty pøiøazené sdíleným objektùm
ve skriptu:</p>

<pre>
property name: foo0           type: void                 value: null
property name: foo1           type: void                 value: null
property name: foo2           type: java.lang.String     value: xyzzy
property name: foo3           type: java.lang.String     value: not void
property name: pravda         type: java.lang.Boolean    value: false
property name: nepravda       type: java.lang.Boolean    value: false
property name: cele_cislo1    type: java.lang.Double     value: 43.0
property name: cele_cislo2    type: java.lang.Double     value: 1806.0
property name: cele_cislo3    type: java.lang.Integer    value: 42
property name: realne_cislo1  type: java.lang.Float      value: 3.14
property name: realne_cislo2  type: java.lang.Double     value: 3.14
property name: datum          type: java.util.Date       value: Thu Jan 01 01:00:00 CET 1970
property name: seznam         type: java.util.ArrayList  value: [prvni, false, 43.0, 0.0, Thu Jan 01 01:00:00 CET 1970, prvni, false, 43.0, 0.0, Thu Jan 01 01:00:00 CET 1970]
</pre>

<p>Následnì je vypsána hodnota i datový typ v¹ech polo¾ek umístìných ve
sdíleném objektu se jménem &bdquo;seznam&ldquo; (jedná se o instanci tøídy
<strong>ArrayList</strong>):</p>

<pre>
List item #0 has type java.lang.String and value prvni
List item #1 has type java.lang.Boolean and value false
List item #2 has type java.lang.Double and value 43.0
List item #3 has type java.lang.Double and value 0.0
List item #4 has type java.util.Date and value Thu Jan 01 01:00:00 CET 1970
List item #5 has type java.lang.String and value prvni
List item #6 has type java.lang.Boolean and value false
List item #7 has type java.lang.Double and value 43.0
List item #8 has type java.lang.Double and value 0.0
List item #9 has type java.util.Date and value Thu Jan 01 01:00:00 CET 1970
</pre>



<p><a name="k09"></a></p>
<h2>9. Odkazy na Internetu</h2>

<ol>

<li>JSRs: Java Specification Requests &ndash; JSR 223: Scripting for the Java Platform<br />
<a href="http://www.jcp.org/en/jsr/detail?id=223">http://www.jcp.org/en/jsr/detail?id=223</a>
</li>

<li>Scripting for the Java Platform<br />
<a href="http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/">http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/</a>
</li>

<li>Scripting for the Java Platform (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform">http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform</a>
</li>

<li>Java Community Process<br />
<a href="http://en.wikipedia.org/wiki/Java_Specification_Request">http://en.wikipedia.org/wiki/Java_Specification_Request</a>
</li>

<li>Package javax.script (JavaDoc)<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/package-summary.html">http://download.oracle.com/javase/6/docs/api/javax/script/package-summary.html</a>
</li>

<li>javax.script.Bindings<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/Bindings.html">http://download.oracle.com/javase/6/docs/api/javax/script/Bindings.html</a>
</li>

<li>javax.script.Compilable<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/Compilable.html">http://download.oracle.com/javase/6/docs/api/javax/script/Compilable.html</a>
</li>

<li>javax.script.Invocable<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/Invocable.html">http://download.oracle.com/javase/6/docs/api/javax/script/Invocable.html</a>
</li>

<li>javax.script.ScriptContext<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/ScriptContext.html">http://download.oracle.com/javase/6/docs/api/javax/script/ScriptContext.html</a>
</li>

<li>javax.script.ScriptEngine<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html">http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html</a>
</li>

<li>javax.script.ScriptEngineFactory<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngineFactory.html">http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngineFactory.html</a>
</li>

<li>javax.script.AbstractScriptEngine<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/AbstractScriptEngine.html">http://download.oracle.com/javase/6/docs/api/javax/script/AbstractScriptEngine.html</a>
</li>

<li>javax.script.CompiledScript<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/CompiledScript.html">http://download.oracle.com/javase/6/docs/api/javax/script/CompiledScript.html</a></td>
</li>

<li>javax.script.ScriptEngineManager<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngineManager.html">http://download.oracle.com/javase/6/docs/api/javax/script/ScriptEngineManager.html</a>
</li>

<li>javax.script.SimpleBindings<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/SimpleBindings.html">http://download.oracle.com/javase/6/docs/api/javax/script/SimpleBindings.html</a>
</li>

<li>javax.script.SimpleScriptContext<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/SimpleScriptContext.html">http://download.oracle.com/javase/6/docs/api/javax/script/SimpleScriptContext.html</a>
</li>

<li>javax.script.ScriptException<br />
<a href="http://download.oracle.com/javase/6/docs/api/javax/script/ScriptException.html">http://download.oracle.com/javase/6/docs/api/javax/script/ScriptException.html</a>
</li>

<li>The Java Compatibility Test Tools: JavaTest Harness<br />
<a href="http://java.sun.com/developer/technicalArticles/JCPtools2/">http://java.sun.com/developer/technicalArticles/JCPtools2/</a>
</li>

<li>JavaScript engine (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/JavaScript_engine">http://en.wikipedia.org/wiki/JavaScript_engine</a>
</li>

<li>Rhino (JavaScript engine)<br />
<a href="http://en.wikipedia.org/wiki/Rhino_(JavaScript_engine)">http://en.wikipedia.org/wiki/Rhino_(JavaScript_engine)</a>
</li>

<li>Rhino: JavaScript for Java<br />
<a href="http://www.mozilla.org/rhino/">http://www.mozilla.org/rhino/</a>
</li>

<li>Java HotSpot VM Options<br />
<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a></li>

<li>HugePages<br />
<a href="http://linux-mm.org/HugePages">http://linux-mm.org/HugePages</a>
</li>

<li>Tuning big java heap and linux huge pages<br />
<a href="http://www.tikalk.com/alm/forums/tuning-big-java-heap-and-linux-huge-pages">http://www.tikalk.com/alm/forums/tuning-big-java-heap-and-linux-huge-pages</a>
</li>

<li>How do I set up hugepages in Red Hat Enterprise Linux 4<br />
<a href="http://magazine.redhat.com/2007/05/29/how-do-i-set-up-hugepages-in-red-hat-enterprise-linux-4/">http://magazine.redhat.com/2007/05/29/how-do-i-set-up-hugepages-in-red-hat-enterprise-linux-4/</a>
</li>

<li>Java SE Tuning Tip: Large Pages on Windows and Linux<br />
<a href="http://blogs.sun.com/dagastine/entry/java_se_tuning_tip_large">http://blogs.sun.com/dagastine/entry/java_se_tuning_tip_large</a>
</li>

<li>Translation lookaside buffer<br />
<a href="http://en.wikipedia.org/wiki/Translation_lookaside_buffer">http://en.wikipedia.org/wiki/Translation_lookaside_buffer</a>
</li>

<li>Physical Address Extension<br />
<a href="http://en.wikipedia.org/wiki/Physical_Address_Extension">http://en.wikipedia.org/wiki/Physical_Address_Extension</a>
</li>

<li>Java HotSpot VM Options<br />
<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a>
</li>

<li>Amdahl's law<br />
<a href="http://en.wikipedia.org/wiki/Amdahl_law">http://en.wikipedia.org/wiki/Amdahl_law</a>
</li>

<li>Garbage collection (computer science)<br />
<a href="http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)</a>
</li>

<li>Dr. Dobb's | G1: Java's Garbage First Garbage Collector<br />
<a href="http://www.drdobbs.com/article/printableArticle.jhtml?articleId=219401061&amp;dept_url=/java/">http://www.drdobbs.com/article/printableArticle.jhtml?articleId=219401061&amp;dept_url=/java/</a>
</li>

<li>Java's garbage-collected heap<br />
<a href="http://www.javaworld.com/javaworld/jw-08-1996/jw-08-gc.html">http://www.javaworld.com/javaworld/jw-08-1996/jw-08-gc.html</a>
</li>

<li>Compressed oops in the Hotspot JVM<br />
<a href="http://wikis.sun.com/display/HotSpotInternals/CompressedOops">http://wikis.sun.com/display/HotSpotInternals/CompressedOops</a>
</li>

<li>32-bit or 64-bit JVM? How about a Hybrid?<br />
<a href="http://blog.juma.me.uk/2008/10/14/32-bit-or-64-bit-jvm-how-about-a-hybrid/">http://blog.juma.me.uk/2008/10/14/32-bit-or-64-bit-jvm-how-about-a-hybrid/</a>
</li>

<li>Compressed object pointers in Hotspot VM<br />
<a href="http://blogs.sun.com/nike/entry/compressed_object_pointers_in_hotspot">http://blogs.sun.com/nike/entry/compressed_object_pointers_in_hotspot</a>
</li>

<li>Java HotSpot(tm) Virtual Machine Performance Enhancements<br />
<a href="http://download.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html">http://download.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html</a>
</li>

<li>Using jconsole<br />
<a href="http://download.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html">http://download.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html</a>
</li>

<li>jconsole &ndash; Java Monitoring and Management Console<br />
<a href="http://download.oracle.com/javase/1.5.0/docs/tooldocs/share/jconsole.html">http://download.oracle.com/javase/1.5.0/docs/tooldocs/share/jconsole.html</a>
</li>

<li>Great Computer Language Shootout<br />
<a href="http://c2.com/cgi/wiki?GreatComputerLanguageShootout">http://c2.com/cgi/wiki?GreatComputerLanguageShootout</a>
</li>

<li>x86-64<br />
<a href="http://en.wikipedia.org/wiki/X86-64">http://en.wikipedia.org/wiki/X86-64</a>
</li>

<li>Physical Address Extension<br />
<a href="http://en.wikipedia.org/wiki/Physical_Address_Extension">http://en.wikipedia.org/wiki/Physical_Address_Extension</a>
</li>

<li>Java performance<br />
<a href="http://en.wikipedia.org/wiki/Java_performance">http://en.wikipedia.org/wiki/Java_performance</a>
</li>

<li>1.6.0_14 (6u14)<br />
<a href="http://www.oracle.com/technetwork/java/javase/6u14-137039.html?ssSourceSiteId=otncn">http://www.oracle.com/technetwork/java/javase/6u14-137039.html?ssSourceSiteId=otncn</a>
</li>

<li>Update Release Notes<br />
<a href="http://www.oracle.com/technetwork/java/javase/releasenotes-136954.html">http://www.oracle.com/technetwork/java/javase/releasenotes-136954.html</a>
</li>

<li>Java virtual machine: 4.10 Limitations of the Java Virtual Machine<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88659">http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88659</a>
</li>

<li>Java(TM) Platform, Standard Edition 7 Binary Snapshot Releases<br />
<a href="http://dlc.sun.com.edgesuite.net/jdk7/binaries/index.html">http://dlc.sun.com.edgesuite.net/jdk7/binaries/index.html</a>
</li>

<li>Trying the prototype<br />
<a href="http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html">http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html</a>
</li>

<li>Better closures (for Java)<br />
<a href="http://blogs.sun.com/jrose/entry/better_closures">http://blogs.sun.com/jrose/entry/better_closures</a>
</li>

<li>Lambdas in Java: An In-Depth Analysis<br />
<a href="http://www.infoq.com/articles/lambdas-java-analysis">http://www.infoq.com/articles/lambdas-java-analysis</a>
</li>

<li>Class ReflectiveOperationException<br />
<a href="http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html">http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html</a>
</li>

<li>Proposal: Indexing access syntax for Lists and Maps<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html</a>
</li>

<li>Proposal: Elvis and Other Null-Safe Operators<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html</a>
</li>

<li>Java 7 : Oracle pushes a first version of closures<br />
<a href="http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/">http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/</a>
</li>

<li>Groovy: An agile dynamic language for the Java Platform<br />
<a href="http://groovy.codehaus.org/Operators">http://groovy.codehaus.org/Operators</a>
</li>

<li>Better Strategies for Null Handling in Java<br />
<a href="http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java">http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java</a>
</li>

<li>Control Flow in the Java Virtual Machine<br />
<a href="http://www.artima.com/underthehood/flowP.html">http://www.artima.com/underthehood/flowP.html</a>
</li>

<li>Java Virtual Machine<br />
<a href="http://en.wikipedia.org/wiki/Java_virtual_machine">http://en.wikipedia.org/wiki/Java_virtual_machine</a>
</li>

<li>==, .equals(), compareTo(), and compare()<br />
<a href="http://leepoint.net/notes-java/data/expressions/22compareobjects.html">http://leepoint.net/notes-java/data/expressions/22compareobjects.html</a>
</li>

<li>New JDK7 features<br />
<a href="http://openjdk.java.net/projects/jdk7/features/">http://openjdk.java.net/projects/jdk7/features/</a>
</li>

<li>Project Coin: Bringing it to a Close(able)<br />
<a href="http://blogs.sun.com/darcy/entry/project_coin_bring_close">http://blogs.sun.com/darcy/entry/project_coin_bring_close</a>
</li>

<li>ClosableFinder source code<br />
<a href="http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java">http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java</a>
</li>

<li>Joe Darcy blog about JDK<br />
<a href="http://blogs.sun.com/darcy">http://blogs.sun.com/darcy</a>
</li>

<li>Java 7 - more dynamics<br />
<a href="http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/">http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/</a>
</li>

<li>ArrayList (JDK 1.4)<br />
<a href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html">http://download.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2011</small></p>
</body>
</html>

