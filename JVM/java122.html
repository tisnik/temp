<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Pohled pod kapotu JVM - práce s TTF fonty v knihovnì SDLJava</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Pohled pod kapotu JVM - práce s TTF fonty v knihovnì SDLJava</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V dne¹ní èásti seriálu o programovacím jazyku Java i o virtuálním stroji tohoto jazyka si na ètveøici demonstraèních pøíkladù uká¾eme, jakým zpùsobem je mo¾né s vyu¾itím knihovny SDLJava pracovat s TTF fonty a jak je mo¾né do bitmap (a tím pádem i na obrazovku) vykreslovat text.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Pohled pod kapotu JVM - práce s TTF fonty v knihovnì SDLJava</a></p>
<p><a href="#k02">2. Vykreslení textu vybraným fontem do samostatné bitmapy</a></p>
<p><a href="#k03">3. Demonstraèní pøíklad <strong>SDLTest40</strong>: vykreslení textu vybraným fontem do samostatné bitmapy</a></p>
<p><a href="#k04">4. Pozadí textu: vyu¾ití prùhlednosti èi vybrané konstantní barvy</a></p>
<p><a href="#k05">5. Demonstraèní pøíklad <strong>SDLTest41</strong>: vykreslení textu pøes ji¾ døíve vykreslenou bitmapu</a></p>
<p><a href="#k06">6. Demonstraèní pøíklad <strong>SDLTest42</strong>: volba barvy pozadí textu</a></p>
<p><a href="#k07">7. Fonty a antialiasing</a></p>
<p><a href="#k08">8. Demonstraèní pøíklad <strong>SDLTest43</strong>: vykreslení textu s&nbsp;vyu¾itím antialiasingu</a></p>
<p><a href="#k09">9. Repositáø se zdrojovými kódy v¹ech ètyø dne¹ních demonstraèních pøíkladù</a></p>
<p><a href="#k10">10. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Práce s&nbsp;TTF fonty v&nbsp;knihovnì SDLJava</h2>

<p>Pøi programování grafických aplikací a her se v&nbsp;naprosté vìt¹inì
pøípadù setkáme s&nbsp;nutností vykreslit na obrazovku nìjaký text, a» ji¾ se
jedná o titulek hry èi o souèást grafického u¾ivatelského rozhraní aplikace
(hlavní menu, nápovìda atd.). V&nbsp;knihovnì <i>SDLJava</i> existuje podpora
pro vykreslování znakù, pøièem¾ ve¹kerá funkcionalita je ve skuteènosti
zaji¹tìna nativní knihovnou <strong>SDL_ttf</strong> verze 1.2 èi 2.0, která
navíc pøi své èinnosti vyu¾ívá dal¹í nativní knihovnu pojmenovanou
<strong>(lib)FreeType</strong> (<a
href="http://www.freetype.org/">http://www.freetype.org/</a>).</p>

<img src="http://i.iinfo.cz/images/403/img01.png" class="image-165095" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 1: Hra Luola vyu¾ívá knihovnu SDL i SDL_ttf.</i></p>

<p>Pøi instalaci knihovny <i>SDLJava</i> se kromì vlastního javovského archivu
<strong>sdljava.jar</strong> vytvoøí v&nbsp;pracovním adresáøi i nìkolik
souborù obsahujících nativní èásti této knihovny. Jedním z&nbsp;tìchto souborù
je i <strong>libsdljava_ttf.so</strong>
popø.&nbsp;<strong>sdljava_ttf.dll</strong> obsahující tenkou mezivrstvu mezi
knihovnou <i>SDLJava</i> a nativní knihovnou <strong>libSDL_ttf</strong>. Pokud
vám tedy nebudou dne¹ní demonstraèní pøíklady pracovat korektnì, je nutné
zjistit, zda jsou v¹echny potøebné (nativní) knihovny skuteènì nainstalovány.
Pro bìh demonstraèních pøíkladù je takté¾ nutné mít v&nbsp;pracovním adresáøi
umístìn font <i>freesans.ttf</i> dostupný na adrese <a
href="http://www.fontspace.com/gnu-freefont/freesans">http://www.fontspace.com/gnu-freefont/freesans</a>
(postaèuje jen jediný uvedený soubor <i>freesans.ttf</i> èi <i>FreeSans.ttf</i>
&ndash; pozor na správné pou¾ití velkých a malých písmen v&nbsp;demonstraèních
pøíkladech v&nbsp;konstantì <strong>FONT_NAME</strong>!).</p>

<img src="http://i.iinfo.cz/images/509/img02.png" class="image-165096" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 2: Scéna vykreslená dne¹ním prvním demonstraèním
pøíkladem.</i></p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Vykreslení textu vybraným fontem do samostatné bitmapy</h2>

<p>Jak jsme si ji¾ øekli <a href="#k01">v&nbsp;pøedchozí kapitole</a>, doká¾e
knihovna <i>SDLJava</i> pracovat s&nbsp;fonty typu TTF (True Type Font),
v&nbsp;nich¾ jsou tvary jednotlivých znakù ulo¾eny ve formì obrysù slo¾ených ze
sekvence na sebe navazujících úseèek a kvadratických Bézierových køivek. Ve
skuteènosti se v¹ak v&nbsp;naprosté vìt¹inì pøípadù programátoøi nemusí zabývat
pøesným algoritmem vykreslování jednotlivých znakù, co¾ je ostatnì dosti
komplikované, pøedev¹ím pøi men¹ích velikostech znakù a pou¾ití
tzv.&nbsp;hintingu. Díky tøídám nabízených knihovnou <i>SDLJava</i> je mo¾né
jednodu¹e naèíst vybraný soubor typu TTF s&nbsp;uvedením velikosti výsledného
písma. Knihovna <i>SDLJava</i> se s&nbsp;vyu¾itím nativních èástí
<i>SDL_ttf</i> a <i>FreeType</i> sama postará o rasterizaci jednotlivých znakù,
tj.&nbsp;o vykreslení a vyplnìní ji¾ zmínìných úseèek a Bézierových køivek
pøedstavujících obrysy jednotlivých znakù. Základem pøi práci s&nbsp;písmy jsou
tøídy <strong>sdljava.ttf.SDLTTF</strong> a
<strong>sdljava.ttf.SDLTrueTypeFont</strong>. Inicializace písma se provede
následujícím zpùsobem:</p>

<pre>
<i>// inicializace subsystemu SDL_ttf</i>
SDLTTF.init();
&nbsp;
<i>// instance tridy SDLTrueTypeFont nese jiz zpracovane informace fontu</i>
<i>// vybrane velikosti</i>
final SDLTrueTypeFont font = SDLTTF.openFont("font.ttf", 36 <i>/* velikost v pt */</i>);
</pre>

<p>Následnì je mo¾né vyu¾ít instanci tøídy <strong>SDLTrueTypeFont</strong> pro
vykreslení øetìzce do samostatné (automaticky vytvoøené) bitmapy, se kterou je
mo¾né pracovat jako s&nbsp;bì¾ným spritem:</p>

<pre>
<i>// vykreslit text do samostatne bitmapy</i>
SDLSurface bitmap = font.renderTextSolid("www.root.cz", new SDLColor(255, 95, 95));
&nbsp;
<i>// vypocitat umisteni bitmapy na obrazovce.</i>
final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
<i>// provest operaci typu BitBLT</i>
bitmap.blitSurface(screen, rect);
&nbsp;
<i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
screen.updateRect();
screen.flip();
</pre>

<p>Pøi ukonèování èinnosti aplikace je vhodné provést i deinicializaci
subsystému pro práci s&nbsp;fonty:</p>

<pre>
try {
    <i>// uvolneni prostredku vyuzivanych subsytemem SDL_ttf.</i>
    SDLTTF.quit();
}
catch (SDLException e) {
    e.printStackTrace();
}
</pre>

<img src="http://i.iinfo.cz/images/31/img03.png" class="image-165097" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 3: Scéna vykreslená dne¹ním prvním demonstraèním
pøíkladem (pou¾it je odli¹ný font).</i></p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Demonstraèní pøíklad <strong>SDLTest40</strong>: vykreslení textu vybraným fontem do samostatné bitmapy</h2>

<p>Postup pro vykreslení øetìzce popsaný <a href="#k02">v&nbsp;pøedchozí
kapitole</a> je pou¾it v&nbsp;dne¹ním prvním demonstraèním pøíkladu nazvaném
<strong>SDLTest40</strong>, jeho¾ zdrojový kód lze nalézt na <a
href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40.java">této
adrese</a>. Nejprve je provedena inicializace knihovny <i>SDLJava</i>, posléze
se inicializuje i systém pro práci s&nbsp;fonty a následnì je vybraný font
naèten (mìl by se nacházet v&nbsp;pracovním adresáøi). Vykreslení celé scény
(zde pouze jednoøádkového textu) je realizováno v&nbsp;metodì
<strong>drawOnScreen()</strong>:</p>

<pre>
import sdljava.SDLMain;
import sdljava.SDLException;
&nbsp;
import sdljava.event.SDLEvent;
import sdljava.event.SDLKeyboardEvent;
import sdljava.event.SDLKey;
import sdljava.event.SDLQuitEvent;
&nbsp;
import sdljava.video.SDLColor;
import sdljava.video.SDLRect;
import sdljava.video.SDLSurface;
import sdljava.video.SDLVideo;
&nbsp;
import sdljava.ttf.SDLTTF;
import sdljava.ttf.SDLTrueTypeFont;
&nbsp;
import sdljava.x.swig.SDLPressedState;
&nbsp;
&nbsp;
&nbsp;
<i>/**</i>
<i> * Ctyricaty demonstracni priklad vyuzivajici knihovnu SDLjava.</i>
<i> *</i>
<i> * Ukazka vyuziti zakladnich moznosti tridy sdljava.ttf.SDLTTF.</i>
<i> *</i>
<i> * @author Pavel Tisnovsky</i>
<i> */</i>
public class <strong>SDLTest40</strong> {
&nbsp;
    <i>/**</i>
    <i> * Horizontalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_WIDTH</strong> = 640;
&nbsp;
    <i>/**</i>
    <i> * Vertikalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_HEIGHT</strong> = 480;
&nbsp;
    <i>/**</i>
    <i> * Bitova hloubka vybraneho grafickeho rezimu.</i>
    <i> * (0 znamena automaticky vyber, ovsem lze samozrejme pouzit</i>
    <i> * i hodnoty 8, 16, 24 ci 32, podle vlastnosti graficke karty)</i>
    <i> */</i>
    private static final int <strong>GFX_BPP</strong> = 0;
&nbsp;
    <i>/**</i>
    <i> * Jmeno souboru s fontem.</i>
    <i> */</i>
    private static final String <strong>FONT_NAME</strong> = "freesans.ttf";
    <i>//private static final String FONT_NAME = "mcgf.ttf";</i>
    <i>//private static final String FONT_NAME = "aescr5b.ttf";</i>
&nbsp;
    <i>/**</i>
    <i> * Velikost pisma udavana v bodech.</i>
    <i> */</i>
    private static final int <strong>FONT_SIZE</strong> = 72;
&nbsp;
    <i>/**</i>
    <i> * Barva vykresleneho textu.</i>
    <i> */</i>
    private static final SDLColor <strong>FONT_COLOR</strong> = new SDLColor(255, 95, 95);
&nbsp;
    <i>/**</i>
    <i> * Inicializace grafickeho rezimu ci otevreni okna pro vykreslovani.</i>
    <i> */</i>
    private static SDLSurface <strong>initVideo</strong>() throws SDLException {
        final long flags = SDLVideo.SDL_DOUBLEBUF;
        return SDLVideo.setVideoMode(GFX_WIDTH, GFX_HEIGHT, GFX_BPP, flags);
    }
&nbsp;
    <i>/**</i>
    <i> * Smycka pro zpracovani udalosti.</i>
    <i> */</i>
    private static void <strong>eventLoop</strong>() throws SDLException {
        while (true) {
            <i>// precist udalost z fronty</i>
            SDLEvent event = SDLEvent.waitEvent();
&nbsp;
            <i>// vyskok ze smycky pro zpracovani udalosti pri vyskytu</i>
            <i>// udalosti typu SDLQuitEvent</i>
            if (event instanceof SDLQuitEvent) {
                return;
            }
&nbsp;
            <i>// stisk ci pusteni klavesy</i>
            if (event instanceof SDLKeyboardEvent) {
                <i>// pretypovani</i>
                final SDLKeyboardEvent keyEvent = (SDLKeyboardEvent)event;
&nbsp;
                <i>// symbol/kod klavesy</i>
                final int symbol = keyEvent.getSym();
&nbsp;
                <i>// ESC ukonci program</i>
                if (symbol == SDLKey.SDLK_ESCAPE &amp;&amp; keyEvent.getState() == SDLPressedState.PRESSED) {
                    return;
                }
            }
        }
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni bitmapy s textem na obrazovku (do okna aplikace).</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param font</i>
    <i> *            font pouzity pri vykreslovani</i>
    <i> */</i>
    private static void <strong>drawOnScreen</strong>(SDLSurface screen, SDLTrueTypeFont font) throws SDLException {
        <i>// vykreslit text do samostatne bitmapy</i>
        SDLSurface bitmap = font.renderTextSolid("www.root.cz", FONT_COLOR);
&nbsp;
        <i>// vypocitat umisteni bitmapy na obrazovce.</i>
        final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
        <i>// provest operaci typu BitBLT</i>
        bitmap.blitSurface(screen, rect);
&nbsp;
        <i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
        screen.updateRect();
        screen.flip();
    }
&nbsp;
    <i>/**</i>
    <i> * Vypocitat umisteni bitmapy na obrazovce.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa s pismem, ktera se ma na obrazovku vykreslit</i>
    <i> * @return obdelnik predstavujici pozici bitmapy na obrazovce</i>
    <i> */</i>
    private static SDLRect <strong>computePositionOnScreen</strong>(SDLSurface screen, SDLSurface bitmap) {
        <i>// ziskat rozmery obrazovky i bitmapy</i>
        final int screenWidth = screen.getWidth();
        final int screenHeight = screen.getHeight();
        final int bitmapWidth = bitmap.getWidth();
        final int bitmapHeight = bitmap.getHeight();
&nbsp;
        <i>// vypocitat umisteni bitmapy na obrazovce</i>
        final int x = (screenWidth - bitmapWidth)&gt;&gt;1;
        final int y = (screenHeight - bitmapHeight)&gt;&gt;1;
        return new SDLRect(x, y, bitmapWidth, bitmapHeight);
    }
&nbsp;
    <i>/**</i>
    <i> * Spusteni ctyricateho demonstracniho prikladu.</i>
    <i> */</i>
    public static void <strong>main</strong>(String[] args) {
        try {
            <i>// inicializace knihovny SDLJava</i>
            SDLMain.init(SDLMain.SDL_INIT_VIDEO);
&nbsp;
            <i>// inicializace subsystemu SDL_ttf</i>
            SDLTTF.init();
&nbsp;
            <i>// inicializace grafickeho rezimu ci otevreni okna pro vykreslovani</i>
            final SDLSurface screen = initVideo();
&nbsp;
            <i>// instance tridy SDLTrueTypeFont nese jiz zpracovane informace fontu</i>
            <i>// vybrane velikosti</i>
            final SDLTrueTypeFont font = SDLTTF.openFont(FONT_NAME, FONT_SIZE);
&nbsp;
            <i>// vykresleni sceny na obrazovku</i>
            drawOnScreen(screen, font);
&nbsp;
            <i>// smycka pro zpracovani udalosti</i>
            eventLoop();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                <i>// uvolneni prostredku vyuzivanych subsytemem SDL_ttf.</i>
                SDLTTF.quit();
            }
            catch (SDLException e) {
                e.printStackTrace();
            }
&nbsp;
            <i>// musime obnovit puvodni graficky rezim</i>
            <i>// i v tom pripade, ze nastane nejaka vyjimka</i>
            SDLMain.quit();
        }
    }
&nbsp;
}
</pre>

<img src="http://i.iinfo.cz/images/150/img04.png" class="image-165098" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 4: Scéna vykreslená dne¹ním prvním demonstraèním
pøíkladem (opìt je pou¾it odli¹ný font).</i></p>

<p>Skript pro pøeklad na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
javac -cp $SDL_JAVA_LIBS/sdljava.jar SDLTest40.java
</pre>

<p>Dávkový soubor pro pøeklad na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
javac -cp %SDL_JAVA_LIBS%\sdljava.jar SDLTest40.java
</pre>

<p>Skript pro spu¹tìní na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
java -cp .:$SDL_JAVA_LIBS/sdljava.jar -Djava.library.path=$SDL_JAVA_LIBS SDLTest40
</pre>

<p>Dávkový soubor pro spu¹tìní na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
java -cp .;%SDL_JAVA_LIBS%\sdljava.jar -Djava.library.path=%SDL_JAVA_LIBS% SDLTest40
</pre>



<p><a name="k04"></a></p>
<h2 id="k04">4. Pozadí textu: vyu¾ití prùhlednosti èi vybrané konstantní barvy</h2>

<p>Bitmapa, která je automaticky vytvoøena pøi vykreslení fontu, mù¾e obsahovat
buï prùhlednou barvu pozadí (kde je prùhlednost nastavena na 100%) nebo naopak
zvolenou barvu. To, jaká mo¾nost se pøi vykreslování vyu¾ije, závisí na tom,
zda se pou¾ije metoda <strong>SDLTrueTypeFont.renderTextSolid()</strong> nebo
alternativní metoda <strong>SDLTrueTypeFont.renderTextShaded()</strong>.
V&nbsp;prvním pøípadì je vytvoøena bitmapa s&nbsp;bitovou hloubkou 8bpp
obsahující v&nbsp;místech, kde se nenachází ¾ádný znak, zcela prùhledné pixely.
Pøi pou¾ití druhé metody jsou tyto pixely vyplnìny zadanou barvou, ov¹em
vytvoøená bitmapa bude mít stále shodnou bitovou hloubku 8bpp. Rozdíly mezi
obìma vytvoøenými bitmapami jsou patrné na následujících dvou obrázcích, u
nich¾ byly texty (resp.&nbsp;pøesnìji øeèeno bitmapy s&nbsp;texty) vykresleny
pøes ji¾ døíve vykreslenou bitmapu s&nbsp;naèteným obrázkem:</p>

<img src="http://i.iinfo.cz/images/68/img05.png" class="image-165099" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 5: Prùhledné pozadí textu vykreslené demonstraèním pøíkladem
<strong>SDLTest41</strong>.</i></p>

<img src="http://i.iinfo.cz/images/310/img06.png" class="image-165100" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 6: Neprùhledné pozadí textu vykreslené demonstraèním pøíkladem
<strong>SDLTest42</strong>.</i></p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Demonstraèní pøíklad <strong>SDLTest41</strong>: vykreslení textu pøes ji¾ døíve vykreslenou bitmapu</h2>

<p>V&nbsp;dne¹ním druhém demonstraèním pøíkladu pojmenovaném
<strong>SDLTest41</strong> je ukázáno, ¾e se pøi zavolání metody
<strong>SDLTrueTypeFont.renderTextSolid()</strong> skuteènì vytvoøí bitmapa
obsahující prùhledné pixely &ndash; pod textem je toti¾ zobrazen rastrový
obrázek <strong>xscorch.bmp</strong>, který jsme ji¾ vyu¾ili v&nbsp;nìkolika
pøedchozích demonstraèních pøíkladech. Vlastní vykreslení obou bitmap je
realizováno ve dvojici metod <strong>drawOnScreen()</strong> a
<strong>drawBitmap</strong>():</p>

<pre>
<i>/**</i>
<i> * Vykresleni bitmapy na obrazovku.</i>
<i> * </i>
<i> * @param screen</i>
<i> *            framebuffer</i>
<i> * @param bitmap</i>
<i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
<i> */</i>
private static void <strong>drawBitmap</strong>(SDLSurface screen, SDLSurface bitmap) throws SDLException {
    <i>// vypocitat umisteni bitmapy na obrazovce.</i>
    final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
    <i>// provest operaci typu BitBLT</i>
    bitmap.blitSurface(screen, rect);
&nbsp;
}
&nbsp;
<i>/**</i>
<i> * Vykresleni podkladove bitmapy i bitmapy s textem na obrazovku (do okna aplikace).</i>
<i> * </i>
<i> * @param screen</i>
<i> *            framebuffer</i>
<i> * @param font</i>
<i> *            font pouzity pri vykreslovani</i>
<i> * @param bitmap</i>
<i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
<i> */</i>
private static void <strong>drawOnScreen</strong>(SDLSurface screen, SDLTrueTypeFont font, SDLSurface bitmap) throws SDLException {
    <i>// vykreslit text do samostatne bitmapy</i>
    SDLSurface textBitmap = font.renderTextSolid("www.root.cz", FONT_COLOR);
&nbsp;
    <i>// vykresleni podkladove bitmapy s obrazkem</i>
    drawBitmap(screen, bitmap);
&nbsp;
    <i>// vykresleni bitmapy s textem</i>
    drawBitmap(screen, textBitmap);
&nbsp;
    <i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
    screen.updateRect();
    screen.flip();
}
</pre>

<p>Následuje výpis zdrojového kódu tohoto demonstraèního pøíkladu:</p>

<pre>
import sdljava.SDLMain;
import sdljava.SDLException;
&nbsp;
import sdljava.event.SDLEvent;
import sdljava.event.SDLKeyboardEvent;
import sdljava.event.SDLKey;
import sdljava.event.SDLQuitEvent;
&nbsp;
import sdljava.video.SDLColor;
import sdljava.video.SDLRect;
import sdljava.video.SDLSurface;
import sdljava.video.SDLVideo;
&nbsp;
import sdljava.ttf.SDLTTF;
import sdljava.ttf.SDLTrueTypeFont;
&nbsp;
import sdljava.x.swig.SDLPressedState;
&nbsp;
&nbsp;
&nbsp;
<i>/**</i>
<i> * Ctyricaty prvni demonstracni priklad vyuzivajici knihovnu SDLjava.</i>
<i> *</i>
<i> * Ukazka vyuziti zakladnich moznosti tridy sdljava.ttf.SDLTTF.</i>
<i> * Pod textem je vykreslena podkladova bitmapa s obrazkem.</i>
<i> * Text je vykreslen metodou SDLTrueTypeFont.renderTextSolid()</i>
<i> *</i>
<i> * @author Pavel Tisnovsky</i>
<i> */</i>
public class <strong>SDLTest41</strong> {
&nbsp;
    <i>/**</i>
    <i> * Horizontalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_WIDTH</strong> = 640;
&nbsp;
    <i>/**</i>
    <i> * Vertikalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_HEIGHT</strong> = 480;
&nbsp;
    <i>/**</i>
    <i> * Bitova hloubka vybraneho grafickeho rezimu.</i>
    <i> * (0 znamena automaticky vyber, ovsem lze samozrejme pouzit</i>
    <i> * i hodnoty 8, 16, 24 ci 32, podle vlastnosti graficke karty)</i>
    <i> */</i>
    private static final int <strong>GFX_BPP</strong> = 0;
&nbsp;
    <i>/**</i>
    <i> * Jmeno souboru s fontem.</i>
    <i> */</i>
    private static final String <strong>FONT_NAME</strong> = "freesans.ttf";
    <i>//private static final String FONT_NAME = "mcgf.ttf";</i>
    <i>//private static final String FONT_NAME = "aescr5b.ttf";</i>
&nbsp;
    <i>/**</i>
    <i> * Velikost pisma udavana v bodech.</i>
    <i> */</i>
    private static final int <strong>FONT_SIZE</strong> = 72;
&nbsp;
    <i>/**</i>
    <i> * Barva vykresleneho textu.</i>
    <i> */</i>
    private static final SDLColor <strong>FONT_COLOR</strong> = new SDLColor(95, 192, 95);
&nbsp;
    <i>/**</i>
    <i> * Nazev bitmapy, ktera se ma nacist a nasledne zobrazit.</i>
    <i> */</i>
    private static final String <strong>INPUT_IMAGE_NAME</strong> = "xscorch.bmp";
&nbsp;
    <i>/**</i>
    <i> * Inicializace grafickeho rezimu ci otevreni okna pro vykreslovani.</i>
    <i> */</i>
    private static SDLSurface <strong>initVideo</strong>() throws SDLException {
        final long flags = SDLVideo.SDL_DOUBLEBUF;
        return SDLVideo.setVideoMode(GFX_WIDTH, GFX_HEIGHT, GFX_BPP, flags);
    }
&nbsp;
    <i>/**</i>
    <i> * Smycka pro zpracovani udalosti.</i>
    <i> */</i>
    private static void <strong>eventLoop</strong>() throws SDLException {
        while (true) {
            <i>// precist udalost z fronty</i>
            SDLEvent event = SDLEvent.waitEvent();
&nbsp;
            <i>// vyskok ze smycky pro zpracovani udalosti pri vyskytu</i>
            <i>// udalosti typu SDLQuitEvent</i>
            if (event instanceof SDLQuitEvent) {
                return;
            }
&nbsp;
            <i>// stisk ci pusteni klavesy</i>
            if (event instanceof SDLKeyboardEvent) {
                <i>// pretypovani</i>
                final SDLKeyboardEvent keyEvent = (SDLKeyboardEvent)event;
&nbsp;
                <i>// symbol/kod klavesy</i>
                final int symbol = keyEvent.getSym();
&nbsp;
                <i>// ESC ukonci program</i>
                if (symbol == SDLKey.SDLK_ESCAPE &amp;&amp; keyEvent.getState() == SDLPressedState.PRESSED) {
                    return;
                }
            }
        }
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni bitmapy na obrazovku.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawBitmap</strong>(SDLSurface screen, SDLSurface bitmap) throws SDLException {
        <i>// vypocitat umisteni bitmapy na obrazovce.</i>
        final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
        <i>// provest operaci typu BitBLT</i>
        bitmap.blitSurface(screen, rect);
&nbsp;
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni podkladove bitmapy i bitmapy s textem na obrazovku (do okna aplikace).</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param font</i>
    <i> *            font pouzity pri vykreslovani</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawOnScreen</strong>(SDLSurface screen, SDLTrueTypeFont font, SDLSurface bitmap) throws SDLException {
        <i>// vykreslit text do samostatne bitmapy</i>
        SDLSurface textBitmap = font.renderTextSolid("www.root.cz", FONT_COLOR);
&nbsp;
        <i>// vykresleni podkladove bitmapy s obrazkem</i>
        drawBitmap(screen, bitmap);
&nbsp;
        <i>// vykresleni bitmapy s textem</i>
        drawBitmap(screen, textBitmap);
&nbsp;
        <i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
        screen.updateRect();
        screen.flip();
    }
&nbsp;
    <i>/**</i>
    <i> * Vypocitat umisteni bitmapy na obrazovce.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa s pismem, ktera se ma na obrazovku vykreslit</i>
    <i> * @return obdelnik predstavujici pozici bitmapy na obrazovce</i>
    <i> */</i>
    private static SDLRect <strong>computePositionOnScreen</strong>(SDLSurface screen, SDLSurface bitmap) {
        <i>// ziskat rozmery obrazovky i bitmapy</i>
        final int screenWidth = screen.getWidth();
        final int screenHeight = screen.getHeight();
        final int bitmapWidth = bitmap.getWidth();
        final int bitmapHeight = bitmap.getHeight();
&nbsp;
        <i>// vypocitat umisteni bitmapy na obrazovce</i>
        final int x = (screenWidth - bitmapWidth)&gt;&gt;1;
        final int y = (screenHeight - bitmapHeight)&gt;&gt;1;
        return new SDLRect(x, y, bitmapWidth, bitmapHeight);
    }
&nbsp;
    <i>/**</i>
    <i> * Spusteni ctyricateho prvniho demonstracniho prikladu.</i>
    <i> */</i>
    public static void <strong>main</strong>(String[] args) {
        try {
            <i>// inicializace knihovny SDLJava</i>
            SDLMain.init(SDLMain.SDL_INIT_VIDEO);
&nbsp;
            <i>// inicializace subsystemu SDL_ttf</i>
            SDLTTF.init();
&nbsp;
            <i>// inicializace grafickeho rezimu ci otevreni okna pro vykreslovani</i>
            final SDLSurface screen = initVideo();
&nbsp;
            <i>// nacteni bitmapy z externiho souboru</i>
            final SDLSurface bitmap = SDLVideo.loadBMP(INPUT_IMAGE_NAME);
&nbsp;
            <i>// instance tridy SDLTrueTypeFont nese jiz zpracovane informace fontu</i>
            <i>// vybrane velikosti</i>
            final SDLTrueTypeFont font = SDLTTF.openFont(FONT_NAME, FONT_SIZE);
&nbsp;
            <i>// vykresleni sceny na obrazovku</i>
            drawOnScreen(screen, font, bitmap);
&nbsp;
            <i>// smycka pro zpracovani udalosti</i>
            eventLoop();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                <i>// uvolneni prostredku vyuzivanych subsytemem SDL_ttf.</i>
                SDLTTF.quit();
            }
            catch (SDLException e) {
                e.printStackTrace();
            }
&nbsp;
            <i>// musime obnovit puvodni graficky rezim</i>
            <i>// i v tom pripade, ze nastane nejaka vyjimka</i>
            SDLMain.quit();
        }
    }
&nbsp;
}
</pre>

<p>Skript pro pøeklad na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
javac -cp $SDL_JAVA_LIBS/sdljava.jar SDLTest41.java
</pre>

<p>Dávkový soubor pro pøeklad na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
javac -cp %SDL_JAVA_LIBS%\sdljava.jar SDLTest41.java
</pre>

<p>Skript pro spu¹tìní na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
java -cp .:$SDL_JAVA_LIBS/sdljava.jar -Djava.library.path=$SDL_JAVA_LIBS SDLTest41
</pre>

<p>Dávkový soubor pro spu¹tìní na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
java -cp .;%SDL_JAVA_LIBS%\sdljava.jar -Djava.library.path=%SDL_JAVA_LIBS% SDLTest41
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. Demonstraèní pøíklad <strong>SDLTest42</strong>: volba barvy pozadí textu</h2>

<p>V&nbsp;demonstraèním pøíkladu <strong>SDLTest42</strong>, jeho¾ zdrojový kód
je vypsán pod tímto odstavcem, se namísto metody
<strong>SDLTrueTypeFont.renderTextSolid()</strong> pou¾ívá pro výpis textu do
bitmapy metoda <strong>SDLTrueTypeFont.renderTextShaded()</strong>; ¾ádné dal¹í
zmìny oproti pøedchozímu pøíkladu <strong>SDLTest41</strong> zde nebyly
provedeny:</p>

<pre>
import sdljava.SDLMain;
import sdljava.SDLException;
&nbsp;
import sdljava.event.SDLEvent;
import sdljava.event.SDLKeyboardEvent;
import sdljava.event.SDLKey;
import sdljava.event.SDLQuitEvent;
&nbsp;
import sdljava.video.SDLColor;
import sdljava.video.SDLRect;
import sdljava.video.SDLSurface;
import sdljava.video.SDLVideo;
&nbsp;
import sdljava.ttf.SDLTTF;
import sdljava.ttf.SDLTrueTypeFont;
&nbsp;
import sdljava.x.swig.SDLPressedState;
&nbsp;
&nbsp;
&nbsp;
<i>/**</i>
<i> * Ctyricaty druhy demonstracni priklad vyuzivajici knihovnu SDLjava.</i>
<i> *</i>
<i> * Ukazka vyuziti zakladnich moznosti tridy sdljava.ttf.SDLTTF.</i>
<i> * Pod textem je vykreslena podkladova bitmapa s obrazkem.</i>
<i> * Text je vykreslen metodou SDLTrueTypeFont.renderTextShaded().</i>
<i> *</i>
<i> * @author Pavel Tisnovsky</i>
<i> */</i>
public class <strong>SDLTest42</strong> {
&nbsp;
    <i>/**</i>
    <i> * Horizontalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_WIDTH</strong> = 640;
&nbsp;
    <i>/**</i>
    <i> * Vertikalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_HEIGHT</strong> = 480;
&nbsp;
    <i>/**</i>
    <i> * Bitova hloubka vybraneho grafickeho rezimu.</i>
    <i> * (0 znamena automaticky vyber, ovsem lze samozrejme pouzit</i>
    <i> * i hodnoty 8, 16, 24 ci 32, podle vlastnosti graficke karty)</i>
    <i> */</i>
    private static final int <strong>GFX_BPP</strong> = 0;
&nbsp;
    <i>/**</i>
    <i> * Jmeno souboru s fontem.</i>
    <i> */</i>
    private static final String <strong>FONT_NAME</strong> = "freesans.ttf";
    <i>//private static final String FONT_NAME = "mcgf.ttf";</i>
    <i>//private static final String FONT_NAME = "aescr5b.ttf";</i>
&nbsp;
    <i>/**</i>
    <i> * Velikost pisma udavana v bodech.</i>
    <i> */</i>
    private static final int <strong>FONT_SIZE</strong> = 72;
&nbsp;
    <i>/**</i>
    <i> * Barva vykresleneho textu.</i>
    <i> */</i>
    private static final SDLColor <strong>FONT_COLOR</strong> = new SDLColor(95, 192, 95);
&nbsp;
    <i>/**</i>
    <i> * Barva pozadi vykresleneho textu.</i>
    <i> */</i>
    private static final SDLColor <strong>BACKGROUND_COLOR</strong> = new SDLColor(32, 32, 32);
&nbsp;
    <i>/**</i>
    <i> * Nazev bitmapy, ktera se ma nacist a nasledne zobrazit.</i>
    <i> */</i>
    private static final String <strong>INPUT_IMAGE_NAME</strong> = "xscorch.bmp";
&nbsp;
    <i>/**</i>
    <i> * Inicializace grafickeho rezimu ci otevreni okna pro vykreslovani.</i>
    <i> */</i>
    private static SDLSurface <strong>initVideo</strong>() throws SDLException {
        final long flags = SDLVideo.SDL_DOUBLEBUF;
        return SDLVideo.setVideoMode(GFX_WIDTH, GFX_HEIGHT, GFX_BPP, flags);
    }
&nbsp;
    <i>/**</i>
    <i> * Smycka pro zpracovani udalosti.</i>
    <i> */</i>
    private static void <strong>eventLoop</strong>() throws SDLException {
        while (true) {
            <i>// precist udalost z fronty</i>
            SDLEvent event = SDLEvent.waitEvent();
&nbsp;
            <i>// vyskok ze smycky pro zpracovani udalosti pri vyskytu</i>
            <i>// udalosti typu SDLQuitEvent</i>
            if (event instanceof SDLQuitEvent) {
                return;
            }
&nbsp;
            <i>// stisk ci pusteni klavesy</i>
            if (event instanceof SDLKeyboardEvent) {
                <i>// pretypovani</i>
                final SDLKeyboardEvent keyEvent = (SDLKeyboardEvent)event;
&nbsp;
                <i>// symbol/kod klavesy</i>
                final int symbol = keyEvent.getSym();
&nbsp;
                <i>// ESC ukonci program</i>
                if (symbol == SDLKey.SDLK_ESCAPE &amp;&amp; keyEvent.getState() == SDLPressedState.PRESSED) {
                    return;
                }
            }
        }
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni bitmapy na obrazovku.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawBitmap</strong>(SDLSurface screen, SDLSurface bitmap) throws SDLException {
        <i>// vypocitat umisteni bitmapy na obrazovce.</i>
        final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
        <i>// provest operaci typu BitBLT</i>
        bitmap.blitSurface(screen, rect);
&nbsp;
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni podkladove bitmapy i bitmapy s textem na obrazovku (do okna aplikace).</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param font</i>
    <i> *            font pouzity pri vykreslovani</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawOnScreen</strong>(SDLSurface screen, SDLTrueTypeFont font, SDLSurface bitmap) throws SDLException {
        <i>// vykreslit text do samostatne bitmapy</i>
        SDLSurface textBitmap = font.renderTextShaded("www.root.cz", FONT_COLOR, BACKGROUND_COLOR);
&nbsp;
        <i>// vykresleni podkladove bitmapy s obrazkem</i>
        drawBitmap(screen, bitmap);
&nbsp;
        <i>// vykresleni bitmapy s textem</i>
        drawBitmap(screen, textBitmap);
&nbsp;
        <i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
        screen.updateRect();
        screen.flip();
    }
&nbsp;
    <i>/**</i>
    <i> * Vypocitat umisteni bitmapy na obrazovce.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa s pismem, ktera se ma na obrazovku vykreslit</i>
    <i> * @return obdelnik predstavujici pozici bitmapy na obrazovce</i>
    <i> */</i>
    private static SDLRect <strong>computePositionOnScreen</strong>(SDLSurface screen, SDLSurface bitmap) {
        <i>// ziskat rozmery obrazovky i bitmapy</i>
        final int screenWidth = screen.getWidth();
        final int screenHeight = screen.getHeight();
        final int bitmapWidth = bitmap.getWidth();
        final int bitmapHeight = bitmap.getHeight();
&nbsp;
        <i>// vypocitat umisteni bitmapy na obrazovce</i>
        final int x = (screenWidth - bitmapWidth)&gt;&gt;1;
        final int y = (screenHeight - bitmapHeight)&gt;&gt;1;
        return new SDLRect(x, y, bitmapWidth, bitmapHeight);
    }
&nbsp;
    <i>/**</i>
    <i> * Spusteni ctyricateho druheho demonstracniho prikladu.</i>
    <i> */</i>
    public static void <strong>main</strong>(String[] args) {
        try {
            <i>// inicializace knihovny SDLJava</i>
            SDLMain.init(SDLMain.SDL_INIT_VIDEO);
&nbsp;
            <i>// inicializace subsystemu SDL_ttf</i>
            SDLTTF.init();
&nbsp;
            <i>// inicializace grafickeho rezimu ci otevreni okna pro vykreslovani</i>
            final SDLSurface screen = initVideo();
&nbsp;
            <i>// nacteni bitmapy z externiho souboru</i>
            final SDLSurface bitmap = SDLVideo.loadBMP(INPUT_IMAGE_NAME);
&nbsp;
            <i>// instance tridy SDLTrueTypeFont nese jiz zpracovane informace fontu</i>
            <i>// vybrane velikosti</i>
            final SDLTrueTypeFont font = SDLTTF.openFont(FONT_NAME, FONT_SIZE);
&nbsp;
            <i>// vykresleni sceny na obrazovku</i>
            drawOnScreen(screen, font, bitmap);
&nbsp;
            <i>// smycka pro zpracovani udalosti</i>
            eventLoop();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                <i>// uvolneni prostredku vyuzivanych subsytemem SDL_ttf.</i>
                SDLTTF.quit();
            }
            catch (SDLException e) {
                e.printStackTrace();
            }
&nbsp;
            <i>// musime obnovit puvodni graficky rezim</i>
            <i>// i v tom pripade, ze nastane nejaka vyjimka</i>
            SDLMain.quit();
        }
    }
&nbsp;
}
</pre>

<p>Skript pro pøeklad na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
javac -cp $SDL_JAVA_LIBS/sdljava.jar SDLTest42.java
</pre>

<p>Dávkový soubor pro pøeklad na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
javac -cp %SDL_JAVA_LIBS%\sdljava.jar SDLTest42.java
</pre>

<p>Skript pro spu¹tìní na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
java -cp .:$SDL_JAVA_LIBS/sdljava.jar -Djava.library.path=$SDL_JAVA_LIBS SDLTest42
</pre>

<p>Dávkový soubor pro spu¹tìní na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
java -cp .;%SDL_JAVA_LIBS%\sdljava.jar -Djava.library.path=%SDL_JAVA_LIBS% SDLTest42
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Fonty a antialiasing</h2>

<p>Pøi vykreslování textu s&nbsp;vyu¾itím vý¹e popsaných metod
<strong>SDLTrueTypeFont.renderTextSolid()</strong> i
<strong>SDLTrueTypeFont.renderTextShaded()</strong> se v¾dy vytvoøí bitmapa
s&nbsp;bitovou hloubkou 8bpp. Samotné vykreslování takového bitmapy
s&nbsp;pou¾itím nám ji¾ známé metody <strong>SDLSurface.blitSurface()</strong>
je velmi rychlé a i samotný zpùsob ulo¾ení bitmapy v&nbsp;pamìti je pomìrnì
efektivní, ov¹em na druhou stranu zde neexistuje podpora pro skuteèný
antialiasing textù, tak¾e ¹ikmé tahy znakù budou vykazovat typické
&bdquo;schody&ldquo;. V&nbsp;pøípadì, ¾e je antialiasing nutné pou¾ít (co¾
nemusí být pøípad hry, kde se vìt¹inou upøednostòuje rychlej¹í vykreslování
pøed kvalitou!), pou¾ije se metoda
<strong>SDLTrueTypeFont.renderTextBlended()</strong>, která vytvoøí bitmapu
s&nbsp;hloubkou 32bpp a tím pádem i s&nbsp;plnohodnotným osmibitovým alfa
kanálem. A právì alfa kanál je vyu¾it pøi antialiasingu, zejména pøi
rasterizaci okrajù písma (zde budou pou¾ity pixely s&nbsp;variabilní
prùhledností):</p>

<img src="http://i.iinfo.cz/images/584/img07.png" class="image-165101" width="655" height="628" alt="&#160;" />
<p><i>Obrázek 7: Text vykreslený bez pou¾ití antialiasingu.</i></p>

<img src="http://i.iinfo.cz/images/430/img08.png" class="image-165102" width="655" height="628" alt="&#160;" />
<p><i>Obrázek 8: Text vykreslený s&nbsp;vyu¾itím antialiasingu.</i></p>

<p>Nevýhody pou¾ití metody <strong>SDLTrueTypeFont.renderTextBlended()</strong>
jsou tøi: pomalej¹í vykreslování výsledné bitmapy metodou
<strong>SDLSurface.blitSurface()</strong>, nebo» je nutné provádìt výpoèet
prùhlednosti s&nbsp;ka¾dým pixelem (násobení!); vìt¹í pamì»ové nároky (projeví
se pøi meziukládání bitmap) a takté¾ problematická práce s&nbsp;tìmito
bitmapami ve chvíli, kdy není nastaven celoobrazovkový grafický re¾im
s&nbsp;hloubkou 24bpp èi 32bpp &ndash; a tyto re¾imy se v&nbsp;mnoha hrách
nepou¾ívají, právì z&nbsp;dùvodu vìt¹ích nárokù pøi práci s&nbsp;grafikou
(pøesun vìt¹ích bitmap pøi operaci BitBlt atd.). Je tedy nutné peèlivì zvá¾it,
kterou metodou se budou texty do (herních) scén vykreslovat a mnohdy pøevá¾í
sice ménì kvalitní, ale zato rychlej¹í rendering textù metodou
<strong>SDLTrueTypeFont.renderTextSolid()</strong>.</p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Demonstraèní pøíklad <strong>SDLTest43</strong>: vykreslení textu s&nbsp;vyu¾itím antialiasingu</h2>

<p>Vykreslení textu s&nbsp;vyu¾itím metody
<strong>SDLTrueTypeFont.renderTextBlended()</strong> a tím pádem
s&nbsp;vyu¾itím antialiasingu je pou¾ito v&nbsp;dne¹ním ètvrtém a souèasnì i
posledním demonstraèním pøíkladu pojmenovaném <strong>SDLTest43</strong>.
V&nbsp;tomto pøíkladu je pod vlastním textem (bitmapou s&nbsp;textem) opìt
zobrazena podkladová bitmapa, aby bylo patrné, jakým zpùsobem se prùhledné a
poloprùhledné pixely pøekreslí pøes ji¾ døíve vykreslený obrázek na pozadí:</p>

<pre>
import sdljava.SDLMain;
import sdljava.SDLException;
&nbsp;
import sdljava.event.SDLEvent;
import sdljava.event.SDLKeyboardEvent;
import sdljava.event.SDLKey;
import sdljava.event.SDLQuitEvent;
&nbsp;
import sdljava.video.SDLColor;
import sdljava.video.SDLRect;
import sdljava.video.SDLSurface;
import sdljava.video.SDLVideo;
&nbsp;
import sdljava.ttf.SDLTTF;
import sdljava.ttf.SDLTrueTypeFont;
&nbsp;
import sdljava.x.swig.SDLPressedState;
&nbsp;
&nbsp;
&nbsp;
<i>/**</i>
<i> * Ctyricaty treti demonstracni priklad vyuzivajici knihovnu SDLjava.</i>
<i> *</i>
<i> * Ukazka vyuziti zakladnich moznosti tridy sdljava.ttf.SDLTTF.</i>
<i> * Pod textem je vykreslena podkladova bitmapa s obrazkem.</i>
<i> * Text je vykreslen metodou SDLTrueTypeFont.renderTextBlended().</i>
<i> *</i>
<i> * @author Pavel Tisnovsky</i>
<i> */</i>
public class <strong>SDLTest43</strong> {
&nbsp;
    <i>/**</i>
    <i> * Horizontalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_WIDTH</strong> = 640;
&nbsp;
    <i>/**</i>
    <i> * Vertikalni rozliseni vybraneho grafickeho rezimu ci okna.</i>
    <i> */</i>
    private static final int <strong>GFX_HEIGHT</strong> = 480;
&nbsp;
    <i>/**</i>
    <i> * Bitova hloubka vybraneho grafickeho rezimu.</i>
    <i> * (0 znamena automaticky vyber, ovsem lze samozrejme pouzit</i>
    <i> * i hodnoty 8, 16, 24 ci 32, podle vlastnosti graficke karty)</i>
    <i> */</i>
    private static final int <strong>GFX_BPP</strong> = 0;
&nbsp;
    <i>/**</i>
    <i> * Jmeno souboru s fontem.</i>
    <i> */</i>
    <i>//private static final String FONT_NAME = "freesans.ttf";</i>
    <i>//private static final String FONT_NAME = "mcgf.ttf";</i>
    private static final String <strong>FONT_NAME</strong> = "aescr5b.ttf";
&nbsp;
    <i>/**</i>
    <i> * Velikost pisma udavana v bodech.</i>
    <i> */</i>
    private static final int <strong>FONT_SIZE</strong> = 72;
&nbsp;
    <i>/**</i>
    <i> * Barva vykresleneho textu.</i>
    <i> */</i>
    private static final SDLColor <strong>FONT_COLOR</strong> = new SDLColor(95, 192, 95);
&nbsp;
    <i>/**</i>
    <i> * Nazev bitmapy, ktera se ma nacist a nasledne zobrazit.</i>
    <i> */</i>
    private static final String <strong>INPUT_IMAGE_NAME</strong> = "xscorch.bmp";
&nbsp;
    <i>/**</i>
    <i> * Inicializace grafickeho rezimu ci otevreni okna pro vykreslovani.</i>
    <i> */</i>
    private static SDLSurface <strong>initVideo</strong>() throws SDLException {
        final long flags = SDLVideo.SDL_DOUBLEBUF;
        return SDLVideo.setVideoMode(GFX_WIDTH, GFX_HEIGHT, GFX_BPP, flags);
    }
&nbsp;
    <i>/**</i>
    <i> * Smycka pro zpracovani udalosti.</i>
    <i> */</i>
    private static void <strong>eventLoop</strong>() throws SDLException {
        while (true) {
            <i>// precist udalost z fronty</i>
            SDLEvent event = SDLEvent.waitEvent();
&nbsp;
            <i>// vyskok ze smycky pro zpracovani udalosti pri vyskytu</i>
            <i>// udalosti typu SDLQuitEvent</i>
            if (event instanceof SDLQuitEvent) {
                return;
            }
&nbsp;
            <i>// stisk ci pusteni klavesy</i>
            if (event instanceof SDLKeyboardEvent) {
                <i>// pretypovani</i>
                final SDLKeyboardEvent keyEvent = (SDLKeyboardEvent)event;
&nbsp;
                <i>// symbol/kod klavesy</i>
                final int symbol = keyEvent.getSym();
&nbsp;
                <i>// ESC ukonci program</i>
                if (symbol == SDLKey.SDLK_ESCAPE &amp;&amp; keyEvent.getState() == SDLPressedState.PRESSED) {
                    return;
                }
            }
        }
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni bitmapy na obrazovku.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawBitmap</strong>(SDLSurface screen, SDLSurface bitmap) throws SDLException {
        <i>// vypocitat umisteni bitmapy na obrazovce.</i>
        final SDLRect rect = computePositionOnScreen(screen, bitmap);
&nbsp;
        <i>// provest operaci typu BitBLT</i>
        bitmap.blitSurface(screen, rect);
&nbsp;
    }
&nbsp;
    <i>/**</i>
    <i> * Vykresleni podkladove bitmapy i bitmapy s textem na obrazovku (do okna aplikace).</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param font</i>
    <i> *            font pouzity pri vykreslovani</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa, ktery se ma na obrazovku vykreslit</i>
    <i> */</i>
    private static void <strong>drawOnScreen</strong>(SDLSurface screen, SDLTrueTypeFont font, SDLSurface bitmap) throws SDLException {
        <i>// vykreslit text do samostatne bitmapy</i>
        SDLSurface textBitmap = font.renderTextBlended("www.root.cz", FONT_COLOR);
&nbsp;
        <i>// vykresleni podkladove bitmapy s obrazkem</i>
        drawBitmap(screen, bitmap);
&nbsp;
        <i>// vykresleni bitmapy s textem</i>
        drawBitmap(screen, textBitmap);
&nbsp;
        <i>// nutno volat i v pripade, ze neni pouzit double buffering</i>
        screen.updateRect();
        screen.flip();
    }
&nbsp;
    <i>/**</i>
    <i> * Vypocitat umisteni bitmapy na obrazovce.</i>
    <i> * </i>
    <i> * @param screen</i>
    <i> *            framebuffer</i>
    <i> * @param bitmap</i>
    <i> *            bitmapa s pismem, ktera se ma na obrazovku vykreslit</i>
    <i> * @return obdelnik predstavujici pozici bitmapy na obrazovce</i>
    <i> */</i>
    private static SDLRect <strong>computePositionOnScreen</strong>(SDLSurface screen, SDLSurface bitmap) {
        <i>// ziskat rozmery obrazovky i bitmapy</i>
        final int screenWidth = screen.getWidth();
        final int screenHeight = screen.getHeight();
        final int bitmapWidth = bitmap.getWidth();
        final int bitmapHeight = bitmap.getHeight();
&nbsp;
        <i>// vypocitat umisteni bitmapy na obrazovce</i>
        final int x = (screenWidth - bitmapWidth)&gt;&gt;1;
        final int y = (screenHeight - bitmapHeight)&gt;&gt;1;
        return new SDLRect(x, y, bitmapWidth, bitmapHeight);
    }
&nbsp;
    <i>/**</i>
    <i> * Spusteni ctyricateho tretiho demonstracniho prikladu.</i>
    <i> */</i>
    public static void <strong>main</strong>(String[] args) {
        try {
            <i>// inicializace knihovny SDLJava</i>
            SDLMain.init(SDLMain.SDL_INIT_VIDEO);
&nbsp;
            <i>// inicializace subsystemu SDL_ttf</i>
            SDLTTF.init();
&nbsp;
            <i>// inicializace grafickeho rezimu ci otevreni okna pro vykreslovani</i>
            final SDLSurface screen = initVideo();
&nbsp;
            <i>// nacteni bitmapy z externiho souboru</i>
            final SDLSurface bitmap = SDLVideo.loadBMP(INPUT_IMAGE_NAME);
&nbsp;
            <i>// instance tridy SDLTrueTypeFont nese jiz zpracovane informace fontu</i>
            <i>// vybrane velikosti</i>
            final SDLTrueTypeFont font = SDLTTF.openFont(FONT_NAME, FONT_SIZE);
&nbsp;
            <i>// vykresleni sceny na obrazovku</i>
            drawOnScreen(screen, font, bitmap);
&nbsp;
            <i>// smycka pro zpracovani udalosti</i>
            eventLoop();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                <i>// uvolneni prostredku vyuzivanych subsytemem SDL_ttf.</i>
                SDLTTF.quit();
            }
            catch (SDLException e) {
                e.printStackTrace();
            }
&nbsp;
            <i>// musime obnovit puvodni graficky rezim</i>
            <i>// i v tom pripade, ze nastane nejaka vyjimka</i>
            SDLMain.quit();
        }
    }
&nbsp;
}
</pre>

<img src="http://i.iinfo.cz/images/688/img09.png" class="image-165103" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 9: Scéna vykreslená dne¹ním ètvrtým demonstraèním
pøíkladem.</i></p>

<p>Skript pro pøeklad na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
javac -cp $SDL_JAVA_LIBS/sdljava.jar SDLTest43.java
</pre>

<p>Dávkový soubor pro pøeklad na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
javac -cp %SDL_JAVA_LIBS%\sdljava.jar SDLTest43.java
</pre>

<p>Skript pro spu¹tìní na Linuxu:</p>

<pre>
#!/bin/sh
&nbsp;
SDL_JAVA_LIBS=./sdljava-0.9.1/lib
&nbsp;
java -cp .:$SDL_JAVA_LIBS/sdljava.jar -Djava.library.path=$SDL_JAVA_LIBS SDLTest43
</pre>

<p>Dávkový soubor pro spu¹tìní na Windows:</p>

<pre>
set SDL_JAVA_LIBS=.\sdljava-0.9.1\lib
&nbsp;
java -cp .;%SDL_JAVA_LIBS%\sdljava.jar -Djava.library.path=%SDL_JAVA_LIBS% SDLTest43
</pre>

<img src="http://i.iinfo.cz/images/119/img10.png" class="image-165104" width="640" height="480" alt="&#160;" />
<p><i>Obrázek 10: Scéna vykreslená dne¹ním ètvrtým demonstraèním
pøíkladem.</i></p>



<p><a name="k09"></a></p>
<h2 id="k09">9. Repositáø se zdrojovými kódy v¹ech ètyø dne¹ních demonstraèních pøíkladù</h2>

<p>V¹echny ètyøi dnes popsané demonstraèní pøíklady byly spoleènì
s&nbsp;podpùrnými skripty urèenými pro jejich pøeklad a následné spu¹tìní
ulo¾eny do Mercurial repositáøe dostupného na adrese <a
href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/</a>.
Podobnì jako tomu bylo i v&nbsp;pøedchozích devíti dílech tohoto seriálu, i ke
dne¹ním pøíkladùm jsou pøilo¾eny skripty vyu¾itelné pro jejich pøeklad a
spu¹tìní. Navíc byly pøidány i skripty vyu¾itelné ve Windows:</p>

<table>
<tr><th> #</th><th>Zdrojový soubor/skript</th><th>Umístìní souboru v&nbsp;repositáøi</th></tr>
<tr><td> 1</td><td>SDLTest40.java</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40.java">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40.java</a></td></tr>
<tr><td> 2</td><td>SDLTest40_compile.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile.sh</a></td></tr>
<tr><td> 3</td><td>SDLTest40_compile_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile_sys.sh</a></td></tr>
<tr><td> 4</td><td>SDLTest40_run.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run.sh</a></td></tr>
<tr><td> 5</td><td>SDLTest40_run_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run_sys.sh</a></td></tr>
<tr><td> 6</td><td>SDLTest40_compile.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_compile.bat</a></td></tr>
<tr><td> 7</td><td>SDLTest40_run.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest40/SDLTest40_run.bat</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 8</td><td>SDLTest41.java</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41.java">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41.java</a></td></tr>
<tr><td> 9</td><td>SDLTest41_compile.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile.sh</a></td></tr>
<tr><td>10</td><td>SDLTest41_compile_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile_sys.sh</a></td></tr>
<tr><td>11</td><td>SDLTest41_run.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run.sh</a></td></tr>
<tr><td>12</td><td>SDLTest41_run_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run_sys.sh</a></td></tr>
<tr><td>13</td><td>SDLTest41_compile.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_compile.bat</a></td></tr>
<tr><td>14</td><td>SDLTest41_run.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest41/SDLTest41_run.bat</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>15</td><td>SDLTest42.java</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42.java">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42.java</a></td></tr>
<tr><td>16</td><td>SDLTest42_compile.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile.sh</a></td></tr>
<tr><td>17</td><td>SDLTest42_compile_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile_sys.sh</a></td></tr>
<tr><td>18</td><td>SDLTest42_run.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run.sh</a></td></tr>
<tr><td>19</td><td>SDLTest42_run_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run_sys.sh</a></td></tr>
<tr><td>20</td><td>SDLTest42_compile.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_compile.bat</a></td></tr>
<tr><td>21</td><td>SDLTest42_run.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest42/SDLTest42_run.bat</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>22</td><td>SDLTest43.java</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43.java">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43.java</a></td></tr>
<tr><td>23</td><td>SDLTest43_compile.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile.sh</a></td></tr>
<tr><td>24</td><td>SDLTest43_compile_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile_sys.sh</a></td></tr>
<tr><td>25</td><td>SDLTest43_run.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run.sh</a></td></tr>
<tr><td>26</td><td>SDLTest43_run_sys.sh</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run_sys.sh">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run_sys.sh</a></td></tr>
<tr><td>27</td><td>SDLTest43_compile.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_compile.bat</a></td></tr>
<tr><td>28</td><td>SDLTest43_run.bat</td><td><a href="http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run.bat">http://icedtea.classpath.org/people/ptisnovs/jvm-tools/file/c9a741483dfc/sdljava/SDLTest43/SDLTest43_run.bat</a></td></tr>
</table>



<p><a name="k10"></a></p>
<h2 id="k10">10. Odkazy na Internetu</h2>

<ol>

<li>SDLJava: package sdljava.ttf<br />
<a href="http://sdljava.sourceforge.net/docs/api/sdljava/ttf/package-summary.html#package_description">http://sdljava.sourceforge.net/docs/api/sdljava/ttf/package-summary.html#package_description</a>
</li>

<li>SDLJava: class sdljava.ttf.SDLTTF<br />
<a href="http://sdljava.sourceforge.net/docs/api/sdljava/ttf/SDLTTF.html">http://sdljava.sourceforge.net/docs/api/sdljava/ttf/SDLTTF.html</a>
</li>

<li>SDLJava: class sdljava.ttf.SDLTrueTypeFont<br />
<a href="http://sdljava.sourceforge.net/docs/api/sdljava/ttf/SDLTrueTypeFont.html">http://sdljava.sourceforge.net/docs/api/sdljava/ttf/SDLTrueTypeFont.html</a>
</li>

<li>SDL_ttf Documentation<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/docs/">http://www.libsdl.org/projects/SDL_ttf/docs/</a>
</li>

<li>SDL_ttf 2.0 (není prozatím souèástí SDLJava)<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/">http://www.libsdl.org/projects/SDL_ttf/</a>
</li>

<li>SDL_ttf doc<br />
<a href="http://www.libsdl.org/projects/SDL_ttf/docs/SDL_ttf_frame.html">http://www.libsdl.org/projects/SDL_ttf/docs/SDL_ttf_frame.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_Surface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_PixelFormat<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlpixelformat.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlpixelformat.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_LockSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdllocksurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdllocksurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_UnlockSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlunlocksurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlunlocksurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_LoadBMP<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlloadbmp.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlloadbmp.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_SaveBMP<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsavebmp.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlsavebmp.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_BlitSurface<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlblitsurface.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlblitsurface.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_VideoInfo<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlvideoinfo.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlvideoinfo.html</a>
</li>

<li>SDL 1.2 Documentation: SDL_GetVideoInfo<br />
<a href="http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlgetvideoinfo.html">http://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlgetvideoinfo.html</a>
</li>

<li>glDrawArrays<br />
<a href="http://www.opengl.org/sdk/docs/man4/xhtml/glDrawArrays.xml">http://www.opengl.org/sdk/docs/man4/xhtml/glDrawArrays.xml</a>
</li>

<li>glDrawElements<br />
<a href="http://www.opengl.org/sdk/docs/man4/xhtml/glDrawElements.xml">http://www.opengl.org/sdk/docs/man4/xhtml/glDrawElements.xml</a>
</li>

<li>glDrawArraysInstanced<br />
<a href="http://www.opengl.org/sdk/docs/man4/xhtml/glDrawArraysInstanced.xml">http://www.opengl.org/sdk/docs/man4/xhtml/glDrawArraysInstanced.xml</a>
</li>

<li>glDrawElementsInstanced<br />
<a href="http://www.opengl.org/sdk/docs/man4/xhtml/glDrawElementsInstanced.xml">http://www.opengl.org/sdk/docs/man4/xhtml/glDrawElementsInstanced.xml</a>
</li>

<li>Root.cz: Seriál Grafická knihovna OpenGL<br />
<a href="http://www.root.cz/serialy/graficka-knihovna-opengl/">http://www.root.cz/serialy/graficka-knihovna-opengl/</a>
</li>

<li>Root.cz: Seriál Tvorba pøenositelných grafických aplikací vyu¾ívajících knihovnu GLUT<br />
<a href="http://www.root.cz/serialy/tvorba-prenositelnych-grafickych-aplikaci-vyuzivajicich-knihovnu-glut/">http://www.root.cz/serialy/tvorba-prenositelnych-grafickych-aplikaci-vyuzivajicich-knihovnu-glut/</a>
</li>

<li>Best Practices for Working with Vertex Data<br />
<a href="https://developer.apple.com/library/ios/documentation/3ddrawing/conceptual/opengles_programmingguide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html">https://developer.apple.com/library/ios/documentation/3ddrawing/conceptual/opengles_programmingguide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html</a>
</li>

<li>Class BufferStrategy<br />
<a href="http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferStrategy.html">http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferStrategy.html</a>
</li>

<li>Class Graphics<br />
<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Graphics.html">http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Graphics.html</a>
</li>

<li>Double Buffering and Page Flipping<br />
<a href="http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html">http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html</a>
</li>

<li>BufferStrategy and BufferCapabilities<br />
<a href="http://docs.oracle.com/javase/tutorial/extra/fullscreen/bufferstrategy.html">http://docs.oracle.com/javase/tutorial/extra/fullscreen/bufferstrategy.html</a>
</li>

<li>Java:Tutorials:Double Buffering<br />
<a href="http://content.gpwiki.org/index.php/Java:Tutorials:Double_Buffering">http://content.gpwiki.org/index.php/Java:Tutorials:Double_Buffering</a>
</li>

<li>Double buffer in standard Java AWT<br />
<a href="http://www.codeproject.com/Articles/2136/Double-buffer-in-standard-Java-AWT">http://www.codeproject.com/Articles/2136/Double-buffer-in-standard-Java-AWT</a>
</li>

<li>Java 2D: Hardware Accelerating - Part 1 - Volatile Images<br />
<a href="http://www.javalobby.org/forums/thread.jspa?threadID=16840&tstart=0">http://www.javalobby.org/forums/thread.jspa?threadID=16840&tstart=0</a>
</li>

<li>Java 2D: Hardware Accelerating - Part 2 - Buffer Strategies<br />
<a href="http://www.javalobby.org/java/forums/t16867.html">http://www.javalobby.org/java/forums/t16867.html</a>
</li>

<li>How does paintComponent work?<br />
<a href="http://stackoverflow.com/questions/15544549/how-does-paintcomponent-work">http://stackoverflow.com/questions/15544549/how-does-paintcomponent-work</a>
</li>

<li>A Swing Architecture Overview<br />
<a href="http://www.oracle.com/technetwork/java/architecture-142923.html">http://www.oracle.com/technetwork/java/architecture-142923.html</a>
</li>

<li>Class javax.swing.JComponent<br />
<a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html">http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html</a>
</li>

<li>Class java.awt.Component<br />
<a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html">http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html</a>
</li>

<li>Class java.awt.Component.BltBufferStrategy<br />
<a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Component.BltBufferStrategy.html">http://docs.oracle.com/javase/6/docs/api/java/awt/Component.BltBufferStrategy.html</a>
</li>

<li>Class java.awt.Component.FlipBufferStrategy<br />
<a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Component.FlipBufferStrategy.html">http://docs.oracle.com/javase/6/docs/api/java/awt/Component.FlipBufferStrategy.html</a>
</li>

<li>Metoda java.awt.Component.isDoubleBuffered()<br />
<a href="http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isDoubleBuffered()">http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isDoubleBuffered()</a>
</li>

<li>Metoda javax.swing.JComponent.isDoubleBuffered()<br />
<a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#isDoubleBuffered()">http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#isDoubleBuffered()</a>
</li>

<li>Metoda javax.swing.JComponent.setDoubleBuffered()<br />
<a href="http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setDoubleBuffered(boolean)">http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setDoubleBuffered(boolean)</a>
</li>

<li>Javadoc - tøída GraphicsDevice<br />
<a href="http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html">http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html</a>
</li>

<li>Javadoc - tøída GraphicsEnvironment<br />
<a href="http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsEnvironment.html">http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsEnvironment.html</a>
</li>

<li>Javadoc - tøída GraphicsConfiguration<br />
<a href="http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsConfiguration.html">http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsConfiguration.html</a>
</li>

<li>Javadoc - tøída DisplayMode<br />
<a href="http://docs.oracle.com/javase/7/docs/api/java/awt/DisplayMode.html">http://docs.oracle.com/javase/7/docs/api/java/awt/DisplayMode.html</a>
</li>

<li>Lesson: Full-Screen Exclusive Mode API<br />
<a href="http://docs.oracle.com/javase/tutorial/extra/fullscreen/">http://docs.oracle.com/javase/tutorial/extra/fullscreen/</a>
</li>

<li>Full-Screen Exclusive Mode<br />
<a href="http://docs.oracle.com/javase/tutorial/extra/fullscreen/exclusivemode.html">http://docs.oracle.com/javase/tutorial/extra/fullscreen/exclusivemode.html</a>
</li>

<li>Display Mode<br />
<a href="http://docs.oracle.com/javase/tutorial/extra/fullscreen/displaymode.html">http://docs.oracle.com/javase/tutorial/extra/fullscreen/displaymode.html</a>
</li>

<li>Using the Full-Screen Exclusive Mode API in Java<br />
<a href="http://www.developer.com/java/other/article.php/3609776/Using-the-Full-Screen-Exclusive-Mode-API-in-Java.htm">http://www.developer.com/java/other/article.php/3609776/Using-the-Full-Screen-Exclusive-Mode-API-in-Java.htm</a>
</li>

<li>Java quick guide: JVM Instruction Set (tabulka v¹ech instrukcí JVM)<br />
<a href="http://www.mobilefish.com/tutorials/java/java_quickguide_jvm_instruction_set.html">http://www.mobilefish.com/tutorials/java/java_quickguide_jvm_instruction_set.html</a>
</li>

<li>The JVM Instruction Set<br />
<a href="http://mpdeboer.home.xs4all.nl/scriptie/node14.html">http://mpdeboer.home.xs4all.nl/scriptie/node14.html</a>
</li>

<li>MultiMedia eXtensions<br />
<a href="http://softpixel.com/~cwright/programming/simd/mmx.php">http://softpixel.com/~cwright/programming/simd/mmx.php</a>i
</li>

<li>SSE (Streaming SIMD Extentions)<br />
<a href="http://www.songho.ca/misc/sse/sse.html">http://www.songho.ca/misc/sse/sse.html</a>
</li>

<li>Timothy A. Chagnon: SSE and SSE2<br />
<a href="http://www.cs.drexel.edu/~tc365/mpi-wht/sse.pdf">http://www.cs.drexel.edu/~tc365/mpi-wht/sse.pdf</a>
</li>

<li>Intel corporation: Extending the Worldr's Most Popular Processor Architecture<br />
<a href="http://download.intel.com/technology/architecture/new-instructions-paper.pdf">http://download.intel.com/technology/architecture/new-instructions-paper.pdf</a>
</li>

<li>SIMD architectures:<br />
<a href="http://arstechnica.com/old/content/2000/03/simd.ars/">http://arstechnica.com/old/content/2000/03/simd.ars/</a>
</li>

<li>GC safe-point (or safepoint) and safe-region<br />
<a href="http://xiao-feng.blogspot.cz/2008/01/gc-safe-point-and-safe-region.html">http://xiao-feng.blogspot.cz/2008/01/gc-safe-point-and-safe-region.html</a>
</li>

<li>Safepoints in HotSpot JVM<br />
<a href="http://blog.ragozin.info/2012/10/safepoints-in-hotspot-jvm.html">http://blog.ragozin.info/2012/10/safepoints-in-hotspot-jvm.html</a>
</li>

<li>Java theory and practice: Synchronization optimizations in Mustang<br />
<a href="http://www.ibm.com/developerworks/java/library/j-jtp10185/">http://www.ibm.com/developerworks/java/library/j-jtp10185/</a>
</li>

<li>How to build hsdis<br />
<a href="http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/tip/src/share/tools/hsdis/README">http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/tip/src/share/tools/hsdis/README</a>
</li>

<li>Java SE 6 Performance White Paper<br />
<a href="http://www.oracle.com/technetwork/java/6-performance-137236.html">http://www.oracle.com/technetwork/java/6-performance-137236.html</a>
</li>

<li>Lukas Stadler's Blog<br />
<a href="http://classparser.blogspot.cz/2010/03/hsdis-i386dll.html">http://classparser.blogspot.cz/2010/03/hsdis-i386dll.html</a>
</li>

<li>How to build hsdis-amd64.dll and hsdis-i386.dll on Windows<br />
<a href="http://dropzone.nfshost.com/hsdis.htm">http://dropzone.nfshost.com/hsdis.htm</a>
</li>

<li>PrintAssembly<br />
<a href="https://wikis.oracle.com/display/HotSpotInternals/PrintAssembly">https://wikis.oracle.com/display/HotSpotInternals/PrintAssembly</a>
</li>

<li>The Java Virtual Machine Specification: 3.14. Synchronization<br />
<a href="http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.14">http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.14</a>
</li>

<li>The Java Virtual Machine Specification: 8.3.1.4. volatile Fields<br />
<a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.4">http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.4</a>
</li>

<li>The Java Virtual Machine Specification: 17.4. Memory Model<br />
<a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4">http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4</a>
</li>

<li>The Java Virtual Machine Specification: 17.7. Non-atomic Treatment of double and long<br />
<a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7">http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7</a>
</li>

<li>Open Source ByteCode Libraries in Java<br />
<a href="http://java-source.net/open-source/bytecode-libraries">http://java-source.net/open-source/bytecode-libraries</a>
</li>

<li>ASM Home page<br />
<a href="http://asm.ow2.org/">http://asm.ow2.org/</a>
</li>

<li>Seznam nástrojù vyu¾ívajících projekt ASM<br />
<a href="http://asm.ow2.org/users.html">http://asm.ow2.org/users.html</a>
</li>

<li>ObjectWeb ASM (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/ObjectWeb_ASM">http://en.wikipedia.org/wiki/ObjectWeb_ASM</a>
</li>

<li>Java Bytecode BCEL vs ASM<br />
<a href="http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/">http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/</a>
</li>

<li>BCEL Home page<br />
<a href="http://commons.apache.org/bcel/">http://commons.apache.org/bcel/</a>
</li>

<li>Byte Code Engineering Library (pøed verzí 5.0)<br />
<a href="http://bcel.sourceforge.net/">http://bcel.sourceforge.net/</a>
</li>

<li>Byte Code Engineering Library (verze &gt;= 5.0)<br />
<a href="http://commons.apache.org/proper/commons-bcel/">http://commons.apache.org/proper/commons-bcel/</a>
</li>

<li>BCEL Manual<br />
<a href="http://commons.apache.org/bcel/manual.html">http://commons.apache.org/bcel/manual.html</a>
</li>

<li>Byte Code Engineering Library (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/BCEL">http://en.wikipedia.org/wiki/BCEL</a>
</li>

<li>BCEL Tutorial<br />
<a href="http://www.smfsupport.com/support/java/bcel-tutorial!/">http://www.smfsupport.com/support/java/bcel-tutorial!/</a>
</li>

<li>Bytecode Engineering<br />
<a href="http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html">http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html</a>
</li>

<li>Bytecode Outline plugin for Eclipse (screenshoty + info)<br />
<a href="http://asm.ow2.org/eclipse/index.html">http://asm.ow2.org/eclipse/index.html</a>
</li>

<li>Javassist<br />
<a href="http://www.jboss.org/javassist/">http://www.jboss.org/javassist/</a>
</li>

<li>Byteman<br />
<a href="http://www.jboss.org/byteman">http://www.jboss.org/byteman</a>
</li>

<li>Java programming dynamics, Part 7: Bytecode engineering with BCEL<br />
<a href="http://www.ibm.com/developerworks/java/library/j-dyn0414/">http://www.ibm.com/developerworks/java/library/j-dyn0414/</a>
</li>

<li>The Java<sup>TM</sup> Virtual Machine Specification, Second Edition<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html</a>
</li>

<li>The class File Format<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html</a>
</li>

<li>javap - The Java Class File Disassembler<br />
<a href="http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html">http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html</a>
</li>

<li>javap-java-1.6.0-openjdk(1) - Linux man page<br />
<a href="http://linux.die.net/man/1/javap-java-1.6.0-openjdk">http://linux.die.net/man/1/javap-java-1.6.0-openjdk</a>
</li>

<li>Using javap<br />
<a href="http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html">http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html</a>
</li>

<li>Examine class files with the javap command<br />
<a href="http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354">http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354</a>
</li>

<li>aspectj (Eclipse)<br />
<a href="http://www.eclipse.org/aspectj/">http://www.eclipse.org/aspectj/</a>
</li>

<li>Aspect-oriented programming (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Aspect_oriented_programming">http://en.wikipedia.org/wiki/Aspect_oriented_programming</a>
</li>

<li>AspectJ (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/AspectJ">http://en.wikipedia.org/wiki/AspectJ</a>
</li>

<li>EMMA: a free Java code coverage tool<br />
<a href="http://emma.sourceforge.net/">http://emma.sourceforge.net/</a>
</li>

<li>Cobertura<br />
<a href="http://cobertura.sourceforge.net/">http://cobertura.sourceforge.net/</a>
</li>

<li>jclasslib bytecode viewer<br />
<a href="http://www.ej-technologies.com/products/jclasslib/overview.html">http://www.ej-technologies.com/products/jclasslib/overview.html</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2014</small></p>
</body>
</html>

