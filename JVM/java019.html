<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Pohled pod kapotu JVM (2.èást - podrobnìj¹í analýza obsahu constant poolu)</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>Pohled pod kapotu JVM (2.èást - podrobnìj¹í analýza obsahu constant poolu)</h1>

<h3>Pavel Ti¹novský</h3>

<p></p>

<h1>Úvodník</h1>

<p>V&nbsp;devatenácté èásti seriálu o programovacím jazyce Java i o vlastnostech JVM budeme pokraèovat v&nbsp;popisu bajtkódu, tj.&nbsp;interní struktury souborù s&nbsp;koncovkou .class. Dnes se zamìøíme na strukturu polo¾ek umístìných v&nbsp;constant poolu. Takté¾ bude ukázán pomìrnì jednoduchý nástroj, který doká¾e obsah constant poolu vypsat.</p>



<h2>Obsah</h2>

<p><a href="#k01">1. Malé zopakování z&nbsp;minula &ndash; struktura polo¾ek ulo¾ených v&nbsp;constant poolu</a></p>
<p><a href="#k02">2. Nástroj pro zobrazení obsahu v¹ech polo¾ek ulo¾ených v&nbsp;constant poolu</a></p>
<p><a href="#k03">3. Formát constant poolu pro zcela prázdnou tøídu odvozenou od tøídy Object</a></p>
<p><a href="#k04">4. 32bitové èíselné konstanty pou¾ité v&nbsp;programovém kódu</a></p>
<p><a href="#k05">5. 8bitové, 16bitové a 64bitové èíselné konstanty</a></p>
<p><a href="#k06">6. Zpùsob urèení datových typù atributù a návratových hodnot metod</a></p>
<p><a href="#k07">7. Demonstraèní pøíklad &ndash; výpis návratových typù metod</a></p>
<p><a href="#k08">8. Demonstraèní pøíklad &ndash; výpis typù argumentù metod</a></p>
<p><a href="#k09">9. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. Malé zopakování z&nbsp;minula &ndash; struktura polo¾ek ulo¾ených v&nbsp;constant poolu</h2>

<p>V&nbsp;dne¹ní èásti <a
href="http://www.root.cz/serialy/programovaci-jazyk-java-a-jvm/">seriálu o
programovacím jazyce Java i o vlastnostech virtuálního stroje</a> tohoto jazyka
se opìt budeme zabývat popisem interní struktury souborù
<strong>.class</strong>, tj.&nbsp;souborù obsahujících bajtkód jedné tøídy,
rozhraní nebo výètu (<i>enumeration</i>). V&nbsp;<a
href="http://www.root.cz/clanky/pohled-pod-kapotu-jvm-1-cast-prohlizeni-a-modifikace-bajtkodu/">pøedchozí
èásti seriálu</a> jsme si øekli, jak tyto soubory vlastnì vznikají a jaká je
jejich základní struktura. Takté¾ jsme se zmínili o takzvaném <i>constant
poolu</i>, jen¾ je nedílnou souèástí bajtkódu. Právì této èásti bajtkódu se
dnes budeme vìnovat podrobnìji. Pøipomeòme si, ¾e v&nbsp;<i>constant poolu</i>
se mohou nacházet polo¾ky nìkolika typù. Typ ka¾dé polo¾ky je jednoznaènì urèen
takzvaným <i>tagem</i> (jednobajtovou konstantou), za ním¾ následuje buï
celoèíselná èi reálná konstanta, øetìzec se zadanou délkou, popø.&nbsp;jeden èi
dva odkazy na dal¹í polo¾ku/polo¾ky umístìné v&nbsp;<i>constant poolu</i>.</p>

<p>Nejjednodu¹¹í strukturu mají polo¾ky, které pøímo obsahují celoèíselné èi
reálné konstanty. Jejich pou¾ití si podrobnìji popí¹eme <a href="#k04">ve
ètvrté</a> a takté¾ <a href="#k05">v&nbsp;páté kapitole</a>. Jedná se o polo¾ky
s&nbsp;tagy 3, 4, 5 a 6:</p>

<table>
<tr><th>Tag</th><th>Název tagu</th><th>Parametr 1</th><th>Parametr 2</th></tr>
<tr><td>3</td><td>Integer</td><td>ètyøbajtová celoèíselná konstanta</td><td>&times;</td></tr>
<tr><td>4</td><td>Float  </td><td>ètyøbajtová FP konstanta</td><td>&times;</td></tr>
<tr><td>5</td><td>Long   </td><td>osmibajtová celoèíselná konstanta</td><td>&times;</td></tr>
<tr><td>6</td><td>Double </td><td>osmibajtová FP konstanta</td><td>&times;</td></tr>
</table>

<p>V&nbsp;ka¾dém <i>constant poolu</i> se takté¾ nachází nìkolik øetìzcù
(majících rùzný význam), popø.&nbsp;i øetìzcových konstant (literálù):</p>

<table>
<tr><th>Tag</th><th>Název tagu</th><th>Parametr 1</th><th>Parametr 2</th></tr>
<tr><td>1</td><td>Utf8  </td><td>délka øetìzce v&nbsp;bajtech</td><td>sekvence bajtù (poèet znakù je obecnì men¹í ne¾ poèet bajtù)</td></tr>
<tr><td>8</td><td>String</td><td>2 bajty: odkaz na vlastní øetìzec (záznam typu <strong>Utf8</strong>)</td><td>&times;</td></tr>
</table>

<p>Dal¹ích pìt typù záznamù ji¾ neobsahuje ¾ádné konstanty (ani èíselné, ani
øetìzcové), ale odkazy na dal¹í polo¾ky umístìné v&nbsp;<i>constant poolu</i>.
O zpùsobu práce s&nbsp;odkazy se podrobnìji zmíníme <a href="#k03">ve tøetí
kapitole</a>. Jedná se o polo¾ky s&nbsp;tagy 7, 9, 10, 11 a 12:</p>

<table>
<tr><th>Tag</th><th>Název tagu</th><th>Parametr 1</th><th>Parametr 2</th></tr>
<tr><td> 7</td><td>Class             </td><td>2 bajty: odkaz na jméno tøídy (záznam typu <strong>Utf8</strong>)</td><td>&times;</td></tr>
<tr><td> 9</td><td>Fieldref          </td><td>2 bajty: odkaz na jméno tøídy (záznam typu <strong>Utf8</strong>)</td><td>2 bajty: odkaz na záznam typu <strong>NameAndType</strong></td></tr>
<tr><td>10</td><td>Methodref         </td><td>2 bajty: odkaz na jméno tøídy (záznam typu <strong>Utf8</strong>)</td><td>2 bajty: odkaz na záznam typu <strong>NameAndType</strong></td></tr>
<tr><td>11</td><td>InterfaceMethodref</td><td>2 bajty: odkaz na jméno tøídy (záznam typu <strong>Utf8</strong>)</td><td>2 bajty: odkaz na záznam typu <strong>NameAndType</strong></td></tr>
<tr><td>12</td><td>NameAndType       </td><td>2 bajty: odkaz na záznam typu <strong>Utf8</strong></td><td>2 bajty: odkaz na záznam typu <strong>Utf8</strong></td></tr>
</table>



<p><a name="k02"></a></p>
<h2 id="k02">2. Nástroj pro zobrazení obsahu v¹ech polo¾ek ulo¾ených v&nbsp;constant poolu</h2>

<p>Javovský bajtkód i <i>constant pool</i>, jen¾ je jeho nedílnou souèástí, je
samozøejmì mo¾né zkoumat mnoha rùznými zpùsoby. Pro vysokoúrovòovou manipulaci
s&nbsp;bajtkódem je pravdìpodobnì nejlep¹í pou¾ít ji¾ minule zmínìné knihovny
<i>ASM</i> a <i>BCEL</i>, k&nbsp;nim¾ se je¹tì v&nbsp;tomto seriálu vrátíme.
Pro pouhý výpis obsahu <i>constant poolu</i> nicménì postaèuje standardní
utilita nazvaná <strong>javap</strong>, které je spu¹tìna s&nbsp;pøepínaèem
<strong>-verbose</strong>. Av¹ak pro pochopení zpùsobu ulo¾ení informací
v&nbsp;<i>constant poolu</i> je nejlep¹í si vytvoøit vlastní program, který
vhodným zpùsobem vypí¹e jeho obsah. Zdrojový kód tohoto programu (mimochodem,
jedná se o výsledek jednoho leto¹ního zimního veèera :-) mù¾ete získat na
adrese <a
href="http://i.iinfo.cz/files/root/145/decompiler-source.c">http://i.iinfo.cz/files/root/145/decompiler-source.c</a>,
nicménì pro prohlí¾ení jeho zdrojového kódu pøímo v&nbsp;prohlí¾eèi je lep¹í <a
href="http://i.iinfo.cz/files/root/399/decompiler.html">pou¾ít tento
odkaz</a>, pod ním¾ se skrývá zdrojový kód s&nbsp;obarvenou syntaxí.</p>

<p>Tento jednoduchý nástroj, který s&nbsp;velkou pravdìpodobností obsahuje
rùzné zákeøné chyby :-), je mo¾né pøelo¾it pomocí pøekladaèe odpovídajícího
normì <i>ANSI/ISO C</i>, bude v¹ak pracovat korektnì pouze na procesorech
s&nbsp;poøadím bajtù little endian (na procesorech big endian se mohou ¹patnì
zpracovávat naètené èíselné konstanty, ostatní èásti programu jsou v¹ak
nezávislé na architektuøe). Po pøekladu vznikne spustitelný soubor, který
akceptuje jeden parametr &ndash; název souboru <strong>.class</strong>. Název
se uvádí i s&nbsp;pøíponou, na rozdíl od utility <strong>javap</strong> (podle
mého názoru je uvedení pøípony souboru vìt¹inou praktiètìj¹í). Výsledek,
tj.&nbsp;obsah <i>constant poolu</i> (plus nìkolik dal¹ích základních
informací) je tisknut na standardní výstup. Princip práce tohoto programu je
velmi jednoduchý &ndash; nejdøíve je z&nbsp;bajtkódu získán obsah v¹ech polo¾ek
ulo¾ených v&nbsp;<i>constant poolu</i>, který je ulo¾en do dynamicky
alokovaného pole. Posléze je obsah tohoto pole vypsán, pøièem¾ dochází
k&nbsp;dereferencování nìkterých informací (napøíklad odkaz na polo¾ky typu
string je pøímo nahrazen referencovaným øetìzcem).</p>

<p>Dùvod, proè jsou polo¾ky nejdøíve z&nbsp;<i>constant poolu</i> naèteny do
dynamicky alokovaného pole, spoèívá v&nbsp;tom, ¾e reference mohou odkazovat na
libovolné dal¹í polo¾ky. Typicky se toti¾ pou¾ívají i dopøedné reference, co¾
znamená, ¾e není mo¾né, aby se obsah <i>constant poolu</i> ihned pøi naèítání
pøevádìl na standardní výstup. O naèítání polo¾ek z&nbsp;bajtkódu se stará
funkce <strong>process_constant_pool()</strong> spoleènì s&nbsp;funkcí
<strong>read_constant_pool_entry()</strong>. Výsledkem je dynamické pole
s&nbsp;prvky typu <strong>PoolEntry</strong> (jde o strukturu obsahující jak
tagy jednotlivých prvkù, tak i vlastní data &ndash; èíselné konstanty, øetìzce
èi odkazy/reference). V¹echny prvky ulo¾ené v&nbsp;tomto poli jsou posléze
postupnì vyti¹tìny funkcí <strong>print_constant_pool_entry()</strong>,
z&nbsp;ní¾ se volají dal¹í pomocné funkce <strong>print_(typ_prvku)</strong>.
Podrobnìj¹í informace o tom, proè je program vytvoøen právì takovým zpùsobem,
budou vysvìtleny v&nbsp;dal¹ích kapitolách (asi nejzáhadnìj¹í je návratová
hodnota funkce <strong>read_constant_pool_entry()</strong> a zpùsob jejího
pou¾ití pøi naplòování pole polo¾kami získanými z&nbsp;<i>constant
poolu</i>).</p>



<p><a name="k03"></a></p>
<h2 id="k03">3. Formát constant poolu pro zcela prázdnou tøídu odvozenou od tøídy Object</h2>

<p>Pojïme se nyní podívat na to, jak vypadá obsah <i>constant poolu</i>
v&nbsp;reálných <strong>.class</strong> souborech, tj.&nbsp;v&nbsp;souborech
vzniklých zkompilováním jediné tøídy (èi rozhraní, popø.&nbsp;výètu). Zaènìme
prakticky nejjednodu¹¹í tøídou &ndash; prázdnou tøídou odvozenou implicitnì od
tøídy <i>Object</i> (jak jistì víte, ka¾dá tøída, kterou programátor deklaruje,
musí mít pøedka a pokud není pøedek explicitnì uveden za klíèovým slovem
<strong>extends</strong>, pou¾ije se jako implicitní pøedek právì tøída
<i>Object</i>). Na zdrojovém textu s&nbsp;definicí této tøídy není nic
záhadného ani slo¾itého:</p>

<pre>
public class EmptyClass {
}
</pre>

<p>Nyní ji¾ mù¾eme snadno zjistit, jaké informace nám zobrazí vý¹e popsaný <a
href="http://i.iinfo.cz/files/root/399/decompiler.html">nástroj</a>.
Poznamenejme, ¾e pøeklad tøídy <strong>EmptyClass</strong> byl proveden
s&nbsp;pøepínaèem <strong>-g:none</strong>, aby se odstranily pro nás
nepotøebné dodatkové informace (pou¾ití tohoto pøepínaèe není nutné, ov¹em nám
zjednodu¹í analýzu obsahu <i>constant poolu</i>):</p>

<pre>
Magicka konstanta: cafebabe
Cislo verze:       50
Cislo podverze:    0

Velikost const. poolu: 9 prvku
  1   10  MethodRef         3   7    java/lang/Object.&lt;init&gt;()V
  2    7  Class             8        EmptyClass
  3    7  Class             9        java/lang/Object
  4    1  String                     "&lt;init&gt;"
  5    1  String                     "()V"
  6    1  String                     "Code"
  7   12  Name and type     4   5    &lt;init&gt;  ()V
  8    1  String                     "EmptyClass"
  9    1  String                     "java/lang/Object"
</pre>

<p>Zajímavé jistì je, ¾e i pro tak jednoduchou a zdánlivì primitivní tøídu
obsahuje <i>constant pool</i> celých devìt polo¾ek. Díky tomu, ¾e se
v&nbsp;pátém a ¹estém sloupci zobrazují reference na dal¹í polo¾ky poolu, lze
snadno analyzovat druhou a tøetí polo¾ku, která obsahuje jména tøíd (pøesnìji
øeèeno odkazy na øetìzce se jmény tøíd) &ndash; konkrétnì se jedná o plné názvy
(názvy i s&nbsp;pøíslu¹ným balíkem) na¹í prázdné tøídy a jejího pøedka
(<i>Object</i>):</p>

<pre>
  1   10  MethodRef         3   7          java/lang/Object.&lt;init&gt;()V
  2    7  Class             8---------.    EmptyClass
  3    7  Class             9------.  |    java/lang/Object
  4    1  String                   |  |    "&lt;init&gt;"
  5    1  String                   |  |    "()V"
  6    1  String                   |  |    "Code"
  7   12  Name and type     4   5  |  |    &lt;init&gt;  ()V
  8    1  String                   |  `--&gt; "EmptyClass"
  9    1  String                   `-----&gt; "java/lang/Object"
</pre>

<p>Dále je zajímavá sedmá polo¾ka, která obsahuje dva odkazy &ndash; odkaz na
jméno (metody, atributu, rozhraní) a odkaz na typ. Oba odkazy musí smìøovat na
prvky typu øetìzec:</p>

<pre>
  1   10  MethodRef         3   7          java/lang/Object.&lt;init&gt;()V
  2    7  Class             8              EmptyClass
  3    7  Class             9              java/lang/Object
  4    1  String              .----------&gt; "&lt;init&gt;"
  5    1  String              |    .-----&gt; "()V"
  6    1  String              |    |       "Code"
  7   12  Name and type     4-' 5--'       &lt;init&gt;  ()V
  8    1  String                           "EmptyClass"
  9    1  String                           "java/lang/Object"
</pre>

<p>Nejslo¾itìj¹í je hned první polo¾ka. Ta obsahuje informaci o metodì. Tato
informace je rozdìlena na dvì reference. První reference ukazuje na jméno tøídy
(øetìzec se jménem tøídy) a druhá reference ukazuje na prvek typu <i>Name and
type</i>, který takté¾ obsahuje dvì reference &ndash; viz té¾ pøedchozí
odstavec:</p>

<pre>
                                     .----------------------------------.
                                     |                                  |
  1   10  MethodRef         3-. 7----'     java/lang/Object.&lt;init&gt;()V   |
  2    7  Class             8 |            EmptyClass                   |
  3    7  Class             9 `----------&gt; java/lang/Object             |
  4    1  String              .----------&gt; "&lt;init&gt;"                     |
  5    1  String              |    .-----&gt; "()V"                        |
  6    1  String              |    |       "Code"                       |
  7   12  Name and type     4-' 5--'       &lt;init&gt;  ()V &lt;----------------'
  8    1  String                           "EmptyClass"
  9    1  String                           "java/lang/Object"
</pre>

<p>O jakou metodu se v¹ak v&nbsp;tomto pøípadì jedná, kdy¾ je na¹e tøída
(zdánlivì) prázdná? Jak jste ji¾ mo¾ná uhodli, tak na¹e tøída ve skuteènosti
pøi své inicializaci bude volat konstruktor pøedka a konstruktory se
v&nbsp;bajtkódu pojmenovávají &lt;init&gt;. Jedná se o jméno, které nelze ve
zdrojovém kódu pou¾ít, proto nikdy nedojde ke kolizím s&nbsp;u¾ivatelskou
metodou èi atributem.</p>



<p><a name="k04"></a></p>
<h2 id="k04">4. 32bitové èíselné konstanty pou¾ité v&nbsp;programovém kódu</h2>

<p>Ji¾ z&nbsp;pøedchozího pøíkladu je pravdìpodobnì patrné, ¾e <i>constant
pool</i> mù¾e obsahovat pomìrnì velké mno¾ství dùle¾itých informací, a to i pro
relativnì jednoduché tøídy. Má to svùj význam, proto¾e v&nbsp;instrukèní sadì
se mnohé instrukce odkazují právì na prvky umístìné v&nbsp;<i>constant
poolu</i>, co¾ na jednu stranu vede k&nbsp;vìt¹í &bdquo;informaèní
hustotì&ldquo; instrukèní sady, tak i k&nbsp;tomu, ¾e se v&nbsp;sadì nenachází
¾ádné pøímé volání (zejména cizích) metod, proto¾e v&nbsp;JVM lze a¾ za bìhu
aplikace urèit (pomocí <i>classloaderù</i>), které tøídy se mají nahrát a
dynamicky slinkovat. Jak ji¾ víme z&nbsp;pøedchozí èásti tohoto seriálu (i <a
href="#k01">z&nbsp;úvodní kapitoly</a>), jsou v&nbsp;<i>constant poolu</i>
umístìny i celoèíselné konstanty, popø.&nbsp;konstanty èísel reprezentovaných
v&nbsp;systému plovoucí øádové èárky (<i>floating point</i>). Nejjednodu¹¹í je
situace v&nbsp;pøípadì, kdy jsou ve zdrojovém kódu tøídy pou¾ity numerické
konstanty typu <strong>int</strong> a <strong>float</strong>, tak, jak je tomu
u na¹í dal¹í demonstraèní tøídy pojmenované
<strong>ConstantsTest1</strong>:</p>

<pre>
public class ConstantsTest1 {
    public static final int   integerField = 400000;
    public static final float floatField   = 123.456f;
}
</pre>

<p>Obsah <i>constant poolu</i> je ji¾ ponìkud slo¾itìj¹í, prozatím v¹ak budeme
nìkteré polo¾ky ignorovat (tyto nové polo¾ky jsou urèeny pro ulo¾ení jména a
typu obou deklarovaných atributù, s&nbsp;devíti dal¹ími polo¾kami jsme se ji¾
setkali v&nbsp;pøedchozí kapitole):</p>

<pre>
Magicka konstanta: cafebabe
Cislo verze:       50
Cislo podverze:    0

Velikost const. poolu: 16 prvku
  1   10  MethodRef         3  14    java/lang/Object.&lt;init&gt;()V
  2    7  Class            15        ConstantsTest1
  3    7  Class            16        java/lang/Object
  4    1  String                     "integerField"
  5    1  String                     "I"
  6    1  String                     "ConstantValue"
  7    3  Integer                    400000
  8    1  String                     "floatField"
  9    1  String                     "F"
 10    4  Float                      123.456001
 11    1  String                     "&lt;init&gt;"
 12    1  String                     "()V"
 13    1  String                     "Code"
 14   12  Name and type    11  12    &lt;init&gt;  ()V
 15    1  String                     "ConstantsTest1"
 16    1  String                     "java/lang/Object"
</pre>

<p>V&nbsp;této chvíli nás zajímá pouze dvojice polo¾ek s&nbsp;konstantami
&ndash; jedná se o polo¾ku èíslo sedm a deset:</p>

<pre>
  7    3  Integer                    400000
 10    4  Float                      123.456001
</pre>

<p>Jak mù¾ete sami vidìt, jedná se vlastnì o ten nejjednodu¹¹í typ záznamu
ulo¾eného v&nbsp;<i>constant poolu</i>. Fyzická podoba tìchto konstant je
zøejmá: za tagem (s&nbsp;èíslem 3 nebo 4) jsou ulo¾eny ètyøi bajty
pøedstavující buï 32bitové celé èíslo se znaménkem (bezznaménkové celoèíselné
konstanty ani promìnné Java nezná), nebo takté¾ 32bitové reálné èíslo
jednoduché pøesností. Poøadí ulo¾ení tìchto ètyø bajtù je v¾dy big endian.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. 8bitové, 16bitové a 64bitové èíselné konstanty</h2>

<p>Zatímco u èíselných konstant typu <i>int</i> a <i>float</i> byla situace
velmi jednoduchá, u èíselných konstant dal¹ích typù ji¾ mù¾eme narazit na
nìkolik zajímavostí. První zajímavostí je, ¾e celoèíselné typy s&nbsp;men¹ím
rozsahem ne¾ <i>int</i> jsou v&nbsp;<i>constant poolu</i> ulo¾eny ponìkud
neúspornì jako <i>int</i>, co¾ znamená, ¾e i osmibitová konstanta typu
<i>byte</i> je ulo¾ena jako pìtibajtová polo¾ka (prvním bajtem je <i>tag</i>,
dal¹í ètyøi bajty pøedstavují 32bitové celé èíslo se znaménkem). Podobné je to
i u konstant typu <i>short</i> a <i>char</i>. Pokud by v¹ak byla takto malá
celoèíselná konstanta pou¾ita pouze nìkde ve výrazu a nikoli pro deklaraci a
inicializaci tøídního atributu, nemusí být v&nbsp;<i>constant poolu</i> ulo¾ena
vùbec, proto¾e pro práci s&nbsp;&bdquo;malými&ldquo; konstantami slou¾í
instrukce typu <strong>sipush</strong> èi <strong>bipush</strong> (viz té¾
dal¹í díl tohoto seriálu, v&nbsp;nìm¾ se koneènì dostaneme i pøímo
k&nbsp;instrukèní sadì pou¾ívané virtuálním strojem Javy).</p>

<p>Zbývají nám tedy je¹tì celá 64bitová èísla typu <i>long</i> a èísla
s&nbsp;plovoucí øádovou èárkou s&nbsp;dvojitou pøesností <i>double</i>. Ty jsou
v&nbsp;<i>constant poolu</i> takté¾ ulo¾eny pøímo jako konstanty, ov¹em ihned
za tìmito polo¾kami je nutné pøi vytváøení obrazu constant poolu
v&nbsp;operaèní pamìti dal¹í polo¾ku bajtkódu <strong>vynechat</strong>. Pokud
by se na tuto (vpravdì nelogickou!) operaci zapomnìlo, byly by v¹echny
reference/odkazy na polo¾ky v&nbsp;<i>constant poolu</i> ¹patnì oèíslované
(navíc i celkový poèet polo¾ek <i>constant poolu</i>, který je ulo¾en
v&nbsp;bajtkódu, s&nbsp;tìmito výplnìmi poèítá). To je takté¾ dùvod pro to, aby
funkce <strong>read_constant_pool_entry()</strong> z&nbsp;na¹í jednoduché
utility vracela èíslo urèující poèet polo¾ek, o kolik je nutné se ve vytváøeném
obrazu <i>constant poolu</i> posunout. Podívejme se koneènì na demonstraèní
pøíklad:</p>

<pre>
public class ConstantsTest2 {
    public static final long   longField   = 400000;
    public static final double doubleField = 123.456f;
    public static final byte   byteField   = 100;
    public static final short  shortField  = 10000;
    public static final char   charField   = 20000;
}
</pre>

<p>Obsah <i>constant poolu</i> vypadá následovnì (ve skuteènosti se výplòové
polo¾ky v&nbsp;bajtkódu neukládají, v&nbsp;pamìti je v¹ak musíme vytváøet):</p>

<pre>
Magicka konstanta: cafebabe
Cislo verze:       50
Cislo podverze:    0

Velikost const. poolu: 27 prvku
  1   10  MethodRef         3  25    java/lang/Object.&lt;init&gt;()V
  2    7  Class            26        ConstantsTest2
  3    7  Class            27        java/lang/Object
  4    1  String                     "longField"
  5    1  String                     "J"
  6    1  String                     "ConstantValue"
  7    5  Long                       400000
  8    0  Neznamy tag
  9    1  String                     "doubleField"
 10    1  String                     "D"
 11    6  Double                     123.456001
 12    0  Neznamy tag
 13    1  String                     "byteField"
 14    1  String                     "B"
 15    3  Integer                    100
 16    1  String                     "shortField"
 17    1  String                     "S"
 18    3  Integer                    10000
 19    1  String                     "charField"
 20    1  String                     "C"
 21    3  Integer                    20000
 22    1  String                     "&lt;init&gt;"
 23    1  String                     "()V"
 24    1  String                     "Code"
 25   12  Name and type    22  23    &lt;init&gt;  ()V
 26    1  String                     "ConstantsTest2"
 27    1  String                     "java/lang/Object"
</pre>

<p>Pro nás jsou v&nbsp;tuto chvíli zajímavé pouze následující polo¾ky,
k&nbsp;nim¾ jsem doplnil komentáøe:</p>

<pre>
  7    5  Long                       400000
  8    0  Neznamy tag                             *** výplò ihned za "long"
 11    6  Double                     123.456001
 12    0  Neznamy tag                             *** výplò ihned za "double"
 15    3  Integer                    100
 18    3  Integer                    10000        *** pro konstantu typu short
 21    3  Integer                    20000        *** pro konstantu typu char
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. Zpùsob urèení datových typù atributù a návratových hodnot metod</h2>

<p>Dal¹í dùle¾ité informace, které jsou v&nbsp;<i>constant poolu</i> ulo¾ené,
se týkají typù atributù tøíd, popø.&nbsp;návratových typù metod i datových typù
argumentù metod. Informace o v¹ech tìchto datových typech jsou urèeny øetìzcem,
který se v&nbsp;pøípadì primitivních datových typù skládá z&nbsp;jediného znaku
(velkého písmena &bdquo;B&ldquo;, &bdquo;C&ldquo;, &bdquo;D&ldquo;,
&bdquo;F&ldquo;, &bdquo;I&ldquo;, &bdquo;J&ldquo;, &bdquo;S&ldquo; a
&bdquo;Z&ldquo;) a v&nbsp;pøípadì referenèních typù z&nbsp;plného jména tøídy,
pøed nìj¾ je vlo¾en znak &bdquo;L&ldquo; a jméno tøídy je ukonèeno støedníkem.
Speciálním pøípadem jsou pole (která jsou v&nbsp;Javì takté¾ pova¾ována za
referenèní typy). V&nbsp;pøípadì polí je v&nbsp;øetìzci zakódován jak poèet
dimenzí, tak i datové typy prvkù, ze kterých se pole skládá (mù¾e se samozøejmì
jednat jak o primitivní datové typy, tak i o referenèní typy). Podívejme se
nejdøíve na znaky pou¾ité v&nbsp;øetìzci, pomocí nìho¾ se specifikuje datový
typ atributù, návratový typ metod i typy jednotlivých argumentù metod:</p>

<table>
<tr><th>#</th><th>Znak/øetìzec</th><th>Datový typ</th><th>Význam</th></tr>
<tr><td> 1</td><td>B            </td><td>byte</td><td>osmibitové celé èíslo se znaménkem</td></tr>
<tr><td> 2</td><td>C            </td><td>char</td><td>znak reprezentovaný v&nbsp;Unikódu</td></tr>
<tr><td> 3</td><td>D            </td><td>double</td><td>èíslo s&nbsp;plovoucí øádovou èárkou s&nbsp;dvojitou pøesností</td></tr>
<tr><td> 4</td><td>F            </td><td>float</td><td>èíslo s&nbsp;plovoucí øádovou èárkou s&nbsp;jednoduchou pøesností</td></tr>
<tr><td> 5</td><td>I            </td><td>int      </td><td>32bitové celé èíslo se znaménkem</td></tr>
<tr><td> 6</td><td>J            </td><td>long     </td><td>64bitové celé èíslo se znaménkem</td></tr>
<tr><td> 7</td><td>Ljméno_tøídy;</td><td>reference</td><td>instance tøídy zadaného jména</td></tr>
<tr><td> 8</td><td>S            </td><td>short    </td><td>16bitové celé èíslo se znaménkem</td></tr>
<tr><td> 9</td><td>Z            </td><td>boolean  </td><td>pravdivostní hodnota true/false</td></tr>
<tr><td>10</td><td>[            </td><td>reference</td><td>jednodimenzionální pole</td></tr>
</table>

<p>Podívejme se na jednoduchý pøíklad. Jedná se o tøídu obsahující tøi atributy
&ndash; skalární celoèíselnou promìnnou nazvanou <strong>promenna</strong>,
jednorozmìrné pole s&nbsp;prvky typu <i>int</i> nazvané <strong>pole</strong> a
koneènì dvourozmìné pole s&nbsp;prvky typu <i>int</i> nazvané
<strong>matice</strong>:</p>

<pre>
public class Test {
    public int     promenna;
    public int[]   pole;
    public int[][] matice;
}
</pre>

<p>Po pøekladu této tøídy do bajtkódu najdeme v&nbsp;jeho <i>constant poolu</i>
mj.&nbsp;i následujících ¹est polo¾ek, které popisují v¹echny tøi atributy:</p>

<pre>
  4    1  String                     "promenna"
  5    1  String                     "I"
  6    1  String                     "pole"
  7    1  String                     "[I"
  8    1  String                     "matice"
  9    1  String                     "[[I"
</pre>

<p>Jak jsou tyto polo¾ky navzájem propojeny si øekneme pøí¹tì, nás v¹ak
v&nbsp;tuto chvíli zajímají pøedev¹ím signatury atributù. V&nbsp;souladu
s&nbsp;tabulkou uvedenou na zaèátku této kapitoly je skalární celoèíselný
atribut popsán øetìzcem &bdquo;I&ldquo;. Jednorozmìrné pole celoèíselných prvkù
je popsáno øetìzcem &bdquo;[I&ldquo; (znak &bdquo;[&ldquo; signalizuje, ¾e se
jedná o pole. Popis dvojrozmìrného pole celoèíselných prvkù je urèen øetìzcem
&bdquo;[[I&ldquo;, co¾ lze èíst jako pole polí celých èísel.</p>

<p>Co se stane, pokud pou¾ijeme namísto celoèíselného datového typu typ
referenèní? Proveïme v&nbsp;kódu nepatrnou zmìnu:</p>

<pre>
public class Test {
    public String     promenna;
    public String[]   pole;
    public String[][] matice;
}
</pre>

<p>V&nbsp;<i>constant poolu</i> v&nbsp;tomto pøípadì dojde ke zmìnám, které
opìt odpovídají informacím uvedeným v&nbsp;tabulce uvedené na zaèátku této
kapitoly &ndash; bude zde ulo¾eno plnì kvalifikované jméno tøídy
s&nbsp;prefixem &bdquo;L&ldquo; a ukonèujícím znakem støedník:</p>

<pre>
  4    1  String                     "promenna"
  5    1  String                     "Ljava/lang/String;"
  6    1  String                     "pole"
  7    1  String                     "[Ljava/lang/String;"
  8    1  String                     "matice"
  9    1  String                     "[[Ljava/lang/String;"
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Demonstraèní pøíklad &ndash; výpis návratových typù metod</h2>

<p>V&nbsp;dal¹ím demonstraèním pøíkladu si øekneme, jakým zpùsobem lze
z&nbsp;<i>constant poolu</i> zjistit návratové typu metod. Ve tøetí kapitole
jsme si ukázali, jak je mo¾né získat celou informaci o metodì, která je nìkde
uvnitø tøídy buï implicitnì nebo explicitnì volána. Pøipomeòme si, ¾e informace
o volané metodì je ulo¾ena v&nbsp;polo¾ce typu <strong>MethodRef</strong>,
která obsahuje dva odkazy. První odkaz vede na polo¾ku typu
<strong>Class</strong> s&nbsp;plným jménem tøídy (pøesnìji øeèeno
s&nbsp;odkazem na øetìzec nesoucí jméno tøídy) a druhý odkaz vede na polo¾ku
typu <strong>Name and type</strong> obsahující název metody, typy jejich
parametrù (ne jejich jména) a takté¾ typ návratové hodnoty. V&nbsp;následujícím
testovacím pøíkladu je vytvoøeno sedm bezparametrických metod, které vracejí
hodnoty rùzných datových typù. Metody je v&nbsp;programovém kódu nutné zavolat,
jinak by se v&nbsp;<i>constant poolu</i> neobjevily v¹echny podstatné
informace. Volání je zaøízeno v&nbsp;metodì <strong>main</strong>:</p>

<pre>
public class Methods2 {
    public void    methodReturningVoid() {}
    public int     methodReturningInteger() {return 1;}
    public byte    methodReturningByte()    {return 1;}
    public float   methodReturningFloat()   {return 1.0f;}
    public double  methodReturningDouble()  {return 1.0;}
    public int[]   methodReturningArray()   {return null;}
    public Object  methodReturningObject()  {return null;}

    public static void main(String[] args) {
        Methods2 m = new Methods2();
        m.methodReturningVoid();
        m.methodReturningInteger();
        m.methodReturningByte();
        m.methodReturningFloat();
        m.methodReturningDouble();
        m.methodReturningArray();
        m.methodReturningObject();
    }
}
</pre>

<p>Po pøekladu této tøídy a pou¾ití pomocného nástroje <a
href="#k02">z&nbsp;druhé kapitoly</a> mù¾eme z&nbsp;<i>constant poolu</i>
získat (samozøejmì kromì dal¹ích informací) i sedm polo¾ek typu
<strong>MethodRef</strong>:</p>

<pre>
  4   10  MethodRef         2  32    Methods2.methodReturningVoid()V
  5   10  MethodRef         2  33    Methods2.methodReturningInteger()I
  6   10  MethodRef         2  34    Methods2.methodReturningByte()B
  7   10  MethodRef         2  35    Methods2.methodReturningFloat()F
  8   10  MethodRef         2  36    Methods2.methodReturningDouble()D
  9   10  MethodRef         2  37    Methods2.methodReturningArray()[I
 10   10  MethodRef         2  38    Methods2.methodReturningObject()Ljava/lang/Object;
</pre>

<p>Z&nbsp;tohoto výpisu je patrné, ¾e virtuální stroj Javy má k&nbsp;dispozici
jak plný název tøídy, tak i název metody spoleènì s&nbsp;jejím návratovým
typem. Ten je v&nbsp;na¹em pøípadì souèástí referencovaných polo¾ek typu
<strong>Name and type</strong>, z&nbsp;nich¾ vede odkaz na øetìzec s&nbsp;typem
parametrù (zde pouze prázdné závorky) i návratovým typem umístìným za
závorkami. Zpùsob &bdquo;pojmenování&ldquo; návratového datového typu je shodný
se zpùsobem popsaným v&nbsp;pøedchozí kapitole s&nbsp;tím roz¹íøením, ¾e
metody, které nevrací ¾ádná data, mají nastaven návratový typ &bdquo;V&ldquo;
jako <strong>void</strong> (ten samozøejmì nebyl u tøídních atributù
pou¾it).</p>

<p>Pro úplnost je¹tì následuje výpis obsahu celého <i>constant poolu</i>,
v¹echny dùle¾ité polo¾ky v¹ak byly vysvìtleny vý¹e:</p>

<pre>
Magicka konstanta: cafebabe
Cislo verze:       50
Cislo podverze:    0

Velikost const. poolu: 39 prvku
  1   10  MethodRef        11  30    java/lang/Object.&lt;init&gt;()V
  2    7  Class            31        Methods2
  3   10  MethodRef         2  30    Methods2.&lt;init&gt;()V
  4   10  MethodRef         2  32    Methods2.methodReturningVoid()V
  5   10  MethodRef         2  33    Methods2.methodReturningInteger()I
  6   10  MethodRef         2  34    Methods2.methodReturningByte()B
  7   10  MethodRef         2  35    Methods2.methodReturningFloat()F
  8   10  MethodRef         2  36    Methods2.methodReturningDouble()D
  9   10  MethodRef         2  37    Methods2.methodReturningArray()[I
 10   10  MethodRef         2  38    Methods2.methodReturningObject()Ljava/lang/Object;
 11    7  Class            39        java/lang/Object
 12    1  String                     "&lt;init&gt;"
 13    1  String                     "()V"
 14    1  String                     "Code"
 15    1  String                     "methodReturningVoid"
 16    1  String                     "methodReturningInteger"
 17    1  String                     "()I"
 18    1  String                     "methodReturningByte"
 19    1  String                     "()B"
 20    1  String                     "methodReturningFloat"
 21    1  String                     "()F"
 22    1  String                     "methodReturningDouble"
 23    1  String                     "()D"
 24    1  String                     "methodReturningArray"
 25    1  String                     "()[I"
 26    1  String                     "methodReturningObject"
 27    1  String                     "()Ljava/lang/Object;"
 28    1  String                     "main"
 29    1  String                     "([Ljava/lang/String;)V"
 30   12  Name and type    12  13    &lt;init&gt;  ()V
 31    1  String                     "Methods2"
 32   12  Name and type    15  13    methodReturningVoid  ()V
 33   12  Name and type    16  17    methodReturningInteger  ()I
 34   12  Name and type    18  19    methodReturningByte  ()B
 35   12  Name and type    20  21    methodReturningFloat  ()F
 36   12  Name and type    22  23    methodReturningDouble  ()D
 37   12  Name and type    24  25    methodReturningArray  ()[I
 38   12  Name and type    26  27    methodReturningObject  ()Ljava/lang/Object;
 39    1  String                     "java/lang/Object"
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. Demonstraèní pøíklad &ndash; výpis typu argumentù metod</h2>

<p>Zbývá nám ji¾ popsat poslední malièkost &ndash; zpùsob urèení datových typù
argumentù metod. Jedná se o velmi dùle¾itý údaj, proto¾e právì na základì
tìchto informací je urèeno, která (potenciálnì pøetí¾ená) metoda se ve
skuteènosti zavolá. Toto rozhodnutí provádí pøekladaè, který volání konkrétní
metody pøelo¾í do instrukce <strong>invokevirtual</strong>. Podívejme se nyní
na zdrojový kód demonstraèního pøíkladu, v&nbsp;nìm¾ je jedenáct metod
s&nbsp;rùzným poètem a typy argumentù. Metody jsou opìt volány z&nbsp;metody
<strong>main</strong>, aby se v&nbsp;<i>constant poolu</i> objevily v¹echny
dùle¾ité informace:</p>

<pre>
public class Methods3 {
    public void noParams() {}
    public void oneInteger(int x) {}
    public void twoIntegers(int x, int y) {}
    public void twoFloats(float x, float y) {}
    public void intArray(int[] a) {}
    public void int2DArray(int[][] a) {}
    public void int3DArray(int[][][] a) {}
    public void twoArrays(int[] a, float[] b) {}
    public void object(Object o) {}
    public void objectArray(Object[] o) {}
    public void object2DArray(Object[][] o) {}

    public static void main(String[] args) {
        Methods3 m = new Methods3();
        m.noParams();
        m.oneInteger(1);
        m.twoIntegers(1,2);
        m.twoFloats(1.0f, 2.0f);
        m.intArray(null);
        m.int2DArray(null);
        m.int3DArray(null);
        m.twoArrays(null, null);
        m.object(null);
        m.objectArray(null);
        m.object2DArray(null);
    }
}
</pre>

<p>V&nbsp;bajtkódu mù¾eme jednodu¹e nalézt informace o v¹ech jedenácti
metodách:</p>

<pre>
  4   10  MethodRef         2  47    Methods3.noParams()V
  5   10  MethodRef         2  48    Methods3.oneInteger(I)V
  6   10  MethodRef         2  49    Methods3.twoIntegers(II)V
  7   10  MethodRef         2  50    Methods3.twoFloats(FF)V
  8   10  MethodRef         2  51    Methods3.intArray([I)V
 10   10  MethodRef         2  53    Methods3.int2DArray([[I)V
 12   10  MethodRef         2  55    Methods3.int3DArray([[[I)V
 13   10  MethodRef         2  56    Methods3.twoArrays([I[F)V
 14   10  MethodRef         2  57    Methods3.object(Ljava/lang/Object;)V
 15   10  MethodRef         2  58    Methods3.objectArray([Ljava/lang/Object;)V
 17   10  MethodRef         2  60    Methods3.object2DArray([[Ljava/lang/Object;)V
</pre>

<p>Pro tuto chvíli nás nemusí zajímat návratové typy, proto¾e ty jsou ve v¹ech
pøípadech zakódovány znakem &bdquo;V&ldquo; (<strong>void</strong>).
Dùle¾itìj¹í jsou typy argumentù. Jak je z&nbsp;výpisu <i>constant poolu</i>
patrné, jsou typy argumentù umístìny do závorek, èím¾ je automaticky urèen i
jejich poèet. Metoda bez parametrù obsahuje pouze prázdné závorky (stejnì jako
v&nbsp;samotné Javì), metoda s&nbsp;jedním parametrem obsahuje øetìzec shodný
s&nbsp;typem atributu (nesmí se zde objevit &bdquo;V&ldquo;) a pokud má metoda
více parametrù, jsou jejich typy jednodu¹e vypsány za sebou bez pou¾ití
oddìlovaèe &ndash; ten není zapotøebí. Pøíkladem mù¾e být metoda:</p>

<pre>
public void twoArrays(int[] a, float[] b) {}
</pre>

<p>její¾ reference vypadá v&nbsp;bajtkódu následovnì:</p>

<pre>
 13   10  MethodRef         2  56    Methods3.twoArrays([I[F)V
</pre>

<p>Øetìzec v&nbsp;závorkách mù¾eme pøeèíst jako &bdquo;pole prvkù typu int
následované polem prvkù typu float&ldquo;.</p>

<p>Pro úplnost bude opìt vypsán obsah celého <i>constant poolu</i>,
z&nbsp;nìho¾ je patrné, ¾e právì <i>constant pool</i> v&nbsp;naprosté vìt¹inì
pøípadù tvoøí nejvìt¹í objem bajtkódu:</p>

<pre>
Magicka konstanta: cafebabe
Cislo verze:       50
Cislo podverze:    0

Velikost const. poolu: 61 prvku
  1   10  MethodRef        18  45    java/lang/Object.&lt;init&gt;()V
  2    7  Class            46        Methods3
  3   10  MethodRef         2  45    Methods3.&lt;init&gt;()V
  4   10  MethodRef         2  47    Methods3.noParams()V
  5   10  MethodRef         2  48    Methods3.oneInteger(I)V
  6   10  MethodRef         2  49    Methods3.twoIntegers(II)V
  7   10  MethodRef         2  50    Methods3.twoFloats(FF)V
  8   10  MethodRef         2  51    Methods3.intArray([I)V
  9    7  Class            52        [[I
 10   10  MethodRef         2  53    Methods3.int2DArray([[I)V
 11    7  Class            54        [[[I
 12   10  MethodRef         2  55    Methods3.int3DArray([[[I)V
 13   10  MethodRef         2  56    Methods3.twoArrays([I[F)V
 14   10  MethodRef         2  57    Methods3.object(Ljava/lang/Object;)V
 15   10  MethodRef         2  58    Methods3.objectArray([Ljava/lang/Object;)V
 16    7  Class            59        [[Ljava/lang/Object;
 17   10  MethodRef         2  60    Methods3.object2DArray([[Ljava/lang/Object;)V
 18    7  Class            61        java/lang/Object
 19    1  String                     "&lt;init&gt;"
 20    1  String                     "()V"
 21    1  String                     "Code"
 22    1  String                     "noParams"
 23    1  String                     "oneInteger"
 24    1  String                     "(I)V"
 25    1  String                     "twoIntegers"
 26    1  String                     "(II)V"
 27    1  String                     "twoFloats"
 28    1  String                     "(FF)V"
 29    1  String                     "intArray"
 30    1  String                     "([I)V"
 31    1  String                     "int2DArray"
 32    1  String                     "([[I)V"
 33    1  String                     "int3DArray"
 34    1  String                     "([[[I)V"
 35    1  String                     "twoArrays"
 36    1  String                     "([I[F)V"
 37    1  String                     "object"
 38    1  String                     "(Ljava/lang/Object;)V"
 39    1  String                     "objectArray"
 40    1  String                     "([Ljava/lang/Object;)V"
 41    1  String                     "object2DArray"
 42    1  String                     "([[Ljava/lang/Object;)V"
 43    1  String                     "main"
 44    1  String                     "([Ljava/lang/String;)V"
 45   12  Name and type    19  20    &lt;init&gt;  ()V
 46    1  String                     "Methods3"
 47   12  Name and type    22  20    noParams  ()V
 48   12  Name and type    23  24    oneInteger  (I)V
 49   12  Name and type    25  26    twoIntegers  (II)V
 50   12  Name and type    27  28    twoFloats  (FF)V
 51   12  Name and type    29  30    intArray  ([I)V
 52    1  String                     "[[I"
 53   12  Name and type    31  32    int2DArray  ([[I)V
 54    1  String                     "[[[I"
 55   12  Name and type    33  34    int3DArray  ([[[I)V
 56   12  Name and type    35  36    twoArrays  ([I[F)V
 57   12  Name and type    37  38    object  (Ljava/lang/Object;)V
 58   12  Name and type    39  40    objectArray  ([Ljava/lang/Object;)V
 59    1  String                     "[[Ljava/lang/Object;"
 60   12  Name and type    41  42    object2DArray  ([[Ljava/lang/Object;)V
 61    1  String                     "java/lang/Object"
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. Odkazy na Internetu</h2>

<ol>

<li>The JavaTM Virtual Machine Specification, Second Edition<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html</a>
</li>

<li>The class File Format<br />
<a href="http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html">http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html</a>
</li>

<li>javap - The Java Class File Disassembler<br />
<a href="http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html">http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javap.html</a>
</li>

<li>javap-java-1.6.0-openjdk(1) - Linux man page<br />
<a href="http://linux.die.net/man/1/javap-java-1.6.0-openjdk">http://linux.die.net/man/1/javap-java-1.6.0-openjdk</a>
</li>

<li>Using javap<br />
<a href="http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html">http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Using_javap.html</a>
</li>

<li>Examine class files with the javap command<br />
<a href="http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354">http://www.techrepublic.com/article/examine-class-files-with-the-javap-command/5815354</a>
</li>

<li>BCEL Home page<br />
<a href="http://commons.apache.org/bcel/">http://commons.apache.org/bcel/</a>
</li>

<li>BCEL Manual<br />
<a href="http://commons.apache.org/bcel/manual.html">http://commons.apache.org/bcel/manual.html</a>
</li>

<li>Byte Code Engineering Library (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/BCEL">http://en.wikipedia.org/wiki/BCEL</a>
</li>

<li>Java programming dynamics, Part 7: Bytecode engineering with BCEL<br />
<a href="http://www.ibm.com/developerworks/java/library/j-dyn0414/">http://www.ibm.com/developerworks/java/library/j-dyn0414/</a>
</li>

<li>Bytecode Engineering<br />
<a href="http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html">http://book.chinaunix.net/special/ebook/Core_Java2_Volume2AF/0131118269/ch13lev1sec6.html</a>
</li>

<li>BCEL Tutorial<br />
<a href="http://www.smfsupport.com/support/java/bcel-tutorial!/">http://www.smfsupport.com/support/java/bcel-tutorial!/</a>
</li>

<li>ASM Home page<br />
<a href="http://asm.ow2.org/">http://asm.ow2.org/</a>
</li>

<li>Seznam nástrojù vyu¾ívajících projekt ASM<br />
<a href="http://asm.ow2.org/users.html">http://asm.ow2.org/users.html</a>
</li>

<li>ObjectWeb ASM (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/ObjectWeb_ASM">http://en.wikipedia.org/wiki/ObjectWeb_ASM</a>
</li>

<li>Java Bytecode BCEL vs ASM<br />
<a href="http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/">http://james.onegoodcookie.com/2005/10/26/java-bytecode-bcel-vs-asm/</a>
</li>

<li>Bytecode Outline plugin for Eclipse (screenshoty + info)<br />
<a href="http://asm.ow2.org/eclipse/index.html">http://asm.ow2.org/eclipse/index.html</a>
</li>

<li>aspectj (Eclipse)<br />
<a href="http://www.eclipse.org/aspectj/">http://www.eclipse.org/aspectj/</a>
</li>

<li>Aspect-oriented programming (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Aspect_oriented_programming">http://en.wikipedia.org/wiki/Aspect_oriented_programming</a>
</li>

<li>AspectJ (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/AspectJ">http://en.wikipedia.org/wiki/AspectJ</a>
</li>

<li>EMMA: a free Java code coverage tool<br />
<a href="http://emma.sourceforge.net/">http://emma.sourceforge.net/</a>
</li>

<li>Cobertura<br />
<a href="http://cobertura.sourceforge.net/">http://cobertura.sourceforge.net/</a>
</li>

<li>FindBugs<br />
<a href="http://findbugs.sourceforge.net/">http://findbugs.sourceforge.net/</a>
</li>

<li>GNU Classpath<br />
<a href="www.gnu.org/s/classpath/">www.gnu.org/s/classpath/</a></li>

<li>Java VMs Compared<br />
<a href="http://bugblogger.com/java-vms-compared-160/">http://bugblogger.com/java-vms-compared-160/</a>
</li>

<li>JSRs: Java Specification Requests &ndash; JSR 223: Scripting for the Java Platform<br />
<a href="http://www.jcp.org/en/jsr/detail?id=223">http://www.jcp.org/en/jsr/detail?id=223</a>
</li>

<li>Scripting for the Java Platform<br />
<a href="http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/">http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/</a>
</li>

<li>Scripting for the Java Platform (Wikipedia)<br />
<a href="http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform">http://en.wikipedia.org/wiki/Scripting_for_the_Java_Platform</a>
</li>

<li>Java Community Process<br />
<a href="http://en.wikipedia.org/wiki/Java_Specification_Request">http://en.wikipedia.org/wiki/Java_Specification_Request</a>
</li>

<li>Java HotSpot VM Options<br />
<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a></li>

<li>Great Computer Language Shootout<br />
<a href="http://c2.com/cgi/wiki?GreatComputerLanguageShootout">http://c2.com/cgi/wiki?GreatComputerLanguageShootout</a>
</li>

<li>Java performance<br />
<a href="http://en.wikipedia.org/wiki/Java_performance">http://en.wikipedia.org/wiki/Java_performance</a>
</li>

<li>Trying the prototype<br />
<a href="http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html">http://mail.openjdk.java.net/pipermail/lambda-dev/2010-August/002179.html</a>
</li>

<li>Better closures (for Java)<br />
<a href="http://blogs.sun.com/jrose/entry/better_closures">http://blogs.sun.com/jrose/entry/better_closures</a>
</li>

<li>Lambdas in Java: An In-Depth Analysis<br />
<a href="http://www.infoq.com/articles/lambdas-java-analysis">http://www.infoq.com/articles/lambdas-java-analysis</a>
</li>

<li>Class ReflectiveOperationException<br />
<a href="http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html">http://download.java.net/jdk7/docs/api/java/lang/ReflectiveOperationException.html</a>
</li>

<li>Proposal: Indexing access syntax for Lists and Maps<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html</a>
</li>

<li>Proposal: Elvis and Other Null-Safe Operators<br />
<a href="http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html">http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html</a>
</li>

<li>Java 7 : Oracle pushes a first version of closures<br />
<a href="http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/">http://www.baptiste-wicht.com/2010/05/oracle-pushes-a-first-version-of-closures/</a>
</li>

<li>Groovy: An agile dynamic language for the Java Platform<br />
<a href="http://groovy.codehaus.org/Operators">http://groovy.codehaus.org/Operators</a>
</li>

<li>Better Strategies for Null Handling in Java<br />
<a href="http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java">http://www.slideshare.net/Stephan.Schmidt/better-strategies-for-null-handling-in-java</a>
</li>

<li>Control Flow in the Java Virtual Machine<br />
<a href="http://www.artima.com/underthehood/flowP.html">http://www.artima.com/underthehood/flowP.html</a>
</li>

<li>Java Virtual Machine<br />
<a href="http://en.wikipedia.org/wiki/Java_virtual_machine">http://en.wikipedia.org/wiki/Java_virtual_machine</a>
</li>

<li>==, .equals(), compareTo(), and compare()<br />
<a href="http://leepoint.net/notes-java/data/expressions/22compareobjects.html">http://leepoint.net/notes-java/data/expressions/22compareobjects.html</a>
</li>

<li>New JDK7 features<br />
<a href="http://openjdk.java.net/projects/jdk7/features/">http://openjdk.java.net/projects/jdk7/features/</a>
</li>

<li>Project Coin: Bringing it to a Close(able)<br />
<a href="http://blogs.sun.com/darcy/entry/project_coin_bring_close">http://blogs.sun.com/darcy/entry/project_coin_bring_close</a>
</li>

<li>CloseableFinder source code<br />
<a href="http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java">http://blogs.sun.com/darcy/resource/ProjectCoin/CloseableFinder.java</a>
</li>

<li>Joe Darcy blog about JDK<br />
<a href="http://blogs.sun.com/darcy">http://blogs.sun.com/darcy</a>
</li>

<li>Java 7 - more dynamics<br />
<a href="http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/">http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Ti¹novský</a> &nbsp; 2011</small></p>
</body>
</html>

