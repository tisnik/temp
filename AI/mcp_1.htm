<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel TiÅ¡novskÃ½</h3>

<p></p>

<h1>ÃšvodnÃ­k</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">*** 2. </a></p>
<p><a href="#k03">3. Instalace balÃ­Äku <strong>mcp</strong></a></p>
<p><a href="#k04">4. Instalace nÃ¡strojÅ¯ nutnÃ½ch pro spuÅ¡tÄ›nÃ­ MCP Inspectoru</a></p>
<p><a href="#k05">5. Implementace jednoduchÃ©ho MCP serveru s&nbsp;jedinÃ½m definovanÃ½m zdrojem</a></p>
<p><a href="#k06">6. SpuÅ¡tÄ›nÃ­ serveru s&nbsp;jeho otestovÃ¡nÃ­m pomocÃ­ MCP Inspectoru</a></p>
<p><a href="#k07">*** 7. MCP server s&nbsp;definovanÃ½m dynamickÃ½m zdrojem (<i>resource template</i>)</a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. RepositÃ¡Å™ s&nbsp;demonstraÄnÃ­mi pÅ™Ã­klady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>



<p><a name="k02"></a></p>
<h2 id="k02">2. </h2>



<p><a name="k03"></a></p>
<h2 id="k03">3. Instalace balÃ­Äku <strong>mcp</strong></h2>

<p>MCP je moÅ¾nÃ© vyuÅ¾Ã­vat mnoha rÅ¯znÃ½mi zpÅ¯soby. Je napÅ™Ã­klad podporovÃ¡n
nÄ›kterÃ½mi frameworky urÄenÃ½mi pro tvorbu aplikacÃ­ zaloÅ¾enÃ½ch na velkÃ½ch
jazykovÃ½ch modelech atd. OvÅ¡em pro zaÄÃ¡tek je dobrÃ© zjistit, jakÃ© jsou vlastnÄ›
zÃ¡kladnÃ­ vlastnosti MCP a z&nbsp;tohoto dÅ¯vodu si naprogramujeme vlastnÃ­ MCP
server (resp.&nbsp;hned nÄ›kolik jeho variant) a taktÃ©Å¾ jednoduchÃ© MCP klienty.
V&nbsp;souÄasnosti je moÅ¾nÃ© aplikace pouÅ¾Ã­vajÃ­cÃ­ MCP naprogramovat v&nbsp;mnoha
jazycÃ­ch; my se pro jednoduchost zamÄ›Å™Ã­me na Python. Pro ekosystÃ©m Pythonu
vznikl balÃ­Äek nazvanÃ½ pÅ™Ã­hodnÄ› <strong>mcp</strong>, kterÃ½ si nainstalujeme
pÅ™Ã­kazem:</p>

<pre>
$ <strong>pip install --user mcp</strong>
</pre>

<p>Resp.&nbsp;na systÃ©mech rozliÅ¡ujÃ­cÃ­ch Python 2 a Python 3:</p>

<pre>
$ <strong>pip3 install --user mcp</strong>
</pre>

<p>BalÃ­Äek <strong>mcp</strong> mÃ¡ sice nÄ›kolik zÃ¡vislostÃ­ (napÅ™Ã­klad celÃ½
Pydantic a Uvicorn), ovÅ¡em i tak by mÄ›la bÃ½t jeho instalace prakticky
okamÅ¾itÃ¡:</p>

<pre>
Collecting mcp
  Downloading mcp-1.5.0-py3-none-any.whl.metadata (20 kB)
Requirement already satisfied: anyio&gt;4.5 in /home/ptisnovs/.local/lib/python3.12/site-packages (from mcp) (4.6.2.post1)
Collecting httpx-sse&gt;0.4 (from mcp)
  Downloading httpx_sse-0.4.0-py3-none-any.whl.metadata (9.0 kB)
Requirement already satisfied: httpx&gt;0.27 in /home/ptisnovs/.local/lib/python3.12/site-packages (from mcp) (0.28.0)
Collecting pydantic-settings&gt;2.5.2 (from mcp)
  Downloading pydantic_settings-2.8.1-py3-none-any.whl.metadata (3.5 kB)
Requirement already satisfied: pydantic&lt;3.0.0,&gt;2.7.2 in /home/ptisnovs/.local/lib/python3.12/site-packages (from mcp) (2.10.5)
Collecting sse-starlette&gt;1.6.1 (from mcp)
  Downloading sse_starlette-2.2.1-py3-none-any.whl.metadata (7.8 kB)
Requirement already satisfied: starlette&gt;0.27 in /home/ptisnovs/.local/lib/python3.12/site-packages (from mcp) (0.41.3)
Requirement already satisfied: uvicorn&gt;0.23.1 in /home/ptisnovs/.local/lib/python3.12/site-packages (from mcp) (0.34.0)
Requirement already satisfied: idna&gt;2.8 in /usr/lib/python3.12/site-packages (from anyio&gt;4.5-&gt;mcp) (3.7)
Requirement already satisfied: sniffio&gt;1.1 in /home/ptisnovs/.local/lib/python3.12/site-packages (from anyio&gt;4.5-&gt;mcp) (1.3.1)
Requirement already satisfied: certifi in /home/ptisnovs/.local/lib/python3.12/site-packages (from httpx&gt;0.27-&gt;mcp) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /home/ptisnovs/.local/lib/python3.12/site-packages (from httpx&gt;0.27-&gt;mcp) (1.0.7)
Requirement already satisfied: h11&lt;0.15,&gt;0.13 in /home/ptisnovs/.local/lib/python3.12/site-packages (from httpcore==1.*-&gt;httpx&gt;0.27-&gt;mcp) (0.14.0)
Requirement already satisfied: annotated-types&gt;0.6.0 in /home/ptisnovs/.local/lib/python3.12/site-packages (from pydantic&lt;3.0.0,&gt;2.7.2-&gt;mcp) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.2 in /home/ptisnovs/.local/lib/python3.12/site-packages (from pydantic&lt;3.0.0,&gt;2.7.2-&gt;mcp) (2.27.2)
Requirement already satisfied: typing-extensions&gt;4.12.2 in /usr/lib/python3.12/site-packages (from pydantic&lt;3.0.0,&gt;2.7.2-&gt;mcp) (4.12.2)
Requirement already satisfied: python-dotenv&gt;0.21.0 in /home/ptisnovs/.local/lib/python3.12/site-packages (from pydantic-settings&gt;2.5.2-&gt;mcp) (1.0.1)
Collecting anyio&gt;4.5 (from mcp)
  Downloading anyio-4.9.0-py3-none-any.whl.metadata (4.7 kB)
Requirement already satisfied: click&gt;7.0 in /home/ptisnovs/.local/lib/python3.12/site-packages (from uvicorn&gt;0.23.1-&gt;mcp) (8.1.8)
Downloading mcp-1.5.0-py3-none-any.whl (73 kB)
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 73.7/73.7 kB 1.6 MB/s eta 0:00:00
Downloading httpx_sse-0.4.0-py3-none-any.whl (7.8 kB)
Downloading pydantic_settings-2.8.1-py3-none-any.whl (30 kB)
Downloading sse_starlette-2.2.1-py3-none-any.whl (10 kB)
Downloading anyio-4.9.0-py3-none-any.whl (100 kB)
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.9/100.9 kB 4.4 MB/s eta 0:00:00
Installing collected packages: httpx-sse, anyio, sse-starlette, pydantic-settings, mcp
  Attempting uninstall: anyio
    Found existing installation: anyio 4.6.2.post1
    Uninstalling anyio-4.6.2.post1:
      Successfully uninstalled anyio-4.6.2.post1
Successfully installed anyio-4.9.0 httpx-sse-0.4.0 mcp-1.5.0 pydantic-settings-2.8.1 sse-starlette-2.2.1
</pre>

<p>Po instalaci by mÄ›l bÃ½t k&nbsp;dispozici i pÅ™Ã­kaz <strong>mcp</strong>,
jehoÅ¾ existenci a dostupnost si snadno ovÄ›Å™Ã­me:</p>

<pre>
 Usage: mcp [OPTIONS] COMMAND [ARGS]...
&nbsp;
 MCP development tools
&nbsp;
â•­â”€ Options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ --help          Show this message and exit.                                                                                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€ Commands â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ version   Show the MCP version.                                                                                                      â”‚
â”‚ dev       Run a MCP server with the MCP Inspector.                                                                                   â”‚
â”‚ run       Run a MCP server.                                                                                                          â”‚
â”‚ install   Install a MCP server in the Claude desktop app.                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: v&nbsp;pÅ™Ã­padÄ›, Å¾e nenÃ­
<strong>mcp</strong> dostupnÃ½, je moÅ¾nÃ©, Å¾e adresÃ¡Å™
<strong>~/.local/bin</strong> nenÃ­ pÅ™idÃ¡n do promÄ›nnÃ© prostÅ™edÃ­
<strong>PATH</strong>.</div></p>

<p>TaktÃ©Å¾ si mÅ¯Å¾eme pÅ™Ã­mo v&nbsp;interaktivnÃ­ smyÄce Pythonu naimportovat
nÄ›kterou tÅ™Ã­du z&nbsp;tohoto balÃ­Äku (napÅ™Ã­klad <strong>FastMCP</strong>) a
zobrazit si jejÃ­ nÃ¡povÄ›du:</p>

<pre>
$ <strong>python</strong>
&nbsp;
Python 3.12.9 (main, Feb  4 2025, 00:00:00) [GCC 14.2.1 20240912 (Red Hat 14.2.1-3)] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; from mcp.server.fastmcp import FastMCP
&gt;&gt;&gt; help(FastMCP)
</pre>

<p>S&nbsp;vÃ½sledkem:</p>

<pre>
Help on class FastMCP in module mcp.server.fastmcp.server:

class FastMCP(builtins.object)
 |  FastMCP(name: 'str | None' = None, instructions: 'str | None' = None, **settings: 'Any')
 |
 |  Methods defined here:
 |
 |  __init__(self, name: 'str | None' = None, instructions: 'str | None' = None, **settings: 'Any')
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  add_prompt(self, prompt: 'Prompt') -&gt; 'None'
 |      Add a prompt to the server.
 |
 |      Args:
 |          prompt: A Prompt instance to add
 |
 |  add_resource(self, resource: 'Resource') -&gt; 'None'
 |      Add a resource to the server.
 |
 |      Args:
 |          resource: A Resource instance to add
 |
 ...
 ...
 ...
</pre>



<p><a name="k04"></a></p>
<h2 id="k04">4. Instalace nÃ¡strojÅ¯ nutnÃ½ch pro spuÅ¡tÄ›nÃ­ MCP Inspectoru</h2>

<p>BalÃ­Äek <strong>mcp</strong>, kterÃ½ jsme prÃ¡vÄ› nainstalovali, nabÃ­zÃ­ moÅ¾nost
vyuÅ¾itÃ­ takzvanÃ©ho <i>MCP Inspectoru</i>, coÅ¾ je aplikace s&nbsp;webovÃ½m
grafickÃ½m uÅ¾ivatelskÃ½m rozhranÃ­m, kterou lze pouÅ¾Ã­t pro otestovÃ¡nÃ­ MCP serverÅ¯.
Tato aplikace vyÅ¾aduje instalaci <strong>npm</strong> a
<strong>node.js</strong>. Distribuce Linuxu vÄ›tÅ¡inou tyto nÃ¡stroje majÃ­ ve
svÃ½ch repositÃ¡Å™Ã­ch balÃ­ÄkÅ¯ (i kdyÅ¾ moÅ¾nÃ¡ ne nejnovÄ›jÅ¡Ã­ verze, coÅ¾ nÃ¡m ale
nemusÃ­ vadit), takÅ¾e jejich instalace je jednoduchÃ¡. Pro distribuce zaloÅ¾enÃ© na
RPM lze pouÅ¾Ã­t napÅ™Ã­klad:</p>

<pre>
$ <strong>dnf install npm</strong>
&nbsp;
$ <strong>dnf install nodejs</strong>
</pre>

<p>Pro jistotu si otestujeme, jestli jsou tyto nÃ¡stroje skuteÄnÄ›
nainstalovÃ¡ny:</p>

<pre>
$ <strong>npm --version</strong>
10.8.2
&nbsp;
&nbsp;
$ <strong>node --version</strong>
v20.18.2
</pre>

<p>V&nbsp;pÅ™Ã­padÄ›, Å¾e se vypsaly verze (mohou bÃ½t i nepatrnÄ› starÅ¡Ã­) jak
<strong>npm</strong>, tak i <strong>node.js</strong>, mÄ›lo by bÃ½t moÅ¾nÃ© <i>MCP
Inspector</i> pouÅ¾Ã­t.</p>



<p><a name="k05"></a></p>
<h2 id="k05">5. Implementace jednoduchÃ©ho MCP serveru s&nbsp;jedinÃ½m definovanÃ½m zdrojem</h2>

<p>Pokusme se nynÃ­ naprogramovat nÄ›jakÃ½ velmi jednoduchÃ½ MCP server,
tj.&nbsp;sluÅ¾bu, kterÃ¡ dokÃ¡Å¾e komunikovat s&nbsp;klienty prÃ¡vÄ› pÅ™es protokol
MCP. V&nbsp;tomto serveru je definovÃ¡n pouze jedinÃ½ zdroj (<i>resource</i>)
nazvanÃ½ <strong>pozdrav</strong>, jenÅ¾ je implementovÃ¡n pomocÃ­ bÄ›Å¾nÃ©
PythonovskÃ© funkce s&nbsp;dekorÃ¡torem. JednÃ¡ se o zdroj, kterÃ½ vracÃ­ konstantnÃ­
Å™etÄ›zec. SamotnÃ½ zdroj je popsÃ¡n dekorÃ¡torem <strong>@mcp.resource</strong> a
typ hodnoty, kterou zdroj vracÃ­, je odvozena na zÃ¡kladÄ› typovÃ© informace (jmÃ©no
typu za Å¡ipkou definuje typ nÃ¡vratovÃ© hodnoty funkce):</p>

<pre>
<i>"""JednoduchÃ½ MCP server s jedinÃ½m definovanÃ½m zdrojem."""</i>
&nbsp;
from mcp.server.fastmcp import FastMCP
&nbsp;
<i># konstrukce serveru</i>
mcp = FastMCP("Test")
&nbsp;
&nbsp;
<u>@mcp.resource("pozdrav://")</u>
def <strong>pozdrav</strong>() -&gt; str:
    <i>"""OdpovÄ›Ä s pozdravem."""</i>
    return f"Hello, dear client"
</pre>

<p><div class="rs-tip-major">PoznÃ¡mka: pÅ™ipomeÅˆme si, Å¾e dekorÃ¡tory jsou
internÄ› implementovÃ¡ny jako funkce vyÅ¡Å¡Ã­ho Å™Ã¡du, kterÃ© &bdquo;obalujÃ­&ldquo;
funkci, pÅ™ed kterou jsou zapsÃ¡ny &ndash; typicky pÅ™ed volÃ¡nÃ­ a za volÃ¡nÃ­ funkce
pÅ™idÃ¡vajÃ­ nÄ›jakÃ½ dalÅ¡Ã­ kÃ³d popÅ™.&nbsp;zajiÅ¡Å¥ujÃ­ vytvoÅ™enÃ­ uzÃ¡vÄ›ru
(<i>closure</i>). Pro potÅ™eby tohoto ÄlÃ¡nku nÃ¡m vÅ¡ak bude staÄit jen zÃ¡kladnÃ­
znalosti o tom, jak se dekorÃ¡tory zapisujÃ­.</div></p>



<p><a name="k06"></a></p>
<h2 id="k06">6. SpuÅ¡tÄ›nÃ­ serveru s&nbsp;jeho otestovÃ¡nÃ­m pomocÃ­ MCP Inspectoru</h2>

<p>MCP server, jehoÅ¾ zdrojovÃ½ kÃ³d jsme si ukÃ¡zali <a
href="#k05">v&nbsp;pÅ™edchozÃ­ kapitole</a>, je moÅ¾nÃ© spustit nÄ›kolika moÅ¾nÃ½mi
zpÅ¯soby. NejjednoduÅ¡Å¡Ã­ je pouÅ¾itÃ­ pÅ™Ã­kazu <strong>mcp</strong>, kterÃ©mu se
pÅ™edÃ¡ jmÃ©no zdrojovÃ©ho kÃ³du s&nbsp;implementacÃ­ serveru a popÅ™.&nbsp;i zpÅ¯sob
transportu (tedy konkrÃ©tnÃ­ho reÅ¾imu komunikace mezi klientem a serverem). OvÅ¡em
my prozatÃ­m nemÃ¡me naprogramovÃ¡n Å¾Ã¡dnÃ½ klient, takÅ¾e je nutnÃ© vyuÅ¾Ã­t nÄ›jakÃ½
jinÃ½ nÃ¡stroj pro otestovÃ¡nÃ­ naÅ¡eho serveru. TakovÃ½ nÃ¡stroj ve skuteÄnosti
existuje a jmenuje se <i>MCP Inspector</i> (ostatnÄ› jsme instalovali jeho
zÃ¡vislosti). Pro otestovÃ¡nÃ­ naÅ¡eho serveru spustÃ­me nÃ¡sledujÃ­cÃ­ pÅ™Ã­kaz (ten
oÄekÃ¡vÃ¡, Å¾e jmÃ©no zdrojovÃ©ho kÃ³du s&nbsp;implementacÃ­ MCP serveru je
<strong>mcp_server_1.py</strong>):</p>

<pre>
$ <strong>mcp dev mcp_server_1.py</strong>
</pre>

<p>PÅ™i prvnÃ­m spuÅ¡tÄ›nÃ­ (pozdÄ›ji jiÅ¾ ne) bude <strong>mcp</strong> potÅ™ebovat
doinstalovat jeden npm balÃ­Äek, takÅ¾e se zeptÃ¡, zda mÅ¯Å¾e tuto operaci spustit.
OdpovÃ­me, Å¾e ano:</p>

<pre>
Need to install the following packages:
@modelcontextprotocol/inspector@0.7.0
Ok to proceed? (y) y
</pre>

<p>DÃ¡le se vypÃ­Å¡e informace o tom, na kterÃ© adrese (vÄetnÄ› portu) je MCP
inspektor dostupnÃ½:</p>

<pre>
Starting MCP inspector...
Proxy server listening on port 3000
&nbsp;
ğŸ” MCP Inspector is up and running at http://localhost:5173 ğŸš€
</pre>

<p>Ve webovÃ©m prohlÃ­Å¾eÄi je nutnÃ© pÅ™ejÃ­t na vÃ½Å¡e vypsanou adresu <a
href="http://localhost:5173">http://localhost:5173</a>. MÄ›la by se zobrazit
strÃ¡nka, kterÃ¡ v&nbsp;levÃ© ÄÃ¡sti nabÃ­zÃ­ zpÅ¯sob pÅ™ipojenÃ­ k&nbsp;serveru.
VyplÅˆte nynÃ­ Ãºdaje tak, jak je to zobrazeno na screenshotu:</p>

*** image ***
<p><i>ObrÃ¡zek 1: Takto mÅ¯Å¾e vypadat vyplnÄ›nÃ½ dialog pro pÅ™ipojenÃ­ k&nbsp;MCP serveru.</i></p>

<p>Po stisku tlaÄÃ­tka <strong>Connect</strong> by se mÄ›l server znovu spustit
(to je ponÄ›kud neÅ¡Å¥astnÃ©) a MCP Inspector by mÄ›l zaÄÃ­t se serverem komunikovat
pÅ™es standardnÃ­ vstup a vÃ½stup (STDIO).</p>

<p>DÃ¡le v&nbsp;ÄÃ¡sti <i>Resources</i> stisknÄ›te tlaÄÃ­tko <strong>List
Resources</strong>. MÄ›l by se zobrazit seznam zdrojÅ¯, kterÃ½ obsahuje pouze
jedinou poloÅ¾ku &bdquo;pozdrav://&ldquo;, coÅ¾ je skuteÄnÄ› nÃ¡zev naÅ¡eho zdroje.
Pokud tento zdroj vyberete, provede se komunikace s&nbsp;MCP serverem a mÄ›la by
se vrÃ¡tit odpovÄ›Ä v&nbsp;JSON formÃ¡tu:</p>

<pre>
{
  "contents": [
    {
      "uri": "pozdrav://",
      "mimeType": "text/plain",
      "text": "Hello, dear client"
    }
  ]
}
</pre>

<p>TÃ­m jsme ovÄ›Å™ili nejenom to, Å¾e MCP server nabÃ­zÃ­ pÅ™Ã­sluÅ¡nÃ½ zdroj, ale Å¾e je
moÅ¾nÃ© s&nbsp;nÃ­m komunikovat s&nbsp;vyuÅ¾itÃ­m MCP.</p>



<p><a name="k07"></a></p>
<h2 id="k07">7. MCP server s&nbsp;definovanÃ½m dynamickÃ½m zdrojem (<i>resource template</i>)</h2>

<p>DruhÃ¡ varianta MCP serveru bude nepatrnÄ› sloÅ¾itÄ›jÅ¡Ã­, protoÅ¾e je v&nbsp;nÃ­ definovÃ¡n dynamickÃ½ zdroj (pÅ¯vodnÃ­ nÃ¡zev <i>resource template</i> ovÅ¡em mÅ¯Å¾e bÃ½t ponÄ›kud matoucÃ­). JednÃ¡ se o zdroj, kterÃ½ mÃ¡ ve svÃ©m nÃ¡zvu mÄ›nitelnou ÄÃ¡st <strong>name</strong>. VÃ½sledkem ÄtenÃ­ tohoto zdroje bude Å™etÄ›zec ve formÃ¡tu &bdquo;Hello, {name}&ldquo;, ve kterÃ©m se za &bdquo;{name}&ldquo; doplnÃ­ identifikÃ¡tor ze jmÃ©na zdroje. Teoreticky tedy mÅ¯Å¾eme tÃ­mto zpÅ¯sobem pÅ™edÃ¡vat MCP serveru parametry a zÃ­skÃ¡vat odpovÄ›di na zÃ¡kladÄ› tÄ›chto parametrÅ¯, i kdyÅ¾ z&nbsp;hlediska sÃ©mantiky by bylo vhodnÄ›jÅ¡Ã­ vyuÅ¾Ã­t spÃ­Å¡e nÃ¡stroje (<i>tools</i>), s&nbsp;nimÅ¾ se seznÃ¡mÃ­me v&nbsp;dalÅ¡Ã­ch kapitolÃ¡ch.</p>

<pre>
<i>"""JednoduchÃ½ MCP server s jedinÃ½m definovanÃ½m dynamickÃ½m zdrojem."""</i>
&nbsp;
from mcp.server.fastmcp import FastMCP
&nbsp;
<i># konstrukce serveru</i>
mcp = FastMCP("Test")
&nbsp;
&nbsp;
<u>@mcp.resource("pozdrav://{name}")</u>
def <strong>pozdrav</strong>(name: str) -&gt; str:
    <i>"""OdpovÄ›Ä s osobnÃ­m pozdravem."""</i>
    return f"Hello, {name}"
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>



{
  "contents": [
    {
      "uri": "pozdrav://Pavel",
      "mimeType": "text/plain",
      "text": "Hello, Pavel"
    }
  ]
}
<pre>
"""MCP server s dynamickÃ½m zdrojem a definicÃ­ nÃ¡stroje (tool)."""

from mcp.server.fastmcp import FastMCP

# konstrukce serveru
mcp = FastMCP("Test")


@mcp.tool()
def factorial(n: int) -> int:
    """VÃ½poÄet faktoriÃ¡lu ve smyÄce."""
    f = 1
    for x in range(1, n + 1):
        f *= x
    return f


@mcp.resource("pozdrav://{name}")
def pozdrav(name: str) -> str:
    """OdpovÄ›Ä s osobnÃ­m pozdravem."""
    return f"Hello, {name}"
</pre>

<pre>
"""JednoduchÃ½ MCP server s jedinÃ½m definovanÃ½m dynamickÃ½m zdrojem."""

import os
from mcp.server.fastmcp import FastMCP
from datetime import datetime

# konstrukce serveru
mcp = FastMCP("Test")

pid = os.getpid()

# pÅ™i kaÅ¾dÃ©m spuÅ¡tÄ›nÃ­ serveru se vytvoÅ™Ã­ novÃ½ soubor
with open(f"{pid}.txt", "w") as fout:
    fout.write(str(datetime.now()))


@mcp.resource("pozdrav://")
def pozdrav() -> str:
    """OdpovÄ›Ä s pozdravem."""
    return f"Hello, dear client"
</pre>

<pre>
"""MCP server se zdrojem,  dynamickÃ½m zdrojem a definicÃ­ nÃ¡stroje (tool)."""

from mcp.server.fastmcp import FastMCP

# konstrukce serveru
mcp = FastMCP("Test")


@mcp.tool()
def factorial(n: int) -> int:
    """VÃ½poÄet faktoriÃ¡lu ve smyÄce."""
    f = 1
    for x in range(1, n + 1):
        f *= x
    return f


@mcp.resource("pozdrav://")
def pozdrav1() -> str:
    """OdpovÄ›Ä s pozdravem."""
    return f"Hello, dear client"


@mcp.resource("pozdrav://{name}")
def pozdrav2(name: str) -> str:
    """OdpovÄ›Ä s osobnÃ­m pozdravem."""
    return f"Hello, {name}"


# pÅ™Ã­mÃ© spuÅ¡tÄ›nÃ­ serveru v reÅ¾imu STDIO
if __name__ == "__main__":
    mcp.run()
</pre>

<pre>
"""MCP server se zdrojem,  dynamickÃ½m zdrojem a definicÃ­ nÃ¡stroje (tool)."""

from mcp.server.fastmcp import FastMCP

# konstrukce serveru
mcp = FastMCP("Test")


@mcp.tool()
def factorial(n: int) -> int:
    """VÃ½poÄet faktoriÃ¡lu ve smyÄce."""
    f = 1
    for x in range(1, n + 1):
        f *= x
    return f


@mcp.resource("pozdrav://")
def pozdrav1() -> str:
    """OdpovÄ›Ä s pozdravem."""
    return f"Hello, dear client"


@mcp.resource("pozdrav://{name}")
def pozdrav2(name: str) -> str:
    """OdpovÄ›Ä s osobnÃ­m pozdravem."""
    return f"Hello, {name}"


# pÅ™Ã­mÃ© spuÅ¡tÄ›nÃ­ serveru v reÅ¾imu SSE (Server-Sent Events)
if __name__ == "__main__":
    mcp.run(transport="sse")
</pre>

<pre>
"""MCP klient, kterÃ½ spustÃ­ server, se kterÃ½m se komunikuje pÅ™es STDIO."""

from mcp import ClientSession, StdioServerParameters, types
from mcp.client.stdio import stdio_client

# parametry pro spuÅ¡tÄ›nÃ­ MCP serveru
server_params = StdioServerParameters(
    command="python",  # spustÃ­ se tento pÅ™Ã­kaz
    args=["mcp_server_5.py"],  # a pÅ™edajÃ­ se mu nÃ¡sledujÃ­cÃ­ parametry
    env=None,  # lze definovat i promÄ›nnÃ© prostÅ™edÃ­
)


async def run():
    """Realizace klienta."""
    async with stdio_client(server_params) as (read, write):
        async with ClientSession(read, write) as session:
            await session.initialize()

            prompts = await session.list_prompts()
            print(prompts)

            resources = await session.list_resources()
            print(resources)

            templates = await session.list_resource_templates()
            print(templates)

            tools = await session.list_tools()
            print(tools)


# pÅ™Ã­mÃ© spuÅ¡tÄ›nÃ­ klienta
if __name__ == "__main__":
    import asyncio

    asyncio.run(run())
</pre>

<pre>
"""MCP klient, kterÃ½ spustÃ­ server, se kterÃ½m se komunikuje pÅ™es SSE."""

from mcp import ClientSession, types
from mcp.client.sse import sse_client


async def run():
    """Realizace klienta."""
    async with sse_client(url="http://localhost:8000/sse") as (read, write):
        async with ClientSession(read, write) as session:
            await session.initialize()

            prompts = await session.list_prompts()
            print(prompts)

            resources = await session.list_resources()
            print(resources)

            templates = await session.list_resource_templates()
            print(templates)

            tools = await session.list_tools()
            print(tools)


# pÅ™Ã­mÃ© spuÅ¡tÄ›nÃ­ klienta
if __name__ == "__main__":
    import asyncio

    asyncio.run(run())
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. RepositÃ¡Å™ s&nbsp;demonstraÄnÃ­mi pÅ™Ã­klady</h2>

<p>ZdrojovÃ© kÃ³dy vÅ¡ech prozatÃ­m popsanÃ½ch demonstraÄnÃ­ch pÅ™Ã­kladÅ¯ urÄenÃ½ch pro
Python a balÃ­Äek <a
href="https://github.com/modelcontextprotocol/python-sdk">mcp</a> byly uloÅ¾eny
do repositÃ¡Å™e dostupnÃ©ho na adrese <a
href="https://github.com/tisnik/most-popular-python-libs">https://github.com/tisnik/most-popular-python-libs</a>.
V&nbsp;tabulce zobrazenÃ© nÃ­Å¾e jsou odkazy na jednotlivÃ© pÅ™Ã­klady:</p>

<table>
<tr><th> #</th><th>DemonstraÄnÃ­ pÅ™Ã­klad</th><th>StruÄnÃ½ popis pÅ™Ã­kladu</th><th>Cesta</th></tr>
<tr><td> 1</td><td>mcp_server_1.py</td><td>jednoduchÃ½ MCP server s&nbsp;jedinÃ½m definovanÃ½m zdrojem</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_1.py</a></td></tr>
<tr><td> 2</td><td>mcp_server_2.py</td><td>jednoduchÃ½ MCP server s&nbsp;jedinÃ½m definovanÃ½m dynamickÃ½m zdrojem</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_2.py</a></td></tr>
<tr><td> 3</td><td>mcp_server_3.py</td><td>MCP server s&nbsp;dynamickÃ½m zdrojem a definicÃ­ nÃ¡stroje (tool)</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_3.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_3.py</a></td></tr>
<tr><td> 4</td><td>mcp_server_4.py</td><td>MCP server s jedinÃ½m definovanÃ½m dynamickÃ½m zdrojem, zÃ¡pis informacÃ­ o spuÅ¡tÄ›nÃ­</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_4.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_4.py</a></td></tr>
<tr><td> 5</td><td>mcp_server_5.py</td><td>MCP server, kterÃ½ se pÅ™Ã­mo spustÃ­ v&nbsp;reÅ¾imu STDIO</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_5.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_5.py</a></td></tr>
<tr><td> 6</td><td>mcp_server_6.py</td><td>MCP server, kterÃ½ se pÅ™Ã­mo spustÃ­ v&nbsp;reÅ¾imu SSE</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_6.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_server_6.py</a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td> 7</td><td>mcp_client_1.py</td><td>MCP klient, kterÃ½ spustÃ­ server, se kterÃ½m se komunikuje pÅ™es STDIO</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_1.py</a></td></tr>
<tr><td> 8</td><td>mcp_client_2.py</td><td>MCP klient, kterÃ½ spustÃ­ server, se kterÃ½m se komunikuje pÅ™es SSE</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_2.py</a></td></tr>
<tr><td> 9</td><td>mcp_client_3.py</td><td>MCP klient, kterÃ½ pÅ™eÄte zvolenÃ½ zdroj</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_3.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_3.py</a></td></tr>
<tr><td>10</td><td>mcp_client_4.py</td><td>MCP klient, kterÃ½ pÅ™eÄte zvolenÃ½ zdroj a zÃ­skÃ¡ z&nbsp;nÄ›j data</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_4.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_4.py</a></td></tr>
<tr><td>11</td><td>mcp_client_5.py</td><td>MCP klient, kterÃ½ zavolÃ¡ vybranÃ½ nÃ¡stroj</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_5.py">https://github.com/tisnik/most-popular-python-libs/blob/master/mcp/mcp_client_5.py</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>MCP Python SDK<br />
<a href="https://github.com/modelcontextprotocol/python-sdk?tab=readme-ov-file#running-your-server">https://github.com/modelcontextprotocol/python-sdk?tab=readme-ov-file#running-your-server</a>
</li>

<li>MCP protocol: Resources<br />
<a href="https://modelcontextprotocol.info/docs/concepts/resources/">https://modelcontextprotocol.info/docs/concepts/resources/</a>
</li>

<li>Example Servers<br />
<a href="https://modelcontextprotocol.io/examples">https://modelcontextprotocol.io/examples</a>
</li>

<li>Core architecture<br />
<a href="https://modelcontextprotocol.io/docs/concepts/architecture">https://modelcontextprotocol.io/docs/concepts/architecture</a>
</li>

<li>Unleashing the Power of Model Context Protocol (MCP): A Game-Changer in AI Integration<br />
<a href="https://techcommunity.microsoft.com/blog/educatordeveloperblog/unleashing-the-power-of-model-context-protocol-mcp-a-game-changer-in-ai-integrat/4397564">https://techcommunity.microsoft.com/blog/educatordeveloperblog/unleashing-the-power-of-model-context-protocol-mcp-a-game-changer-in-ai-integrat/4397564</a>
</li>

<li>MPC inspector<br />
<a href="https://github.com/modelcontextprotocol/inspector">https://github.com/modelcontextprotocol/inspector</a>
</li>

<li>Model Context Protocol servers<br />
<a href="https://github.com/modelcontextprotocol/servers">https://github.com/modelcontextprotocol/servers</a>
</li>

<li>python-sdk na GitHubu<br />
<a href="https://github.com/modelcontextprotocol/python-sdk">https://github.com/modelcontextprotocol/python-sdk</a>
</li>

<li>typescript-sdk na GitHubu<br />
<a href="https://github.com/modelcontextprotocol/typescript-sdk">https://github.com/modelcontextprotocol/typescript-sdk</a>
</li>

<li>mcp-golang<br />
<a href="https://github.com/metoro-io/mcp-golang">https://github.com/metoro-io/mcp-golang</a>
</li>

<li>MCP server: A step-by-step guide to building from scratch<br />
<a href="https://composio.dev/blog/mcp-server-step-by-step-guide-to-building-from-scrtch/">https://composio.dev/blog/mcp-server-step-by-step-guide-to-building-from-scrtch/</a>
</li>

<li>How to Build an MCP Server Fast: A Step-by-Step Tutorial<br />
<a href="https://medium.com/@eugenesh4work/how-to-build-an-mcp-server-fast-a-step-by-step-tutorial-e09faa5f7e3b">https://medium.com/@eugenesh4work/how-to-build-an-mcp-server-fast-a-step-by-step-tutorial-e09faa5f7e3b</a>
</li>

<li>Step-by-Step Guide: Building an MCP Server using Python-SDK, AlphaVantage &amp; Claude AI<br />
<a href="https://medium.com/@syed_hasan/step-by-step-guide-building-an-mcp-server-using-python-sdk-alphavantage-claude-ai-7a2bfb0c3096">https://medium.com/@syed_hasan/step-by-step-guide-building-an-mcp-server-using-python-sdk-alphavantage-claude-ai-7a2bfb0c3096</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="https://github.com/tisnik/">Pavel TiÅ¡novskÃ½</a> &nbsp; 2024</small></p>
</body>
</html>

