<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>FAISS: knihovna pro rychl√© a efektivn√≠ vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø</title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1>FAISS: knihovna pro rychl√© a efektivn√≠ vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø</h1>

<h3>Pavel Ti≈°novsk√Ω</h3>

<p></p>

<h1>√övodn√≠k</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">1. FAISS: knihovna pro rychl√© a efektivn√≠ vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø</a></p>
<p><a href="#k02">2. Svƒõt vektorov√Ωch datab√°z√≠</a></p>
<p><a href="#k03">3. Je FAISS vektorovou datab√°z√≠?</a></p>
<p><a href="#k04">4. ≈òe≈°en√Ω probl√©m: nalezen√≠ nejbli≈æ≈°√≠ch <i>k</i> bod≈Ø k&nbsp;zadan√Ωm sou≈ôadnic√≠m</a></p>
<p><a href="#k05">5. P≈ô√≠prava projektu</a></p>
<p><a href="#k06">6. Instalace bal√≠ƒçk≈Ø <strong>faiss-cpu</strong> a <strong>numpy</strong> do virtu√°ln√≠ho prost≈ôed√≠</a></p>
<p><a href="#k07">7. Definice sou≈ôadnic bod≈Ø v&nbsp;rovinƒõ</a></p>
<p><a href="#k08">*** 8. Konstrukce matice se sou≈ôadnicemi bod≈Ø</a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Reposit√°≈ô s&nbsp;demonstraƒçn√≠mi p≈ô√≠klady</a></p>
<p><a href="#k20">20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. FAISS: knihovna pro rychl√© a efektivn√≠ vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø</h2>

<p>V&nbsp;souƒçasnosti m≈Ø≈æeme sledovat pomƒõrnƒõ v√Ωrazn√© a st√°le ƒçastƒõj≈°√≠
nasazov√°n√≠ vektorov√Ωch datab√°z√≠. Jedn√° se (vƒõt≈°inou) o specializovan√© datab√°ze,
kter√© umo≈æ≈àuj√≠ ukl√°dat vektory numerick√Ωch hodnot a p≈ôedev≈°√≠m efektivnƒõ
vyhled√°vat vektory podle jejich podobnosti (nap≈ô√≠klad se zadan√Ωm vzorem),
p≈ôiƒçem≈æ <i>podobnost√≠</i> m≈Ø≈æe b√Ωt v&nbsp;tomto kontextu my≈°lena nap≈ô√≠klad
vzd√°lenost koncov√Ωch bod≈Ø vektor≈Ø v&nbsp;Eukleidovsk√©m prostoru, kosinus √∫hlu
mezi vektory, v√Ωsledek skal√°rn√≠ho souƒçinu (pro normalizovan√© vektory) atd.</p>

<p>Tyto operace se pou≈æ√≠vaj√≠ v&nbsp;mnoha oblastech, nap≈ô√≠klad p≈ôi rozpozn√°v√°n√≠
a zpracov√°n√≠ p≈ôirozen√©ho jazyka (<i>NLP &ndash; Natural Language
Processing</i>), p≈ôi rozpozn√°v√°n√≠ obr√°zk≈Ø, rozpozn√°v√°n√≠ hlas≈Ø, detekci
anom√°li√≠, ale i (a to zejm√©na) v&nbsp;souvislosti s&nbsp;velk√Ωmi jazykov√Ωmi
modely (k&nbsp;tomuto t√©matu se je≈°tƒõ vr√°t√≠me v&nbsp;samostatn√©m ƒçl√°nku).</p>

<p><div class="rs-tip-major">Pozn√°mka: do t√©to kategorie spadaj√≠ i RAG
datab√°ze.</div></p>

<p>Na str√°nk√°ch Roota jsme se ji≈æ v&nbsp;ƒçl√°nku <a
href="https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/">pgvector:
vektorov√° datab√°ze postaven√° na Postgresu</a> sezn√°mili s&nbsp;vektorovou
datab√°z√≠ <strong>pgvector</strong>, kter√° je postavena nad Postgresem. Dnes si
pop√≠≈°eme z√°kladn√≠ vlastnosti knihovny nazvan√© <strong>FAISS</strong>, co≈æ je
jm√©no, kter√© vzniklo ze souslov√≠ <i>Facebook AI Similarity Search</i> (ov≈°em
tato knihovna se pou≈æ√≠v√° i v&nbsp;mnoha projektech, kter√© nemaj√≠
s&nbsp;Facebookem nebo Metou cokoli spoleƒçn√©ho). FAISS je ≈°√≠≈ôena pod MIT
licenc√≠, co≈æ umo≈æ≈àuje jej√≠ relativnƒõ snadn√© za≈ôazen√≠ do dal≈°√≠ch projekt≈Ø.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. Svƒõt vektorov√Ωch datab√°z√≠</h2>

<p>S&nbsp;rozvojem syst√©m≈Ø urƒçen√Ωch pro zpracov√°n√≠ p≈ôirozen√©ho jazyka i
generativn√≠ch AI (zejm√©na velk√Ωch jazykov√Ωch model≈Ø) do≈°lo i k&nbsp;velk√©mu
rozmachu vektorov√Ωch datab√°z√≠. Dnes jich existuje minim√°lnƒõ nƒõkolik des√≠tek
(pokud poƒç√≠t√°me ty nejzn√°mƒõj≈°√≠ a/nebo ve≈ôejnƒõ dostupn√©), ov≈°em sp√≠≈°e jich bude
nƒõkolik set.</p>

<p>V&nbsp;tabulce pod t√≠mto odstavcem jsou vyps√°ny ty nejzn√°mƒõj≈°√≠ vektorov√©
datab√°ze, kter√© pochopitelnƒõ maj√≠ rozd√≠ln√© vlastnosti a ka≈æd√° z&nbsp;nich se
hod√≠ pro jin√© zp≈Øsoby nasazen√≠:</p>

<table>
<tr><td>Aerospike</td></tr>
<tr><td>AllegroGraph</td></tr>
<tr><td>Apache Cassandra</td></tr>
<tr><td>Azure Cosmos DB</td></tr>
<tr><td>Chroma</td></tr>
<tr><td>ClickHouse</td></tr>
<tr><td>Couchbase</td></tr>
<tr><td>CrateDB</td></tr>
<tr><td>DataStax</td></tr>
<tr><td>Elasticsearch</td></tr>
<tr><td>HAKES</td></tr>
<tr><td>HDF5 Query Indexing</td></tr>
<tr><td>JaguarDB</td></tr>
<tr><td>LanceDB</td></tr>
<tr><td>Lantern</td></tr>
<tr><td>LlamaIndex</td></tr>
<tr><td>MariaDB</td></tr>
<tr><td>Marqo</td></tr>
<tr><td>Meilisearch</td></tr>
<tr><td>Milvus</td></tr>
<tr><td>MongoDB Atlas</td></tr>
<tr><td>Neo4j</td></tr>
<tr><td>ObjectBox</td></tr>
<tr><td>OpenSearch</td></tr>
<tr><td>Oracle Database</td></tr>
<tr><td>Pinecone</td></tr>
<tr><td>Pixeltable (Incremental Embedding)</td></tr>
<tr><td>Postgres with pgvector</td></tr>
<tr><td>Qdrant</td></tr>
<tr><td>Redis Stack</td></tr>
<tr><td>Snowflake</td></tr>
<tr><td>SurrealDB</td></tr>
<tr><td>Typesense</td></tr>
<tr><td>Vespa</td></tr>
<tr><td>Weaviate</td></tr>
</table>



<p><a name="k03"></a></p>
<h2 id="k03">3. Je FAISS vektorovou datab√°z√≠?</h2>

<p>V&nbsp;nƒõkter√Ωch ƒçl√°nc√≠ch se m≈Ø≈æeme doƒç√≠st, ≈æe FAISS je vektorovou datab√°z√≠.
Ov≈°em to ve skuteƒçnosti nen√≠ pravda, proto≈æe FAISS &bdquo;pouze&ldquo;
poskytuje algoritmy urƒçen√© pro efektivn√≠ vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø a pro
jejich shlukov√°n√≠ (<i>clustering</i>). Ne≈ôe≈°√≠ ov≈°em probl√©m ulo≈æen√≠ vektor≈Ø
v&nbsp;nƒõjak√©m strukturovan√©m form√°tu. Naopak, nƒõkter√© skuteƒçn√© vektorov√©
datab√°ze, mezi kter√© pat≈ô√≠ nap≈ô√≠klad <i>Milvus</i> nebo <i>OpenSearch</i>,
vyu≈æ√≠vaj√≠ FAISS pro vyhled√°v√°n√≠, ov≈°em zp≈Øsob ulo≈æen√≠ a naƒç√≠t√°n√≠ vektor≈Ø ≈ôe≈°√≠
ve sv√© vlastn√≠ re≈æii.</p>

<p><div class="rs-tip-major">Pozn√°mka: na druhou stranu je v≈°ak efektivn√≠
vyhled√°v√°n√≠ podobn√Ωch vektor≈Ø √∫st≈ôedn√≠m prvkem mnoha syst√©m≈Ø s&nbsp;AI, tak≈æe
volba vhodn√© knihovny pro tyto operace b√Ωv√° mnohem d≈Øle≈æitƒõj≈°√≠, ne≈æ vlastn√≠
zp≈Øsob ulo≈æen√≠ vektor≈Ø v&nbsp;datab√°zi. Je tomu tak z&nbsp;toho d≈Øvodu, ≈æe
vektory maj√≠ velk√Ω poƒçet dimenz√≠ (i nƒõkolik tis√≠c) a samotn√Ωch vektor≈Ø m≈Ø≈æe b√Ωt
nƒõkolik milion≈Ø, i v√≠ce. Volba optim√°ln√≠ho algoritmu (a pop≈ô.&nbsp;proveden√≠
v√Ωpoƒçt≈Ø na GPU) je tedy v&nbsp;takov√Ωch p≈ô√≠padech kritick√°.</div></p>



<p><a name="k04"></a></p>
<h2 id="k04">4. ≈òe≈°en√Ω probl√©m: nalezen√≠ nejbli≈æ≈°√≠ch <i>k</i> bod≈Ø k&nbsp;zadan√Ωm sou≈ôadnic√≠m</h2>

<p>V&nbsp;navazuj√≠c√≠m kapitol√°ch se s&nbsp;vyu≈æit√≠m knihovny <i>FAISS</i>
pokus√≠me vy≈ôe≈°it n√°sleduj√≠c√≠ probl√©m: v&nbsp;2D prostoru m√°me patn√°ct bod≈Ø a
budeme cht√≠t naj√≠t <i>k</i> bod≈Ø, kter√© jsou nebl√≠≈æe k&nbsp;zadan√Ωm
sou≈ôadnic√≠m. Pokud bude <i>k=1</i>, tak budeme cht√≠t nal√©zt nejbli≈æ≈°√≠ bod atd.
Body jsou p≈ôitom v&nbsp;rovinƒõ rozm√≠stƒõny n√°sleduj√≠c√≠m zp≈Øsobem a u vybran√Ωch
bod≈Ø jsou zaps√°ny i jejich sou≈ôadnice:</p>

<pre>
                                       ‚îÇ y
                                       ‚îÇ
                                       ‚îÇ
                                       ‚îÇ
                                       ‚îÇ                [5,5]
                     o       o         ‚îÇ          o   o   o
                                       ‚îÇ          o   o   o
                         o             ‚îÇ          o   o   o
                      [-4,3]           ‚îÇ        [3,3]   [5,3]
                                       ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ[0,0]‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                                       ‚îÇ                                       x
                                       ‚îÇ              o
                                       ‚îÇ
                                       ‚îÇ          o       o
                                       ‚îÇ                [5,-5]
                                       ‚îÇ
                                       ‚îÇ
                                       ‚îÇ
                                       ‚îÇ
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. P≈ô√≠prava projektu</h2>

<p>V&nbsp;prvn√≠m kroku si p≈ôiprav√≠me projekt v&nbsp;Pythonu a n√°slednƒõ do nƒõj
nainstalujeme v≈°echny pot≈ôebn√© knihovny. Pro vytvo≈ôen√≠ projektu pou≈æijeme
n√°stroj <i>PDM</i> &ndash; viz t√©≈æ <a
href="https://www.root.cz/clanky/pdm-moderni-spravce-balicku-a-virtualnich-prostredi-pythonu/">PDM:
modern√≠ spr√°vce bal√≠ƒçk≈Ø a virtu√°ln√≠ch prost≈ôed√≠ Pythonu</a>. Projekt bude
vytvo≈ôen v&nbsp;nov√©m (p≈Øvodnƒõ pr√°zdn√©m) adres√°≈ôi:</p>

<pre>
$ <strong>mkdir faiss-demo</strong>
$ <strong>cd faiss-demo</strong>
</pre>

<p>N√°slednƒõ si nech√°me vytvo≈ôit projektov√Ω soubor nazvan√Ω
<strong>pyproject.toml</strong>. Na v≈°echny odpovƒõdi kladen√© n√°strojem PDM
m≈Ø≈æeme s&nbsp;klidem odpovƒõdƒõt jen kl√°vesou Enter:</p>

<pre>
$ <strong>pdm init</strong>
&nbsp;
Creating a pyproject.toml for PDM...
Please enter the Python interpreter to use
 0. cpython@3.12 (/usr/bin/python)
 1. cpython@3.13 (/usr/bin/python3.13)
 2. cpython@3.12 (/usr/bin/python3.12)
 3. cpython@3.11 (/usr/bin/python3.11)
Please select (0):
&nbsp;
&nbsp;
Virtualenv is created successfully at /tmp/ramdisk/faiss-demo/.venv
Project name (faiss-demo): Project version (0.1.0): Do you want to build this project for distribution(such as wheel)?
If yes, it will be installed by default when running `pdm install`. [y/n] (n):
License(SPDX name) (MIT):
Author name (Pavel Tisnovsky):
Author email (tisnik@nikdo.nikde.com):
Python requires('*' to allow any) (==3.12.*):
Project is initialized successfully
</pre>

<p>V√Ωsledn√Ω projektov√Ω soubor <strong>pyproject.toml</strong> by mƒõl vypadat
n√°sledovnƒõ (samoz≈ôejmƒõ kromƒõ jm√©na, mailu a zvolen√© verze Pythonu):</p>

<pre>
[project]
name = "faiss-demo"
version = "0.1.0"
description = "Default template for PDM package"
authors = [
    {name = "Pavel Tisnovsky", email = "tisnik@nikdo.nikde.com"},
]
dependencies = []
requires-python = "==3.12.*"
readme = "README.md"
license = {text = "MIT"}
&nbsp;
&nbsp;
[tool.pdm]
distribution = false
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. Instalace bal√≠ƒçk≈Ø <strong>faiss-cpu</strong> a <strong>numpy</strong> do virtu√°ln√≠ho prost≈ôed√≠</h2>

<p>Ve druh√©m kroku do virtu√°ln√≠ho prost≈ôed√≠ vytvo≈ôen√©ho pro nov√Ω projekt
p≈ôid√°me dva bal√≠ƒçky &ndash; <strong>faiss-cpu</strong> a
<strong>numpy</strong>.  Druh√Ω z&nbsp;bal√≠ƒçk≈Ø byl p≈ôid√°n z&nbsp;toho d≈Øvodu,
abychom mohli tvo≈ôit vektory, s&nbsp;nimi≈æ bude <strong>faiss</strong>
pracovat:</p>

<pre>
$ <strong>pdm add faiss-cpu numpy</strong>
&nbsp;
Adding packages to default dependencies: faiss-cpu, numpy
  0:00:03 üîí Lock successful.
Changes are written to pyproject.toml.
Synchronizing working set with resolved packages: 3 to add, 0 to update, 0 to remove
&nbsp;
  ‚úî Install packaging 25.0 successful
  ‚úî Install numpy 2.3.1 successful
  ‚úî Install faiss-cpu 1.11.0 successful
&nbsp;
  0:00:05 üéâ All complete! 3/3
</pre>

<p>Projektov√Ω soubor nyn√≠ vypad√° n√°sledovnƒõ:</p>

<pre>
[project]
name = "faiss-demo"
version = "0.1.0"
description = "Default template for PDM package"
authors = [
    {name = "Pavel Tisnovsky", email = "ptisnovs@redhat.com"},
]
dependencies = ["faiss-cpu&gt;=1.11.0", "numpy&gt;=2.3.1"]
requires-python = "==3.12.*"
readme = "README.md"
license = {text = "MIT"}
&nbsp;
&nbsp;
[tool.pdm]
distribution = false
</pre>

<p>Ovƒõ≈ô√≠me si, zda je modul <strong>faiss</strong> skuteƒçnƒõ dostupn√Ω:</p>

<pre>
$ <strong>pdm run </strong>
&nbsp;
WARNING: No command is given, default to the Python REPL.
Python 3.12.10 (main, Apr 22 2025, 00:00:00) [GCC 14.2.1 20240912 (Red Hat 14.2.1-3)] on linux
Type "help", "copyright", "credits" or "license" for more information.
&nbsp;
&gt;&gt;&gt; <strong>import faiss</strong>
&gt;&gt;&gt; <strong>help(faiss)</strong>
</pre>

<p>Mƒõla by se zobrazit n√°povƒõda:</p>

<pre>
Help on package faiss:
&nbsp;
NAME
    faiss
&nbsp;
DESCRIPTION
    # Copyright (c) Facebook, Inc. and its affiliates.
    #
    # This source code is licensed under the MIT license found in the
    # LICENSE file in the root directory of this source tree.
&nbsp;
PACKAGE CONTENTS
    _swigfaiss
    _swigfaiss_avx2
    _swigfaiss_avx512
    array_conversions
    class_wrappers
    contrib (package)
    extra_wrappers
    gpu_wrappers
    loader
    setup
    swigfaiss
    swigfaiss_avx2
    swigfaiss_avx512
&nbsp;
CLASSES
</pre>



<p><a name="k07"></a></p>
<h2 id="k07">7. Definice sou≈ôadnic bod≈Ø v&nbsp;rovinƒõ</h2>

<p>Sou≈ôadnice bod≈Ø um√≠stƒõn√Ωch v&nbsp;rovinƒõ (viz <a href="#k04">ƒçtvrtou
kapitolu</a> s&nbsp;jejich vizualizac√≠) je mo≈æn√© ulo≈æit do bƒõ≈æn√Ωch
Pythonovsk√Ωch seznam≈Ø nebo do n-tic. Bod≈Ø je celkem patn√°ct a sou≈ôadnice
v&nbsp;rovinƒõ maj√≠ jen dvƒõ dimenze, tak≈æe reprezentace sou≈ôadnice je
v&nbsp;tomto p≈ô√≠padƒõ snadn√°:</p>

<pre>
<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,    3, 3, 3, 4, 4, 4, 5, 5, 5]
&nbsp;
<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,    3, 4, 5, 3, 4, 5, 3, 4, 5]
</pre>

<p><div class="rs-tip-major">Pozn√°mka: vizu√°lnƒõ (mezerami) jsou oddƒõleny
jednotliv√© kvadranty, do nich≈æ jsou body um√≠stƒõny.</div></p>



<p><a name="k08"></a></p>
<h2 id="k08">8. Konstrukce matice se sou≈ôadnicemi bod≈Ø</h2>

<p></p>

<pre>
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>

<p></p>

<pre>
import faiss
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)

<i># konstrukce indexu pro vyhledavani na zaklade vzdalenosti</i>
index = faiss.IndexFlatL2(2)
index.add(points)

print()
print("Dimension(s):         ", index.d)
print("Total values in index:", index.ntotal)
print("Is index trained:     ", index.is_trained)
</pre>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>

<p></p>

<pre>
import faiss
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)

<i># konstrukce indexu pro vyhledavani na zaklade vzdalenosti</i>
index = faiss.IndexFlatL2(2)
index.add(points)

print()
print("Dimension(s):         ", index.d)
print("Total values in index:", index.ntotal)
print("Is index trained:     ", index.is_trained)

<i># vektor, ke kteremu budeme pocitat vzdalenost</i>
query_vector = np.array([[3, 3]]).astype("float32")
print(query_vector)

<i># pocet nejblizsich bodu</i>
k = len(x)
distances, indices = index.search(query_vector, k)

<i># tisk vysledku</i>
print("Nearest neighbors:")
print("neighbour  distance  index")
print("--------------------------")
for i in range(k):
    print(f"{i+1:3}      {distances[0][i]:5}       {indices[0][i]:2}")
</pre>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>

<p></p>

<pre>
import faiss
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)

<i># konstrukce indexu pro vyhledavani na zaklade vzdalenosti</i>
index = faiss.IndexFlatL2(2)
index.add(points)

print()
print("Dimension(s):         ", index.d)
print("Total values in index:", index.ntotal)
print("Is index trained:     ", index.is_trained)

<i># vektor, ke kteremu budeme pocitat vzdalenost</i>
query_vector = np.array([[3, 3]]).astype("float32")
print(query_vector)

<i># pocet nejblizsich bodu</i>
k = len(x)
distances, indices = index.search(query_vector, k)

<i># tisk vysledku</i>
print("Nearest neighbors:")
print("neighbour  distance  coordinates  ")
print("----------------------------------")
for i in range(k):
    print(f"{i+1:3}      {distances[0][i]:5}       {points[indices[0][i]]}")
</pre>



<p><a name="k11"></a></p>
<h2 id="k11">11. Volba metriky pou≈æ√≠van√© p≈ôi v√Ωpoƒçtech nejbli≈æ≈°√≠ch bod≈Ø</h2>

<p></p>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>

<p></p>

<pre>
import faiss
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)

<i># konstrukce indexu pro vyhledavani na zaklade vzdalenosti</i>
index = faiss.IndexFlatIP(2)
index.add(points)

print()
print("Dimension(s):         ", index.d)
print("Total values in index:", index.ntotal)
print("Is index trained:     ", index.is_trained)

<i># vektor, ke kteremu budeme pocitat vzdalenost</i>
query_vector = np.array([[3, 3]]).astype("float32")
print(query_vector)

<i># pocet nejblizsich bodu</i>
k = len(x)
distances, indices = index.search(query_vector, k)

<i># tisk vysledku</i>
print("Nearest neighbors:")
print("neighbour  distance  coordinates  ")
print("----------------------------------")
for i in range(k):
    print(f"{i+1:3}      {distances[0][i]:5}       {points[indices[0][i]]}")
</pre>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>

<p></p>

<pre>
import faiss
import numpy as np

<i># x-ove souradnice bodu v rovine</i>
x = [-5, -4, -3,    3,  4,  5,   3, 3, 3,  4, 4, 4,  5, 5, 5]

<i># y-ove souradnice bodu v rovine</i>
y = [ 5,  3,  5,   -5, -3, -5,   3, 4, 5,  3, 4, 5,  3, 4, 5]

<i># konstrukce 2D matice, v niz kazdy radek obsahuje souradnice jednoho bodu v</i>
<i># rovine</i>
points = np.column_stack((x,y)).astype("float32")
print(points)

<i># normalizace</i>
for i in range(len(points)):
   vector = points[i]
   normalized = np.linalg.norm(vector)
   vector /= normalized
   points[i] = vector

print()
print("Normalized:")
print(points)

<i># konstrukce indexu pro vyhledavani na zaklade vzdalenosti</i>
index = faiss.IndexFlatIP(2)
index.add(points)

print()
print("Dimension(s):         ", index.d)
print("Total values in index:", index.ntotal)
print("Is index trained:     ", index.is_trained)

<i># vektor, ke kteremu budeme pocitat vzdalenost</i>
query_vector = np.array([[3, 3]]).astype("float32")
normalized = np.linalg.norm(query_vector)
query_vector /= normalized
print(query_vector)

<i># pocet nejblizsich bodu</i>
k = len(x)
distances, indices = index.search(query_vector, k)

<i># tisk vysledku</i>
print("Nearest neighbors:")
print("neighbour  distance  coordinates  ")
print("----------------------------------")
for i in range(k):
    print(f"{i+1:3}      {distances[0][i]:+7.4f}     {points[indices[0][i]]}")
</pre>



<p><a name="k14"></a></p>
<h2 id="k14">14. Rychlost vyhled√°n√≠ nejbli≈æ≈°√≠ch bod≈Ø</h2>

<p></p>



<p><a name="k15"></a></p>
<h2 id="k15">15. Jednoduch√Ω benchmark</h2>

<p></p>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>

<p></p>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>

<p></p>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>

<p></p>



<p><a name="k19"></a></p>
<h2 id="k19">19. Reposit√°≈ô s&nbsp;demonstraƒçn√≠mi p≈ô√≠klady</h2>

<p>Demonstraƒçn√≠ p≈ô√≠klady vytvo≈ôen√© v&nbsp;Pythonu a popsan√© v&nbsp;dne≈°n√≠m
ƒçl√°nku najdete v&nbsp;reposit√°≈ôi <a
href="https://github.com/tisnik/most-popular-python-libs/">https://github.com/tisnik/most-popular-python-libs/</a>.
N√°sleduj√≠ odkazy na jednotliv√© p≈ô√≠klady:</p>

<table>
<tr><th>#</th><th>P≈ô√≠klad</th><th>Struƒçn√Ω popis</th><th>Adresa</th></tr>
<tr><td>1</td><td>faiss-1.py</td><td>konstrukce matice se sou≈ôadnicemi bod≈Ø</td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-1.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-1.py</a></td></tr>
<tr><td>2</td><td>faiss-2.py</td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-2.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-2.py</a></td></tr>
<tr><td>3</td><td>faiss-3.py</td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-3.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-3.py</a></td></tr>
<tr><td>4</td><td>faiss-4.py</td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-4.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-4.py</a></td></tr>
<tr><td>5</td><td>faiss-5.py</td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-5.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-5.py</a></td></tr>
<tr><td>6</td><td>faiss-6.py</td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-6.py">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/faiss-6.py</a></td></tr>
<tr><td>7</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/</a></td></tr>
<tr><td>8</td><td></td><td></td><td><a href="https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/">https://github.com/tisnik/most-popular-python-libs/blob/master/faiss/</a></td></tr>
</table>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>FAISS (Facebook AI Similarity Search)<br />
<a href="https://en.wikipedia.org/wiki/FAISS">https://en.wikipedia.org/wiki/FAISS</a>
</li>

<li>FAISS documentation<br />
<a href="https://faiss.ai/">https://faiss.ai/</a>
</li>

<li>Introduction to Facebook AI Similarity Search (Faiss)<br />
<a href="https://www.pinecone.io/learn/series/faiss/faiss-tutorial/">https://www.pinecone.io/learn/series/faiss/faiss-tutorial/</a>
</li>

<li>Faiss: Efficient Similarity Search and Clustering of Dense Vectors<br />
<a href="https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235">https://medium.com/@pankaj_pandey/faiss-efficient-similarity-search-and-clustering-of-dense-vectors-dace1df1e235</a>
</li>

<li>Top 8 Vector Databases in 2025: Features, Use Cases, and Comparisons<br />
<a href="https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/">https://synapsefabric.com/top-8-vector-databases-in-2025-features-use-cases-and-comparisons/</a>
</li>

<li>Is FAISS a Vector Database? Complete Guide<br />
<a href="https://mljourney.com/is-faiss-a-vector-database-complete-guide/">https://mljourney.com/is-faiss-a-vector-database-complete-guide/</a>
</li>

<li>Vector database<br />
<a href="https://en.wikipedia.org/wiki/Vector_database">https://en.wikipedia.org/wiki/Vector_database</a>
</li>

<li>Similarity search<br />
<a href="https://en.wikipedia.org/wiki/Similarity_search">https://en.wikipedia.org/wiki/Similarity_search</a>
</li>

<li>Nearest neighbor search<br />
<a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods">https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods</a>
</li>

<li>Decoding Similarity Search with FAISS: A Practical Approach<br />
<a href="https://www.luminis.eu/blog/decoding-similarity-search-with-faiss-a-practical-approach/">https://www.luminis.eu/blog/decoding-similarity-search-with-faiss-a-practical-approach/</a>
</li>

<li>RAG - Retrieval-augmented generation<br />
<a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation">https://en.wikipedia.org/wiki/Retrieval-augmented_generation</a>
</li>

<li>pgvector na GitHubu<br />
<a href="https://github.com/pgvector/pgvector">https://github.com/pgvector/pgvector</a>
</li>

<li>Why we replaced Pinecone with PGVector<br />
<a href="https://www.confident-ai.com/blog/why-we-replaced-pinecone-with-pgvector">https://www.confident-ai.com/blog/why-we-replaced-pinecone-with-pgvector</a>
</li>

<li>PostgreSQL as VectorDB - Beginner Tutorial<br />
<a href="https://www.youtube.com/watch?v=Ff3tJ4pJEa4">https://www.youtube.com/watch?v=Ff3tJ4pJEa4</a>
</li>

<li>What is a Vector Database? (neobsahuje odpovƒõƒè na ot√°zku v titulku :-)<br />
<a href="https://www.youtube.com/watch?v=t9IDoenf-lo">https://www.youtube.com/watch?v=t9IDoenf-lo</a>
</li>

<li>PGVector: Turn PostgreSQL Into A Vector Database<br />
<a href="https://www.youtube.com/watch?v=j1QcPSLj7u0">https://www.youtube.com/watch?v=j1QcPSLj7u0</a>
</li>

<li>Milvus<br />
<a href="https://milvus.io/">https://milvus.io/</a>
</li>

<li>Vector Databases simply explained! (Embeddings &amp; Indexes)<br />
<a href="https://www.youtube.com/watch?v=dN0lsF2cvm4">https://www.youtube.com/watch?v=dN0lsF2cvm4</a>
</li>

<li>Vector databases are so hot right now. WTF are they?<br />
<a href="https://www.youtube.com/watch?v=klTvEwg3oJ4">https://www.youtube.com/watch?v=klTvEwg3oJ4</a>
</li>

<li>Step-by-Step Guide to Installing ‚Äúpgvector‚Äù and Loading Data in PostgreSQL<br />
<a href="https://medium.com/@besttechreads/step-by-step-guide-to-installing-pgvector-and-loading-data-in-postgresql-f2cffb5dec43">https://medium.com/@besttechreads/step-by-step-guide-to-installing-pgvector-and-loading-data-in-postgresql-f2cffb5dec43</a>
</li>

<li>Best 17 Vector Databases for 2025<br />
<a href="https://lakefs.io/blog/12-vector-databases-2023/">https://lakefs.io/blog/12-vector-databases-2023/</a>
</li>

<li>Top 15 Vector Databases that You Must Try in 2025<br />
<a href="https://www.geeksforgeeks.org/top-vector-databases/">https://www.geeksforgeeks.org/top-vector-databases/</a>
</li>

<li>Picking a vector database: a comparison and guide for 2023<br />
<a href="https://benchmark.vectorview.ai/vectordbs.html">https://benchmark.vectorview.ai/vectordbs.html</a>
</li>

<li>Top 9 Vector Databases as of Feburary 2025<br />
<a href="https://www.shakudo.io/blog/top-9-vector-databases">https://www.shakudo.io/blog/top-9-vector-databases</a>
</li>

<li>What is a vector database?<br />
<a href="https://www.ibm.com/think/topics/vector-database">https://www.ibm.com/think/topics/vector-database</a>
</li>

<li>SQL injection<br />
<a href="https://en.wikipedia.org/wiki/SQL_injection">https://en.wikipedia.org/wiki/SQL_injection</a>
</li>

<li>Cosine similarity<br />
<a href="https://en.wikipedia.org/wiki/Cosine_similarity">https://en.wikipedia.org/wiki/Cosine_similarity</a>
</li>

<li>Euclidean distance<br />
<a href="https://en.wikipedia.org/wiki/Euclidean_distance">https://en.wikipedia.org/wiki/Euclidean_distance</a>
</li>

<li>Dot product<br />
<a href="https://en.wikipedia.org/wiki/Dot_product">https://en.wikipedia.org/wiki/Dot_product</a>
</li>

<li>Hammingova vzd√°lenost<br />
<a href="https://cs.wikipedia.org/wiki/Hammingova_vzd%C3%A1lenost">https://cs.wikipedia.org/wiki/Hammingova_vzd%C3%A1lenost</a>
</li>

<li>Jaccard index<br />
<a href="https://en.wikipedia.org/wiki/Jaccard_index">https://en.wikipedia.org/wiki/Jaccard_index</a>
</li>

<li>Manhattansk√° metrika<br />
<a href="https://cs.wikipedia.org/wiki/Manhattansk%C3%A1_metrika">https://cs.wikipedia.org/wiki/Manhattansk%C3%A1_metrika</a>
</li>

<li>pgvector: vektorov√° datab√°ze postaven√° na Postgresu<br />
<a href="https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/">https://www.root.cz/clanky/pgvector-vektorova-databaze-postavena-na-postgresu/</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="https://github.com/tisnik/">Pavel Ti≈°novsk√Ω</a> &nbsp; 2025</small></p>
</body>
</html>

