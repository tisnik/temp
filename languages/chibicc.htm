<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title></title>
<meta name="Author" content="Pavel Tisnovsky" />
<meta name="Generator" content="vim" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
         body {color:#000000; background:#ffffff;}
         h1  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#c00000; text-align:center; padding-left:1em}
         h2  {font-family: arial, helvetica, sans-serif; color:#ffffff; background-color:#0000c0; padding-left:1em; text-align:left}
         h3  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#c0c0c0; padding-left:1em; text-align:left}
         h4  {font-family: arial, helvetica, sans-serif; color:#000000; background-color:#e0e0e0; padding-left:1em; text-align:left}
         a   {font-family: arial, helvetica, sans-serif;}
         li  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ol  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         ul  {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify; width:450px;}
         p   {font-family: arial, helvetica, sans-serif; color:#000000; text-align:justify;}
         pre {background:#e0e0e0}
</style>
</head>

<body>

<h1></h1>

<h3>Pavel Tišnovský</h3>

<p></p>

<h1>Úvodník</h1>

<p></p>



<h2>Obsah</h2>

<p><a href="#k01">*** 1. </a></p>
<p><a href="#k02">*** 2. </a></p>
<p><a href="#k03">*** 3. </a></p>
<p><a href="#k04">*** 4. </a></p>
<p><a href="#k05">*** 5. </a></p>
<p><a href="#k06">*** 6. </a></p>
<p><a href="#k07">*** 7. </a></p>
<p><a href="#k08">*** 8. </a></p>
<p><a href="#k09">*** 9. </a></p>
<p><a href="#k10">*** 10. </a></p>
<p><a href="#k11">*** 11. </a></p>
<p><a href="#k12">*** 12. </a></p>
<p><a href="#k13">*** 13. </a></p>
<p><a href="#k14">*** 14. </a></p>
<p><a href="#k15">*** 15. </a></p>
<p><a href="#k16">*** 16. </a></p>
<p><a href="#k17">*** 17. </a></p>
<p><a href="#k18">*** 18. </a></p>
<p><a href="#k19">*** 19. Repositář s&nbsp;demonstračními příklady</a></p>
<p><a href="#k20">*** 20. Odkazy na Internetu</a></p>



<p><a name="k01"></a></p>
<h2 id="k01">1. </h2>

<p>Když vývojář používající operační systém GNU/Linux použije sousloví „překladač céčka“, je prakticky stoprocentně jisté, že má na mysli překladač programovacího jazyka C patřící do rodiny GCC (GNU Compiler Collection) nebo Clang. Ovšem ve skutečnosti existuje pro Linux větší množství překladačů céčka. Mezi ně patří i zajímavý projekt Tiny C Compiler, jehož největší předností je velká rychlost překladu i možnost použít tento překladač ve funkci interpretru &ndash; je jím tedy možné céčkové programy přímo „spouštět“, podobně jako skripty psané v Perlu či BASHi. Ovšem existuje i relativně velké množství dalších překladačů céčka. V&nbsp;dnešním článku se zaměříme na překladač nazvaný <i>chibicc: A Small C Compiler</i>.</p>



<p><a name="k02"></a></p>
<h2 id="k02">2. </h2>

Jedním z nejpopulárnějších v současnosti používaných programovacích jazyků je bezesporu programovací jazyk C navržený Dennisem Ritchiem. Jazyk C se postupně vyvinul z programovacích jazyků BPCL (autor Martin Richards, 1966) a B (autor Ken Thompson, 1970) až do současné podoby, která byla standardizována v normě ISO/IEC 9899:1999 známé pod zkráceným označením C99. Starší, dodnes velmi často používaný standard se jmenuje ISO 9899:1990, tento starší standard je prakticky shodný (až na jiné číslování jednotlivých paragrafů) s normou ANSI C (ANSI X3.159-1989 „Programming Language C“) a zkráceně se označuje C89 či méně často C90. Se všemi třemi zkratkami C89, C90 a C99 se ještě v tomto článku setkáme.

Programovací jazyk C je i přes absenci některých důležitých vlastností (například mu chybí automatický správce paměti či podpora silného typování a práce s objekty) využívaný jak pro tvorbu open source aplikací, tak i v čistě komerční oblasti – nejedná se jen o vývoj aplikací pro desktopy a servery, ale i pro mikrořadiče či digitální signálové procesory (DSP). Céčko je mnohdy využíváno i ve funkci cílového jazyka, do něhož se překládají programy zapsané v některých vyšších programovacích jazycích – vývojáři, kteří překladače těchto jazyků vytváří, se tak nemusí starat například o nízkoúrovňové optimalizace, protože je za ně již naprogramovali vývojáři překladače céčka. Z historického hlediska je zajímavé, že právě tímto způsobem vznikla první verze jazyka C++ (nástroj Cpre), i když moderní překladače C++ jsou již řešeny odděleně.

To však není zdaleka vše, protože programovací jazyk C je dodnes důležitý i z toho důvodu, že jak rozhraní jader některých operačních systémů (Linux, Microsoft Windows i dalších systémů), tak rozhraní systémových knihoven bylo navrženo s ohledem na jmenné konvence céčka i s ohledem na možnosti jeho linkeru.



<p><a name="k03"></a></p>
<h2 id="k03">3. Překladače programovacího jazyka C v&nbsp;Linuxu</h2>




<p><a name="k04"></a></p>
<h2 id="k04">4. </h2>


<pre>
$ <strong>git clone git@github.com:rui314/chibicc.git</strong>
&nbsp;
Cloning into 'chibicc'...
remote: Enumerating objects: 4584, done.
remote: Counting objects: 100% (686/686), done.
remote: Compressing objects: 100% (292/292), done.
remote: Total 4584 (delta 409), reused 664 (delta 394), pack-reused 3898
Receiving objects: 100% (4584/4584), 822.69 KiB | 1.61 MiB/s, done.
Resolving deltas: 100% (3406/3406), done.
</pre>

<pre>
$ <strong>ls -l *.[hc]</strong>
&nbsp;
-rw-rw-r-- 1 ptisnovs ptisnovs  9811 Dec 31 14:26 chibicc.h
-rw-rw-r-- 1 ptisnovs ptisnovs 43920 Dec 31 14:26 codegen.c
-rw-rw-r-- 1 ptisnovs ptisnovs  4564 Dec 31 14:26 hashmap.c
-rw-rw-r-- 1 ptisnovs ptisnovs 18392 Dec 31 14:26 main.c
-rw-rw-r-- 1 ptisnovs ptisnovs 91158 Dec 31 14:26 parse.c
-rw-rw-r-- 1 ptisnovs ptisnovs 33021 Dec 31 14:26 preprocess.c
-rw-rw-r-- 1 ptisnovs ptisnovs   690 Dec 31 14:26 strings.c
-rw-rw-r-- 1 ptisnovs ptisnovs 19317 Dec 31 14:26 tokenize.c
-rw-rw-r-- 1 ptisnovs ptisnovs  7503 Dec 31 14:26 type.c
-rw-rw-r-- 1 ptisnovs ptisnovs  6980 Dec 31 14:26 unicode.c
</pre>



<p><a name="k05"></a></p>
<h2 id="k05">5. </h2>

<pre>
$ <strong>cd chibicc/</strong>
$ <strong>make</strong>
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o strings.o strings.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o tokenize.o tokenize.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o hashmap.o hashmap.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o type.o type.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o main.o main.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o parse.o parse.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o codegen.o codegen.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o preprocess.o preprocess.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o unicode.o unicode.c
cc -std=c11 -g -fno-common -Wall -Wno-switch -o chibicc strings.o tokenize.o hashmap.o type.o main.o parse.o codegen.o preprocess.o unicode.o
</pre>

<pre>
$ make clean
$ time make
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o strings.o strings.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o tokenize.o tokenize.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o hashmap.o hashmap.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o type.o type.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o main.o main.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o parse.o parse.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o codegen.o codegen.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o preprocess.o preprocess.c
cc -std=c11 -g -fno-common -Wall -Wno-switch   -c -o unicode.o unicode.c
cc -std=c11 -g -fno-common -Wall -Wno-switch -o chibicc strings.o tokenize.o hashmap.o type.o main.o parse.o codegen.o preprocess.o unicode.o

real    0m0,667s
user    0m0,563s
sys     0m0,098s
</pre>

<pre>
$ <strong>ls -l chibicc</strong>
&nbsp;
-rwxrwxr-x 1 ptisnovs ptisnovs 315128 Dec 31 14:28 chibicc
</pre>

<pre>
$ <strong>./chibicc --help</strong>
&nbsp;
chibicc [ -o &lt;path&gt; ] &lt;file&gt;
</pre>



<p><a name="k06"></a></p>
<h2 id="k06">6. </h2>



<p><a name="k07"></a></p>
<h2 id="k07">7. </h2>

<pre>
$ <strong>chibicc -I/usr/include -I/usr/include/SDL2/ main.c gfx.c</strong>
</pre>

<pre>
/usr/include/SDL2/SDL_cpuinfo.h:86: #include <immintrin.h>
                                             ^ immintrin.h: cannot open file: No such file or directory
</pre>



<p><a name="k08"></a></p>
<h2 id="k08">8. </h2>



<p><a name="k09"></a></p>
<h2 id="k09">9. </h2>



<p><a name="k10"></a></p>
<h2 id="k10">10. </h2>



<p><a name="k11"></a></p>
<h2 id="k11">11. </h2>



<p><a name="k12"></a></p>
<h2 id="k12">12. </h2>



<p><a name="k13"></a></p>
<h2 id="k13">13. </h2>



<p><a name="k14"></a></p>
<h2 id="k14">14. </h2>



<p><a name="k15"></a></p>
<h2 id="k15">15. </h2>



<p><a name="k16"></a></p>
<h2 id="k16">16. </h2>



<p><a name="k17"></a></p>
<h2 id="k17">17. </h2>



<p><a name="k18"></a></p>
<h2 id="k18">18. </h2>



<p><a name="k19"></a></p>
<h2 id="k19">19. Repositář s&nbsp;demonstračními příklady</h2>



<p><a name="k20"></a></p>
<h2 id="k20">20. Odkazy na Internetu</h2>

<ol>

<li>Chibicc na GitHubu<br />
<a href="https://github.com/rui314/chibicc">https://github.com/rui314/chibicc</a>
</li>

<li>Tiny C Compiler<br />
<a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">https://en.wikipedia.org/wiki/Tiny_C_Compiler</a>
</li>

</ol>



<p></p><p></p>
<p><small>Autor: <a href="http://www.fit.vutbr.cz/~tisnovpa">Pavel Tišnovský</a> &nbsp; 2022</small></p>
</body>
</html>

